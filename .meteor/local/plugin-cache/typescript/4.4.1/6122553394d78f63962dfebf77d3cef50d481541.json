{"metadata":{},"options":{"assumptions":{},"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat/client/sidebar/header/EditStatusModal.tsx","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","classProperties","classPrivateProperties","jsx","nullishCoalescingOperator","nullishCoalescingOperator","optionalChaining","optionalCatchBinding","optionalCatchBinding","classProperties","classPrivateProperties","classPrivateMethods","classProperties","classPrivateProperties","asyncGenerators","asyncGenerators","objectRestSpread","logicalAssignment"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"allowUndeclaredExports":true,"strictMode":false},"caller":{"name":"meteor","arch":"web.browser.legacy"},"sourceFileName":"client/sidebar/header/EditStatusModal.tsx","filename":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat/client/sidebar/header/EditStatusModal.tsx","inputSourceMap":{"version":3,"file":"client/sidebar/header/EditStatusModal.tsx","sourceRoot":"","sources":["client/sidebar/header/EditStatusModal.tsx"],"names":[],"mappings":"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","sourcesContent":["import { Field, TextInput, FieldGroup, Modal, Icon, ButtonGroup, Button } from '@rocket.chat/fuselage';\nimport { useMutableCallback } from '@rocket.chat/fuselage-hooks';\nimport React, { ReactElement, useState, ChangeEvent, useCallback } from 'react';\n\nimport { IUser } from '../../../definition/IUser';\nimport { USER_STATUS_TEXT_MAX_LENGTH } from '../../components/UserStatus';\nimport UserStatusMenu from '../../components/UserStatusMenu';\nimport { useMethod } from '../../contexts/ServerContext';\nimport { useSetting } from '../../contexts/SettingsContext';\nimport { useToastMessageDispatch } from '../../contexts/ToastMessagesContext';\nimport { useTranslation } from '../../contexts/TranslationContext';\n\ntype EditStatusModalProps = {\n\tonClose: () => void;\n\tuserStatus: IUser['status'];\n\tuserStatusText: IUser['statusText'];\n};\n\nconst EditStatusModal = ({ onClose, userStatus, userStatusText }: EditStatusModalProps): ReactElement => {\n\tconst allowUserStatusMessageChange = useSetting('Accounts_AllowUserStatusMessageChange');\n\tconst setUserStatus = useMethod('setUserStatus');\n\tconst dispatchToastMessage = useToastMessageDispatch();\n\n\tconst t = useTranslation();\n\tconst [statusText, setStatusText] = useState(userStatusText);\n\tconst [statusType, setStatusType] = useState(userStatus);\n\tconst [statusTextError, setStatusTextError] = useState<string | undefined>();\n\n\tconst handleStatusText = useMutableCallback((e: ChangeEvent<HTMLInputElement>): void => {\n\t\tsetStatusText(e.currentTarget.value);\n\n\t\tif (statusText && statusText.length > USER_STATUS_TEXT_MAX_LENGTH) {\n\t\t\treturn setStatusTextError(t('Max_length_is', USER_STATUS_TEXT_MAX_LENGTH));\n\t\t}\n\n\t\treturn setStatusTextError(undefined);\n\t});\n\n\tconst handleStatusType = (type: IUser['status']): void => setStatusType(type);\n\n\tconst handleSaveStatus = useCallback(async () => {\n\t\ttry {\n\t\t\tawait setUserStatus(statusType, statusText);\n\t\t\tdispatchToastMessage({ type: 'success', message: t('StatusMessage_Changed_Successfully') });\n\t\t} catch (error) {\n\t\t\tdispatchToastMessage({ type: 'error', message: error });\n\t\t}\n\n\t\tonClose();\n\t}, [dispatchToastMessage, statusType, statusText, setUserStatus, onClose, t]);\n\n\treturn (\n\t\t<Modal>\n\t\t\t<Modal.Header>\n\t\t\t\t<Icon size={24} name='info' />\n\t\t\t\t<Modal.Title>{t('Edit_Status')}</Modal.Title>\n\t\t\t\t<Modal.Close onClick={onClose} />\n\t\t\t</Modal.Header>\n\t\t\t<Modal.Content fontScale='p2'>\n\t\t\t\t<FieldGroup>\n\t\t\t\t\t<Field>\n\t\t\t\t\t\t<Field.Label>{t('StatusMessage')}</Field.Label>\n\t\t\t\t\t\t<Field.Row>\n\t\t\t\t\t\t\t<TextInput\n\t\t\t\t\t\t\t\terror={statusTextError}\n\t\t\t\t\t\t\t\tdisabled={!allowUserStatusMessageChange}\n\t\t\t\t\t\t\t\tflexGrow={1}\n\t\t\t\t\t\t\t\tvalue={statusText}\n\t\t\t\t\t\t\t\tonChange={handleStatusText}\n\t\t\t\t\t\t\t\tplaceholder={t('StatusMessage_Placeholder')}\n\t\t\t\t\t\t\t\taddon={<UserStatusMenu margin='neg-x2' onChange={handleStatusType} initialStatus={statusType} />}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</Field.Row>\n\t\t\t\t\t\t{!allowUserStatusMessageChange && <Field.Hint>{t('StatusMessage_Change_Disabled')}</Field.Hint>}\n\t\t\t\t\t\t<Field.Error>{statusTextError}</Field.Error>\n\t\t\t\t\t</Field>\n\t\t\t\t</FieldGroup>\n\t\t\t</Modal.Content>\n\t\t\t<Modal.Footer>\n\t\t\t\t<ButtonGroup align='end' flexGrow={1} maxWidth='full'>\n\t\t\t\t\t<Button ghost onClick={onClose}>\n\t\t\t\t\t\t{t('Cancel')}\n\t\t\t\t\t</Button>\n\t\t\t\t\t<Button primary onClick={handleSaveStatus} disabled={!!statusTextError}>\n\t\t\t\t\t\t{t('Save')}\n\t\t\t\t\t</Button>\n\t\t\t\t</ButtonGroup>\n\t\t\t</Modal.Footer>\n\t\t</Modal>\n\t);\n};\n\nexport default EditStatusModal;\n"]},"targets":{"android":"95.0.0","chrome":"95.0.0","edge":"95.0.0","firefox":"78.0.0","ie":"10.0.0","ios":"15.0.0","opera":"81.0.0","safari":"15.1.0","samsung":"14.0.0"},"cloneInputAst":true,"browserslistConfigFile":false,"passPerPreset":false,"envName":"development","cwd":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat","root":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat","rootMode":"root","plugins":[{"key":"base$0","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0","visitor":{"Program":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true},"options":{"avoidModernSyntax":true,"enforceStrictMode":false,"dynamicImport":true}},{"key":"transform-runtime","visitor":{"MemberExpression":{"enter":[null]},"ObjectPattern":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":{},"_verified":{},"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]}},"options":{"version":"7.16.5","helpers":true,"useESModules":false,"corejs":false}},{"key":"proposal-class-properties","visitor":{"PrivateName":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{"loose":true}},{"key":"base$0$3","visitor":{"FunctionExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$4","visitor":{"ForInStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-react-jsx","visitor":{"_exploded":{},"_verified":{},"JSXNamespacedName":{"enter":[null]},"JSXSpreadChild":{"enter":[null]},"Program":{"enter":[null]},"JSXElement":{"exit":[null]},"JSXFragment":{"exit":[null]},"JSXAttribute":{"enter":[null]}},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","runtime":"classic","throwIfNamespace":true,"useBuiltIns":false}},{"key":"transform-react-display-name","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-react-pure-annotations","visitor":{"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"syntax-nullish-coalescing-operator","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-nullish-coalescing-operator","visitor":{"_exploded":{},"_verified":{},"LogicalExpression":{"enter":[null]}},"options":{}},{"key":"syntax-optional-chaining","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-optional-chaining","visitor":{"_exploded":true,"OptionalCallExpression":{"enter":[null]},"OptionalMemberExpression":{"enter":[null]},"_verified":true},"options":{}},{"key":"syntax-optional-catch-binding","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-optional-catch-binding","visitor":{"_exploded":{},"_verified":{},"CatchClause":{"enter":[null]}},"options":{}},{"key":"syntax-class-properties","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-class-properties","visitor":{"PrivateName":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{}},{"key":"syntax-async-generators","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-async-generator-functions","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]}},"options":{}},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-object-rest-spread","visitor":{"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"proposal-logical-assignment-operators","visitor":{"_exploded":{},"_verified":{},"AssignmentExpression":{"enter":[null]}},"options":{}},{"key":"transform-arrow-functions","visitor":{"ArrowFunctionExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-block-scoped-functions","visitor":{"BlockStatement":{"enter":[null]},"SwitchCase":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-block-scoping","visitor":{"VariableDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"_exploded":true,"BlockStatement":{"enter":[null]},"SwitchStatement":{"enter":[null]},"Program":{"enter":[null]},"_verified":true,"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"transform-classes","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-computed-properties","visitor":{"ObjectExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-destructuring","visitor":{"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"VariableDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"transform-for-of","visitor":{"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-literals","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-object-super","visitor":{"ObjectExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-parameters","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{}},{"key":"transform-shorthand-properties","visitor":{"ObjectMethod":{"enter":[null]},"ObjectProperty":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-spread","visitor":{"ArrayExpression":{"enter":[null]},"CallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-sticky-regex","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-template-literals","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-typeof-symbol","visitor":{"UnaryExpression":{"enter":[null]},"_exploded":true,"_verified":true,"BlockStatement":{"enter":[null]},"CatchClause":{"enter":[null]},"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"Program":{"enter":[null]},"ObjectMethod":{"enter":[null]},"SwitchStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ForOfStatement":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"StaticBlock":{"enter":[null]},"TSModuleBlock":{"enter":[null]},"AssignmentPattern":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectPattern":{"enter":[null]}},"options":{}},{"key":"transform-unicode-regex","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-property-literals","visitor":{"ObjectProperty":{"exit":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-exponentiation-operator","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"regenerator-transform","visitor":{"_exploded":true,"_verified":true,"ObjectMethod":{"enter":[null],"exit":[null]},"ClassMethod":{"enter":[null],"exit":[null]},"ClassPrivateMethod":{"enter":[null],"exit":[null]},"FunctionDeclaration":{"exit":[null]},"FunctionExpression":{"exit":[null]},"ArrowFunctionExpression":{"exit":[null]}},"options":{}}],"presets":[],"generatorOpts":{"filename":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat/client/sidebar/header/EditStatusModal.tsx","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"client/sidebar/header/EditStatusModal.tsx"}},"code":"var _regeneratorRuntime;\n\nmodule.link(\"@babel/runtime/regenerator\", {\n  default: function (v) {\n    _regeneratorRuntime = v;\n  }\n}, 0);\n\nvar _slicedToArray;\n\nmodule.link(\"@babel/runtime/helpers/slicedToArray\", {\n  default: function (v) {\n    _slicedToArray = v;\n  }\n}, 1);\nvar Field, TextInput, FieldGroup, Modal, Icon, ButtonGroup, Button;\nmodule.link(\"@rocket.chat/fuselage\", {\n  Field: function (v) {\n    Field = v;\n  },\n  TextInput: function (v) {\n    TextInput = v;\n  },\n  FieldGroup: function (v) {\n    FieldGroup = v;\n  },\n  Modal: function (v) {\n    Modal = v;\n  },\n  Icon: function (v) {\n    Icon = v;\n  },\n  ButtonGroup: function (v) {\n    ButtonGroup = v;\n  },\n  Button: function (v) {\n    Button = v;\n  }\n}, 0);\nvar useMutableCallback;\nmodule.link(\"@rocket.chat/fuselage-hooks\", {\n  useMutableCallback: function (v) {\n    useMutableCallback = v;\n  }\n}, 1);\nvar React, useState, useCallback;\nmodule.link(\"react\", {\n  \"default\": function (v) {\n    React = v;\n  },\n  useState: function (v) {\n    useState = v;\n  },\n  useCallback: function (v) {\n    useCallback = v;\n  }\n}, 2);\nvar USER_STATUS_TEXT_MAX_LENGTH;\nmodule.link(\"../../components/UserStatus\", {\n  USER_STATUS_TEXT_MAX_LENGTH: function (v) {\n    USER_STATUS_TEXT_MAX_LENGTH = v;\n  }\n}, 3);\nvar UserStatusMenu;\nmodule.link(\"../../components/UserStatusMenu\", {\n  \"default\": function (v) {\n    UserStatusMenu = v;\n  }\n}, 4);\nvar useMethod;\nmodule.link(\"../../contexts/ServerContext\", {\n  useMethod: function (v) {\n    useMethod = v;\n  }\n}, 5);\nvar useSetting;\nmodule.link(\"../../contexts/SettingsContext\", {\n  useSetting: function (v) {\n    useSetting = v;\n  }\n}, 6);\nvar useToastMessageDispatch;\nmodule.link(\"../../contexts/ToastMessagesContext\", {\n  useToastMessageDispatch: function (v) {\n    useToastMessageDispatch = v;\n  }\n}, 7);\nvar useTranslation;\nmodule.link(\"../../contexts/TranslationContext\", {\n  useTranslation: function (v) {\n    useTranslation = v;\n  }\n}, 8);\n\nvar EditStatusModal = function (_ref) {\n  var onClose = _ref.onClose,\n      userStatus = _ref.userStatus,\n      userStatusText = _ref.userStatusText;\n  var allowUserStatusMessageChange = useSetting('Accounts_AllowUserStatusMessageChange');\n  var setUserStatus = useMethod('setUserStatus');\n  var dispatchToastMessage = useToastMessageDispatch();\n  var t = useTranslation();\n\n  var _useState = useState(userStatusText),\n      _useState2 = _slicedToArray(_useState, 2),\n      statusText = _useState2[0],\n      setStatusText = _useState2[1];\n\n  var _useState3 = useState(userStatus),\n      _useState4 = _slicedToArray(_useState3, 2),\n      statusType = _useState4[0],\n      setStatusType = _useState4[1];\n\n  var _useState5 = useState(),\n      _useState6 = _slicedToArray(_useState5, 2),\n      statusTextError = _useState6[0],\n      setStatusTextError = _useState6[1];\n\n  var handleStatusText = useMutableCallback(function (e) {\n    setStatusText(e.currentTarget.value);\n\n    if (statusText && statusText.length > USER_STATUS_TEXT_MAX_LENGTH) {\n      return setStatusTextError(t('Max_length_is', USER_STATUS_TEXT_MAX_LENGTH));\n    }\n\n    return setStatusTextError(undefined);\n  });\n\n  var handleStatusType = function (type) {\n    return setStatusType(type);\n  };\n\n  var handleSaveStatus = useCallback(function () {\n    function _callee() {\n      return _regeneratorRuntime.async(function () {\n        function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.prev = 0;\n                _context.next = 3;\n                return _regeneratorRuntime.awrap(setUserStatus(statusType, statusText));\n\n              case 3:\n                dispatchToastMessage({\n                  type: 'success',\n                  message: t('StatusMessage_Changed_Successfully')\n                });\n                _context.next = 9;\n                break;\n\n              case 6:\n                _context.prev = 6;\n                _context.t0 = _context[\"catch\"](0);\n                dispatchToastMessage({\n                  type: 'error',\n                  message: _context.t0\n                });\n\n              case 9:\n                onClose();\n\n              case 10:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }\n\n        return _callee$;\n      }(), null, null, [[0, 6]], Promise);\n    }\n\n    return _callee;\n  }(), [dispatchToastMessage, statusType, statusText, setUserStatus, onClose, t]);\n  return /*#__PURE__*/React.createElement(Modal, null, /*#__PURE__*/React.createElement(Modal.Header, null, /*#__PURE__*/React.createElement(Icon, {\n    size: 24,\n    name: \"info\"\n  }), /*#__PURE__*/React.createElement(Modal.Title, null, t('Edit_Status')), /*#__PURE__*/React.createElement(Modal.Close, {\n    onClick: onClose\n  })), /*#__PURE__*/React.createElement(Modal.Content, {\n    fontScale: \"p2\"\n  }, /*#__PURE__*/React.createElement(FieldGroup, null, /*#__PURE__*/React.createElement(Field, null, /*#__PURE__*/React.createElement(Field.Label, null, t('StatusMessage')), /*#__PURE__*/React.createElement(Field.Row, null, /*#__PURE__*/React.createElement(TextInput, {\n    error: statusTextError,\n    disabled: !allowUserStatusMessageChange,\n    flexGrow: 1,\n    value: statusText,\n    onChange: handleStatusText,\n    placeholder: t('StatusMessage_Placeholder'),\n    addon: /*#__PURE__*/React.createElement(UserStatusMenu, {\n      margin: \"neg-x2\",\n      onChange: handleStatusType,\n      initialStatus: statusType\n    })\n  })), !allowUserStatusMessageChange && /*#__PURE__*/React.createElement(Field.Hint, null, t('StatusMessage_Change_Disabled')), /*#__PURE__*/React.createElement(Field.Error, null, statusTextError)))), /*#__PURE__*/React.createElement(Modal.Footer, null, /*#__PURE__*/React.createElement(ButtonGroup, {\n    align: \"end\",\n    flexGrow: 1,\n    maxWidth: \"full\"\n  }, /*#__PURE__*/React.createElement(Button, {\n    ghost: true,\n    onClick: onClose\n  }, t('Cancel')), /*#__PURE__*/React.createElement(Button, {\n    primary: true,\n    onClick: handleSaveStatus,\n    disabled: !!statusTextError\n  }, t('Save')))));\n};\n\nmodule.exportDefault(EditStatusModal);","map":{"version":3,"sources":["client/sidebar/header/EditStatusModal.tsx"],"names":[],"mappings":"AAAA,IAAA,mBAAA;;AAAgB,MAAW,CAAA,IAAX,CAAW,4BAAX,EAAiD;AAAA,EAAA,OAAQ,EAAA,UAAM,CAAN,EAAM;AAAA,IAAA,mBAAwB,GAAA,CAAxB;AAAwB;AAAtC,CAAjD,EAAuF,CAAvF;;AAAuF,IAAA,cAAA;;AAAA,MAAA,CAAA,IAAA,CAAA,sCAAA,EAAA;AAAA,EAAA,OAAA,EAAA,UAAA,CAAA,EAAA;AAAA,IAAA,cAAA,GAAA,CAAA;AAAA;AAAA,CAAA,EAAA,CAAA;AAAvG,IAAA,KAAA,EAAS,SAAT,EAAgB,UAAhB,EAA2B,KAA3B,EAAqC,IAArC,EAAuC,WAAvC,EAAoD,MAApD;AAAoD,MAAa,CAAA,IAAb,CAAqB,uBAArB,EAA2B;AAAA,EAAA,KAAwB,EAAA,UAAA,CAAA,EAAA;AAAA,IAAA,KAAA,GAAA,CAAA;AAAA,GAAxB;AAAwB,EAAA,SAAA,EAAA,UAAA,CAAA,EAAA;AAAA,IAAA,SAAA,GAAA,CAAA;AAAA,GAAxB;AAAwB,EAAA,UAAA,EAAA,UAAA,CAAA,EAAA;AAAA,IAAA,UAAA,GAAA,CAAA;AAAA,GAAxB;AAAwB,EAAA,KAAA,EAAA,UAAA,CAAA,EAAA;AAAA,IAAA,KAAA,GAAA,CAAA;AAAA,GAAxB;AAAwB,EAAA,IAAA,EAAA,UAAA,CAAA,EAAA;AAAA,IAAA,IAAA,GAAA,CAAA;AAAA,GAAxB;AAAwB,EAAA,WAAA,EAAA,UAAA,CAAA,EAAA;AAAA,IAAA,WAAA,GAAA,CAAA;AAAA,GAAxB;AAAwB,EAAA,MAAA,EAAA,UAAA,CAAA,EAAA;AAAA,IAAA,MAAA,GAAA,CAAA;AAAA;AAAxB,CAA3B,EAAmD,CAAnD;AAAmD,IAAA,kBAAA;AAAA,MAAA,CAAA,IAAA,CAAA,6BAAA,EAAA;AAAA,EAAA,kBAAA,EAAA,UAAA,CAAA,EAAA;AAAA,IAAA,kBAAA,GAAA,CAAA;AAAA;AAAA,CAAA,EAAA,CAAA;AAAA,IAAA,KAAA,EAAA,QAAA,EAAA,WAAA;AAAA,MAAA,CAAA,IAAA,CAAA,OAAA,EAAA;AAAA,aAAA,UAAA,CAAA,EAAA;AAAA,IAAA,KAAA,GAAA,CAAA;AAAA,GAAA;AAAA,EAAA,QAAA,EAAA,UAAA,CAAA,EAAA;AAAA,IAAA,QAAA,GAAA,CAAA;AAAA,GAAA;AAAA,EAAA,WAAA,EAAA,UAAA,CAAA,EAAA;AAAA,IAAA,WAAA,GAAA,CAAA;AAAA;AAAA,CAAA,EAAA,CAAA;AAAA,IAAA,2BAAA;AAAA,MAAA,CAAA,IAAA,CAAA,6BAAA,EAAA;AAAA,EAAA,2BAAA,EAAA,UAAA,CAAA,EAAA;AAAA,IAAA,2BAAA,GAAA,CAAA;AAAA;AAAA,CAAA,EAAA,CAAA;AAAA,IAAA,cAAA;AAAA,MAAA,CAAA,IAAA,CAAA,iCAAA,EAAA;AAAA,aAAA,UAAA,CAAA,EAAA;AAAA,IAAA,cAAA,GAAA,CAAA;AAAA;AAAA,CAAA,EAAA,CAAA;AAAA,IAAA,SAAA;AAAA,MAAA,CAAA,IAAA,CAAA,8BAAA,EAAA;AAAA,EAAA,SAAA,EAAA,UAAA,CAAA,EAAA;AAAA,IAAA,SAAA,GAAA,CAAA;AAAA;AAAA,CAAA,EAAA,CAAA;AAAA,IAAA,UAAA;AAAA,MAAA,CAAA,IAAA,CAAA,gCAAA,EAAA;AAAA,EAAA,UAAA,EAAA,UAAA,CAAA,EAAA;AAAA,IAAA,UAAA,GAAA,CAAA;AAAA;AAAA,CAAA,EAAA,CAAA;AAAA,IAAA,uBAAA;AAAA,MAAA,CAAA,IAAA,CAAA,qCAAA,EAAA;AAAA,EAAA,uBAAA,EAAA,UAAA,CAAA,EAAA;AAAA,IAAA,uBAAA,GAAA,CAAA;AAAA;AAAA,CAAA,EAAA,CAAA;AAAA,IAAA,cAAA;AAAA,MAAA,CAAA,IAAA,CAAA,mCAAA,EAAA;AAAA,EAAA,cAAA,EAAA,UAAA,CAAA,EAAA;AAAA,IAAA,cAAA,GAAA,CAAA;AAAA;AAAA,CAAA,EAAA,CAAA;;AAkBvG,IAAM,eAAe,GAAG,gBAAgF;AAAA,MAA7E,OAA6E,QAA7E,OAA6E;AAAA,MAApE,UAAoE,QAApE,UAAoE;AAAA,MAAxD,cAAwD,QAAxD,cAAwD;AACvG,MAAM,4BAA4B,GAAG,UAAU,CAAC,uCAAD,CAA/C;AACA,MAAM,aAAa,GAAG,SAAS,CAAC,eAAD,CAA/B;AACA,MAAM,oBAAoB,GAAG,uBAAuB,EAApD;AAEA,MAAM,CAAC,GAAG,cAAc,EAAxB;;AACA,kBAAoC,QAAQ,CAAC,cAAD,CAA5C;AAAA;AAAA,MAAO,UAAP;AAAA,MAAmB,aAAnB;;AACA,mBAAoC,QAAQ,CAAC,UAAD,CAA5C;AAAA;AAAA,MAAO,UAAP;AAAA,MAAmB,aAAnB;;AACA,mBAA8C,QAAQ,EAAtD;AAAA;AAAA,MAAO,eAAP;AAAA,MAAwB,kBAAxB;;AAEA,MAAM,gBAAgB,GAAG,kBAAkB,CAAC,UAAC,CAAD,EAA2C;AACtF,IAAA,aAAa,CAAC,CAAC,CAAC,aAAF,CAAgB,KAAjB,CAAb;;AAEA,QAAI,UAAU,IAAI,UAAU,CAAC,MAAX,GAAoB,2BAAtC,EAAmE;AAClE,aAAO,kBAAkB,CAAC,CAAC,CAAC,eAAD,EAAkB,2BAAlB,CAAF,CAAzB;AACA;;AAED,WAAO,kBAAkB,CAAC,SAAD,CAAzB;AACA,GAR0C,CAA3C;;AAUA,MAAM,gBAAgB,GAAG,UAAC,IAAD;AAAA,WAAiC,aAAa,CAAC,IAAD,CAA9C;AAAA,GAAzB;;AAEA,MAAM,gBAAgB,GAAG,WAAW;AAAC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iDAE7B,aAAa,CAAC,UAAD,EAAa,UAAb,CAFgB;;AAAA;AAGnC,gBAAA,oBAAoB,CAAC;AAAE,kBAAA,IAAI,EAAE,SAAR;AAAmB,kBAAA,OAAO,EAAE,CAAC,CAAC,oCAAD;AAA7B,iBAAD,CAApB;AAHmC;AAAA;;AAAA;AAAA;AAAA;AAKnC,gBAAA,oBAAoB,CAAC;AAAE,kBAAA,IAAI,EAAE,OAAR;AAAiB,kBAAA,OAAO;AAAxB,iBAAD,CAApB;;AALmC;AAQpC,gBAAA,OAAO;;AAR6B;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAD;AAAA,OASjC,CAAC,oBAAD,EAAuB,UAAvB,EAAmC,UAAnC,EAA+C,aAA/C,EAA8D,OAA9D,EAAuE,CAAvE,CATiC,CAApC;AAWA,sBACC,oBAAC,KAAD,qBACC,oBAAC,KAAD,CAAO,MAAP,qBACC,oBAAC,IAAD;AAAM,IAAA,IAAI,EAAE,EAAZ;AAAgB,IAAA,IAAI,EAAC;AAArB,IADD,eAEC,oBAAC,KAAD,CAAO,KAAP,QAAc,CAAC,CAAC,aAAD,CAAf,CAFD,eAGC,oBAAC,KAAD,CAAO,KAAP;AAAa,IAAA,OAAO,EAAE;AAAtB,IAHD,CADD,eAMC,oBAAC,KAAD,CAAO,OAAP;AAAe,IAAA,SAAS,EAAC;AAAzB,kBACC,oBAAC,UAAD,qBACC,oBAAC,KAAD,qBACC,oBAAC,KAAD,CAAO,KAAP,QAAc,CAAC,CAAC,eAAD,CAAf,CADD,eAEC,oBAAC,KAAD,CAAO,GAAP,qBACC,oBAAC,SAAD;AACC,IAAA,KAAK,EAAE,eADR;AAEC,IAAA,QAAQ,EAAE,CAAC,4BAFZ;AAGC,IAAA,QAAQ,EAAE,CAHX;AAIC,IAAA,KAAK,EAAE,UAJR;AAKC,IAAA,QAAQ,EAAE,gBALX;AAMC,IAAA,WAAW,EAAE,CAAC,CAAC,2BAAD,CANf;AAOC,IAAA,KAAK,eAAE,oBAAC,cAAD;AAAgB,MAAA,MAAM,EAAC,QAAvB;AAAgC,MAAA,QAAQ,EAAE,gBAA1C;AAA4D,MAAA,aAAa,EAAE;AAA3E;AAPR,IADD,CAFD,EAaE,CAAC,4BAAD,iBAAiC,oBAAC,KAAD,CAAO,IAAP,QAAa,CAAC,CAAC,+BAAD,CAAd,CAbnC,eAcC,oBAAC,KAAD,CAAO,KAAP,QAAc,eAAd,CAdD,CADD,CADD,CAND,eA0BC,oBAAC,KAAD,CAAO,MAAP,qBACC,oBAAC,WAAD;AAAa,IAAA,KAAK,EAAC,KAAnB;AAAyB,IAAA,QAAQ,EAAE,CAAnC;AAAsC,IAAA,QAAQ,EAAC;AAA/C,kBACC,oBAAC,MAAD;AAAQ,IAAA,KAAK,MAAb;AAAc,IAAA,OAAO,EAAE;AAAvB,KACE,CAAC,CAAC,QAAD,CADH,CADD,eAIC,oBAAC,MAAD;AAAQ,IAAA,OAAO,MAAf;AAAgB,IAAA,OAAO,EAAE,gBAAzB;AAA2C,IAAA,QAAQ,EAAE,CAAC,CAAC;AAAvD,KACE,CAAC,CAAC,MAAD,CADH,CAJD,CADD,CA1BD,CADD;AAuCA,CAxED;;AAlBA,MAAA,CAAO,aAAP,CA4Fe,eA5Ff","sourcesContent":["import { Field, TextInput, FieldGroup, Modal, Icon, ButtonGroup, Button } from '@rocket.chat/fuselage';\nimport { useMutableCallback } from '@rocket.chat/fuselage-hooks';\nimport React, { ReactElement, useState, ChangeEvent, useCallback } from 'react';\n\nimport { IUser } from '../../../definition/IUser';\nimport { USER_STATUS_TEXT_MAX_LENGTH } from '../../components/UserStatus';\nimport UserStatusMenu from '../../components/UserStatusMenu';\nimport { useMethod } from '../../contexts/ServerContext';\nimport { useSetting } from '../../contexts/SettingsContext';\nimport { useToastMessageDispatch } from '../../contexts/ToastMessagesContext';\nimport { useTranslation } from '../../contexts/TranslationContext';\n\ntype EditStatusModalProps = {\n\tonClose: () => void;\n\tuserStatus: IUser['status'];\n\tuserStatusText: IUser['statusText'];\n};\n\nconst EditStatusModal = ({ onClose, userStatus, userStatusText }: EditStatusModalProps): ReactElement => {\n\tconst allowUserStatusMessageChange = useSetting('Accounts_AllowUserStatusMessageChange');\n\tconst setUserStatus = useMethod('setUserStatus');\n\tconst dispatchToastMessage = useToastMessageDispatch();\n\n\tconst t = useTranslation();\n\tconst [statusText, setStatusText] = useState(userStatusText);\n\tconst [statusType, setStatusType] = useState(userStatus);\n\tconst [statusTextError, setStatusTextError] = useState<string | undefined>();\n\n\tconst handleStatusText = useMutableCallback((e: ChangeEvent<HTMLInputElement>): void => {\n\t\tsetStatusText(e.currentTarget.value);\n\n\t\tif (statusText && statusText.length > USER_STATUS_TEXT_MAX_LENGTH) {\n\t\t\treturn setStatusTextError(t('Max_length_is', USER_STATUS_TEXT_MAX_LENGTH));\n\t\t}\n\n\t\treturn setStatusTextError(undefined);\n\t});\n\n\tconst handleStatusType = (type: IUser['status']): void => setStatusType(type);\n\n\tconst handleSaveStatus = useCallback(async () => {\n\t\ttry {\n\t\t\tawait setUserStatus(statusType, statusText);\n\t\t\tdispatchToastMessage({ type: 'success', message: t('StatusMessage_Changed_Successfully') });\n\t\t} catch (error) {\n\t\t\tdispatchToastMessage({ type: 'error', message: error });\n\t\t}\n\n\t\tonClose();\n\t}, [dispatchToastMessage, statusType, statusText, setUserStatus, onClose, t]);\n\n\treturn (\n\t\t<Modal>\n\t\t\t<Modal.Header>\n\t\t\t\t<Icon size={24} name='info' />\n\t\t\t\t<Modal.Title>{t('Edit_Status')}</Modal.Title>\n\t\t\t\t<Modal.Close onClick={onClose} />\n\t\t\t</Modal.Header>\n\t\t\t<Modal.Content fontScale='p2'>\n\t\t\t\t<FieldGroup>\n\t\t\t\t\t<Field>\n\t\t\t\t\t\t<Field.Label>{t('StatusMessage')}</Field.Label>\n\t\t\t\t\t\t<Field.Row>\n\t\t\t\t\t\t\t<TextInput\n\t\t\t\t\t\t\t\terror={statusTextError}\n\t\t\t\t\t\t\t\tdisabled={!allowUserStatusMessageChange}\n\t\t\t\t\t\t\t\tflexGrow={1}\n\t\t\t\t\t\t\t\tvalue={statusText}\n\t\t\t\t\t\t\t\tonChange={handleStatusText}\n\t\t\t\t\t\t\t\tplaceholder={t('StatusMessage_Placeholder')}\n\t\t\t\t\t\t\t\taddon={<UserStatusMenu margin='neg-x2' onChange={handleStatusType} initialStatus={statusType} />}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</Field.Row>\n\t\t\t\t\t\t{!allowUserStatusMessageChange && <Field.Hint>{t('StatusMessage_Change_Disabled')}</Field.Hint>}\n\t\t\t\t\t\t<Field.Error>{statusTextError}</Field.Error>\n\t\t\t\t\t</Field>\n\t\t\t\t</FieldGroup>\n\t\t\t</Modal.Content>\n\t\t\t<Modal.Footer>\n\t\t\t\t<ButtonGroup align='end' flexGrow={1} maxWidth='full'>\n\t\t\t\t\t<Button ghost onClick={onClose}>\n\t\t\t\t\t\t{t('Cancel')}\n\t\t\t\t\t</Button>\n\t\t\t\t\t<Button primary onClick={handleSaveStatus} disabled={!!statusTextError}>\n\t\t\t\t\t\t{t('Save')}\n\t\t\t\t\t</Button>\n\t\t\t\t</ButtonGroup>\n\t\t\t</Modal.Footer>\n\t\t</Modal>\n\t);\n};\n\nexport default EditStatusModal;\n"],"sourceRoot":""},"sourceType":"module","hash":"6122553394d78f63962dfebf77d3cef50d481541"}
