{"metadata":{},"options":{"assumptions":{},"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat/client/lib/rooms/roomTypes/public.ts","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","classProperties","classPrivateProperties","jsx","nullishCoalescingOperator","nullishCoalescingOperator","optionalChaining","optionalCatchBinding","optionalCatchBinding","classProperties","classPrivateProperties","classPrivateMethods","classProperties","classPrivateProperties","asyncGenerators","asyncGenerators","objectRestSpread","logicalAssignment"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"allowUndeclaredExports":true,"strictMode":false},"caller":{"name":"meteor","arch":"web.browser"},"sourceFileName":"client/lib/rooms/roomTypes/public.ts","filename":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat/client/lib/rooms/roomTypes/public.ts","inputSourceMap":{"version":3,"file":"client/lib/rooms/roomTypes/public.ts","sourceRoot":"","sources":["client/lib/rooms/roomTypes/public.ts"],"names":[],"mappings":"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","sourcesContent":["import { Meteor } from 'meteor/meteor';\n\nimport { hasAtLeastOnePermission } from '../../../../app/authorization/client';\nimport { ChatRoom } from '../../../../app/models/client';\nimport { settings } from '../../../../app/settings/client';\nimport { getUserPreference } from '../../../../app/utils/client';\nimport { getAvatarURL } from '../../../../app/utils/lib/getAvatarURL';\nimport type { IRoomTypeClientDirectives } from '../../../../definition/IRoomTypeConfig';\nimport { RoomSettingsEnum, RoomMemberActions, UiTextContext } from '../../../../definition/IRoomTypeConfig';\nimport type { AtLeast } from '../../../../definition/utils';\nimport { getPublicRoomType } from '../../../../lib/rooms/roomTypes/public';\nimport { roomCoordinator } from '../roomCoordinator';\n\nexport const PublicRoomType = getPublicRoomType(roomCoordinator);\n\nroomCoordinator.add(PublicRoomType, {\n\tallowRoomSettingChange(room, setting) {\n\t\tswitch (setting) {\n\t\t\tcase RoomSettingsEnum.BROADCAST:\n\t\t\t\treturn Boolean(room.broadcast);\n\t\t\tcase RoomSettingsEnum.READ_ONLY:\n\t\t\t\treturn Boolean(!room.broadcast);\n\t\t\tcase RoomSettingsEnum.REACT_WHEN_READ_ONLY:\n\t\t\t\treturn Boolean(!room.broadcast && room.ro);\n\t\t\tcase RoomSettingsEnum.E2E:\n\t\t\t\treturn false;\n\t\t\tcase RoomSettingsEnum.SYSTEM_MESSAGES:\n\t\t\tdefault:\n\t\t\t\treturn true;\n\t\t}\n\t},\n\n\tallowMemberAction(_room, action) {\n\t\tswitch (action) {\n\t\t\tcase RoomMemberActions.BLOCK:\n\t\t\t\treturn false;\n\t\t\tdefault:\n\t\t\t\treturn true;\n\t\t}\n\t},\n\n\troomName(roomData) {\n\t\tif (roomData.prid) {\n\t\t\treturn roomData.fname;\n\t\t}\n\t\tif (settings.get('UI_Allow_room_names_with_special_chars')) {\n\t\t\treturn roomData.fname || roomData.name;\n\t\t}\n\t\treturn roomData.name;\n\t},\n\n\tisGroupChat(_room) {\n\t\treturn true;\n\t},\n\n\tgetUiText(context) {\n\t\tswitch (context) {\n\t\t\tcase UiTextContext.HIDE_WARNING:\n\t\t\t\treturn 'Hide_Room_Warning';\n\t\t\tcase UiTextContext.LEAVE_WARNING:\n\t\t\t\treturn 'Leave_Room_Warning';\n\t\t\tdefault:\n\t\t\t\treturn '';\n\t\t}\n\t},\n\n\tcondition() {\n\t\tconst groupByType = getUserPreference(Meteor.userId(), 'sidebarGroupByType');\n\t\treturn (\n\t\t\tgroupByType && (hasAtLeastOnePermission(['view-c-room', 'view-joined-room']) || settings.get('Accounts_AllowAnonymousRead') === true)\n\t\t);\n\t},\n\n\tgetAvatarPath(room) {\n\t\treturn getAvatarURL({ roomId: room._id, cache: room.avatarETag }) as string;\n\t},\n\n\tgetIcon(room) {\n\t\tif (room.prid) {\n\t\t\treturn 'discussion';\n\t\t}\n\t\tif (room.teamMain) {\n\t\t\treturn 'team';\n\t\t}\n\n\t\treturn PublicRoomType.icon;\n\t},\n\n\tfindRoom(identifier) {\n\t\tconst query = {\n\t\t\tt: 'c',\n\t\t\tname: identifier,\n\t\t};\n\n\t\treturn ChatRoom.findOne(query);\n\t},\n\n\tshowJoinLink(roomId) {\n\t\treturn !!ChatRoom.findOne({ _id: roomId, t: 'c' });\n\t},\n} as AtLeast<IRoomTypeClientDirectives, 'isGroupChat' | 'roomName'>);\n"]},"targets":{"android":"95.0.0","chrome":"95.0.0","edge":"95.0.0","firefox":"78.0.0","ie":"10.0.0","ios":"15.0.0","opera":"81.0.0","safari":"15.1.0","samsung":"14.0.0"},"cloneInputAst":true,"browserslistConfigFile":false,"passPerPreset":false,"envName":"development","cwd":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat","root":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat","rootMode":"root","plugins":[{"key":"base$0","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0","visitor":{"Program":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true},"options":{"avoidModernSyntax":false,"enforceStrictMode":false,"dynamicImport":true,"generateLetDeclarations":true}},{"key":"transform-runtime","visitor":{"MemberExpression":{"enter":[null]},"ObjectPattern":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":{},"_verified":{},"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]}},"options":{"version":"7.16.5","helpers":true,"useESModules":false,"corejs":false}},{"key":"proposal-class-properties","visitor":{"PrivateName":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{"loose":true}},{"key":"transform-react-jsx","visitor":{"_exploded":{},"_verified":{},"JSXNamespacedName":{"enter":[null]},"JSXSpreadChild":{"enter":[null]},"Program":{"enter":[null]},"JSXElement":{"exit":[null]},"JSXFragment":{"exit":[null]},"JSXAttribute":{"enter":[null]}},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","runtime":"classic","throwIfNamespace":true,"useBuiltIns":false}},{"key":"transform-react-display-name","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-react-pure-annotations","visitor":{"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"syntax-nullish-coalescing-operator","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-nullish-coalescing-operator","visitor":{"_exploded":{},"_verified":{},"LogicalExpression":{"enter":[null]}},"options":{}},{"key":"syntax-optional-chaining","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-optional-chaining","visitor":{"_exploded":true,"OptionalCallExpression":{"enter":[null]},"OptionalMemberExpression":{"enter":[null]},"_verified":true},"options":{}},{"key":"syntax-optional-catch-binding","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-optional-catch-binding","visitor":{"_exploded":{},"_verified":{},"CatchClause":{"enter":[null]}},"options":{}},{"key":"syntax-class-properties","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-class-properties","visitor":{"PrivateName":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{}},{"key":"syntax-async-generators","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-async-generator-functions","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]}},"options":{}},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-object-rest-spread","visitor":{"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"proposal-logical-assignment-operators","visitor":{"_exploded":{},"_verified":{},"AssignmentExpression":{"enter":[null]}},"options":{}},{"key":"transform-literals","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-template-literals","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-parameters","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{}},{"key":"transform-exponentiation-operator","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}}],"presets":[],"generatorOpts":{"filename":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat/client/lib/rooms/roomTypes/public.ts","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"client/lib/rooms/roomTypes/public.ts"}},"code":"module.export({\n  PublicRoomType: () => PublicRoomType\n});\nlet Meteor;\nmodule.link(\"meteor/meteor\", {\n  Meteor(v) {\n    Meteor = v;\n  }\n\n}, 0);\nlet hasAtLeastOnePermission;\nmodule.link(\"../../../../app/authorization/client\", {\n  hasAtLeastOnePermission(v) {\n    hasAtLeastOnePermission = v;\n  }\n\n}, 1);\nlet ChatRoom;\nmodule.link(\"../../../../app/models/client\", {\n  ChatRoom(v) {\n    ChatRoom = v;\n  }\n\n}, 2);\nlet settings;\nmodule.link(\"../../../../app/settings/client\", {\n  settings(v) {\n    settings = v;\n  }\n\n}, 3);\nlet getUserPreference;\nmodule.link(\"../../../../app/utils/client\", {\n  getUserPreference(v) {\n    getUserPreference = v;\n  }\n\n}, 4);\nlet getAvatarURL;\nmodule.link(\"../../../../app/utils/lib/getAvatarURL\", {\n  getAvatarURL(v) {\n    getAvatarURL = v;\n  }\n\n}, 5);\nlet RoomSettingsEnum, RoomMemberActions, UiTextContext;\nmodule.link(\"../../../../definition/IRoomTypeConfig\", {\n  RoomSettingsEnum(v) {\n    RoomSettingsEnum = v;\n  },\n\n  RoomMemberActions(v) {\n    RoomMemberActions = v;\n  },\n\n  UiTextContext(v) {\n    UiTextContext = v;\n  }\n\n}, 6);\nlet getPublicRoomType;\nmodule.link(\"../../../../lib/rooms/roomTypes/public\", {\n  getPublicRoomType(v) {\n    getPublicRoomType = v;\n  }\n\n}, 7);\nlet roomCoordinator;\nmodule.link(\"../roomCoordinator\", {\n  roomCoordinator(v) {\n    roomCoordinator = v;\n  }\n\n}, 8);\nconst PublicRoomType = getPublicRoomType(roomCoordinator);\nroomCoordinator.add(PublicRoomType, {\n  allowRoomSettingChange(room, setting) {\n    switch (setting) {\n      case RoomSettingsEnum.BROADCAST:\n        return Boolean(room.broadcast);\n\n      case RoomSettingsEnum.READ_ONLY:\n        return Boolean(!room.broadcast);\n\n      case RoomSettingsEnum.REACT_WHEN_READ_ONLY:\n        return Boolean(!room.broadcast && room.ro);\n\n      case RoomSettingsEnum.E2E:\n        return false;\n\n      case RoomSettingsEnum.SYSTEM_MESSAGES:\n      default:\n        return true;\n    }\n  },\n\n  allowMemberAction(_room, action) {\n    switch (action) {\n      case RoomMemberActions.BLOCK:\n        return false;\n\n      default:\n        return true;\n    }\n  },\n\n  roomName(roomData) {\n    if (roomData.prid) {\n      return roomData.fname;\n    }\n\n    if (settings.get('UI_Allow_room_names_with_special_chars')) {\n      return roomData.fname || roomData.name;\n    }\n\n    return roomData.name;\n  },\n\n  isGroupChat(_room) {\n    return true;\n  },\n\n  getUiText(context) {\n    switch (context) {\n      case UiTextContext.HIDE_WARNING:\n        return 'Hide_Room_Warning';\n\n      case UiTextContext.LEAVE_WARNING:\n        return 'Leave_Room_Warning';\n\n      default:\n        return '';\n    }\n  },\n\n  condition() {\n    const groupByType = getUserPreference(Meteor.userId(), 'sidebarGroupByType');\n    return groupByType && (hasAtLeastOnePermission(['view-c-room', 'view-joined-room']) || settings.get('Accounts_AllowAnonymousRead') === true);\n  },\n\n  getAvatarPath(room) {\n    return getAvatarURL({\n      roomId: room._id,\n      cache: room.avatarETag\n    });\n  },\n\n  getIcon(room) {\n    if (room.prid) {\n      return 'discussion';\n    }\n\n    if (room.teamMain) {\n      return 'team';\n    }\n\n    return PublicRoomType.icon;\n  },\n\n  findRoom(identifier) {\n    const query = {\n      t: 'c',\n      name: identifier\n    };\n    return ChatRoom.findOne(query);\n  },\n\n  showJoinLink(roomId) {\n    return !!ChatRoom.findOne({\n      _id: roomId,\n      t: 'c'\n    });\n  }\n\n});","map":{"version":3,"sources":["client/lib/rooms/roomTypes/public.ts"],"names":[],"mappings":"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","sourcesContent":["import { Meteor } from 'meteor/meteor';\n\nimport { hasAtLeastOnePermission } from '../../../../app/authorization/client';\nimport { ChatRoom } from '../../../../app/models/client';\nimport { settings } from '../../../../app/settings/client';\nimport { getUserPreference } from '../../../../app/utils/client';\nimport { getAvatarURL } from '../../../../app/utils/lib/getAvatarURL';\nimport type { IRoomTypeClientDirectives } from '../../../../definition/IRoomTypeConfig';\nimport { RoomSettingsEnum, RoomMemberActions, UiTextContext } from '../../../../definition/IRoomTypeConfig';\nimport type { AtLeast } from '../../../../definition/utils';\nimport { getPublicRoomType } from '../../../../lib/rooms/roomTypes/public';\nimport { roomCoordinator } from '../roomCoordinator';\n\nexport const PublicRoomType = getPublicRoomType(roomCoordinator);\n\nroomCoordinator.add(PublicRoomType, {\n\tallowRoomSettingChange(room, setting) {\n\t\tswitch (setting) {\n\t\t\tcase RoomSettingsEnum.BROADCAST:\n\t\t\t\treturn Boolean(room.broadcast);\n\t\t\tcase RoomSettingsEnum.READ_ONLY:\n\t\t\t\treturn Boolean(!room.broadcast);\n\t\t\tcase RoomSettingsEnum.REACT_WHEN_READ_ONLY:\n\t\t\t\treturn Boolean(!room.broadcast && room.ro);\n\t\t\tcase RoomSettingsEnum.E2E:\n\t\t\t\treturn false;\n\t\t\tcase RoomSettingsEnum.SYSTEM_MESSAGES:\n\t\t\tdefault:\n\t\t\t\treturn true;\n\t\t}\n\t},\n\n\tallowMemberAction(_room, action) {\n\t\tswitch (action) {\n\t\t\tcase RoomMemberActions.BLOCK:\n\t\t\t\treturn false;\n\t\t\tdefault:\n\t\t\t\treturn true;\n\t\t}\n\t},\n\n\troomName(roomData) {\n\t\tif (roomData.prid) {\n\t\t\treturn roomData.fname;\n\t\t}\n\t\tif (settings.get('UI_Allow_room_names_with_special_chars')) {\n\t\t\treturn roomData.fname || roomData.name;\n\t\t}\n\t\treturn roomData.name;\n\t},\n\n\tisGroupChat(_room) {\n\t\treturn true;\n\t},\n\n\tgetUiText(context) {\n\t\tswitch (context) {\n\t\t\tcase UiTextContext.HIDE_WARNING:\n\t\t\t\treturn 'Hide_Room_Warning';\n\t\t\tcase UiTextContext.LEAVE_WARNING:\n\t\t\t\treturn 'Leave_Room_Warning';\n\t\t\tdefault:\n\t\t\t\treturn '';\n\t\t}\n\t},\n\n\tcondition() {\n\t\tconst groupByType = getUserPreference(Meteor.userId(), 'sidebarGroupByType');\n\t\treturn (\n\t\t\tgroupByType && (hasAtLeastOnePermission(['view-c-room', 'view-joined-room']) || settings.get('Accounts_AllowAnonymousRead') === true)\n\t\t);\n\t},\n\n\tgetAvatarPath(room) {\n\t\treturn getAvatarURL({ roomId: room._id, cache: room.avatarETag }) as string;\n\t},\n\n\tgetIcon(room) {\n\t\tif (room.prid) {\n\t\t\treturn 'discussion';\n\t\t}\n\t\tif (room.teamMain) {\n\t\t\treturn 'team';\n\t\t}\n\n\t\treturn PublicRoomType.icon;\n\t},\n\n\tfindRoom(identifier) {\n\t\tconst query = {\n\t\t\tt: 'c',\n\t\t\tname: identifier,\n\t\t};\n\n\t\treturn ChatRoom.findOne(query);\n\t},\n\n\tshowJoinLink(roomId) {\n\t\treturn !!ChatRoom.findOne({ _id: roomId, t: 'c' });\n\t},\n} as AtLeast<IRoomTypeClientDirectives, 'isGroupChat' | 'roomName'>);\n"],"sourceRoot":""},"sourceType":"module","hash":"3e447bfb1fa9e9dadd0bec4b5a19bca973e85049"}
