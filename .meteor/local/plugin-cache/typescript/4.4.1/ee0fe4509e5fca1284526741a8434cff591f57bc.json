{"metadata":{},"options":{"assumptions":{},"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat/client/views/omnichannel/agents/AgentEdit.tsx","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","classProperties","classPrivateProperties","jsx","nullishCoalescingOperator","nullishCoalescingOperator","optionalChaining","optionalCatchBinding","optionalCatchBinding","classProperties","classPrivateProperties","classPrivateMethods","classProperties","classPrivateProperties","asyncGenerators","asyncGenerators","objectRestSpread","logicalAssignment"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"allowUndeclaredExports":true,"strictMode":false},"caller":{"name":"meteor","arch":"web.browser.legacy"},"sourceFileName":"client/views/omnichannel/agents/AgentEdit.tsx","filename":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat/client/views/omnichannel/agents/AgentEdit.tsx","inputSourceMap":{"version":3,"file":"client/views/omnichannel/agents/AgentEdit.tsx","sourceRoot":"","sources":["client/views/omnichannel/agents/AgentEdit.tsx"],"names":[],"mappings":"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","sourcesContent":["import { Field, TextInput, Button, Margins, Box, MultiSelect, Icon, Select } from '@rocket.chat/fuselage';\nimport { useMutableCallback } from '@rocket.chat/fuselage-hooks';\nimport React, { useMemo, useRef, useState, FC, ReactElement } from 'react';\nimport { useSubscription } from 'use-subscription';\n\nimport { IUser } from '../../../../definition/IUser';\nimport { getUserEmailAddress } from '../../../../lib/getUserEmailAddress';\nimport VerticalBar from '../../../components/VerticalBar';\nimport { useRoute } from '../../../contexts/RouterContext';\nimport { useMethod } from '../../../contexts/ServerContext';\nimport { useSetting } from '../../../contexts/SettingsContext';\nimport { useToastMessageDispatch } from '../../../contexts/ToastMessagesContext';\nimport { useTranslation } from '../../../contexts/TranslationContext';\nimport { useForm } from '../../../hooks/useForm';\nimport UserInfo from '../../room/contextualBar/UserInfo';\nimport { formsSubscription } from '../additionalForms';\n\n// TODO: TYPE:\n// Department\n\ntype dataType = {\n\tstatus: string;\n\tuser: IUser;\n};\n\ntype AgentEditProps = {\n\tdata: dataType;\n\tuserDepartments: { departments: Array<{ departmentId: string }> };\n\tavailableDepartments: { departments: Array<{ _id: string; name?: string }> };\n\tuid: string;\n\treset: () => void;\n};\n\nconst AgentEdit: FC<AgentEditProps> = ({ data, userDepartments, availableDepartments, uid, reset, ...props }) => {\n\tconst t = useTranslation();\n\tconst agentsRoute = useRoute('omnichannel-agents');\n\tconst [maxChatUnsaved, setMaxChatUnsaved] = useState();\n\tconst voipEnabled = useSetting('VoIP_Enabled');\n\n\tconst { user } = data || { user: {} };\n\tconst { name, username, statusLivechat } = user;\n\n\tconst email = getUserEmailAddress(user);\n\n\tconst options: [string, string][] = useMemo(\n\t\t() =>\n\t\t\tavailableDepartments?.departments ? availableDepartments.departments.map(({ _id, name }) => (name ? [_id, name] : [_id, _id])) : [],\n\t\t[availableDepartments],\n\t);\n\tconst initialDepartmentValue = useMemo(\n\t\t() => (userDepartments?.departments ? userDepartments.departments.map(({ departmentId }) => departmentId) : []),\n\t\t[userDepartments],\n\t);\n\tconst eeForms = useSubscription(formsSubscription);\n\n\tconst saveRef = useRef({\n\t\tvalues: {},\n\t\thasUnsavedChanges: false,\n\t\treset: () => undefined,\n\t\tcommit: () => undefined,\n\t});\n\n\tconst { reset: resetMaxChats, commit: commitMaxChats } = saveRef.current;\n\n\tconst onChangeMaxChats = useMutableCallback(({ hasUnsavedChanges, ...value }) => {\n\t\tsaveRef.current = value;\n\n\t\tif (hasUnsavedChanges !== maxChatUnsaved) {\n\t\t\tsetMaxChatUnsaved(hasUnsavedChanges);\n\t\t}\n\t});\n\n\tconst { useMaxChatsPerAgent = (): ReactElement | null => null } = eeForms as any; // TODO: Find out how to use ts with eeForms\n\n\tconst { values, handlers, hasUnsavedChanges, commit } = useForm({\n\t\tdepartments: initialDepartmentValue,\n\t\tstatus: statusLivechat,\n\t\tmaxChats: 0,\n\t\tvoipExtension: '',\n\t});\n\n\tconst { handleDepartments, handleStatus, handleVoipExtension } = handlers;\n\tconst { departments, status, voipExtension } = values as {\n\t\tdepartments: string[];\n\t\tstatus: string;\n\t\tvoipExtension: string;\n\t};\n\n\tconst MaxChats = useMaxChatsPerAgent();\n\n\tconst saveAgentInfo = useMethod('livechat:saveAgentInfo');\n\tconst saveAgentStatus = useMethod('livechat:changeLivechatStatus');\n\n\tconst dispatchToastMessage = useToastMessageDispatch();\n\n\tconst handleReset = useMutableCallback(() => {\n\t\treset();\n\t\tresetMaxChats();\n\t});\n\n\tconst handleSave = useMutableCallback(async () => {\n\t\ttry {\n\t\t\tawait saveAgentInfo(uid, saveRef.current.values, departments);\n\t\t\tawait saveAgentStatus({ status, agentId: uid });\n\t\t\tdispatchToastMessage({ type: 'success', message: t('Success') });\n\t\t\tagentsRoute.push({});\n\t\t\treset();\n\t\t} catch (error) {\n\t\t\tdispatchToastMessage({ type: 'error', message: error as string });\n\t\t}\n\t\tcommit();\n\t\tcommitMaxChats();\n\t});\n\n\treturn (\n\t\t<VerticalBar.ScrollableContent is='form' {...props}>\n\t\t\t<Box alignSelf='center'>\n\t\t\t\t<UserInfo.Avatar margin='auto' size={'x332'} title={username} username={username} />\n\t\t\t</Box>\n\t\t\t<Field>\n\t\t\t\t<Field.Label>{t('Name')}</Field.Label>\n\t\t\t\t<Field.Row>\n\t\t\t\t\t<TextInput flexGrow={1} value={name} disabled />\n\t\t\t\t</Field.Row>\n\t\t\t</Field>\n\t\t\t<Field>\n\t\t\t\t<Field.Label>{t('Username')}</Field.Label>\n\t\t\t\t<Field.Row>\n\t\t\t\t\t<TextInput flexGrow={1} value={username} disabled addon={<Icon name='at' size='x20' />} />\n\t\t\t\t</Field.Row>\n\t\t\t</Field>\n\t\t\t<Field>\n\t\t\t\t<Field.Label>{t('Email')}</Field.Label>\n\t\t\t\t<Field.Row>\n\t\t\t\t\t<TextInput flexGrow={1} value={email} disabled addon={<Icon name='mail' size='x20' />} />\n\t\t\t\t</Field.Row>\n\t\t\t</Field>\n\t\t\t<Field>\n\t\t\t\t<Field.Label>{t('Departments')}</Field.Label>\n\t\t\t\t<Field.Row>\n\t\t\t\t\t<MultiSelect\n\t\t\t\t\t\toptions={options}\n\t\t\t\t\t\tvalue={departments}\n\t\t\t\t\t\tplaceholder={t('Select_an_option')}\n\t\t\t\t\t\tonChange={handleDepartments}\n\t\t\t\t\t\tflexGrow={1}\n\t\t\t\t\t/>\n\t\t\t\t</Field.Row>\n\t\t\t</Field>\n\t\t\t<Field>\n\t\t\t\t<Field.Label>{t('Status')}</Field.Label>\n\t\t\t\t<Field.Row>\n\t\t\t\t\t<Select\n\t\t\t\t\t\toptions={[\n\t\t\t\t\t\t\t['available', t('Available')],\n\t\t\t\t\t\t\t['not-available', t('Not_Available')],\n\t\t\t\t\t\t]}\n\t\t\t\t\t\tvalue={status}\n\t\t\t\t\t\tplaceholder={t('Select_an_option')}\n\t\t\t\t\t\tonChange={handleStatus}\n\t\t\t\t\t\tflexGrow={1}\n\t\t\t\t\t/>\n\t\t\t\t</Field.Row>\n\t\t\t</Field>\n\n\t\t\t{MaxChats && <MaxChats data={user} onChange={onChangeMaxChats} />}\n\n\t\t\t{voipEnabled && (\n\t\t\t\t<Field>\n\t\t\t\t\t<Field.Label>{t('VoIP_Extension')}</Field.Label>\n\t\t\t\t\t<Field.Row>\n\t\t\t\t\t\t<TextInput flexGrow={1} value={voipExtension as string} onChange={handleVoipExtension} />\n\t\t\t\t\t</Field.Row>\n\t\t\t\t</Field>\n\t\t\t)}\n\n\t\t\t<Field.Row>\n\t\t\t\t<Box display='flex' flexDirection='row' justifyContent='space-between' w='full'>\n\t\t\t\t\t<Margins inlineEnd='x4'>\n\t\t\t\t\t\t<Button flexGrow={1} type='reset' disabled={!hasUnsavedChanges && !maxChatUnsaved} onClick={handleReset}>\n\t\t\t\t\t\t\t{t('Reset')}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t<Button mie='none' flexGrow={1} disabled={!hasUnsavedChanges && !maxChatUnsaved} onClick={handleSave}>\n\t\t\t\t\t\t\t{t('Save')}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</Margins>\n\t\t\t\t</Box>\n\t\t\t</Field.Row>\n\t\t</VerticalBar.ScrollableContent>\n\t);\n};\n\nexport default AgentEdit;\n"]},"targets":{"android":"95.0.0","chrome":"95.0.0","edge":"95.0.0","firefox":"78.0.0","ie":"10.0.0","ios":"15.0.0","opera":"81.0.0","safari":"15.1.0","samsung":"14.0.0"},"cloneInputAst":true,"browserslistConfigFile":false,"passPerPreset":false,"envName":"development","cwd":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat","root":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat","rootMode":"root","plugins":[{"key":"base$0","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0","visitor":{"Program":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true},"options":{"avoidModernSyntax":true,"enforceStrictMode":false,"dynamicImport":true}},{"key":"transform-runtime","visitor":{"MemberExpression":{"enter":[null]},"ObjectPattern":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":{},"_verified":{},"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]}},"options":{"version":"7.16.5","helpers":true,"useESModules":false,"corejs":false}},{"key":"proposal-class-properties","visitor":{"PrivateName":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{"loose":true}},{"key":"base$0$3","visitor":{"FunctionExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$4","visitor":{"ForInStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-react-jsx","visitor":{"_exploded":{},"_verified":{},"JSXNamespacedName":{"enter":[null]},"JSXSpreadChild":{"enter":[null]},"Program":{"enter":[null]},"JSXElement":{"exit":[null]},"JSXFragment":{"exit":[null]},"JSXAttribute":{"enter":[null]}},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","runtime":"classic","throwIfNamespace":true,"useBuiltIns":false}},{"key":"transform-react-display-name","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-react-pure-annotations","visitor":{"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"syntax-nullish-coalescing-operator","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-nullish-coalescing-operator","visitor":{"_exploded":{},"_verified":{},"LogicalExpression":{"enter":[null]}},"options":{}},{"key":"syntax-optional-chaining","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-optional-chaining","visitor":{"_exploded":true,"OptionalCallExpression":{"enter":[null]},"OptionalMemberExpression":{"enter":[null]},"_verified":true},"options":{}},{"key":"syntax-optional-catch-binding","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-optional-catch-binding","visitor":{"_exploded":{},"_verified":{},"CatchClause":{"enter":[null]}},"options":{}},{"key":"syntax-class-properties","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-class-properties","visitor":{"PrivateName":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{}},{"key":"syntax-async-generators","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-async-generator-functions","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]}},"options":{}},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-object-rest-spread","visitor":{"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"proposal-logical-assignment-operators","visitor":{"_exploded":{},"_verified":{},"AssignmentExpression":{"enter":[null]}},"options":{}},{"key":"transform-arrow-functions","visitor":{"ArrowFunctionExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-block-scoped-functions","visitor":{"BlockStatement":{"enter":[null]},"SwitchCase":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-block-scoping","visitor":{"VariableDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"_exploded":true,"BlockStatement":{"enter":[null]},"SwitchStatement":{"enter":[null]},"Program":{"enter":[null]},"_verified":true,"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"transform-classes","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-computed-properties","visitor":{"ObjectExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-destructuring","visitor":{"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"VariableDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"transform-for-of","visitor":{"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-literals","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-object-super","visitor":{"ObjectExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-parameters","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{}},{"key":"transform-shorthand-properties","visitor":{"ObjectMethod":{"enter":[null]},"ObjectProperty":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-spread","visitor":{"ArrayExpression":{"enter":[null]},"CallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-sticky-regex","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-template-literals","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-typeof-symbol","visitor":{"UnaryExpression":{"enter":[null]},"_exploded":true,"_verified":true,"BlockStatement":{"enter":[null]},"CatchClause":{"enter":[null]},"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"Program":{"enter":[null]},"ObjectMethod":{"enter":[null]},"SwitchStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ForOfStatement":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"StaticBlock":{"enter":[null]},"TSModuleBlock":{"enter":[null]},"AssignmentPattern":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectPattern":{"enter":[null]}},"options":{}},{"key":"transform-unicode-regex","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-property-literals","visitor":{"ObjectProperty":{"exit":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-exponentiation-operator","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"regenerator-transform","visitor":{"_exploded":true,"_verified":true,"ObjectMethod":{"enter":[null],"exit":[null]},"ClassMethod":{"enter":[null],"exit":[null]},"ClassPrivateMethod":{"enter":[null],"exit":[null]},"FunctionDeclaration":{"exit":[null]},"FunctionExpression":{"exit":[null]},"ArrowFunctionExpression":{"exit":[null]}},"options":{}}],"presets":[],"generatorOpts":{"filename":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat/client/views/omnichannel/agents/AgentEdit.tsx","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"client/views/omnichannel/agents/AgentEdit.tsx"}},"code":"var _excluded = [\"data\", \"userDepartments\", \"availableDepartments\", \"uid\", \"reset\"],\n    _excluded2 = [\"hasUnsavedChanges\"];\n\nvar _regeneratorRuntime;\n\nmodule.link(\"@babel/runtime/regenerator\", {\n  default: function (v) {\n    _regeneratorRuntime = v;\n  }\n}, 0);\n\nvar _extends;\n\nmodule.link(\"@babel/runtime/helpers/extends\", {\n  default: function (v) {\n    _extends = v;\n  }\n}, 1);\n\nvar _slicedToArray;\n\nmodule.link(\"@babel/runtime/helpers/slicedToArray\", {\n  default: function (v) {\n    _slicedToArray = v;\n  }\n}, 2);\n\nvar _objectWithoutProperties;\n\nmodule.link(\"@babel/runtime/helpers/objectWithoutProperties\", {\n  default: function (v) {\n    _objectWithoutProperties = v;\n  }\n}, 3);\nvar Field, TextInput, Button, Margins, Box, MultiSelect, Icon, Select;\nmodule.link(\"@rocket.chat/fuselage\", {\n  Field: function (v) {\n    Field = v;\n  },\n  TextInput: function (v) {\n    TextInput = v;\n  },\n  Button: function (v) {\n    Button = v;\n  },\n  Margins: function (v) {\n    Margins = v;\n  },\n  Box: function (v) {\n    Box = v;\n  },\n  MultiSelect: function (v) {\n    MultiSelect = v;\n  },\n  Icon: function (v) {\n    Icon = v;\n  },\n  Select: function (v) {\n    Select = v;\n  }\n}, 0);\nvar useMutableCallback;\nmodule.link(\"@rocket.chat/fuselage-hooks\", {\n  useMutableCallback: function (v) {\n    useMutableCallback = v;\n  }\n}, 1);\nvar React, useMemo, useRef, useState;\nmodule.link(\"react\", {\n  \"default\": function (v) {\n    React = v;\n  },\n  useMemo: function (v) {\n    useMemo = v;\n  },\n  useRef: function (v) {\n    useRef = v;\n  },\n  useState: function (v) {\n    useState = v;\n  }\n}, 2);\nvar useSubscription;\nmodule.link(\"use-subscription\", {\n  useSubscription: function (v) {\n    useSubscription = v;\n  }\n}, 3);\nvar getUserEmailAddress;\nmodule.link(\"../../../../lib/getUserEmailAddress\", {\n  getUserEmailAddress: function (v) {\n    getUserEmailAddress = v;\n  }\n}, 4);\nvar VerticalBar;\nmodule.link(\"../../../components/VerticalBar\", {\n  \"default\": function (v) {\n    VerticalBar = v;\n  }\n}, 5);\nvar useRoute;\nmodule.link(\"../../../contexts/RouterContext\", {\n  useRoute: function (v) {\n    useRoute = v;\n  }\n}, 6);\nvar useMethod;\nmodule.link(\"../../../contexts/ServerContext\", {\n  useMethod: function (v) {\n    useMethod = v;\n  }\n}, 7);\nvar useSetting;\nmodule.link(\"../../../contexts/SettingsContext\", {\n  useSetting: function (v) {\n    useSetting = v;\n  }\n}, 8);\nvar useToastMessageDispatch;\nmodule.link(\"../../../contexts/ToastMessagesContext\", {\n  useToastMessageDispatch: function (v) {\n    useToastMessageDispatch = v;\n  }\n}, 9);\nvar useTranslation;\nmodule.link(\"../../../contexts/TranslationContext\", {\n  useTranslation: function (v) {\n    useTranslation = v;\n  }\n}, 10);\nvar useForm;\nmodule.link(\"../../../hooks/useForm\", {\n  useForm: function (v) {\n    useForm = v;\n  }\n}, 11);\nvar UserInfo;\nmodule.link(\"../../room/contextualBar/UserInfo\", {\n  \"default\": function (v) {\n    UserInfo = v;\n  }\n}, 12);\nvar formsSubscription;\nmodule.link(\"../additionalForms\", {\n  formsSubscription: function (v) {\n    formsSubscription = v;\n  }\n}, 13);\n\nvar AgentEdit = function (_ref) {\n  var data = _ref.data,\n      userDepartments = _ref.userDepartments,\n      availableDepartments = _ref.availableDepartments,\n      uid = _ref.uid,\n      reset = _ref.reset,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  var t = useTranslation();\n  var agentsRoute = useRoute('omnichannel-agents');\n\n  var _useState = useState(),\n      _useState2 = _slicedToArray(_useState, 2),\n      maxChatUnsaved = _useState2[0],\n      setMaxChatUnsaved = _useState2[1];\n\n  var voipEnabled = useSetting('VoIP_Enabled');\n\n  var _ref2 = data || {\n    user: {}\n  },\n      user = _ref2.user;\n\n  var name = user.name,\n      username = user.username,\n      statusLivechat = user.statusLivechat;\n  var email = getUserEmailAddress(user);\n  var options = useMemo(function () {\n    return availableDepartments !== null && availableDepartments !== void 0 && availableDepartments.departments ? availableDepartments.departments.map(function (_ref3) {\n      var _id = _ref3._id,\n          name = _ref3.name;\n      return name ? [_id, name] : [_id, _id];\n    }) : [];\n  }, [availableDepartments]);\n  var initialDepartmentValue = useMemo(function () {\n    return userDepartments !== null && userDepartments !== void 0 && userDepartments.departments ? userDepartments.departments.map(function (_ref4) {\n      var departmentId = _ref4.departmentId;\n      return departmentId;\n    }) : [];\n  }, [userDepartments]);\n  var eeForms = useSubscription(formsSubscription);\n  var saveRef = useRef({\n    values: {},\n    hasUnsavedChanges: false,\n    reset: function () {\n      return undefined;\n    },\n    commit: function () {\n      return undefined;\n    }\n  });\n  var _saveRef$current = saveRef.current,\n      resetMaxChats = _saveRef$current.reset,\n      commitMaxChats = _saveRef$current.commit;\n  var onChangeMaxChats = useMutableCallback(function (_ref5) {\n    var hasUnsavedChanges = _ref5.hasUnsavedChanges,\n        value = _objectWithoutProperties(_ref5, _excluded2);\n\n    saveRef.current = value;\n\n    if (hasUnsavedChanges !== maxChatUnsaved) {\n      setMaxChatUnsaved(hasUnsavedChanges);\n    }\n  });\n  var _eeForms$useMaxChatsP = eeForms.useMaxChatsPerAgent,\n      useMaxChatsPerAgent = _eeForms$useMaxChatsP === void 0 ? function () {\n    return null;\n  } : _eeForms$useMaxChatsP; // TODO: Find out how to use ts with eeForms\n\n  var _useForm = useForm({\n    departments: initialDepartmentValue,\n    status: statusLivechat,\n    maxChats: 0,\n    voipExtension: ''\n  }),\n      values = _useForm.values,\n      handlers = _useForm.handlers,\n      hasUnsavedChanges = _useForm.hasUnsavedChanges,\n      commit = _useForm.commit;\n\n  var handleDepartments = handlers.handleDepartments,\n      handleStatus = handlers.handleStatus,\n      handleVoipExtension = handlers.handleVoipExtension;\n  var departments = values.departments,\n      status = values.status,\n      voipExtension = values.voipExtension;\n  var MaxChats = useMaxChatsPerAgent();\n  var saveAgentInfo = useMethod('livechat:saveAgentInfo');\n  var saveAgentStatus = useMethod('livechat:changeLivechatStatus');\n  var dispatchToastMessage = useToastMessageDispatch();\n  var handleReset = useMutableCallback(function () {\n    reset();\n    resetMaxChats();\n  });\n  var handleSave = useMutableCallback(function () {\n    function _callee() {\n      return _regeneratorRuntime.async(function () {\n        function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.prev = 0;\n                _context.next = 3;\n                return _regeneratorRuntime.awrap(saveAgentInfo(uid, saveRef.current.values, departments));\n\n              case 3:\n                _context.next = 5;\n                return _regeneratorRuntime.awrap(saveAgentStatus({\n                  status: status,\n                  agentId: uid\n                }));\n\n              case 5:\n                dispatchToastMessage({\n                  type: 'success',\n                  message: t('Success')\n                });\n                agentsRoute.push({});\n                reset();\n                _context.next = 13;\n                break;\n\n              case 10:\n                _context.prev = 10;\n                _context.t0 = _context[\"catch\"](0);\n                dispatchToastMessage({\n                  type: 'error',\n                  message: _context.t0\n                });\n\n              case 13:\n                commit();\n                commitMaxChats();\n\n              case 15:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }\n\n        return _callee$;\n      }(), null, null, [[0, 10]], Promise);\n    }\n\n    return _callee;\n  }());\n  return /*#__PURE__*/React.createElement(VerticalBar.ScrollableContent, _extends({\n    is: \"form\"\n  }, props), /*#__PURE__*/React.createElement(Box, {\n    alignSelf: \"center\"\n  }, /*#__PURE__*/React.createElement(UserInfo.Avatar, {\n    margin: \"auto\",\n    size: 'x332',\n    title: username,\n    username: username\n  })), /*#__PURE__*/React.createElement(Field, null, /*#__PURE__*/React.createElement(Field.Label, null, t('Name')), /*#__PURE__*/React.createElement(Field.Row, null, /*#__PURE__*/React.createElement(TextInput, {\n    flexGrow: 1,\n    value: name,\n    disabled: true\n  }))), /*#__PURE__*/React.createElement(Field, null, /*#__PURE__*/React.createElement(Field.Label, null, t('Username')), /*#__PURE__*/React.createElement(Field.Row, null, /*#__PURE__*/React.createElement(TextInput, {\n    flexGrow: 1,\n    value: username,\n    disabled: true,\n    addon: /*#__PURE__*/React.createElement(Icon, {\n      name: \"at\",\n      size: \"x20\"\n    })\n  }))), /*#__PURE__*/React.createElement(Field, null, /*#__PURE__*/React.createElement(Field.Label, null, t('Email')), /*#__PURE__*/React.createElement(Field.Row, null, /*#__PURE__*/React.createElement(TextInput, {\n    flexGrow: 1,\n    value: email,\n    disabled: true,\n    addon: /*#__PURE__*/React.createElement(Icon, {\n      name: \"mail\",\n      size: \"x20\"\n    })\n  }))), /*#__PURE__*/React.createElement(Field, null, /*#__PURE__*/React.createElement(Field.Label, null, t('Departments')), /*#__PURE__*/React.createElement(Field.Row, null, /*#__PURE__*/React.createElement(MultiSelect, {\n    options: options,\n    value: departments,\n    placeholder: t('Select_an_option'),\n    onChange: handleDepartments,\n    flexGrow: 1\n  }))), /*#__PURE__*/React.createElement(Field, null, /*#__PURE__*/React.createElement(Field.Label, null, t('Status')), /*#__PURE__*/React.createElement(Field.Row, null, /*#__PURE__*/React.createElement(Select, {\n    options: [['available', t('Available')], ['not-available', t('Not_Available')]],\n    value: status,\n    placeholder: t('Select_an_option'),\n    onChange: handleStatus,\n    flexGrow: 1\n  }))), MaxChats && /*#__PURE__*/React.createElement(MaxChats, {\n    data: user,\n    onChange: onChangeMaxChats\n  }), voipEnabled && /*#__PURE__*/React.createElement(Field, null, /*#__PURE__*/React.createElement(Field.Label, null, t('VoIP_Extension')), /*#__PURE__*/React.createElement(Field.Row, null, /*#__PURE__*/React.createElement(TextInput, {\n    flexGrow: 1,\n    value: voipExtension,\n    onChange: handleVoipExtension\n  }))), /*#__PURE__*/React.createElement(Field.Row, null, /*#__PURE__*/React.createElement(Box, {\n    display: \"flex\",\n    flexDirection: \"row\",\n    justifyContent: \"space-between\",\n    w: \"full\"\n  }, /*#__PURE__*/React.createElement(Margins, {\n    inlineEnd: \"x4\"\n  }, /*#__PURE__*/React.createElement(Button, {\n    flexGrow: 1,\n    type: \"reset\",\n    disabled: !hasUnsavedChanges && !maxChatUnsaved,\n    onClick: handleReset\n  }, t('Reset')), /*#__PURE__*/React.createElement(Button, {\n    mie: \"none\",\n    flexGrow: 1,\n    disabled: !hasUnsavedChanges && !maxChatUnsaved,\n    onClick: handleSave\n  }, t('Save'))))));\n};\n\nmodule.exportDefault(AgentEdit);","map":{"version":3,"sources":["client/views/omnichannel/agents/AgentEdit.tsx"],"names":[],"mappings":"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","sourcesContent":["import { Field, TextInput, Button, Margins, Box, MultiSelect, Icon, Select } from '@rocket.chat/fuselage';\nimport { useMutableCallback } from '@rocket.chat/fuselage-hooks';\nimport React, { useMemo, useRef, useState, FC, ReactElement } from 'react';\nimport { useSubscription } from 'use-subscription';\n\nimport { IUser } from '../../../../definition/IUser';\nimport { getUserEmailAddress } from '../../../../lib/getUserEmailAddress';\nimport VerticalBar from '../../../components/VerticalBar';\nimport { useRoute } from '../../../contexts/RouterContext';\nimport { useMethod } from '../../../contexts/ServerContext';\nimport { useSetting } from '../../../contexts/SettingsContext';\nimport { useToastMessageDispatch } from '../../../contexts/ToastMessagesContext';\nimport { useTranslation } from '../../../contexts/TranslationContext';\nimport { useForm } from '../../../hooks/useForm';\nimport UserInfo from '../../room/contextualBar/UserInfo';\nimport { formsSubscription } from '../additionalForms';\n\n// TODO: TYPE:\n// Department\n\ntype dataType = {\n\tstatus: string;\n\tuser: IUser;\n};\n\ntype AgentEditProps = {\n\tdata: dataType;\n\tuserDepartments: { departments: Array<{ departmentId: string }> };\n\tavailableDepartments: { departments: Array<{ _id: string; name?: string }> };\n\tuid: string;\n\treset: () => void;\n};\n\nconst AgentEdit: FC<AgentEditProps> = ({ data, userDepartments, availableDepartments, uid, reset, ...props }) => {\n\tconst t = useTranslation();\n\tconst agentsRoute = useRoute('omnichannel-agents');\n\tconst [maxChatUnsaved, setMaxChatUnsaved] = useState();\n\tconst voipEnabled = useSetting('VoIP_Enabled');\n\n\tconst { user } = data || { user: {} };\n\tconst { name, username, statusLivechat } = user;\n\n\tconst email = getUserEmailAddress(user);\n\n\tconst options: [string, string][] = useMemo(\n\t\t() =>\n\t\t\tavailableDepartments?.departments ? availableDepartments.departments.map(({ _id, name }) => (name ? [_id, name] : [_id, _id])) : [],\n\t\t[availableDepartments],\n\t);\n\tconst initialDepartmentValue = useMemo(\n\t\t() => (userDepartments?.departments ? userDepartments.departments.map(({ departmentId }) => departmentId) : []),\n\t\t[userDepartments],\n\t);\n\tconst eeForms = useSubscription(formsSubscription);\n\n\tconst saveRef = useRef({\n\t\tvalues: {},\n\t\thasUnsavedChanges: false,\n\t\treset: () => undefined,\n\t\tcommit: () => undefined,\n\t});\n\n\tconst { reset: resetMaxChats, commit: commitMaxChats } = saveRef.current;\n\n\tconst onChangeMaxChats = useMutableCallback(({ hasUnsavedChanges, ...value }) => {\n\t\tsaveRef.current = value;\n\n\t\tif (hasUnsavedChanges !== maxChatUnsaved) {\n\t\t\tsetMaxChatUnsaved(hasUnsavedChanges);\n\t\t}\n\t});\n\n\tconst { useMaxChatsPerAgent = (): ReactElement | null => null } = eeForms as any; // TODO: Find out how to use ts with eeForms\n\n\tconst { values, handlers, hasUnsavedChanges, commit } = useForm({\n\t\tdepartments: initialDepartmentValue,\n\t\tstatus: statusLivechat,\n\t\tmaxChats: 0,\n\t\tvoipExtension: '',\n\t});\n\n\tconst { handleDepartments, handleStatus, handleVoipExtension } = handlers;\n\tconst { departments, status, voipExtension } = values as {\n\t\tdepartments: string[];\n\t\tstatus: string;\n\t\tvoipExtension: string;\n\t};\n\n\tconst MaxChats = useMaxChatsPerAgent();\n\n\tconst saveAgentInfo = useMethod('livechat:saveAgentInfo');\n\tconst saveAgentStatus = useMethod('livechat:changeLivechatStatus');\n\n\tconst dispatchToastMessage = useToastMessageDispatch();\n\n\tconst handleReset = useMutableCallback(() => {\n\t\treset();\n\t\tresetMaxChats();\n\t});\n\n\tconst handleSave = useMutableCallback(async () => {\n\t\ttry {\n\t\t\tawait saveAgentInfo(uid, saveRef.current.values, departments);\n\t\t\tawait saveAgentStatus({ status, agentId: uid });\n\t\t\tdispatchToastMessage({ type: 'success', message: t('Success') });\n\t\t\tagentsRoute.push({});\n\t\t\treset();\n\t\t} catch (error) {\n\t\t\tdispatchToastMessage({ type: 'error', message: error as string });\n\t\t}\n\t\tcommit();\n\t\tcommitMaxChats();\n\t});\n\n\treturn (\n\t\t<VerticalBar.ScrollableContent is='form' {...props}>\n\t\t\t<Box alignSelf='center'>\n\t\t\t\t<UserInfo.Avatar margin='auto' size={'x332'} title={username} username={username} />\n\t\t\t</Box>\n\t\t\t<Field>\n\t\t\t\t<Field.Label>{t('Name')}</Field.Label>\n\t\t\t\t<Field.Row>\n\t\t\t\t\t<TextInput flexGrow={1} value={name} disabled />\n\t\t\t\t</Field.Row>\n\t\t\t</Field>\n\t\t\t<Field>\n\t\t\t\t<Field.Label>{t('Username')}</Field.Label>\n\t\t\t\t<Field.Row>\n\t\t\t\t\t<TextInput flexGrow={1} value={username} disabled addon={<Icon name='at' size='x20' />} />\n\t\t\t\t</Field.Row>\n\t\t\t</Field>\n\t\t\t<Field>\n\t\t\t\t<Field.Label>{t('Email')}</Field.Label>\n\t\t\t\t<Field.Row>\n\t\t\t\t\t<TextInput flexGrow={1} value={email} disabled addon={<Icon name='mail' size='x20' />} />\n\t\t\t\t</Field.Row>\n\t\t\t</Field>\n\t\t\t<Field>\n\t\t\t\t<Field.Label>{t('Departments')}</Field.Label>\n\t\t\t\t<Field.Row>\n\t\t\t\t\t<MultiSelect\n\t\t\t\t\t\toptions={options}\n\t\t\t\t\t\tvalue={departments}\n\t\t\t\t\t\tplaceholder={t('Select_an_option')}\n\t\t\t\t\t\tonChange={handleDepartments}\n\t\t\t\t\t\tflexGrow={1}\n\t\t\t\t\t/>\n\t\t\t\t</Field.Row>\n\t\t\t</Field>\n\t\t\t<Field>\n\t\t\t\t<Field.Label>{t('Status')}</Field.Label>\n\t\t\t\t<Field.Row>\n\t\t\t\t\t<Select\n\t\t\t\t\t\toptions={[\n\t\t\t\t\t\t\t['available', t('Available')],\n\t\t\t\t\t\t\t['not-available', t('Not_Available')],\n\t\t\t\t\t\t]}\n\t\t\t\t\t\tvalue={status}\n\t\t\t\t\t\tplaceholder={t('Select_an_option')}\n\t\t\t\t\t\tonChange={handleStatus}\n\t\t\t\t\t\tflexGrow={1}\n\t\t\t\t\t/>\n\t\t\t\t</Field.Row>\n\t\t\t</Field>\n\n\t\t\t{MaxChats && <MaxChats data={user} onChange={onChangeMaxChats} />}\n\n\t\t\t{voipEnabled && (\n\t\t\t\t<Field>\n\t\t\t\t\t<Field.Label>{t('VoIP_Extension')}</Field.Label>\n\t\t\t\t\t<Field.Row>\n\t\t\t\t\t\t<TextInput flexGrow={1} value={voipExtension as string} onChange={handleVoipExtension} />\n\t\t\t\t\t</Field.Row>\n\t\t\t\t</Field>\n\t\t\t)}\n\n\t\t\t<Field.Row>\n\t\t\t\t<Box display='flex' flexDirection='row' justifyContent='space-between' w='full'>\n\t\t\t\t\t<Margins inlineEnd='x4'>\n\t\t\t\t\t\t<Button flexGrow={1} type='reset' disabled={!hasUnsavedChanges && !maxChatUnsaved} onClick={handleReset}>\n\t\t\t\t\t\t\t{t('Reset')}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t<Button mie='none' flexGrow={1} disabled={!hasUnsavedChanges && !maxChatUnsaved} onClick={handleSave}>\n\t\t\t\t\t\t\t{t('Save')}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</Margins>\n\t\t\t\t</Box>\n\t\t\t</Field.Row>\n\t\t</VerticalBar.ScrollableContent>\n\t);\n};\n\nexport default AgentEdit;\n"],"sourceRoot":""},"sourceType":"module","hash":"ee0fe4509e5fca1284526741a8434cff591f57bc"}
