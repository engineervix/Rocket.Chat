{"metadata":{},"options":{"assumptions":{},"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat/client/sidebar/header/UserDropdown.tsx","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","classProperties","classPrivateProperties","jsx","nullishCoalescingOperator","nullishCoalescingOperator","optionalChaining","optionalCatchBinding","optionalCatchBinding","classProperties","classPrivateProperties","classPrivateMethods","classProperties","classPrivateProperties","asyncGenerators","asyncGenerators","objectRestSpread","logicalAssignment"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"allowUndeclaredExports":true,"strictMode":false},"caller":{"name":"meteor","arch":"web.browser"},"sourceFileName":"client/sidebar/header/UserDropdown.tsx","filename":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat/client/sidebar/header/UserDropdown.tsx","inputSourceMap":{"version":3,"file":"client/sidebar/header/UserDropdown.tsx","sourceRoot":"","sources":["client/sidebar/header/UserDropdown.tsx"],"names":[],"mappings":"AAAA,OAAO,EAAE,GAAG,EAAE,OAAO,EAAE,MAAM,EAAE,MAAM,uBAAuB,CAAC;AAC7D,OAAO,EAAE,kBAAkB,EAAE,MAAM,6BAA6B,CAAC;AACjE,OAAO,EAAE,UAAU,EAAE,MAAM,2BAA2B,CAAC;AACvD,OAAO,KAAuB,MAAM,OAAO,CAAC;AAE5C,OAAO,EAAE,UAAU,EAAE,OAAO,EAAE,MAAM,8BAA8B,CAAC;AACnE,OAAO,EAAE,UAAU,EAAE,MAAM,iCAAiC,CAAC;AAE7D,OAAO,EAAE,UAAU,IAAI,cAAc,EAAE,MAAM,gCAAgC,CAAC;AAE9E,OAAO,EAAE,SAAS,EAAE,MAAM,wBAAwB,CAAC;AACnD,OAAO,YAAY,MAAM,+BAA+B,CAAC;AACzD,OAAO,EAAE,UAAU,EAAE,MAAM,6BAA6B,CAAC;AACzD,OAAO,UAAU,MAAM,oCAAoC,CAAC;AAC5D,OAAO,EAAE,uBAAuB,EAAE,MAAM,qCAAqC,CAAC;AAC9E,OAAO,EAAE,SAAS,EAAE,MAAM,8BAA8B,CAAC;AACzD,OAAO,EAAE,QAAQ,EAAE,MAAM,8BAA8B,CAAC;AACxD,OAAO,EAAE,UAAU,EAAE,MAAM,gCAAgC,CAAC;AAC5D,OAAO,EAAE,cAAc,EAAE,MAAM,mCAAmC,CAAC;AACnE,OAAO,EAAE,SAAS,EAAE,MAAM,4BAA4B,CAAC;AACvD,OAAO,EAAE,gBAAgB,EAAE,MAAM,8BAA8B,CAAC;AAChE,OAAO,EAAE,kBAAkB,EAAE,MAAM,gCAAgC,CAAC;AACpE,OAAO,EAAE,eAAe,EAAE,MAAM,2BAA2B,CAAC;AAC5D,OAAO,eAAe,MAAM,mBAAmB,CAAC;AAEhD,MAAM,iBAAiB,GAAG;IACzB,WAAW;IACX,cAAc;IACd,eAAe;IACf,iBAAiB;IACjB,mBAAmB;IACnB,yBAAyB;IACzB,0BAA0B;IAC1B,0BAA0B;IAC1B,0BAA0B;IAC1B,4BAA4B;IAC5B,8BAA8B;IAC9B,8BAA8B;IAC9B,kCAAkC;IAClC,kCAAkC;IAClC,2BAA2B;CAC3B,CAAC;AAEF,MAAM,eAAe,GAAG,CAAC,EAAU,EAAW,EAAE,CAAE,MAAM,CAAC,MAAM,CAAC,cAAc,CAAc,CAAC,QAAQ,CAAC,EAAE,CAAC,CAAC;AAE1G,MAAM,mBAAmB,GAAG,CAAC,KAAa,EAAE,EAAU,EAA2B,EAAE,CAAC,eAAe,CAAC,EAAE,CAAC,CAAC;AAExG,MAAM,SAAS,GAAG,CAAC,MAAkC,EAAQ,EAAE;IAC9D,UAAU,CAAC,SAAS,CAAC,MAAM,CAAC,UAAU,EAAE,CAAC,eAAe,CAAC,MAAM,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC;IACxF,SAAS,CAAC,GAAG,CAAC,uBAAuB,EAAE,MAAM,CAAC,CAAC;AAChD,CAAC,CAAC;AAEF,MAAM,QAAQ,GAAG,GAA2C,EAAE,CAAC,UAAU,CAAC,QAAQ,EAAE,CAAC;AAErF,MAAM,mBAAmB,GAAG,CAAC,CAAoC,EAAE,MAAkC,EAAU,EAAE;IAChH,IAAI,mBAAmB,CAAC,MAAM,CAAC,IAAI,EAAE,MAAM,CAAC,EAAE,CAAC,EAAE;QAChD,OAAO,CAAC,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;KACtB;IAED,OAAO,MAAM,CAAC,IAAI,CAAC;AACpB,CAAC,CAAC;AAOF,MAAM,YAAY,GAAG,CAAC,EAAE,IAAI,EAAE,OAAO,EAAqB,EAAgB,EAAE;IAC3E,MAAM,CAAC,GAAG,cAAc,EAAE,CAAC;IAC3B,MAAM,YAAY,GAAG,QAAQ,CAAC,SAAS,CAAC,CAAC;IACzC,MAAM,UAAU,GAAG,QAAQ,CAAC,OAAO,CAAC,CAAC;IACrC,MAAM,MAAM,GAAG,SAAS,EAAE,CAAC;IAC3B,MAAM,EAAE,OAAO,EAAE,QAAQ,EAAE,GAAG,SAAS,EAAE,CAAC;IAE1C,MAAM,EAAE,QAAQ,EAAE,UAAU,EAAE,MAAM,EAAE,UAAU,EAAE,GAAG,IAAI,CAAC;IAE1D,MAAM,WAAW,GAAG,kBAAkB,CAAC,IAAI,CAAC,CAAC;IAE7C,MAAM,qBAAqB,GAAG,CAAC,UAAU,CAAC,qCAAqC,CAAC;QAC/E,CAAC,CAAC,CAAC,MAA0C,EAAW,EAAE,CAAC,MAAM,CAAC,IAAI,KAAK,WAAW;QACtF,CAAC,CAAC,GAAY,EAAE,CAAC,IAAI,CAAC;IAEvB,MAAM,SAAS,GAAG,uBAAuB,CAAC,iBAAiB,CAAC,CAAC;IAE7D,MAAM,kBAAkB,GAAG,kBAAkB,CAAC,CAAC,CAAC,EAAE,EAAE;QACnD,CAAC,CAAC,cAAc,EAAE,CAAC;QACnB,eAAe,CAAC,IAAI,CAAC;YACpB,SAAS,EAAE,eAAe;YAC1B,KAAK,EAAE,EAAE,UAAU,EAAE,MAAM,EAAE,cAAc,EAAE,UAAU,EAAE,OAAO,EAAE,eAAe,CAAC,KAAK,EAAE;SACzF,CAAC,CAAC;QACH,OAAO,EAAE,CAAC;IACX,CAAC,CAAC,CAAC;IAEH,MAAM,eAAe,GAAG,kBAAkB,CAAC,GAAG,EAAE;QAC/C,YAAY,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;QACtB,OAAO,EAAE,CAAC;IACX,CAAC,CAAC,CAAC;IAEH,MAAM,WAAW,GAAG,kBAAkB,CAAC,GAAG,EAAE;QAC3C,UAAU,CAAC,IAAI,EAAE,CAAC;QAClB,OAAO,CAAC,MAAM,EAAE,CAAC;QACjB,OAAO,EAAE,CAAC;IACX,CAAC,CAAC,CAAC;IAEH,MAAM,YAAY,GAAG,kBAAkB,CAAC,GAAG,EAAE;QAC5C,MAAM,EAAE,CAAC;QACT,OAAO,EAAE,CAAC;IACX,CAAC,CAAC,CAAC;IAEH,MAAM,eAAe,GAAG,gBAAgB,CAAC,QAAQ,CAAC,CAAC;IAEnD,OAAO,CACN,CAAC,GAAG,CAAC,OAAO,CAAC,MAAM,CAAC,aAAa,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,SAAS,CAAC,CAC7E;GAAA,CAAC,GAAG,CAAC,OAAO,CAAC,MAAM,CAAC,aAAa,CAAC,KAAK,CACtC;IAAA,CAAC,GAAG,CAAC,GAAG,CAAC,IAAI,CAAC,GAAG,CAAC,KAAK,CACtB;KAAA,CAAC,UAAU,CAAC,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,CAAC,QAAQ,IAAI,EAAE,CAAC,CAAC,IAAI,CAAC,CAAC,UAAU,CAAC,EACnE;IAAA,EAAE,GAAG,CACL;IAAA,CAAC,GAAG,CACH,GAAG,CAAC,IAAI,CACR,GAAG,CAAC,IAAI,CACR,OAAO,CAAC,MAAM,CACd,QAAQ,CAAC,QAAQ,CACjB,aAAa,CAAC,QAAQ,CACtB,SAAS,CAAC,IAAI,CACd,EAAE,CAAC,QAAQ,CACX,QAAQ,CAAC,CAAC,CAAC,CAAC,CACZ,UAAU,CAAC,CAAC,CAAC,CAAC,CAEd;KAAA,CAAC,GAAG,CAAC,iBAAiB,CAAC,CAAC,CAAC,MAAM,CAAC,OAAO,CAAC,MAAM,CAAC,UAAU,CAAC,QAAQ,CAAC,aAAa,CAAC,KAAK,CACrF;MAAA,CAAC,OAAO,CAAC,MAAM,CAAC,IAAI,CACnB;OAAA,CAAC,UAAU,CAAC,MAAM,CAAC,CAAC,MAAM,CAAC,EAC3B;OAAA,CAAC,GAAG,CAAC,EAAE,CAAC,MAAM,CAAC,iBAAiB,CAAC,OAAO,CAAC,cAAc,CACtD;QAAA,CAAC,WAAW,CACb;OAAA,EAAE,GAAG,CACN;MAAA,EAAE,OAAO,CACV;KAAA,EAAE,GAAG,CACL;KAAA,CAAC,GAAG,CAAC,KAAK,CAAC,MAAM,CAChB;MAAA,CAAC,YAAY,CACZ,iBAAiB,CACjB,UAAU,CAAC,CAAC,IAAI,CAAC,CACjB,OAAO,CAAC,CAAC,UAAU,IAAI,CAAC,CAAC,MAAM,IAAI,SAAS,CAAC,CAAC,CAC9C,OAAO,CAAC,qBAAqB,EAE/B;KAAA,EAAE,GAAG,CACN;IAAA,EAAE,GAAG,CACN;GAAA,EAAE,GAAG,CACL;GAAA,CAAC,MAAM,CAAC,OAAO,CAAC,AAAD,EACf;GAAA,CAAC,GAAG,CAAC,EAAE,CAAC,KAAK,CAAC,SAAS,CAAC,IAAI,CAAC,aAAa,CAAC,WAAW,CACrD;IAAA,CAAC,CAAC,CAAC,QAAQ,CAAC,CACb;GAAA,EAAE,GAAG,CACL;GAAA,CAAC,MAAM,CAAC,MAAM,CAAC,UAAU,CAAC,IAAI,CAAC;aAC7B,MAAM,CAAC,qBAAqB,CAAC;aAC7B,GAAG,CAAC,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;YAClB,MAAM,IAAI,GAAG,MAAM,CAAC,YAAY,CAAC,CAAC,CAAC,mBAAmB,CAAC,CAAC,EAAE,MAAM,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,IAAI,CAAC;YAChF,MAAM,QAAQ,GAAG,MAAM,CAAC,UAAU,IAAI,IAAI,CAAC,MAAM,CAAC;YAElD,OAAO,CACN,CAAC,MAAM,CACN,GAAG,CAAC,CAAC,CAAC,CAAC,CACP,OAAO,CAAC,CAAC,GAAS,EAAE;oBACnB,SAAS,CAAC,MAAM,CAAC,CAAC;oBAClB,OAAO,EAAE,CAAC;gBACX,CAAC,CAAC,CAEF;OAAA,CAAC,MAAM,CAAC,MAAM,CACb;QAAA,CAAC,UAAU,CAAC,MAAM,CAAC,CAAC,QAAQ,CAAC,EAC9B;OAAA,EAAE,MAAM,CAAC,MAAM,CACf;OAAA,CAAC,MAAM,CAAC,OAAO,CACd;QAAA,CAAC,YAAY,CAAC,OAAO,CAAC,CAAC,IAAI,CAAC,CAAC,UAAU,CAAC,CAAC,IAAI,CAAC,CAAC,OAAO,CAAC,QAAQ,EAChE;OAAA,EAAE,MAAM,CAAC,OAAO,CACjB;MAAA,EAAE,MAAM,CAAC,CACT,CAAC;QACH,CAAC,CAAC,CACH;GAAA,CAAC,MAAM,CAAC,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC,GAAG,CAAC,CAAC,eAAe,CAAC,KAAK,CAAC,CAAC,OAAO,CAAC,CAAC,kBAAkB,CAAC,CAAC,EAAE,MAAM,CAE7F;;GAAA,CAAC,CAAC,eAAe,CAAC,MAAM,IAAI,SAAS,CAAC,IAAI,CACzC,EACC;KAAA,CAAC,MAAM,CAAC,OAAO,CAAC,AAAD,EACf;KAAA,CAAC,SAAS,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,WAAW,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,gBAAgB,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,WAAW,CAAC,CAAC,EAAE,MAAM,CAAC,CACpG;KAAA,CAAC,eAAe,CAAC,GAAG,CAAC,CAAC,IAAI,EAAE,CAAC,EAAE,EAAE;gBAChC,MAAM,MAAM,GAAG,GAAS,EAAE;oBACzB,IAAI,IAAI,CAAC,IAAI,EAAE;wBACd,UAAU,CAAC,EAAE,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;wBACzB,OAAO,EAAE,CAAC;qBACV;oBACD,IAAI,IAAI,CAAC,OAAO,EAAE;wBACjB,OAAO,CAAC,OAAO,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;wBAC9B,OAAO,CAAC,QAAQ,EAAE,CAAC;wBACnB,OAAO,EAAE,CAAC;qBACV;gBACF,CAAC,CAAC;gBAEF,OAAO,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,IAAI,CAAC,IAAI,IAAI,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,MAAM,CAAC,CAAC;YACjI,CAAC,CAAC,CACH;IAAA,GAAG,CACH,CAED;;GAAA,CAAC,MAAM,CAAC,OAAO,CAAC,AAAD,EACf;GAAA,CAAC,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,YAAY,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,eAAe,CAAC,CAAC,EAAE,MAAM,CAC9E;GAAA,CAAC,MAAM,CAAC,IAAI,CAAC,UAAU,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,YAAY,CAAC,CAAC,EAAE,MAAM,CAC5E;EAAA,EAAE,GAAG,CAAC,CACN,CAAC;AACH,CAAC,CAAC;AAEF,eAAe,YAAY,CAAC","sourcesContent":["import { Box, Margins, Option } from '@rocket.chat/fuselage';\nimport { useMutableCallback } from '@rocket.chat/fuselage-hooks';\nimport { FlowRouter } from 'meteor/kadira:flow-router';\nimport React, { ReactElement } from 'react';\n\nimport { AccountBox, SideNav } from '../../../app/ui-utils/client';\nimport { userStatus } from '../../../app/user-status/client';\nimport { IUser } from '../../../definition/IUser';\nimport { UserStatus as UserStatusEnum } from '../../../definition/UserStatus';\nimport { ValueOf } from '../../../definition/utils';\nimport { callbacks } from '../../../lib/callbacks';\nimport MarkdownText from '../../components/MarkdownText';\nimport { UserStatus } from '../../components/UserStatus';\nimport UserAvatar from '../../components/avatar/UserAvatar';\nimport { useAtLeastOnePermission } from '../../contexts/AuthorizationContext';\nimport { useLayout } from '../../contexts/LayoutContext';\nimport { useRoute } from '../../contexts/RouterContext';\nimport { useSetting } from '../../contexts/SettingsContext';\nimport { useTranslation } from '../../contexts/TranslationContext';\nimport { useLogout } from '../../contexts/UserContext';\nimport { useReactiveValue } from '../../hooks/useReactiveValue';\nimport { useUserDisplayName } from '../../hooks/useUserDisplayName';\nimport { imperativeModal } from '../../lib/imperativeModal';\nimport EditStatusModal from './EditStatusModal';\n\nconst ADMIN_PERMISSIONS = [\n\t'view-logs',\n\t'manage-emoji',\n\t'manage-sounds',\n\t'view-statistics',\n\t'manage-oauth-apps',\n\t'view-privileged-setting',\n\t'manage-selected-settings',\n\t'view-room-administration',\n\t'view-user-administration',\n\t'access-setting-permissions',\n\t'manage-outgoing-integrations',\n\t'manage-incoming-integrations',\n\t'manage-own-outgoing-integrations',\n\t'manage-own-incoming-integrations',\n\t'view-engagement-dashboard',\n];\n\nconst isDefaultStatus = (id: string): boolean => (Object.values(UserStatusEnum) as string[]).includes(id);\n\nconst isDefaultStatusName = (_name: string, id: string): _name is UserStatusEnum => isDefaultStatus(id);\n\nconst setStatus = (status: typeof userStatus.list['']): void => {\n\tAccountBox.setStatus(status.statusType, !isDefaultStatus(status.id) ? status.name : '');\n\tcallbacks.run('userStatusManuallySet', status);\n};\n\nconst getItems = (): ReturnType<typeof AccountBox.getItems> => AccountBox.getItems();\n\nconst translateStatusName = (t: ReturnType<typeof useTranslation>, status: typeof userStatus.list['']): string => {\n\tif (isDefaultStatusName(status.name, status.id)) {\n\t\treturn t(status.name);\n\t}\n\n\treturn status.name;\n};\n\ntype UserDropdownProps = {\n\tuser: Pick<IUser, 'username' | 'name' | 'avatarETag' | 'status' | 'statusText'>;\n\tonClose: () => void;\n};\n\nconst UserDropdown = ({ user, onClose }: UserDropdownProps): ReactElement => {\n\tconst t = useTranslation();\n\tconst accountRoute = useRoute('account');\n\tconst adminRoute = useRoute('admin');\n\tconst logout = useLogout();\n\tconst { sidebar, isMobile } = useLayout();\n\n\tconst { username, avatarETag, status, statusText } = user;\n\n\tconst displayName = useUserDisplayName(user);\n\n\tconst filterInvisibleStatus = !useSetting('Accounts_AllowInvisibleStatusOption')\n\t\t? (status: ValueOf<typeof userStatus['list']>): boolean => status.name !== 'invisible'\n\t\t: (): boolean => true;\n\n\tconst showAdmin = useAtLeastOnePermission(ADMIN_PERMISSIONS);\n\n\tconst handleCustomStatus = useMutableCallback((e) => {\n\t\te.preventDefault();\n\t\timperativeModal.open({\n\t\t\tcomponent: EditStatusModal,\n\t\t\tprops: { userStatus: status, userStatusText: statusText, onClose: imperativeModal.close },\n\t\t});\n\t\tonClose();\n\t});\n\n\tconst handleMyAccount = useMutableCallback(() => {\n\t\taccountRoute.push({});\n\t\tonClose();\n\t});\n\n\tconst handleAdmin = useMutableCallback(() => {\n\t\tadminRoute.push();\n\t\tsidebar.toggle();\n\t\tonClose();\n\t});\n\n\tconst handleLogout = useMutableCallback(() => {\n\t\tlogout();\n\t\tonClose();\n\t});\n\n\tconst accountBoxItems = useReactiveValue(getItems);\n\n\treturn (\n\t\t<Box display='flex' flexDirection='column' w={!isMobile ? '244px' : undefined}>\n\t\t\t<Box display='flex' flexDirection='row'>\n\t\t\t\t<Box mie='x4' mis='x16'>\n\t\t\t\t\t<UserAvatar size='x36' username={username || ''} etag={avatarETag} />\n\t\t\t\t</Box>\n\t\t\t\t<Box\n\t\t\t\t\tmie='x8'\n\t\t\t\t\tmis='x4'\n\t\t\t\t\tdisplay='flex'\n\t\t\t\t\toverflow='hidden'\n\t\t\t\t\tflexDirection='column'\n\t\t\t\t\tfontScale='p2'\n\t\t\t\t\tmb='neg-x4'\n\t\t\t\t\tflexGrow={1}\n\t\t\t\t\tflexShrink={1}\n\t\t\t\t>\n\t\t\t\t\t<Box withTruncatedText w='full' display='flex' alignItems='center' flexDirection='row'>\n\t\t\t\t\t\t<Margins inline='x4'>\n\t\t\t\t\t\t\t<UserStatus status={status} />\n\t\t\t\t\t\t\t<Box is='span' withTruncatedText display='inline-block'>\n\t\t\t\t\t\t\t\t{displayName}\n\t\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t</Margins>\n\t\t\t\t\t</Box>\n\t\t\t\t\t<Box color='hint'>\n\t\t\t\t\t\t<MarkdownText\n\t\t\t\t\t\t\twithTruncatedText\n\t\t\t\t\t\t\tparseEmoji={true}\n\t\t\t\t\t\t\tcontent={statusText || t(status || 'offline')}\n\t\t\t\t\t\t\tvariant='inlineWithoutBreaks'\n\t\t\t\t\t\t/>\n\t\t\t\t\t</Box>\n\t\t\t\t</Box>\n\t\t\t</Box>\n\t\t\t<Option.Divider />\n\t\t\t<Box pi='x16' fontScale='c1' textTransform='uppercase'>\n\t\t\t\t{t('Status')}\n\t\t\t</Box>\n\t\t\t{Object.values(userStatus.list)\n\t\t\t\t.filter(filterInvisibleStatus)\n\t\t\t\t.map((status, i) => {\n\t\t\t\t\tconst name = status.localizeName ? translateStatusName(t, status) : status.name;\n\t\t\t\t\tconst modifier = status.statusType || user.status;\n\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<Option\n\t\t\t\t\t\t\tkey={i}\n\t\t\t\t\t\t\tonClick={(): void => {\n\t\t\t\t\t\t\t\tsetStatus(status);\n\t\t\t\t\t\t\t\tonClose();\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<Option.Column>\n\t\t\t\t\t\t\t\t<UserStatus status={modifier} />\n\t\t\t\t\t\t\t</Option.Column>\n\t\t\t\t\t\t\t<Option.Content>\n\t\t\t\t\t\t\t\t<MarkdownText content={name} parseEmoji={true} variant='inline' />\n\t\t\t\t\t\t\t</Option.Content>\n\t\t\t\t\t\t</Option>\n\t\t\t\t\t);\n\t\t\t\t})}\n\t\t\t<Option icon='emoji' label={`${t('Custom_Status')}...`} onClick={handleCustomStatus}></Option>\n\n\t\t\t{(accountBoxItems.length || showAdmin) && (\n\t\t\t\t<>\n\t\t\t\t\t<Option.Divider />\n\t\t\t\t\t{showAdmin && <Option icon={'customize'} label={t('Administration')} onClick={handleAdmin}></Option>}\n\t\t\t\t\t{accountBoxItems.map((item, i) => {\n\t\t\t\t\t\tconst action = (): void => {\n\t\t\t\t\t\t\tif (item.href) {\n\t\t\t\t\t\t\t\tFlowRouter.go(item.href);\n\t\t\t\t\t\t\t\tonClose();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (item.sideNav) {\n\t\t\t\t\t\t\t\tSideNav.setFlex(item.sideNav);\n\t\t\t\t\t\t\t\tSideNav.openFlex();\n\t\t\t\t\t\t\t\tonClose();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\treturn <Option icon={item.icon} label={t(item.name)} onClick={item.href || item.sideNav ? action : undefined} key={i}></Option>;\n\t\t\t\t\t})}\n\t\t\t\t</>\n\t\t\t)}\n\n\t\t\t<Option.Divider />\n\t\t\t<Option icon='user' label={t('My_Account')} onClick={handleMyAccount}></Option>\n\t\t\t<Option icon='sign-out' label={t('Logout')} onClick={handleLogout}></Option>\n\t\t</Box>\n\t);\n};\n\nexport default UserDropdown;\n"]},"targets":{"android":"95.0.0","chrome":"95.0.0","edge":"95.0.0","firefox":"78.0.0","ie":"10.0.0","ios":"15.0.0","opera":"81.0.0","safari":"15.1.0","samsung":"14.0.0"},"cloneInputAst":true,"browserslistConfigFile":false,"passPerPreset":false,"envName":"development","cwd":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat","root":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat","rootMode":"root","plugins":[{"key":"base$0","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0","visitor":{"Program":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true},"options":{"avoidModernSyntax":false,"enforceStrictMode":false,"dynamicImport":true,"generateLetDeclarations":true}},{"key":"transform-runtime","visitor":{"MemberExpression":{"enter":[null]},"ObjectPattern":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":{},"_verified":{},"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]}},"options":{"version":"7.16.5","helpers":true,"useESModules":false,"corejs":false}},{"key":"proposal-class-properties","visitor":{"PrivateName":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{"loose":true}},{"key":"transform-react-jsx","visitor":{"_exploded":{},"_verified":{},"JSXNamespacedName":{"enter":[null]},"JSXSpreadChild":{"enter":[null]},"Program":{"enter":[null]},"JSXElement":{"exit":[null]},"JSXFragment":{"exit":[null]},"JSXAttribute":{"enter":[null]}},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","runtime":"classic","throwIfNamespace":true,"useBuiltIns":false}},{"key":"transform-react-display-name","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-react-pure-annotations","visitor":{"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"syntax-nullish-coalescing-operator","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-nullish-coalescing-operator","visitor":{"_exploded":{},"_verified":{},"LogicalExpression":{"enter":[null]}},"options":{}},{"key":"syntax-optional-chaining","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-optional-chaining","visitor":{"_exploded":true,"OptionalCallExpression":{"enter":[null]},"OptionalMemberExpression":{"enter":[null]},"_verified":true},"options":{}},{"key":"syntax-optional-catch-binding","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-optional-catch-binding","visitor":{"_exploded":{},"_verified":{},"CatchClause":{"enter":[null]}},"options":{}},{"key":"syntax-class-properties","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-class-properties","visitor":{"PrivateName":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{}},{"key":"syntax-async-generators","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-async-generator-functions","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]}},"options":{}},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-object-rest-spread","visitor":{"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"proposal-logical-assignment-operators","visitor":{"_exploded":{},"_verified":{},"AssignmentExpression":{"enter":[null]}},"options":{}},{"key":"transform-literals","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-template-literals","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-parameters","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{}},{"key":"transform-exponentiation-operator","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}}],"presets":[],"generatorOpts":{"filename":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat/client/sidebar/header/UserDropdown.tsx","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"client/sidebar/header/UserDropdown.tsx"}},"code":"let Box, Margins, Option;\nmodule.link(\"@rocket.chat/fuselage\", {\n  Box(v) {\n    Box = v;\n  },\n\n  Margins(v) {\n    Margins = v;\n  },\n\n  Option(v) {\n    Option = v;\n  }\n\n}, 0);\nlet useMutableCallback;\nmodule.link(\"@rocket.chat/fuselage-hooks\", {\n  useMutableCallback(v) {\n    useMutableCallback = v;\n  }\n\n}, 1);\nlet FlowRouter;\nmodule.link(\"meteor/kadira:flow-router\", {\n  FlowRouter(v) {\n    FlowRouter = v;\n  }\n\n}, 2);\nlet React;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  }\n\n}, 3);\nlet AccountBox, SideNav;\nmodule.link(\"../../../app/ui-utils/client\", {\n  AccountBox(v) {\n    AccountBox = v;\n  },\n\n  SideNav(v) {\n    SideNav = v;\n  }\n\n}, 4);\nlet userStatus;\nmodule.link(\"../../../app/user-status/client\", {\n  userStatus(v) {\n    userStatus = v;\n  }\n\n}, 5);\nlet UserStatusEnum;\nmodule.link(\"../../../definition/UserStatus\", {\n  UserStatus(v) {\n    UserStatusEnum = v;\n  }\n\n}, 6);\nlet callbacks;\nmodule.link(\"../../../lib/callbacks\", {\n  callbacks(v) {\n    callbacks = v;\n  }\n\n}, 7);\nlet MarkdownText;\nmodule.link(\"../../components/MarkdownText\", {\n  default(v) {\n    MarkdownText = v;\n  }\n\n}, 8);\nlet UserStatus;\nmodule.link(\"../../components/UserStatus\", {\n  UserStatus(v) {\n    UserStatus = v;\n  }\n\n}, 9);\nlet UserAvatar;\nmodule.link(\"../../components/avatar/UserAvatar\", {\n  default(v) {\n    UserAvatar = v;\n  }\n\n}, 10);\nlet useAtLeastOnePermission;\nmodule.link(\"../../contexts/AuthorizationContext\", {\n  useAtLeastOnePermission(v) {\n    useAtLeastOnePermission = v;\n  }\n\n}, 11);\nlet useLayout;\nmodule.link(\"../../contexts/LayoutContext\", {\n  useLayout(v) {\n    useLayout = v;\n  }\n\n}, 12);\nlet useRoute;\nmodule.link(\"../../contexts/RouterContext\", {\n  useRoute(v) {\n    useRoute = v;\n  }\n\n}, 13);\nlet useSetting;\nmodule.link(\"../../contexts/SettingsContext\", {\n  useSetting(v) {\n    useSetting = v;\n  }\n\n}, 14);\nlet useTranslation;\nmodule.link(\"../../contexts/TranslationContext\", {\n  useTranslation(v) {\n    useTranslation = v;\n  }\n\n}, 15);\nlet useLogout;\nmodule.link(\"../../contexts/UserContext\", {\n  useLogout(v) {\n    useLogout = v;\n  }\n\n}, 16);\nlet useReactiveValue;\nmodule.link(\"../../hooks/useReactiveValue\", {\n  useReactiveValue(v) {\n    useReactiveValue = v;\n  }\n\n}, 17);\nlet useUserDisplayName;\nmodule.link(\"../../hooks/useUserDisplayName\", {\n  useUserDisplayName(v) {\n    useUserDisplayName = v;\n  }\n\n}, 18);\nlet imperativeModal;\nmodule.link(\"../../lib/imperativeModal\", {\n  imperativeModal(v) {\n    imperativeModal = v;\n  }\n\n}, 19);\nlet EditStatusModal;\nmodule.link(\"./EditStatusModal\", {\n  default(v) {\n    EditStatusModal = v;\n  }\n\n}, 20);\nconst ADMIN_PERMISSIONS = ['view-logs', 'manage-emoji', 'manage-sounds', 'view-statistics', 'manage-oauth-apps', 'view-privileged-setting', 'manage-selected-settings', 'view-room-administration', 'view-user-administration', 'access-setting-permissions', 'manage-outgoing-integrations', 'manage-incoming-integrations', 'manage-own-outgoing-integrations', 'manage-own-incoming-integrations', 'view-engagement-dashboard'];\n\nconst isDefaultStatus = id => Object.values(UserStatusEnum).includes(id);\n\nconst isDefaultStatusName = (_name, id) => isDefaultStatus(id);\n\nconst setStatus = status => {\n  AccountBox.setStatus(status.statusType, !isDefaultStatus(status.id) ? status.name : '');\n  callbacks.run('userStatusManuallySet', status);\n};\n\nconst getItems = () => AccountBox.getItems();\n\nconst translateStatusName = (t, status) => {\n  if (isDefaultStatusName(status.name, status.id)) {\n    return t(status.name);\n  }\n\n  return status.name;\n};\n\nconst UserDropdown = _ref => {\n  let {\n    user,\n    onClose\n  } = _ref;\n  const t = useTranslation();\n  const accountRoute = useRoute('account');\n  const adminRoute = useRoute('admin');\n  const logout = useLogout();\n  const {\n    sidebar,\n    isMobile\n  } = useLayout();\n  const {\n    username,\n    avatarETag,\n    status,\n    statusText\n  } = user;\n  const displayName = useUserDisplayName(user);\n  const filterInvisibleStatus = !useSetting('Accounts_AllowInvisibleStatusOption') ? status => status.name !== 'invisible' : () => true;\n  const showAdmin = useAtLeastOnePermission(ADMIN_PERMISSIONS);\n  const handleCustomStatus = useMutableCallback(e => {\n    e.preventDefault();\n    imperativeModal.open({\n      component: EditStatusModal,\n      props: {\n        userStatus: status,\n        userStatusText: statusText,\n        onClose: imperativeModal.close\n      }\n    });\n    onClose();\n  });\n  const handleMyAccount = useMutableCallback(() => {\n    accountRoute.push({});\n    onClose();\n  });\n  const handleAdmin = useMutableCallback(() => {\n    adminRoute.push();\n    sidebar.toggle();\n    onClose();\n  });\n  const handleLogout = useMutableCallback(() => {\n    logout();\n    onClose();\n  });\n  const accountBoxItems = useReactiveValue(getItems);\n  return /*#__PURE__*/React.createElement(Box, {\n    display: \"flex\",\n    flexDirection: \"column\",\n    w: !isMobile ? '244px' : undefined\n  }, /*#__PURE__*/React.createElement(Box, {\n    display: \"flex\",\n    flexDirection: \"row\"\n  }, /*#__PURE__*/React.createElement(Box, {\n    mie: \"x4\",\n    mis: \"x16\"\n  }, /*#__PURE__*/React.createElement(UserAvatar, {\n    size: \"x36\",\n    username: username || '',\n    etag: avatarETag\n  })), /*#__PURE__*/React.createElement(Box, {\n    mie: \"x8\",\n    mis: \"x4\",\n    display: \"flex\",\n    overflow: \"hidden\",\n    flexDirection: \"column\",\n    fontScale: \"p2\",\n    mb: \"neg-x4\",\n    flexGrow: 1,\n    flexShrink: 1\n  }, /*#__PURE__*/React.createElement(Box, {\n    withTruncatedText: true,\n    w: \"full\",\n    display: \"flex\",\n    alignItems: \"center\",\n    flexDirection: \"row\"\n  }, /*#__PURE__*/React.createElement(Margins, {\n    inline: \"x4\"\n  }, /*#__PURE__*/React.createElement(UserStatus, {\n    status: status\n  }), /*#__PURE__*/React.createElement(Box, {\n    is: \"span\",\n    withTruncatedText: true,\n    display: \"inline-block\"\n  }, displayName))), /*#__PURE__*/React.createElement(Box, {\n    color: \"hint\"\n  }, /*#__PURE__*/React.createElement(MarkdownText, {\n    withTruncatedText: true,\n    parseEmoji: true,\n    content: statusText || t(status || 'offline'),\n    variant: \"inlineWithoutBreaks\"\n  })))), /*#__PURE__*/React.createElement(Option.Divider, null), /*#__PURE__*/React.createElement(Box, {\n    pi: \"x16\",\n    fontScale: \"c1\",\n    textTransform: \"uppercase\"\n  }, t('Status')), Object.values(userStatus.list).filter(filterInvisibleStatus).map((status, i) => {\n    const name = status.localizeName ? translateStatusName(t, status) : status.name;\n    const modifier = status.statusType || user.status;\n    return /*#__PURE__*/React.createElement(Option, {\n      key: i,\n      onClick: () => {\n        setStatus(status);\n        onClose();\n      }\n    }, /*#__PURE__*/React.createElement(Option.Column, null, /*#__PURE__*/React.createElement(UserStatus, {\n      status: modifier\n    })), /*#__PURE__*/React.createElement(Option.Content, null, /*#__PURE__*/React.createElement(MarkdownText, {\n      content: name,\n      parseEmoji: true,\n      variant: \"inline\"\n    })));\n  }), /*#__PURE__*/React.createElement(Option, {\n    icon: \"emoji\",\n    label: \"\".concat(t('Custom_Status'), \"...\"),\n    onClick: handleCustomStatus\n  }), (accountBoxItems.length || showAdmin) && /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Option.Divider, null), showAdmin && /*#__PURE__*/React.createElement(Option, {\n    icon: 'customize',\n    label: t('Administration'),\n    onClick: handleAdmin\n  }), accountBoxItems.map((item, i) => {\n    const action = () => {\n      if (item.href) {\n        FlowRouter.go(item.href);\n        onClose();\n      }\n\n      if (item.sideNav) {\n        SideNav.setFlex(item.sideNav);\n        SideNav.openFlex();\n        onClose();\n      }\n    };\n\n    return /*#__PURE__*/React.createElement(Option, {\n      icon: item.icon,\n      label: t(item.name),\n      onClick: item.href || item.sideNav ? action : undefined,\n      key: i\n    });\n  })), /*#__PURE__*/React.createElement(Option.Divider, null), /*#__PURE__*/React.createElement(Option, {\n    icon: \"user\",\n    label: t('My_Account'),\n    onClick: handleMyAccount\n  }), /*#__PURE__*/React.createElement(Option, {\n    icon: \"sign-out\",\n    label: t('Logout'),\n    onClick: handleLogout\n  }));\n};\n\nmodule.exportDefault(UserDropdown);","map":{"version":3,"sources":["client/sidebar/header/UserDropdown.tsx"],"names":[],"mappings":"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","sourcesContent":["import { Box, Margins, Option } from '@rocket.chat/fuselage';\nimport { useMutableCallback } from '@rocket.chat/fuselage-hooks';\nimport { FlowRouter } from 'meteor/kadira:flow-router';\nimport React, { ReactElement } from 'react';\n\nimport { AccountBox, SideNav } from '../../../app/ui-utils/client';\nimport { userStatus } from '../../../app/user-status/client';\nimport { IUser } from '../../../definition/IUser';\nimport { UserStatus as UserStatusEnum } from '../../../definition/UserStatus';\nimport { ValueOf } from '../../../definition/utils';\nimport { callbacks } from '../../../lib/callbacks';\nimport MarkdownText from '../../components/MarkdownText';\nimport { UserStatus } from '../../components/UserStatus';\nimport UserAvatar from '../../components/avatar/UserAvatar';\nimport { useAtLeastOnePermission } from '../../contexts/AuthorizationContext';\nimport { useLayout } from '../../contexts/LayoutContext';\nimport { useRoute } from '../../contexts/RouterContext';\nimport { useSetting } from '../../contexts/SettingsContext';\nimport { useTranslation } from '../../contexts/TranslationContext';\nimport { useLogout } from '../../contexts/UserContext';\nimport { useReactiveValue } from '../../hooks/useReactiveValue';\nimport { useUserDisplayName } from '../../hooks/useUserDisplayName';\nimport { imperativeModal } from '../../lib/imperativeModal';\nimport EditStatusModal from './EditStatusModal';\n\nconst ADMIN_PERMISSIONS = [\n\t'view-logs',\n\t'manage-emoji',\n\t'manage-sounds',\n\t'view-statistics',\n\t'manage-oauth-apps',\n\t'view-privileged-setting',\n\t'manage-selected-settings',\n\t'view-room-administration',\n\t'view-user-administration',\n\t'access-setting-permissions',\n\t'manage-outgoing-integrations',\n\t'manage-incoming-integrations',\n\t'manage-own-outgoing-integrations',\n\t'manage-own-incoming-integrations',\n\t'view-engagement-dashboard',\n];\n\nconst isDefaultStatus = (id: string): boolean => (Object.values(UserStatusEnum) as string[]).includes(id);\n\nconst isDefaultStatusName = (_name: string, id: string): _name is UserStatusEnum => isDefaultStatus(id);\n\nconst setStatus = (status: typeof userStatus.list['']): void => {\n\tAccountBox.setStatus(status.statusType, !isDefaultStatus(status.id) ? status.name : '');\n\tcallbacks.run('userStatusManuallySet', status);\n};\n\nconst getItems = (): ReturnType<typeof AccountBox.getItems> => AccountBox.getItems();\n\nconst translateStatusName = (t: ReturnType<typeof useTranslation>, status: typeof userStatus.list['']): string => {\n\tif (isDefaultStatusName(status.name, status.id)) {\n\t\treturn t(status.name);\n\t}\n\n\treturn status.name;\n};\n\ntype UserDropdownProps = {\n\tuser: Pick<IUser, 'username' | 'name' | 'avatarETag' | 'status' | 'statusText'>;\n\tonClose: () => void;\n};\n\nconst UserDropdown = ({ user, onClose }: UserDropdownProps): ReactElement => {\n\tconst t = useTranslation();\n\tconst accountRoute = useRoute('account');\n\tconst adminRoute = useRoute('admin');\n\tconst logout = useLogout();\n\tconst { sidebar, isMobile } = useLayout();\n\n\tconst { username, avatarETag, status, statusText } = user;\n\n\tconst displayName = useUserDisplayName(user);\n\n\tconst filterInvisibleStatus = !useSetting('Accounts_AllowInvisibleStatusOption')\n\t\t? (status: ValueOf<typeof userStatus['list']>): boolean => status.name !== 'invisible'\n\t\t: (): boolean => true;\n\n\tconst showAdmin = useAtLeastOnePermission(ADMIN_PERMISSIONS);\n\n\tconst handleCustomStatus = useMutableCallback((e) => {\n\t\te.preventDefault();\n\t\timperativeModal.open({\n\t\t\tcomponent: EditStatusModal,\n\t\t\tprops: { userStatus: status, userStatusText: statusText, onClose: imperativeModal.close },\n\t\t});\n\t\tonClose();\n\t});\n\n\tconst handleMyAccount = useMutableCallback(() => {\n\t\taccountRoute.push({});\n\t\tonClose();\n\t});\n\n\tconst handleAdmin = useMutableCallback(() => {\n\t\tadminRoute.push();\n\t\tsidebar.toggle();\n\t\tonClose();\n\t});\n\n\tconst handleLogout = useMutableCallback(() => {\n\t\tlogout();\n\t\tonClose();\n\t});\n\n\tconst accountBoxItems = useReactiveValue(getItems);\n\n\treturn (\n\t\t<Box display='flex' flexDirection='column' w={!isMobile ? '244px' : undefined}>\n\t\t\t<Box display='flex' flexDirection='row'>\n\t\t\t\t<Box mie='x4' mis='x16'>\n\t\t\t\t\t<UserAvatar size='x36' username={username || ''} etag={avatarETag} />\n\t\t\t\t</Box>\n\t\t\t\t<Box\n\t\t\t\t\tmie='x8'\n\t\t\t\t\tmis='x4'\n\t\t\t\t\tdisplay='flex'\n\t\t\t\t\toverflow='hidden'\n\t\t\t\t\tflexDirection='column'\n\t\t\t\t\tfontScale='p2'\n\t\t\t\t\tmb='neg-x4'\n\t\t\t\t\tflexGrow={1}\n\t\t\t\t\tflexShrink={1}\n\t\t\t\t>\n\t\t\t\t\t<Box withTruncatedText w='full' display='flex' alignItems='center' flexDirection='row'>\n\t\t\t\t\t\t<Margins inline='x4'>\n\t\t\t\t\t\t\t<UserStatus status={status} />\n\t\t\t\t\t\t\t<Box is='span' withTruncatedText display='inline-block'>\n\t\t\t\t\t\t\t\t{displayName}\n\t\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t</Margins>\n\t\t\t\t\t</Box>\n\t\t\t\t\t<Box color='hint'>\n\t\t\t\t\t\t<MarkdownText\n\t\t\t\t\t\t\twithTruncatedText\n\t\t\t\t\t\t\tparseEmoji={true}\n\t\t\t\t\t\t\tcontent={statusText || t(status || 'offline')}\n\t\t\t\t\t\t\tvariant='inlineWithoutBreaks'\n\t\t\t\t\t\t/>\n\t\t\t\t\t</Box>\n\t\t\t\t</Box>\n\t\t\t</Box>\n\t\t\t<Option.Divider />\n\t\t\t<Box pi='x16' fontScale='c1' textTransform='uppercase'>\n\t\t\t\t{t('Status')}\n\t\t\t</Box>\n\t\t\t{Object.values(userStatus.list)\n\t\t\t\t.filter(filterInvisibleStatus)\n\t\t\t\t.map((status, i) => {\n\t\t\t\t\tconst name = status.localizeName ? translateStatusName(t, status) : status.name;\n\t\t\t\t\tconst modifier = status.statusType || user.status;\n\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<Option\n\t\t\t\t\t\t\tkey={i}\n\t\t\t\t\t\t\tonClick={(): void => {\n\t\t\t\t\t\t\t\tsetStatus(status);\n\t\t\t\t\t\t\t\tonClose();\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<Option.Column>\n\t\t\t\t\t\t\t\t<UserStatus status={modifier} />\n\t\t\t\t\t\t\t</Option.Column>\n\t\t\t\t\t\t\t<Option.Content>\n\t\t\t\t\t\t\t\t<MarkdownText content={name} parseEmoji={true} variant='inline' />\n\t\t\t\t\t\t\t</Option.Content>\n\t\t\t\t\t\t</Option>\n\t\t\t\t\t);\n\t\t\t\t})}\n\t\t\t<Option icon='emoji' label={`${t('Custom_Status')}...`} onClick={handleCustomStatus}></Option>\n\n\t\t\t{(accountBoxItems.length || showAdmin) && (\n\t\t\t\t<>\n\t\t\t\t\t<Option.Divider />\n\t\t\t\t\t{showAdmin && <Option icon={'customize'} label={t('Administration')} onClick={handleAdmin}></Option>}\n\t\t\t\t\t{accountBoxItems.map((item, i) => {\n\t\t\t\t\t\tconst action = (): void => {\n\t\t\t\t\t\t\tif (item.href) {\n\t\t\t\t\t\t\t\tFlowRouter.go(item.href);\n\t\t\t\t\t\t\t\tonClose();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (item.sideNav) {\n\t\t\t\t\t\t\t\tSideNav.setFlex(item.sideNav);\n\t\t\t\t\t\t\t\tSideNav.openFlex();\n\t\t\t\t\t\t\t\tonClose();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\treturn <Option icon={item.icon} label={t(item.name)} onClick={item.href || item.sideNav ? action : undefined} key={i}></Option>;\n\t\t\t\t\t})}\n\t\t\t\t</>\n\t\t\t)}\n\n\t\t\t<Option.Divider />\n\t\t\t<Option icon='user' label={t('My_Account')} onClick={handleMyAccount}></Option>\n\t\t\t<Option icon='sign-out' label={t('Logout')} onClick={handleLogout}></Option>\n\t\t</Box>\n\t);\n};\n\nexport default UserDropdown;\n"],"sourceRoot":""},"sourceType":"module","hash":"303a17debe6a5311d440f633047653cd123b3d50"}
