{"metadata":{},"options":{"assumptions":{},"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat/client/startup/routes.tsx","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","classProperties","classPrivateProperties","jsx","nullishCoalescingOperator","nullishCoalescingOperator","optionalChaining","optionalCatchBinding","optionalCatchBinding","classProperties","classPrivateProperties","classPrivateMethods","classProperties","classPrivateProperties","asyncGenerators","asyncGenerators","objectRestSpread","logicalAssignment"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"allowUndeclaredExports":true,"strictMode":false},"caller":{"name":"meteor","arch":"web.browser.legacy"},"sourceFileName":"client/startup/routes.tsx","filename":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat/client/startup/routes.tsx","inputSourceMap":{"version":3,"file":"client/startup/routes.tsx","sourceRoot":"","sources":["client/startup/routes.tsx"],"names":[],"mappings":"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","sourcesContent":["import { Accounts } from 'meteor/accounts-base';\nimport { FlowRouter } from 'meteor/kadira:flow-router';\nimport { Meteor } from 'meteor/meteor';\nimport { TAPi18n } from 'meteor/rocketchat:tap-i18n';\nimport { Session } from 'meteor/session';\nimport { Tracker } from 'meteor/tracker';\nimport React, { lazy } from 'react';\nimport toastr from 'toastr';\n\nimport { KonchatNotification } from '../../app/ui/client';\nimport { APIClient } from '../../app/utils/client';\nimport { IUser } from '../../definition/IUser';\nimport { appLayout } from '../lib/appLayout';\nimport { createTemplateForComponent } from '../lib/portals/createTemplateForComponent';\nimport { dispatchToastMessage } from '../lib/toast';\nimport { handleError } from '../lib/utils/handleError';\n\nconst InvitePage = lazy(() => import('../views/invite/InvitePage'));\nconst SecretURLPage = lazy(() => import('../views/invite/SecretURLPage'));\nconst CMSPage = lazy(() => import('../views/root/CMSPage'));\nconst ResetPasswordPage = lazy(() => import('../views/login/ResetPassword/ResetPassword'));\nconst SetupWizardRoute = lazy(() => import('../views/setupWizard/SetupWizardRoute'));\nconst MailerUnsubscriptionPage = lazy(() => import('../views/mailer/MailerUnsubscriptionPage'));\nconst NotFoundPage = lazy(() => import('../views/notFound/NotFoundPage'));\nconst MeetPage = lazy(() => import('../views/meet/MeetPage'));\n\nFlowRouter.wait();\n\nFlowRouter.route('/', {\n\tname: 'index',\n\taction() {\n\t\tappLayout.renderMainLayout({ center: 'loading' });\n\t\tif (!Meteor.userId()) {\n\t\t\treturn FlowRouter.go('home');\n\t\t}\n\n\t\tTracker.autorun((c) => {\n\t\t\tif (FlowRouter.subsReady() === true) {\n\t\t\t\tMeteor.defer(() => {\n\t\t\t\t\tconst user = Meteor.user() as IUser | null;\n\t\t\t\t\tif (user?.defaultRoom) {\n\t\t\t\t\t\tconst room = user.defaultRoom.split('/');\n\t\t\t\t\t\tFlowRouter.go(room[0], { name: room[1] }, FlowRouter.current().queryParams);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tFlowRouter.go('home');\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tc.stop();\n\t\t\t}\n\t\t});\n\t},\n});\n\nFlowRouter.route('/login', {\n\tname: 'login',\n\n\taction() {\n\t\tFlowRouter.go('home');\n\t},\n});\n\nFlowRouter.route('/meet/:rid', {\n\tname: 'meet',\n\n\tasync action(_params, queryParams) {\n\t\tif (queryParams?.token !== undefined) {\n\t\t\t// visitor login\n\t\t\tconst visitor = await APIClient.v1.get(`livechat/visitor/${queryParams?.token}`);\n\t\t\tif (visitor?.visitor) {\n\t\t\t\tappLayout.render(<MeetPage />);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\ttoastr.error(TAPi18n.__('Visitor_does_not_exist'));\n\t\t\treturn;\n\t\t}\n\n\t\tif (!Meteor.userId()) {\n\t\t\tFlowRouter.go('home');\n\t\t\treturn;\n\t\t}\n\n\t\tappLayout.render(<MeetPage />);\n\t},\n});\n\nFlowRouter.route('/home', {\n\tname: 'home',\n\n\taction(_params, queryParams) {\n\t\tKonchatNotification.getDesktopPermission();\n\t\tif (queryParams?.saml_idp_credentialToken !== undefined) {\n\t\t\tconst token = queryParams.saml_idp_credentialToken;\n\t\t\tFlowRouter.setQueryParams({\n\t\t\t\t// eslint-disable-next-line @typescript-eslint/camelcase\n\t\t\t\tsaml_idp_credentialToken: null,\n\t\t\t});\n\t\t\t(Meteor as any).loginWithSamlToken(token, (error?: any) => {\n\t\t\t\tif (error) {\n\t\t\t\t\tif (error.reason) {\n\t\t\t\t\t\tdispatchToastMessage({ type: 'error', message: error.reason });\n\t\t\t\t\t} else {\n\t\t\t\t\t\thandleError(error);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tappLayout.renderMainLayout({ center: 'home' });\n\t\t\t});\n\n\t\t\treturn;\n\t\t}\n\n\t\tappLayout.renderMainLayout({ center: 'home' });\n\t},\n});\n\nFlowRouter.route('/directory/:tab?', {\n\tname: 'directory',\n\taction: () => {\n\t\tconst DirectoryPage = createTemplateForComponent('DirectoryPage', () => import('../views/directory/DirectoryPage'), {\n\t\t\tattachment: 'at-parent',\n\t\t});\n\t\tappLayout.renderMainLayout({ center: DirectoryPage });\n\t},\n});\n\nFlowRouter.route('/omnichannel-directory/:page?/:bar?/:id?/:tab?/:context?', {\n\tname: 'omnichannel-directory',\n\taction: () => {\n\t\tconst OmnichannelDirectoryPage = createTemplateForComponent(\n\t\t\t'OmnichannelDirectoryPage',\n\t\t\t() => import('../views/omnichannel/directory/OmnichannelDirectoryPage'),\n\t\t\t{ attachment: 'at-parent' },\n\t\t);\n\t\tappLayout.renderMainLayout({ center: OmnichannelDirectoryPage });\n\t},\n});\n\nFlowRouter.route('/livechat-queue', {\n\tname: 'livechat-queue',\n\taction: () => {\n\t\tconst OmnichannelQueueList = createTemplateForComponent('QueueList', () => import('../views/omnichannel/queueList'), {\n\t\t\tattachment: 'at-parent',\n\t\t});\n\t\tappLayout.renderMainLayout({ center: OmnichannelQueueList });\n\t},\n});\n\nFlowRouter.route('/account/:group?', {\n\tname: 'account',\n\taction: () => {\n\t\tconst AccountRoute = createTemplateForComponent('AccountRoute', () => import('../views/account/AccountRoute'), {\n\t\t\tattachment: 'at-parent',\n\t\t});\n\t\tappLayout.renderMainLayout({ center: AccountRoute });\n\t},\n});\n\nFlowRouter.route('/terms-of-service', {\n\tname: 'terms-of-service',\n\taction: () => {\n\t\tappLayout.render(<CMSPage page='Layout_Terms_of_Service' />);\n\t},\n});\n\nFlowRouter.route('/privacy-policy', {\n\tname: 'privacy-policy',\n\taction: () => {\n\t\tappLayout.render(<CMSPage page='Layout_Privacy_Policy' />);\n\t},\n});\n\nFlowRouter.route('/legal-notice', {\n\tname: 'legal-notice',\n\taction: () => {\n\t\tappLayout.render(<CMSPage page='Layout_Legal_Notice' />);\n\t},\n});\n\nFlowRouter.route('/room-not-found/:type/:name', {\n\tname: 'room-not-found',\n\taction: ({ type, name } = {}) => {\n\t\tSession.set('roomNotFound', { type, name });\n\t\tappLayout.renderMainLayout({ center: 'roomNotFound' });\n\t},\n});\n\nFlowRouter.route('/register/:hash', {\n\tname: 'register-secret-url',\n\taction: () => {\n\t\tappLayout.render(<SecretURLPage />);\n\t},\n});\n\nFlowRouter.route('/invite/:hash', {\n\tname: 'invite',\n\taction: () => {\n\t\tappLayout.render(<InvitePage />);\n\t},\n});\n\nFlowRouter.route('/setup-wizard/:step?', {\n\tname: 'setup-wizard',\n\taction: () => {\n\t\tappLayout.render(<SetupWizardRoute />);\n\t},\n});\n\nFlowRouter.route('/mailer/unsubscribe/:_id/:createdAt', {\n\tname: 'mailer-unsubscribe',\n\taction: () => {\n\t\tappLayout.render(<MailerUnsubscriptionPage />);\n\t},\n});\n\nFlowRouter.route('/login-token/:token', {\n\tname: 'tokenLogin',\n\taction(params) {\n\t\tAccounts.callLoginMethod({\n\t\t\tmethodArguments: [\n\t\t\t\t{\n\t\t\t\t\tloginToken: params?.token,\n\t\t\t\t},\n\t\t\t],\n\t\t\tuserCallback(error) {\n\t\t\t\tconsole.error(error);\n\t\t\t\tFlowRouter.go('/');\n\t\t\t},\n\t\t});\n\t},\n});\n\nFlowRouter.route('/reset-password/:token', {\n\tname: 'resetPassword',\n\taction() {\n\t\tappLayout.render(<ResetPasswordPage />);\n\t},\n});\n\nFlowRouter.route('/snippet/:snippetId/:snippetName', {\n\tname: 'snippetView',\n\taction() {\n\t\tappLayout.renderMainLayout({ center: 'snippetPage' });\n\t},\n});\n\nFlowRouter.route('/oauth/authorize', {\n\tname: 'oauth/authorize',\n\taction(_params, queryParams) {\n\t\tappLayout.renderMainLayout({\n\t\t\tcenter: 'authorize',\n\t\t\tmodal: true,\n\t\t\t// eslint-disable-next-line @typescript-eslint/camelcase\n\t\t\tclient_id: queryParams?.client_id,\n\t\t\t// eslint-disable-next-line @typescript-eslint/camelcase\n\t\t\tredirect_uri: queryParams?.redirect_uri,\n\t\t\t// eslint-disable-next-line @typescript-eslint/camelcase\n\t\t\tresponse_type: queryParams?.response_type,\n\t\t\tstate: queryParams?.state,\n\t\t});\n\t},\n});\n\nFlowRouter.route('/oauth/error/:error', {\n\tname: 'oauth/error',\n\taction(params) {\n\t\tappLayout.renderMainLayout({\n\t\t\tcenter: 'oauth404',\n\t\t\tmodal: true,\n\t\t\terror: params?.error,\n\t\t});\n\t},\n});\n\nFlowRouter.notFound = {\n\taction: (): void => {\n\t\tappLayout.render(<NotFoundPage />);\n\t},\n};\n\nMeteor.startup(() => {\n\tFlowRouter.initialize();\n});\n"]},"targets":{"android":"95.0.0","chrome":"95.0.0","edge":"95.0.0","firefox":"78.0.0","ie":"10.0.0","ios":"15.0.0","opera":"81.0.0","safari":"15.1.0","samsung":"14.0.0"},"cloneInputAst":true,"browserslistConfigFile":false,"passPerPreset":false,"envName":"development","cwd":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat","root":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat","rootMode":"root","plugins":[{"key":"base$0","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0","visitor":{"Program":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true},"options":{"avoidModernSyntax":true,"enforceStrictMode":false,"dynamicImport":true}},{"key":"transform-runtime","visitor":{"MemberExpression":{"enter":[null]},"ObjectPattern":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":{},"_verified":{},"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]}},"options":{"version":"7.16.5","helpers":true,"useESModules":false,"corejs":false}},{"key":"proposal-class-properties","visitor":{"PrivateName":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{"loose":true}},{"key":"base$0$3","visitor":{"FunctionExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$4","visitor":{"ForInStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-react-jsx","visitor":{"_exploded":{},"_verified":{},"JSXNamespacedName":{"enter":[null]},"JSXSpreadChild":{"enter":[null]},"Program":{"enter":[null]},"JSXElement":{"exit":[null]},"JSXFragment":{"exit":[null]},"JSXAttribute":{"enter":[null]}},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","runtime":"classic","throwIfNamespace":true,"useBuiltIns":false}},{"key":"transform-react-display-name","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-react-pure-annotations","visitor":{"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"syntax-nullish-coalescing-operator","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-nullish-coalescing-operator","visitor":{"_exploded":{},"_verified":{},"LogicalExpression":{"enter":[null]}},"options":{}},{"key":"syntax-optional-chaining","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-optional-chaining","visitor":{"_exploded":true,"OptionalCallExpression":{"enter":[null]},"OptionalMemberExpression":{"enter":[null]},"_verified":true},"options":{}},{"key":"syntax-optional-catch-binding","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-optional-catch-binding","visitor":{"_exploded":{},"_verified":{},"CatchClause":{"enter":[null]}},"options":{}},{"key":"syntax-class-properties","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-class-properties","visitor":{"PrivateName":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{}},{"key":"syntax-async-generators","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-async-generator-functions","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]}},"options":{}},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-object-rest-spread","visitor":{"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"proposal-logical-assignment-operators","visitor":{"_exploded":{},"_verified":{},"AssignmentExpression":{"enter":[null]}},"options":{}},{"key":"transform-arrow-functions","visitor":{"ArrowFunctionExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-block-scoped-functions","visitor":{"BlockStatement":{"enter":[null]},"SwitchCase":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-block-scoping","visitor":{"VariableDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"_exploded":true,"BlockStatement":{"enter":[null]},"SwitchStatement":{"enter":[null]},"Program":{"enter":[null]},"_verified":true,"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"transform-classes","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-computed-properties","visitor":{"ObjectExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-destructuring","visitor":{"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"VariableDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"transform-for-of","visitor":{"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-literals","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-object-super","visitor":{"ObjectExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-parameters","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{}},{"key":"transform-shorthand-properties","visitor":{"ObjectMethod":{"enter":[null]},"ObjectProperty":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-spread","visitor":{"ArrayExpression":{"enter":[null]},"CallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-sticky-regex","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-template-literals","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-typeof-symbol","visitor":{"UnaryExpression":{"enter":[null]},"_exploded":true,"_verified":true,"BlockStatement":{"enter":[null]},"CatchClause":{"enter":[null]},"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"Program":{"enter":[null]},"ObjectMethod":{"enter":[null]},"SwitchStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ForOfStatement":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"StaticBlock":{"enter":[null]},"TSModuleBlock":{"enter":[null]},"AssignmentPattern":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectPattern":{"enter":[null]}},"options":{}},{"key":"transform-unicode-regex","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-property-literals","visitor":{"ObjectProperty":{"exit":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-exponentiation-operator","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"regenerator-transform","visitor":{"_exploded":true,"_verified":true,"ObjectMethod":{"enter":[null],"exit":[null]},"ClassMethod":{"enter":[null],"exit":[null]},"ClassPrivateMethod":{"enter":[null],"exit":[null]},"FunctionDeclaration":{"exit":[null]},"FunctionExpression":{"exit":[null]},"ArrowFunctionExpression":{"exit":[null]}},"options":{}}],"presets":[],"generatorOpts":{"filename":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat/client/startup/routes.tsx","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"client/startup/routes.tsx"}},"code":"var _regeneratorRuntime;\n\nmodule.link(\"@babel/runtime/regenerator\", {\n  default: function (v) {\n    _regeneratorRuntime = v;\n  }\n}, 0);\nvar Accounts;\nmodule.link(\"meteor/accounts-base\", {\n  Accounts: function (v) {\n    Accounts = v;\n  }\n}, 0);\nvar FlowRouter;\nmodule.link(\"meteor/kadira:flow-router\", {\n  FlowRouter: function (v) {\n    FlowRouter = v;\n  }\n}, 1);\nvar Meteor;\nmodule.link(\"meteor/meteor\", {\n  Meteor: function (v) {\n    Meteor = v;\n  }\n}, 2);\nvar TAPi18n;\nmodule.link(\"meteor/rocketchat:tap-i18n\", {\n  TAPi18n: function (v) {\n    TAPi18n = v;\n  }\n}, 3);\nvar Session;\nmodule.link(\"meteor/session\", {\n  Session: function (v) {\n    Session = v;\n  }\n}, 4);\nvar Tracker;\nmodule.link(\"meteor/tracker\", {\n  Tracker: function (v) {\n    Tracker = v;\n  }\n}, 5);\nvar React, lazy;\nmodule.link(\"react\", {\n  \"default\": function (v) {\n    React = v;\n  },\n  lazy: function (v) {\n    lazy = v;\n  }\n}, 6);\nvar toastr;\nmodule.link(\"toastr\", {\n  \"default\": function (v) {\n    toastr = v;\n  }\n}, 7);\nvar KonchatNotification;\nmodule.link(\"../../app/ui/client\", {\n  KonchatNotification: function (v) {\n    KonchatNotification = v;\n  }\n}, 8);\nvar APIClient;\nmodule.link(\"../../app/utils/client\", {\n  APIClient: function (v) {\n    APIClient = v;\n  }\n}, 9);\nvar appLayout;\nmodule.link(\"../lib/appLayout\", {\n  appLayout: function (v) {\n    appLayout = v;\n  }\n}, 10);\nvar createTemplateForComponent;\nmodule.link(\"../lib/portals/createTemplateForComponent\", {\n  createTemplateForComponent: function (v) {\n    createTemplateForComponent = v;\n  }\n}, 11);\nvar dispatchToastMessage;\nmodule.link(\"../lib/toast\", {\n  dispatchToastMessage: function (v) {\n    dispatchToastMessage = v;\n  }\n}, 12);\nvar handleError;\nmodule.link(\"../lib/utils/handleError\", {\n  handleError: function (v) {\n    handleError = v;\n  }\n}, 13);\nvar InvitePage = /*#__PURE__*/lazy(function () {\n  return module.dynamicImport('../views/invite/InvitePage');\n});\nvar SecretURLPage = /*#__PURE__*/lazy(function () {\n  return module.dynamicImport('../views/invite/SecretURLPage');\n});\nvar CMSPage = /*#__PURE__*/lazy(function () {\n  return module.dynamicImport('../views/root/CMSPage');\n});\nvar ResetPasswordPage = /*#__PURE__*/lazy(function () {\n  return module.dynamicImport('../views/login/ResetPassword/ResetPassword');\n});\nvar SetupWizardRoute = /*#__PURE__*/lazy(function () {\n  return module.dynamicImport('../views/setupWizard/SetupWizardRoute');\n});\nvar MailerUnsubscriptionPage = /*#__PURE__*/lazy(function () {\n  return module.dynamicImport('../views/mailer/MailerUnsubscriptionPage');\n});\nvar NotFoundPage = /*#__PURE__*/lazy(function () {\n  return module.dynamicImport('../views/notFound/NotFoundPage');\n});\nvar MeetPage = /*#__PURE__*/lazy(function () {\n  return module.dynamicImport('../views/meet/MeetPage');\n});\nFlowRouter.wait();\nFlowRouter.route('/', {\n  name: 'index',\n  action: function () {\n    appLayout.renderMainLayout({\n      center: 'loading'\n    });\n\n    if (!Meteor.userId()) {\n      return FlowRouter.go('home');\n    }\n\n    Tracker.autorun(function (c) {\n      if (FlowRouter.subsReady() === true) {\n        Meteor.defer(function () {\n          var user = Meteor.user();\n\n          if (user !== null && user !== void 0 && user.defaultRoom) {\n            var room = user.defaultRoom.split('/');\n            FlowRouter.go(room[0], {\n              name: room[1]\n            }, FlowRouter.current().queryParams);\n          } else {\n            FlowRouter.go('home');\n          }\n        });\n        c.stop();\n      }\n    });\n  }\n});\nFlowRouter.route('/login', {\n  name: 'login',\n  action: function () {\n    FlowRouter.go('home');\n  }\n});\nFlowRouter.route('/meet/:rid', {\n  name: 'meet',\n  action: function () {\n    function _callee(_params, queryParams) {\n      var visitor;\n      return _regeneratorRuntime.async(function () {\n        function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                if (!((queryParams === null || queryParams === void 0 ? void 0 : queryParams.token) !== undefined)) {\n                  _context.next = 9;\n                  break;\n                }\n\n                _context.next = 3;\n                return _regeneratorRuntime.awrap(APIClient.v1.get(\"livechat/visitor/\" + (queryParams === null || queryParams === void 0 ? void 0 : queryParams.token)));\n\n              case 3:\n                visitor = _context.sent;\n\n                if (!(visitor !== null && visitor !== void 0 && visitor.visitor)) {\n                  _context.next = 7;\n                  break;\n                }\n\n                appLayout.render( /*#__PURE__*/React.createElement(MeetPage, null));\n                return _context.abrupt(\"return\");\n\n              case 7:\n                toastr.error(TAPi18n.__('Visitor_does_not_exist'));\n                return _context.abrupt(\"return\");\n\n              case 9:\n                if (Meteor.userId()) {\n                  _context.next = 12;\n                  break;\n                }\n\n                FlowRouter.go('home');\n                return _context.abrupt(\"return\");\n\n              case 12:\n                appLayout.render( /*#__PURE__*/React.createElement(MeetPage, null));\n\n              case 13:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }\n\n        return _callee$;\n      }(), null, null, null, Promise);\n    }\n\n    return _callee;\n  }()\n});\nFlowRouter.route('/home', {\n  name: 'home',\n  action: function (_params, queryParams) {\n    KonchatNotification.getDesktopPermission();\n\n    if ((queryParams === null || queryParams === void 0 ? void 0 : queryParams.saml_idp_credentialToken) !== undefined) {\n      var token = queryParams.saml_idp_credentialToken;\n      FlowRouter.setQueryParams({\n        // eslint-disable-next-line @typescript-eslint/camelcase\n        saml_idp_credentialToken: null\n      });\n      Meteor.loginWithSamlToken(token, function (error) {\n        if (error) {\n          if (error.reason) {\n            dispatchToastMessage({\n              type: 'error',\n              message: error.reason\n            });\n          } else {\n            handleError(error);\n          }\n        }\n\n        appLayout.renderMainLayout({\n          center: 'home'\n        });\n      });\n      return;\n    }\n\n    appLayout.renderMainLayout({\n      center: 'home'\n    });\n  }\n});\nFlowRouter.route('/directory/:tab?', {\n  name: 'directory',\n  action: function () {\n    var DirectoryPage = createTemplateForComponent('DirectoryPage', function () {\n      return module.dynamicImport('../views/directory/DirectoryPage');\n    }, {\n      attachment: 'at-parent'\n    });\n    appLayout.renderMainLayout({\n      center: DirectoryPage\n    });\n  }\n});\nFlowRouter.route('/omnichannel-directory/:page?/:bar?/:id?/:tab?/:context?', {\n  name: 'omnichannel-directory',\n  action: function () {\n    var OmnichannelDirectoryPage = createTemplateForComponent('OmnichannelDirectoryPage', function () {\n      return module.dynamicImport('../views/omnichannel/directory/OmnichannelDirectoryPage');\n    }, {\n      attachment: 'at-parent'\n    });\n    appLayout.renderMainLayout({\n      center: OmnichannelDirectoryPage\n    });\n  }\n});\nFlowRouter.route('/livechat-queue', {\n  name: 'livechat-queue',\n  action: function () {\n    var OmnichannelQueueList = createTemplateForComponent('QueueList', function () {\n      return module.dynamicImport('../views/omnichannel/queueList');\n    }, {\n      attachment: 'at-parent'\n    });\n    appLayout.renderMainLayout({\n      center: OmnichannelQueueList\n    });\n  }\n});\nFlowRouter.route('/account/:group?', {\n  name: 'account',\n  action: function () {\n    var AccountRoute = createTemplateForComponent('AccountRoute', function () {\n      return module.dynamicImport('../views/account/AccountRoute');\n    }, {\n      attachment: 'at-parent'\n    });\n    appLayout.renderMainLayout({\n      center: AccountRoute\n    });\n  }\n});\nFlowRouter.route('/terms-of-service', {\n  name: 'terms-of-service',\n  action: function () {\n    appLayout.render( /*#__PURE__*/React.createElement(CMSPage, {\n      page: \"Layout_Terms_of_Service\"\n    }));\n  }\n});\nFlowRouter.route('/privacy-policy', {\n  name: 'privacy-policy',\n  action: function () {\n    appLayout.render( /*#__PURE__*/React.createElement(CMSPage, {\n      page: \"Layout_Privacy_Policy\"\n    }));\n  }\n});\nFlowRouter.route('/legal-notice', {\n  name: 'legal-notice',\n  action: function () {\n    appLayout.render( /*#__PURE__*/React.createElement(CMSPage, {\n      page: \"Layout_Legal_Notice\"\n    }));\n  }\n});\nFlowRouter.route('/room-not-found/:type/:name', {\n  name: 'room-not-found',\n  action: function () {\n    var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n        type = _ref.type,\n        name = _ref.name;\n\n    Session.set('roomNotFound', {\n      type: type,\n      name: name\n    });\n    appLayout.renderMainLayout({\n      center: 'roomNotFound'\n    });\n  }\n});\nFlowRouter.route('/register/:hash', {\n  name: 'register-secret-url',\n  action: function () {\n    appLayout.render( /*#__PURE__*/React.createElement(SecretURLPage, null));\n  }\n});\nFlowRouter.route('/invite/:hash', {\n  name: 'invite',\n  action: function () {\n    appLayout.render( /*#__PURE__*/React.createElement(InvitePage, null));\n  }\n});\nFlowRouter.route('/setup-wizard/:step?', {\n  name: 'setup-wizard',\n  action: function () {\n    appLayout.render( /*#__PURE__*/React.createElement(SetupWizardRoute, null));\n  }\n});\nFlowRouter.route('/mailer/unsubscribe/:_id/:createdAt', {\n  name: 'mailer-unsubscribe',\n  action: function () {\n    appLayout.render( /*#__PURE__*/React.createElement(MailerUnsubscriptionPage, null));\n  }\n});\nFlowRouter.route('/login-token/:token', {\n  name: 'tokenLogin',\n  action: function (params) {\n    Accounts.callLoginMethod({\n      methodArguments: [{\n        loginToken: params === null || params === void 0 ? void 0 : params.token\n      }],\n      userCallback: function (error) {\n        console.error(error);\n        FlowRouter.go('/');\n      }\n    });\n  }\n});\nFlowRouter.route('/reset-password/:token', {\n  name: 'resetPassword',\n  action: function () {\n    appLayout.render( /*#__PURE__*/React.createElement(ResetPasswordPage, null));\n  }\n});\nFlowRouter.route('/snippet/:snippetId/:snippetName', {\n  name: 'snippetView',\n  action: function () {\n    appLayout.renderMainLayout({\n      center: 'snippetPage'\n    });\n  }\n});\nFlowRouter.route('/oauth/authorize', {\n  name: 'oauth/authorize',\n  action: function (_params, queryParams) {\n    appLayout.renderMainLayout({\n      center: 'authorize',\n      modal: true,\n      // eslint-disable-next-line @typescript-eslint/camelcase\n      client_id: queryParams === null || queryParams === void 0 ? void 0 : queryParams.client_id,\n      // eslint-disable-next-line @typescript-eslint/camelcase\n      redirect_uri: queryParams === null || queryParams === void 0 ? void 0 : queryParams.redirect_uri,\n      // eslint-disable-next-line @typescript-eslint/camelcase\n      response_type: queryParams === null || queryParams === void 0 ? void 0 : queryParams.response_type,\n      state: queryParams === null || queryParams === void 0 ? void 0 : queryParams.state\n    });\n  }\n});\nFlowRouter.route('/oauth/error/:error', {\n  name: 'oauth/error',\n  action: function (params) {\n    appLayout.renderMainLayout({\n      center: 'oauth404',\n      modal: true,\n      error: params === null || params === void 0 ? void 0 : params.error\n    });\n  }\n});\nFlowRouter.notFound = {\n  action: function () {\n    appLayout.render( /*#__PURE__*/React.createElement(NotFoundPage, null));\n  }\n};\nMeteor.startup(function () {\n  FlowRouter.initialize();\n});","map":{"version":3,"sources":["client/startup/routes.tsx"],"names":[],"mappings":"AAAA,IAAA,mBAAA;;AAAmB,MAAM,CAAA,IAAN,CAAM,4BAAN,EAA6B;AAAA,EAAA,OAAA,EAAA,UAAA,CAAA,EAAA;AAAA,IAAA,mBAAA,GAAA,CAAA;AAAA;AAAA,CAA7B,EAA6B,CAA7B;AAAnB,IAAA,QAAA;AAAS,MAAU,CAAA,IAAV,CAAgB,sBAAhB,EAAuC;AAAA,EAAA,QAAA,EAAA,UAAA,CAAA,EAAA;AAAA,IAAA,QAAA,GAAA,CAAA;AAAA;AAAA,CAAvC,EAAuC,CAAvC;AAAuC,IAAA,UAAA;AAAA,MAAA,CAAA,IAAA,CAAA,2BAAA,EAAA;AAAA,EAAA,UAAA,EAAA,UAAA,CAAA,EAAA;AAAA,IAAA,UAAA,GAAA,CAAA;AAAA;AAAA,CAAA,EAAA,CAAA;AAAA,IAAA,MAAA;AAAA,MAAA,CAAA,IAAA,CAAA,eAAA,EAAA;AAAA,EAAA,MAAA,EAAA,UAAA,CAAA,EAAA;AAAA,IAAA,MAAA,GAAA,CAAA;AAAA;AAAA,CAAA,EAAA,CAAA;AAAA,IAAA,OAAA;AAAA,MAAA,CAAA,IAAA,CAAA,4BAAA,EAAA;AAAA,EAAA,OAAA,EAAA,UAAA,CAAA,EAAA;AAAA,IAAA,OAAA,GAAA,CAAA;AAAA;AAAA,CAAA,EAAA,CAAA;AAAA,IAAA,OAAA;AAAA,MAAA,CAAA,IAAA,CAAA,gBAAA,EAAA;AAAA,EAAA,OAAA,EAAA,UAAA,CAAA,EAAA;AAAA,IAAA,OAAA,GAAA,CAAA;AAAA;AAAA,CAAA,EAAA,CAAA;AAAA,IAAA,OAAA;AAAA,MAAA,CAAA,IAAA,CAAA,gBAAA,EAAA;AAAA,EAAA,OAAA,EAAA,UAAA,CAAA,EAAA;AAAA,IAAA,OAAA,GAAA,CAAA;AAAA;AAAA,CAAA,EAAA,CAAA;AAAA,IAAA,KAAA,EAAA,IAAA;AAAA,MAAA,CAAA,IAAA,CAAA,OAAA,EAAA;AAAA,aAAA,UAAA,CAAA,EAAA;AAAA,IAAA,KAAA,GAAA,CAAA;AAAA,GAAA;AAAA,EAAA,IAAA,EAAA,UAAA,CAAA,EAAA;AAAA,IAAA,IAAA,GAAA,CAAA;AAAA;AAAA,CAAA,EAAA,CAAA;AAAA,IAAA,MAAA;AAAA,MAAA,CAAA,IAAA,CAAA,QAAA,EAAA;AAAA,aAAA,UAAA,CAAA,EAAA;AAAA,IAAA,MAAA,GAAA,CAAA;AAAA;AAAA,CAAA,EAAA,CAAA;AAAA,IAAA,mBAAA;AAAA,MAAA,CAAA,IAAA,CAAA,qBAAA,EAAA;AAAA,EAAA,mBAAA,EAAA,UAAA,CAAA,EAAA;AAAA,IAAA,mBAAA,GAAA,CAAA;AAAA;AAAA,CAAA,EAAA,CAAA;AAAA,IAAA,SAAA;AAAA,MAAA,CAAA,IAAA,CAAA,wBAAA,EAAA;AAAA,EAAA,SAAA,EAAA,UAAA,CAAA,EAAA;AAAA,IAAA,SAAA,GAAA,CAAA;AAAA;AAAA,CAAA,EAAA,CAAA;AAAA,IAAA,SAAA;AAAA,MAAA,CAAA,IAAA,CAAA,kBAAA,EAAA;AAAA,EAAA,SAAA,EAAA,UAAA,CAAA,EAAA;AAAA,IAAA,SAAA,GAAA,CAAA;AAAA;AAAA,CAAA,EAAA,EAAA;AAAA,IAAA,0BAAA;AAAA,MAAA,CAAA,IAAA,CAAA,2CAAA,EAAA;AAAA,EAAA,0BAAA,EAAA,UAAA,CAAA,EAAA;AAAA,IAAA,0BAAA,GAAA,CAAA;AAAA;AAAA,CAAA,EAAA,EAAA;AAAA,IAAA,oBAAA;AAAA,MAAA,CAAA,IAAA,CAAA,cAAA,EAAA;AAAA,EAAA,oBAAA,EAAA,UAAA,CAAA,EAAA;AAAA,IAAA,oBAAA,GAAA,CAAA;AAAA;AAAA,CAAA,EAAA,EAAA;AAAA,IAAA,WAAA;AAAA,MAAA,CAAA,IAAA,CAAA,0BAAA,EAAA;AAAA,EAAA,WAAA,EAAA,UAAA,CAAA,EAAA;AAAA,IAAA,WAAA,GAAA,CAAA;AAAA;AAAA,CAAA,EAAA,EAAA;AAiBhD,IAAM,UAAU,gBAAG,IAAI,CAAC;AAAA,SAAM,qBAAO,4BAAP,CAAN;AAAA,CAAD,CAAvB;AACA,IAAM,aAAa,gBAAG,IAAI,CAAC;AAAA,SAAM,qBAAO,+BAAP,CAAN;AAAA,CAAD,CAA1B;AACA,IAAM,OAAO,gBAAG,IAAI,CAAC;AAAA,SAAM,qBAAO,uBAAP,CAAN;AAAA,CAAD,CAApB;AACA,IAAM,iBAAiB,gBAAG,IAAI,CAAC;AAAA,SAAM,qBAAO,4CAAP,CAAN;AAAA,CAAD,CAA9B;AACA,IAAM,gBAAgB,gBAAG,IAAI,CAAC;AAAA,SAAM,qBAAO,uCAAP,CAAN;AAAA,CAAD,CAA7B;AACA,IAAM,wBAAwB,gBAAG,IAAI,CAAC;AAAA,SAAM,qBAAO,0CAAP,CAAN;AAAA,CAAD,CAArC;AACA,IAAM,YAAY,gBAAG,IAAI,CAAC;AAAA,SAAM,qBAAO,gCAAP,CAAN;AAAA,CAAD,CAAzB;AACA,IAAM,QAAQ,gBAAG,IAAI,CAAC;AAAA,SAAM,qBAAO,wBAAP,CAAN;AAAA,CAAD,CAArB;AAEA,UAAU,CAAC,IAAX;AAEA,UAAU,CAAC,KAAX,CAAiB,GAAjB,EAAsB;AACrB,EAAA,IAAI,EAAE,OADe;AAErB,EAAA,MAFqB,cAEf;AACL,IAAA,SAAS,CAAC,gBAAV,CAA2B;AAAE,MAAA,MAAM,EAAE;AAAV,KAA3B;;AACA,QAAI,CAAC,MAAM,CAAC,MAAP,EAAL,EAAsB;AACrB,aAAO,UAAU,CAAC,EAAX,CAAc,MAAd,CAAP;AACA;;AAED,IAAA,OAAO,CAAC,OAAR,CAAgB,UAAC,CAAD,EAAM;AACrB,UAAI,UAAU,CAAC,SAAX,OAA2B,IAA/B,EAAqC;AACpC,QAAA,MAAM,CAAC,KAAP,CAAa,YAAK;AACjB,cAAM,IAAI,GAAG,MAAM,CAAC,IAAP,EAAb;;AACA,cAAI,IAAJ,aAAI,IAAJ,eAAI,IAAI,CAAE,WAAV,EAAuB;AACtB,gBAAM,IAAI,GAAG,IAAI,CAAC,WAAL,CAAiB,KAAjB,CAAuB,GAAvB,CAAb;AACA,YAAA,UAAU,CAAC,EAAX,CAAc,IAAI,CAAC,CAAD,CAAlB,EAAuB;AAAE,cAAA,IAAI,EAAE,IAAI,CAAC,CAAD;AAAZ,aAAvB,EAA0C,UAAU,CAAC,OAAX,GAAqB,WAA/D;AACA,WAHD,MAGO;AACN,YAAA,UAAU,CAAC,EAAX,CAAc,MAAd;AACA;AACD,SARD;AASA,QAAA,CAAC,CAAC,IAAF;AACA;AACD,KAbD;AAcA;AAtBoB,CAAtB;AAyBA,UAAU,CAAC,KAAX,CAAiB,QAAjB,EAA2B;AAC1B,EAAA,IAAI,EAAE,OADoB;AAG1B,EAAA,MAH0B,cAGpB;AACL,IAAA,UAAU,CAAC,EAAX,CAAc,MAAd;AACA;AALyB,CAA3B;AAQA,UAAU,CAAC,KAAX,CAAiB,YAAjB,EAA+B;AAC9B,EAAA,IAAI,EAAE,MADwB;AAGxB,EAAA,MAHwB;AAAA,qBAGjB,OAHiB,EAGR,WAHQ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAIzB,CAAA,WAAW,SAAX,IAAA,WAAW,WAAX,YAAA,WAAW,CAAE,KAAb,MAAuB,SAJE;AAAA;AAAA;AAAA;;AAAA;AAAA,iDAMN,SAAS,CAAC,EAAV,CAAa,GAAb,wBAAqC,WAArC,aAAqC,WAArC,uBAAqC,WAAW,CAAE,KAAlD,EANM;;AAAA;AAMtB,gBAAA,OANsB;;AAAA,sBAOxB,OAPwB,aAOxB,OAPwB,eAOxB,OAAO,CAAE,OAPe;AAAA;AAAA;AAAA;;AAQ3B,gBAAA,SAAS,CAAC,MAAV,eAAiB,oBAAC,QAAD,OAAjB;AAR2B;;AAAA;AAY5B,gBAAA,MAAM,CAAC,KAAP,CAAa,OAAO,CAAC,EAAR,CAAW,wBAAX,CAAb;AAZ4B;;AAAA;AAAA,oBAgBxB,MAAM,CAAC,MAAP,EAhBwB;AAAA;AAAA;AAAA;;AAiB5B,gBAAA,UAAU,CAAC,EAAX,CAAc,MAAd;AAjB4B;;AAAA;AAqB7B,gBAAA,SAAS,CAAC,MAAV,eAAiB,oBAAC,QAAD,OAAjB;;AArB6B;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA,CAA/B;AAyBA,UAAU,CAAC,KAAX,CAAiB,OAAjB,EAA0B;AACzB,EAAA,IAAI,EAAE,MADmB;AAGzB,EAAA,MAHyB,YAGlB,OAHkB,EAGT,WAHS,EAGE;AAC1B,IAAA,mBAAmB,CAAC,oBAApB;;AACA,QAAI,CAAA,WAAW,SAAX,IAAA,WAAW,WAAX,YAAA,WAAW,CAAE,wBAAb,MAA0C,SAA9C,EAAyD;AACxD,UAAM,KAAK,GAAG,WAAW,CAAC,wBAA1B;AACA,MAAA,UAAU,CAAC,cAAX,CAA0B;AACzB;AACA,QAAA,wBAAwB,EAAE;AAFD,OAA1B;AAIC,MAAA,MAAc,CAAC,kBAAf,CAAkC,KAAlC,EAAyC,UAAC,KAAD,EAAgB;AACzD,YAAI,KAAJ,EAAW;AACV,cAAI,KAAK,CAAC,MAAV,EAAkB;AACjB,YAAA,oBAAoB,CAAC;AAAE,cAAA,IAAI,EAAE,OAAR;AAAiB,cAAA,OAAO,EAAE,KAAK,CAAC;AAAhC,aAAD,CAApB;AACA,WAFD,MAEO;AACN,YAAA,WAAW,CAAC,KAAD,CAAX;AACA;AACD;;AAED,QAAA,SAAS,CAAC,gBAAV,CAA2B;AAAE,UAAA,MAAM,EAAE;AAAV,SAA3B;AACA,OAVA;AAYD;AACA;;AAED,IAAA,SAAS,CAAC,gBAAV,CAA2B;AAAE,MAAA,MAAM,EAAE;AAAV,KAA3B;AACA;AA3BwB,CAA1B;AA8BA,UAAU,CAAC,KAAX,CAAiB,kBAAjB,EAAqC;AACpC,EAAA,IAAI,EAAE,WAD8B;AAEpC,EAAA,MAAM,EAAE,YAAK;AACZ,QAAM,aAAa,GAAG,0BAA0B,CAAC,eAAD,EAAkB;AAAA,aAAM,qBAAO,kCAAP,CAAN;AAAA,KAAlB,EAAoE;AACnH,MAAA,UAAU,EAAE;AADuG,KAApE,CAAhD;AAGA,IAAA,SAAS,CAAC,gBAAV,CAA2B;AAAE,MAAA,MAAM,EAAE;AAAV,KAA3B;AACA;AAPmC,CAArC;AAUA,UAAU,CAAC,KAAX,CAAiB,0DAAjB,EAA6E;AAC5E,EAAA,IAAI,EAAE,uBADsE;AAE5E,EAAA,MAAM,EAAE,YAAK;AACZ,QAAM,wBAAwB,GAAG,0BAA0B,CAC1D,0BAD0D,EAE1D;AAAA,aAAM,qBAAO,yDAAP,CAAN;AAAA,KAF0D,EAG1D;AAAE,MAAA,UAAU,EAAE;AAAd,KAH0D,CAA3D;AAKA,IAAA,SAAS,CAAC,gBAAV,CAA2B;AAAE,MAAA,MAAM,EAAE;AAAV,KAA3B;AACA;AAT2E,CAA7E;AAYA,UAAU,CAAC,KAAX,CAAiB,iBAAjB,EAAoC;AACnC,EAAA,IAAI,EAAE,gBAD6B;AAEnC,EAAA,MAAM,EAAE,YAAK;AACZ,QAAM,oBAAoB,GAAG,0BAA0B,CAAC,WAAD,EAAc;AAAA,aAAM,qBAAO,gCAAP,CAAN;AAAA,KAAd,EAA8D;AACpH,MAAA,UAAU,EAAE;AADwG,KAA9D,CAAvD;AAGA,IAAA,SAAS,CAAC,gBAAV,CAA2B;AAAE,MAAA,MAAM,EAAE;AAAV,KAA3B;AACA;AAPkC,CAApC;AAUA,UAAU,CAAC,KAAX,CAAiB,kBAAjB,EAAqC;AACpC,EAAA,IAAI,EAAE,SAD8B;AAEpC,EAAA,MAAM,EAAE,YAAK;AACZ,QAAM,YAAY,GAAG,0BAA0B,CAAC,cAAD,EAAiB;AAAA,aAAM,qBAAO,+BAAP,CAAN;AAAA,KAAjB,EAAgE;AAC9G,MAAA,UAAU,EAAE;AADkG,KAAhE,CAA/C;AAGA,IAAA,SAAS,CAAC,gBAAV,CAA2B;AAAE,MAAA,MAAM,EAAE;AAAV,KAA3B;AACA;AAPmC,CAArC;AAUA,UAAU,CAAC,KAAX,CAAiB,mBAAjB,EAAsC;AACrC,EAAA,IAAI,EAAE,kBAD+B;AAErC,EAAA,MAAM,EAAE,YAAK;AACZ,IAAA,SAAS,CAAC,MAAV,eAAiB,oBAAC,OAAD;AAAS,MAAA,IAAI,EAAC;AAAd,MAAjB;AACA;AAJoC,CAAtC;AAOA,UAAU,CAAC,KAAX,CAAiB,iBAAjB,EAAoC;AACnC,EAAA,IAAI,EAAE,gBAD6B;AAEnC,EAAA,MAAM,EAAE,YAAK;AACZ,IAAA,SAAS,CAAC,MAAV,eAAiB,oBAAC,OAAD;AAAS,MAAA,IAAI,EAAC;AAAd,MAAjB;AACA;AAJkC,CAApC;AAOA,UAAU,CAAC,KAAX,CAAiB,eAAjB,EAAkC;AACjC,EAAA,IAAI,EAAE,cAD2B;AAEjC,EAAA,MAAM,EAAE,YAAK;AACZ,IAAA,SAAS,CAAC,MAAV,eAAiB,oBAAC,OAAD;AAAS,MAAA,IAAI,EAAC;AAAd,MAAjB;AACA;AAJgC,CAAlC;AAOA,UAAU,CAAC,KAAX,CAAiB,6BAAjB,EAAgD;AAC/C,EAAA,IAAI,EAAE,gBADyC;AAE/C,EAAA,MAAM,EAAE,YAAwB;AAAA,mFAAN,EAAM;AAAA,QAArB,IAAqB,QAArB,IAAqB;AAAA,QAAf,IAAe,QAAf,IAAe;;AAC/B,IAAA,OAAO,CAAC,GAAR,CAAY,cAAZ,EAA4B;AAAE,MAAA,IAAI,EAAJ,IAAF;AAAQ,MAAA,IAAI,EAAJ;AAAR,KAA5B;AACA,IAAA,SAAS,CAAC,gBAAV,CAA2B;AAAE,MAAA,MAAM,EAAE;AAAV,KAA3B;AACA;AAL8C,CAAhD;AAQA,UAAU,CAAC,KAAX,CAAiB,iBAAjB,EAAoC;AACnC,EAAA,IAAI,EAAE,qBAD6B;AAEnC,EAAA,MAAM,EAAE,YAAK;AACZ,IAAA,SAAS,CAAC,MAAV,eAAiB,oBAAC,aAAD,OAAjB;AACA;AAJkC,CAApC;AAOA,UAAU,CAAC,KAAX,CAAiB,eAAjB,EAAkC;AACjC,EAAA,IAAI,EAAE,QAD2B;AAEjC,EAAA,MAAM,EAAE,YAAK;AACZ,IAAA,SAAS,CAAC,MAAV,eAAiB,oBAAC,UAAD,OAAjB;AACA;AAJgC,CAAlC;AAOA,UAAU,CAAC,KAAX,CAAiB,sBAAjB,EAAyC;AACxC,EAAA,IAAI,EAAE,cADkC;AAExC,EAAA,MAAM,EAAE,YAAK;AACZ,IAAA,SAAS,CAAC,MAAV,eAAiB,oBAAC,gBAAD,OAAjB;AACA;AAJuC,CAAzC;AAOA,UAAU,CAAC,KAAX,CAAiB,qCAAjB,EAAwD;AACvD,EAAA,IAAI,EAAE,oBADiD;AAEvD,EAAA,MAAM,EAAE,YAAK;AACZ,IAAA,SAAS,CAAC,MAAV,eAAiB,oBAAC,wBAAD,OAAjB;AACA;AAJsD,CAAxD;AAOA,UAAU,CAAC,KAAX,CAAiB,qBAAjB,EAAwC;AACvC,EAAA,IAAI,EAAE,YADiC;AAEvC,EAAA,MAFuC,YAEhC,MAFgC,EAE1B;AACZ,IAAA,QAAQ,CAAC,eAAT,CAAyB;AACxB,MAAA,eAAe,EAAE,CAChB;AACC,QAAA,UAAU,EAAE,MAAF,aAAE,MAAF,uBAAE,MAAM,CAAE;AADrB,OADgB,CADO;AAMxB,MAAA,YANwB,YAMX,KANW,EAMN;AACjB,QAAA,OAAO,CAAC,KAAR,CAAc,KAAd;AACA,QAAA,UAAU,CAAC,EAAX,CAAc,GAAd;AACA;AATuB,KAAzB;AAWA;AAdsC,CAAxC;AAiBA,UAAU,CAAC,KAAX,CAAiB,wBAAjB,EAA2C;AAC1C,EAAA,IAAI,EAAE,eADoC;AAE1C,EAAA,MAF0C,cAEpC;AACL,IAAA,SAAS,CAAC,MAAV,eAAiB,oBAAC,iBAAD,OAAjB;AACA;AAJyC,CAA3C;AAOA,UAAU,CAAC,KAAX,CAAiB,kCAAjB,EAAqD;AACpD,EAAA,IAAI,EAAE,aAD8C;AAEpD,EAAA,MAFoD,cAE9C;AACL,IAAA,SAAS,CAAC,gBAAV,CAA2B;AAAE,MAAA,MAAM,EAAE;AAAV,KAA3B;AACA;AAJmD,CAArD;AAOA,UAAU,CAAC,KAAX,CAAiB,kBAAjB,EAAqC;AACpC,EAAA,IAAI,EAAE,iBAD8B;AAEpC,EAAA,MAFoC,YAE7B,OAF6B,EAEpB,WAFoB,EAET;AAC1B,IAAA,SAAS,CAAC,gBAAV,CAA2B;AAC1B,MAAA,MAAM,EAAE,WADkB;AAE1B,MAAA,KAAK,EAAE,IAFmB;AAG1B;AACA,MAAA,SAAS,EAAE,WAAF,aAAE,WAAF,uBAAE,WAAW,CAAE,SAJE;AAK1B;AACA,MAAA,YAAY,EAAE,WAAF,aAAE,WAAF,uBAAE,WAAW,CAAE,YAND;AAO1B;AACA,MAAA,aAAa,EAAE,WAAF,aAAE,WAAF,uBAAE,WAAW,CAAE,aARF;AAS1B,MAAA,KAAK,EAAE,WAAF,aAAE,WAAF,uBAAE,WAAW,CAAE;AATM,KAA3B;AAWA;AAdmC,CAArC;AAiBA,UAAU,CAAC,KAAX,CAAiB,qBAAjB,EAAwC;AACvC,EAAA,IAAI,EAAE,aADiC;AAEvC,EAAA,MAFuC,YAEhC,MAFgC,EAE1B;AACZ,IAAA,SAAS,CAAC,gBAAV,CAA2B;AAC1B,MAAA,MAAM,EAAE,UADkB;AAE1B,MAAA,KAAK,EAAE,IAFmB;AAG1B,MAAA,KAAK,EAAE,MAAF,aAAE,MAAF,uBAAE,MAAM,CAAE;AAHW,KAA3B;AAKA;AARsC,CAAxC;AAWA,UAAU,CAAC,QAAX,GAAsB;AACrB,EAAA,MAAM,EAAE,YAAW;AAClB,IAAA,SAAS,CAAC,MAAV,eAAiB,oBAAC,YAAD,OAAjB;AACA;AAHoB,CAAtB;AAMA,MAAM,CAAC,OAAP,CAAe,YAAK;AACnB,EAAA,UAAU,CAAC,UAAX;AACA,CAFD","sourcesContent":["import { Accounts } from 'meteor/accounts-base';\nimport { FlowRouter } from 'meteor/kadira:flow-router';\nimport { Meteor } from 'meteor/meteor';\nimport { TAPi18n } from 'meteor/rocketchat:tap-i18n';\nimport { Session } from 'meteor/session';\nimport { Tracker } from 'meteor/tracker';\nimport React, { lazy } from 'react';\nimport toastr from 'toastr';\n\nimport { KonchatNotification } from '../../app/ui/client';\nimport { APIClient } from '../../app/utils/client';\nimport { IUser } from '../../definition/IUser';\nimport { appLayout } from '../lib/appLayout';\nimport { createTemplateForComponent } from '../lib/portals/createTemplateForComponent';\nimport { dispatchToastMessage } from '../lib/toast';\nimport { handleError } from '../lib/utils/handleError';\n\nconst InvitePage = lazy(() => import('../views/invite/InvitePage'));\nconst SecretURLPage = lazy(() => import('../views/invite/SecretURLPage'));\nconst CMSPage = lazy(() => import('../views/root/CMSPage'));\nconst ResetPasswordPage = lazy(() => import('../views/login/ResetPassword/ResetPassword'));\nconst SetupWizardRoute = lazy(() => import('../views/setupWizard/SetupWizardRoute'));\nconst MailerUnsubscriptionPage = lazy(() => import('../views/mailer/MailerUnsubscriptionPage'));\nconst NotFoundPage = lazy(() => import('../views/notFound/NotFoundPage'));\nconst MeetPage = lazy(() => import('../views/meet/MeetPage'));\n\nFlowRouter.wait();\n\nFlowRouter.route('/', {\n\tname: 'index',\n\taction() {\n\t\tappLayout.renderMainLayout({ center: 'loading' });\n\t\tif (!Meteor.userId()) {\n\t\t\treturn FlowRouter.go('home');\n\t\t}\n\n\t\tTracker.autorun((c) => {\n\t\t\tif (FlowRouter.subsReady() === true) {\n\t\t\t\tMeteor.defer(() => {\n\t\t\t\t\tconst user = Meteor.user() as IUser | null;\n\t\t\t\t\tif (user?.defaultRoom) {\n\t\t\t\t\t\tconst room = user.defaultRoom.split('/');\n\t\t\t\t\t\tFlowRouter.go(room[0], { name: room[1] }, FlowRouter.current().queryParams);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tFlowRouter.go('home');\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tc.stop();\n\t\t\t}\n\t\t});\n\t},\n});\n\nFlowRouter.route('/login', {\n\tname: 'login',\n\n\taction() {\n\t\tFlowRouter.go('home');\n\t},\n});\n\nFlowRouter.route('/meet/:rid', {\n\tname: 'meet',\n\n\tasync action(_params, queryParams) {\n\t\tif (queryParams?.token !== undefined) {\n\t\t\t// visitor login\n\t\t\tconst visitor = await APIClient.v1.get(`livechat/visitor/${queryParams?.token}`);\n\t\t\tif (visitor?.visitor) {\n\t\t\t\tappLayout.render(<MeetPage />);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\ttoastr.error(TAPi18n.__('Visitor_does_not_exist'));\n\t\t\treturn;\n\t\t}\n\n\t\tif (!Meteor.userId()) {\n\t\t\tFlowRouter.go('home');\n\t\t\treturn;\n\t\t}\n\n\t\tappLayout.render(<MeetPage />);\n\t},\n});\n\nFlowRouter.route('/home', {\n\tname: 'home',\n\n\taction(_params, queryParams) {\n\t\tKonchatNotification.getDesktopPermission();\n\t\tif (queryParams?.saml_idp_credentialToken !== undefined) {\n\t\t\tconst token = queryParams.saml_idp_credentialToken;\n\t\t\tFlowRouter.setQueryParams({\n\t\t\t\t// eslint-disable-next-line @typescript-eslint/camelcase\n\t\t\t\tsaml_idp_credentialToken: null,\n\t\t\t});\n\t\t\t(Meteor as any).loginWithSamlToken(token, (error?: any) => {\n\t\t\t\tif (error) {\n\t\t\t\t\tif (error.reason) {\n\t\t\t\t\t\tdispatchToastMessage({ type: 'error', message: error.reason });\n\t\t\t\t\t} else {\n\t\t\t\t\t\thandleError(error);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tappLayout.renderMainLayout({ center: 'home' });\n\t\t\t});\n\n\t\t\treturn;\n\t\t}\n\n\t\tappLayout.renderMainLayout({ center: 'home' });\n\t},\n});\n\nFlowRouter.route('/directory/:tab?', {\n\tname: 'directory',\n\taction: () => {\n\t\tconst DirectoryPage = createTemplateForComponent('DirectoryPage', () => import('../views/directory/DirectoryPage'), {\n\t\t\tattachment: 'at-parent',\n\t\t});\n\t\tappLayout.renderMainLayout({ center: DirectoryPage });\n\t},\n});\n\nFlowRouter.route('/omnichannel-directory/:page?/:bar?/:id?/:tab?/:context?', {\n\tname: 'omnichannel-directory',\n\taction: () => {\n\t\tconst OmnichannelDirectoryPage = createTemplateForComponent(\n\t\t\t'OmnichannelDirectoryPage',\n\t\t\t() => import('../views/omnichannel/directory/OmnichannelDirectoryPage'),\n\t\t\t{ attachment: 'at-parent' },\n\t\t);\n\t\tappLayout.renderMainLayout({ center: OmnichannelDirectoryPage });\n\t},\n});\n\nFlowRouter.route('/livechat-queue', {\n\tname: 'livechat-queue',\n\taction: () => {\n\t\tconst OmnichannelQueueList = createTemplateForComponent('QueueList', () => import('../views/omnichannel/queueList'), {\n\t\t\tattachment: 'at-parent',\n\t\t});\n\t\tappLayout.renderMainLayout({ center: OmnichannelQueueList });\n\t},\n});\n\nFlowRouter.route('/account/:group?', {\n\tname: 'account',\n\taction: () => {\n\t\tconst AccountRoute = createTemplateForComponent('AccountRoute', () => import('../views/account/AccountRoute'), {\n\t\t\tattachment: 'at-parent',\n\t\t});\n\t\tappLayout.renderMainLayout({ center: AccountRoute });\n\t},\n});\n\nFlowRouter.route('/terms-of-service', {\n\tname: 'terms-of-service',\n\taction: () => {\n\t\tappLayout.render(<CMSPage page='Layout_Terms_of_Service' />);\n\t},\n});\n\nFlowRouter.route('/privacy-policy', {\n\tname: 'privacy-policy',\n\taction: () => {\n\t\tappLayout.render(<CMSPage page='Layout_Privacy_Policy' />);\n\t},\n});\n\nFlowRouter.route('/legal-notice', {\n\tname: 'legal-notice',\n\taction: () => {\n\t\tappLayout.render(<CMSPage page='Layout_Legal_Notice' />);\n\t},\n});\n\nFlowRouter.route('/room-not-found/:type/:name', {\n\tname: 'room-not-found',\n\taction: ({ type, name } = {}) => {\n\t\tSession.set('roomNotFound', { type, name });\n\t\tappLayout.renderMainLayout({ center: 'roomNotFound' });\n\t},\n});\n\nFlowRouter.route('/register/:hash', {\n\tname: 'register-secret-url',\n\taction: () => {\n\t\tappLayout.render(<SecretURLPage />);\n\t},\n});\n\nFlowRouter.route('/invite/:hash', {\n\tname: 'invite',\n\taction: () => {\n\t\tappLayout.render(<InvitePage />);\n\t},\n});\n\nFlowRouter.route('/setup-wizard/:step?', {\n\tname: 'setup-wizard',\n\taction: () => {\n\t\tappLayout.render(<SetupWizardRoute />);\n\t},\n});\n\nFlowRouter.route('/mailer/unsubscribe/:_id/:createdAt', {\n\tname: 'mailer-unsubscribe',\n\taction: () => {\n\t\tappLayout.render(<MailerUnsubscriptionPage />);\n\t},\n});\n\nFlowRouter.route('/login-token/:token', {\n\tname: 'tokenLogin',\n\taction(params) {\n\t\tAccounts.callLoginMethod({\n\t\t\tmethodArguments: [\n\t\t\t\t{\n\t\t\t\t\tloginToken: params?.token,\n\t\t\t\t},\n\t\t\t],\n\t\t\tuserCallback(error) {\n\t\t\t\tconsole.error(error);\n\t\t\t\tFlowRouter.go('/');\n\t\t\t},\n\t\t});\n\t},\n});\n\nFlowRouter.route('/reset-password/:token', {\n\tname: 'resetPassword',\n\taction() {\n\t\tappLayout.render(<ResetPasswordPage />);\n\t},\n});\n\nFlowRouter.route('/snippet/:snippetId/:snippetName', {\n\tname: 'snippetView',\n\taction() {\n\t\tappLayout.renderMainLayout({ center: 'snippetPage' });\n\t},\n});\n\nFlowRouter.route('/oauth/authorize', {\n\tname: 'oauth/authorize',\n\taction(_params, queryParams) {\n\t\tappLayout.renderMainLayout({\n\t\t\tcenter: 'authorize',\n\t\t\tmodal: true,\n\t\t\t// eslint-disable-next-line @typescript-eslint/camelcase\n\t\t\tclient_id: queryParams?.client_id,\n\t\t\t// eslint-disable-next-line @typescript-eslint/camelcase\n\t\t\tredirect_uri: queryParams?.redirect_uri,\n\t\t\t// eslint-disable-next-line @typescript-eslint/camelcase\n\t\t\tresponse_type: queryParams?.response_type,\n\t\t\tstate: queryParams?.state,\n\t\t});\n\t},\n});\n\nFlowRouter.route('/oauth/error/:error', {\n\tname: 'oauth/error',\n\taction(params) {\n\t\tappLayout.renderMainLayout({\n\t\t\tcenter: 'oauth404',\n\t\t\tmodal: true,\n\t\t\terror: params?.error,\n\t\t});\n\t},\n});\n\nFlowRouter.notFound = {\n\taction: (): void => {\n\t\tappLayout.render(<NotFoundPage />);\n\t},\n};\n\nMeteor.startup(() => {\n\tFlowRouter.initialize();\n});\n"],"sourceRoot":""},"sourceType":"module","hash":"d6f09a1159e713b80695b666a98630db5ee5a7fa"}
