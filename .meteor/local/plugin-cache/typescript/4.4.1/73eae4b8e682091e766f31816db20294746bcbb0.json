{"metadata":{},"options":{"assumptions":{},"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat/client/views/room/contextualBar/Threads/ThreadList.tsx","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","classProperties","classPrivateProperties","jsx","nullishCoalescingOperator","nullishCoalescingOperator","optionalChaining","optionalCatchBinding","optionalCatchBinding","classProperties","classPrivateProperties","classPrivateMethods","classProperties","classPrivateProperties","asyncGenerators","asyncGenerators","objectRestSpread","logicalAssignment"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"allowUndeclaredExports":true,"strictMode":false},"caller":{"name":"meteor","arch":"web.browser.legacy"},"sourceFileName":"client/views/room/contextualBar/Threads/ThreadList.tsx","filename":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat/client/views/room/contextualBar/Threads/ThreadList.tsx","inputSourceMap":{"version":3,"file":"client/views/room/contextualBar/Threads/ThreadList.tsx","sourceRoot":"","sources":["client/views/room/contextualBar/Threads/ThreadList.tsx"],"names":[],"mappings":"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","sourcesContent":["import { Box, Icon, TextInput, Select, Margins, Callout, Throbber } from '@rocket.chat/fuselage';\nimport { useResizeObserver, useMutableCallback, useAutoFocus } from '@rocket.chat/fuselage-hooks';\nimport React, { FC, useMemo } from 'react';\nimport { Virtuoso } from 'react-virtuoso';\n\nimport { IMessage } from '../../../../../definition/IMessage';\nimport { IRoom } from '../../../../../definition/IRoom';\nimport { IUser } from '../../../../../definition/IUser';\nimport ScrollableContentWrapper from '../../../../components/ScrollableContentWrapper';\nimport VerticalBar from '../../../../components/VerticalBar';\nimport { useRoute, useCurrentRoute, useQueryStringParameter } from '../../../../contexts/RouterContext';\nimport { useSetting } from '../../../../contexts/SettingsContext';\nimport { useTranslation } from '../../../../contexts/TranslationContext';\nimport { useTabContext } from '../../providers/ToolboxProvider';\nimport ThreadComponent from '../../threads/ThreadComponent';\nimport Row from './Row';\nimport { withData } from './withData';\n\nexport type ThreadListProps = {\n\ttotal: number;\n\tthreads: IMessage[];\n\troom: IRoom;\n\tunread?: string[];\n\tunreadUser?: string[];\n\tunreadGroup?: string[];\n\tuserId?: IUser['_id'] | null;\n\n\ttype: 'all' | 'following' | 'unread';\n\tsetType: (type: string) => void;\n\n\tloading: boolean;\n\n\terror?: Error;\n\n\ttext: string;\n\tsetText: (text: string) => void;\n\n\tonClose: () => void;\n\n\tloadMoreItems: (min: number, max: number) => void;\n};\n\nexport const ThreadList: FC<ThreadListProps> = function ThreadList({\n\ttotal = 10,\n\tthreads = [],\n\troom,\n\tunread = [],\n\tunreadUser = [],\n\tunreadGroup = [],\n\ttext,\n\ttype,\n\tsetType,\n\tloadMoreItems,\n\tloading,\n\tonClose,\n\terror,\n\tuserId = '',\n\tsetText,\n}) {\n\tconst showRealNames = Boolean(useSetting('UI_Use_Real_Name'));\n\n\tconst t = useTranslation();\n\tconst inputRef = useAutoFocus<HTMLInputElement>(true);\n\tconst [name] = useCurrentRoute();\n\n\tif (!name) {\n\t\tthrow new Error('No route name');\n\t}\n\n\tconst channelRoute = useRoute(name);\n\tconst onClick = useMutableCallback((e) => {\n\t\tconst { id: context } = e.currentTarget.dataset;\n\t\tchannelRoute.push({\n\t\t\ttab: 'thread',\n\t\t\tcontext,\n\t\t\trid: room._id,\n\t\t\t...(room.name && { name: room.name }),\n\t\t});\n\t});\n\n\tconst options: [string, string][] = useMemo(\n\t\t() => [\n\t\t\t['all', t('All')],\n\t\t\t['following', t('Following')],\n\t\t\t['unread', t('Unread')],\n\t\t],\n\t\t[t],\n\t);\n\n\tconst { ref, contentBoxSize: { inlineSize = 378, blockSize = 1 } = {} } = useResizeObserver<HTMLElement>({\n\t\tdebounceDelay: 200,\n\t});\n\n\tconst mid = useTabContext();\n\tconst jump = useQueryStringParameter('jump');\n\n\treturn (\n\t\t<>\n\t\t\t<VerticalBar.Header>\n\t\t\t\t<VerticalBar.Icon name='thread' />\n\t\t\t\t<VerticalBar.Text>{t('Threads')}</VerticalBar.Text>\n\t\t\t\t<VerticalBar.Close onClick={onClose} />\n\t\t\t</VerticalBar.Header>\n\n\t\t\t<VerticalBar.Content paddingInline={0} ref={ref}>\n\t\t\t\t<Box\n\t\t\t\t\tdisplay='flex'\n\t\t\t\t\tflexDirection='row'\n\t\t\t\t\tp='x24'\n\t\t\t\t\tborderBlockEndWidth='x2'\n\t\t\t\t\tborderBlockEndStyle='solid'\n\t\t\t\t\tborderBlockEndColor='neutral-200'\n\t\t\t\t\tflexShrink={0}\n\t\t\t\t>\n\t\t\t\t\t<Box display='flex' flexDirection='row' flexGrow={1} mi='neg-x4'>\n\t\t\t\t\t\t<Margins inline='x4'>\n\t\t\t\t\t\t\t<TextInput\n\t\t\t\t\t\t\t\tplaceholder={t('Search_Messages')}\n\t\t\t\t\t\t\t\tvalue={text}\n\t\t\t\t\t\t\t\tonChange={setText as any}\n\t\t\t\t\t\t\t\taddon={<Icon name='magnifier' size='x20' />}\n\t\t\t\t\t\t\t\tref={inputRef}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<Select flexGrow={0} width='110px' onChange={setType} value={type} options={options} />\n\t\t\t\t\t\t</Margins>\n\t\t\t\t\t</Box>\n\t\t\t\t</Box>\n\n\t\t\t\t{loading && (\n\t\t\t\t\t<Box pi='x24' pb='x12'>\n\t\t\t\t\t\t<Throbber size='x12' />\n\t\t\t\t\t</Box>\n\t\t\t\t)}\n\n\t\t\t\t{error && (\n\t\t\t\t\t<Callout mi='x24' type='danger'>\n\t\t\t\t\t\t{error.toString()}\n\t\t\t\t\t</Callout>\n\t\t\t\t)}\n\n\t\t\t\t{!loading && total === 0 && (\n\t\t\t\t\t<Box p='x24' color='neutral-600' textAlign='center' width='full'>\n\t\t\t\t\t\t{t('No_Threads')}\n\t\t\t\t\t</Box>\n\t\t\t\t)}\n\n\t\t\t\t<Box flexGrow={1} flexShrink={1} overflow='hidden' display='flex'>\n\t\t\t\t\t{!error && total > 0 && threads.length > 0 && (\n\t\t\t\t\t\t<Virtuoso\n\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\theight: blockSize,\n\t\t\t\t\t\t\t\twidth: inlineSize,\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\ttotalCount={total}\n\t\t\t\t\t\t\tendReached={loading ? (): void => undefined : (start): unknown => loadMoreItems(start, Math.min(50, total - start))}\n\t\t\t\t\t\t\toverscan={25}\n\t\t\t\t\t\t\tdata={threads}\n\t\t\t\t\t\t\tcomponents={{ Scroller: ScrollableContentWrapper as any }}\n\t\t\t\t\t\t\titemContent={(_index, data: IMessage): FC<IMessage> =>\n\t\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\t\t\t<Row\n\t\t\t\t\t\t\t\t\t\tthread={data}\n\t\t\t\t\t\t\t\t\t\tshowRealNames={showRealNames}\n\t\t\t\t\t\t\t\t\t\tunread={unread}\n\t\t\t\t\t\t\t\t\t\tunreadUser={unreadUser}\n\t\t\t\t\t\t\t\t\t\tunreadGroup={unreadGroup}\n\t\t\t\t\t\t\t\t\t\tuserId={userId || ''}\n\t\t\t\t\t\t\t\t\t\tonClick={onClick}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t) as unknown as FC<IMessage>\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t/>\n\t\t\t\t\t)}\n\t\t\t\t</Box>\n\t\t\t</VerticalBar.Content>\n\n\t\t\t{typeof mid === 'string' && (\n\t\t\t\t<VerticalBar.InnerContent>\n\t\t\t\t\t<ThreadComponent onClickBack={onClick} mid={mid} jump={jump} room={room} />\n\t\t\t\t</VerticalBar.InnerContent>\n\t\t\t)}\n\t\t</>\n\t);\n};\n\nexport default withData(ThreadList);\n"]},"targets":{"android":"95.0.0","chrome":"95.0.0","edge":"95.0.0","firefox":"78.0.0","ie":"10.0.0","ios":"15.0.0","opera":"81.0.0","safari":"15.1.0","samsung":"14.0.0"},"cloneInputAst":true,"browserslistConfigFile":false,"passPerPreset":false,"envName":"development","cwd":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat","root":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat","rootMode":"root","plugins":[{"key":"base$0","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0","visitor":{"Program":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true},"options":{"avoidModernSyntax":true,"enforceStrictMode":false,"dynamicImport":true}},{"key":"transform-runtime","visitor":{"MemberExpression":{"enter":[null]},"ObjectPattern":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":{},"_verified":{},"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]}},"options":{"version":"7.16.5","helpers":true,"useESModules":false,"corejs":false}},{"key":"proposal-class-properties","visitor":{"PrivateName":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{"loose":true}},{"key":"base$0$3","visitor":{"FunctionExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$4","visitor":{"ForInStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-react-jsx","visitor":{"_exploded":{},"_verified":{},"JSXNamespacedName":{"enter":[null]},"JSXSpreadChild":{"enter":[null]},"Program":{"enter":[null]},"JSXElement":{"exit":[null]},"JSXFragment":{"exit":[null]},"JSXAttribute":{"enter":[null]}},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","runtime":"classic","throwIfNamespace":true,"useBuiltIns":false}},{"key":"transform-react-display-name","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-react-pure-annotations","visitor":{"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"syntax-nullish-coalescing-operator","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-nullish-coalescing-operator","visitor":{"_exploded":{},"_verified":{},"LogicalExpression":{"enter":[null]}},"options":{}},{"key":"syntax-optional-chaining","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-optional-chaining","visitor":{"_exploded":true,"OptionalCallExpression":{"enter":[null]},"OptionalMemberExpression":{"enter":[null]},"_verified":true},"options":{}},{"key":"syntax-optional-catch-binding","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-optional-catch-binding","visitor":{"_exploded":{},"_verified":{},"CatchClause":{"enter":[null]}},"options":{}},{"key":"syntax-class-properties","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-class-properties","visitor":{"PrivateName":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{}},{"key":"syntax-async-generators","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-async-generator-functions","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]}},"options":{}},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-object-rest-spread","visitor":{"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"proposal-logical-assignment-operators","visitor":{"_exploded":{},"_verified":{},"AssignmentExpression":{"enter":[null]}},"options":{}},{"key":"transform-arrow-functions","visitor":{"ArrowFunctionExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-block-scoped-functions","visitor":{"BlockStatement":{"enter":[null]},"SwitchCase":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-block-scoping","visitor":{"VariableDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"_exploded":true,"BlockStatement":{"enter":[null]},"SwitchStatement":{"enter":[null]},"Program":{"enter":[null]},"_verified":true,"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"transform-classes","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-computed-properties","visitor":{"ObjectExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-destructuring","visitor":{"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"VariableDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"transform-for-of","visitor":{"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-literals","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-object-super","visitor":{"ObjectExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-parameters","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{}},{"key":"transform-shorthand-properties","visitor":{"ObjectMethod":{"enter":[null]},"ObjectProperty":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-spread","visitor":{"ArrayExpression":{"enter":[null]},"CallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-sticky-regex","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-template-literals","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-typeof-symbol","visitor":{"UnaryExpression":{"enter":[null]},"_exploded":true,"_verified":true,"BlockStatement":{"enter":[null]},"CatchClause":{"enter":[null]},"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"Program":{"enter":[null]},"ObjectMethod":{"enter":[null]},"SwitchStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ForOfStatement":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"StaticBlock":{"enter":[null]},"TSModuleBlock":{"enter":[null]},"AssignmentPattern":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectPattern":{"enter":[null]}},"options":{}},{"key":"transform-unicode-regex","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-property-literals","visitor":{"ObjectProperty":{"exit":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-exponentiation-operator","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"regenerator-transform","visitor":{"_exploded":true,"_verified":true,"ObjectMethod":{"enter":[null],"exit":[null]},"ClassMethod":{"enter":[null],"exit":[null]},"ClassPrivateMethod":{"enter":[null],"exit":[null]},"FunctionDeclaration":{"exit":[null]},"FunctionExpression":{"exit":[null]},"ArrowFunctionExpression":{"exit":[null]}},"options":{}}],"presets":[],"generatorOpts":{"filename":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat/client/views/room/contextualBar/Threads/ThreadList.tsx","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"client/views/room/contextualBar/Threads/ThreadList.tsx"}},"code":"var _objectSpread;\n\nmodule.link(\"@babel/runtime/helpers/objectSpread2\", {\n  default: function (v) {\n    _objectSpread = v;\n  }\n}, 0);\n\nvar _slicedToArray;\n\nmodule.link(\"@babel/runtime/helpers/slicedToArray\", {\n  default: function (v) {\n    _slicedToArray = v;\n  }\n}, 1);\nmodule.export({\n  ThreadList: function () {\n    return ThreadList;\n  }\n});\nvar Box, Icon, TextInput, Select, Margins, Callout, Throbber;\nmodule.link(\"@rocket.chat/fuselage\", {\n  Box: function (v) {\n    Box = v;\n  },\n  Icon: function (v) {\n    Icon = v;\n  },\n  TextInput: function (v) {\n    TextInput = v;\n  },\n  Select: function (v) {\n    Select = v;\n  },\n  Margins: function (v) {\n    Margins = v;\n  },\n  Callout: function (v) {\n    Callout = v;\n  },\n  Throbber: function (v) {\n    Throbber = v;\n  }\n}, 0);\nvar useResizeObserver, useMutableCallback, useAutoFocus;\nmodule.link(\"@rocket.chat/fuselage-hooks\", {\n  useResizeObserver: function (v) {\n    useResizeObserver = v;\n  },\n  useMutableCallback: function (v) {\n    useMutableCallback = v;\n  },\n  useAutoFocus: function (v) {\n    useAutoFocus = v;\n  }\n}, 1);\nvar React, useMemo;\nmodule.link(\"react\", {\n  \"default\": function (v) {\n    React = v;\n  },\n  useMemo: function (v) {\n    useMemo = v;\n  }\n}, 2);\nvar Virtuoso;\nmodule.link(\"react-virtuoso\", {\n  Virtuoso: function (v) {\n    Virtuoso = v;\n  }\n}, 3);\nvar ScrollableContentWrapper;\nmodule.link(\"../../../../components/ScrollableContentWrapper\", {\n  \"default\": function (v) {\n    ScrollableContentWrapper = v;\n  }\n}, 4);\nvar VerticalBar;\nmodule.link(\"../../../../components/VerticalBar\", {\n  \"default\": function (v) {\n    VerticalBar = v;\n  }\n}, 5);\nvar useRoute, useCurrentRoute, useQueryStringParameter;\nmodule.link(\"../../../../contexts/RouterContext\", {\n  useRoute: function (v) {\n    useRoute = v;\n  },\n  useCurrentRoute: function (v) {\n    useCurrentRoute = v;\n  },\n  useQueryStringParameter: function (v) {\n    useQueryStringParameter = v;\n  }\n}, 6);\nvar useSetting;\nmodule.link(\"../../../../contexts/SettingsContext\", {\n  useSetting: function (v) {\n    useSetting = v;\n  }\n}, 7);\nvar useTranslation;\nmodule.link(\"../../../../contexts/TranslationContext\", {\n  useTranslation: function (v) {\n    useTranslation = v;\n  }\n}, 8);\nvar useTabContext;\nmodule.link(\"../../providers/ToolboxProvider\", {\n  useTabContext: function (v) {\n    useTabContext = v;\n  }\n}, 9);\nvar ThreadComponent;\nmodule.link(\"../../threads/ThreadComponent\", {\n  \"default\": function (v) {\n    ThreadComponent = v;\n  }\n}, 10);\nvar Row;\nmodule.link(\"./Row\", {\n  \"default\": function (v) {\n    Row = v;\n  }\n}, 11);\nvar withData;\nmodule.link(\"./withData\", {\n  withData: function (v) {\n    withData = v;\n  }\n}, 12);\n\nvar ThreadList = function () {\n  function ThreadList(_ref) {\n    var _ref$total = _ref.total,\n        total = _ref$total === void 0 ? 10 : _ref$total,\n        _ref$threads = _ref.threads,\n        threads = _ref$threads === void 0 ? [] : _ref$threads,\n        room = _ref.room,\n        _ref$unread = _ref.unread,\n        unread = _ref$unread === void 0 ? [] : _ref$unread,\n        _ref$unreadUser = _ref.unreadUser,\n        unreadUser = _ref$unreadUser === void 0 ? [] : _ref$unreadUser,\n        _ref$unreadGroup = _ref.unreadGroup,\n        unreadGroup = _ref$unreadGroup === void 0 ? [] : _ref$unreadGroup,\n        text = _ref.text,\n        type = _ref.type,\n        setType = _ref.setType,\n        loadMoreItems = _ref.loadMoreItems,\n        loading = _ref.loading,\n        onClose = _ref.onClose,\n        error = _ref.error,\n        _ref$userId = _ref.userId,\n        userId = _ref$userId === void 0 ? '' : _ref$userId,\n        setText = _ref.setText;\n    var showRealNames = Boolean(useSetting('UI_Use_Real_Name'));\n    var t = useTranslation();\n    var inputRef = useAutoFocus(true);\n\n    var _useCurrentRoute = useCurrentRoute(),\n        _useCurrentRoute2 = _slicedToArray(_useCurrentRoute, 1),\n        name = _useCurrentRoute2[0];\n\n    if (!name) {\n      throw new Error('No route name');\n    }\n\n    var channelRoute = useRoute(name);\n    var onClick = useMutableCallback(function (e) {\n      var context = e.currentTarget.dataset.id;\n      channelRoute.push(_objectSpread({\n        tab: 'thread',\n        context: context,\n        rid: room._id\n      }, room.name && {\n        name: room.name\n      }));\n    });\n    var options = useMemo(function () {\n      return [['all', t('All')], ['following', t('Following')], ['unread', t('Unread')]];\n    }, [t]);\n\n    var _useResizeObserver = useResizeObserver({\n      debounceDelay: 200\n    }),\n        ref = _useResizeObserver.ref,\n        _useResizeObserver$co = _useResizeObserver.contentBoxSize;\n\n    _useResizeObserver$co = _useResizeObserver$co === void 0 ? {} : _useResizeObserver$co;\n    var _useResizeObserver$co2 = _useResizeObserver$co.inlineSize,\n        inlineSize = _useResizeObserver$co2 === void 0 ? 378 : _useResizeObserver$co2,\n        _useResizeObserver$co3 = _useResizeObserver$co.blockSize,\n        blockSize = _useResizeObserver$co3 === void 0 ? 1 : _useResizeObserver$co3;\n    var mid = useTabContext();\n    var jump = useQueryStringParameter('jump');\n    return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(VerticalBar.Header, null, /*#__PURE__*/React.createElement(VerticalBar.Icon, {\n      name: \"thread\"\n    }), /*#__PURE__*/React.createElement(VerticalBar.Text, null, t('Threads')), /*#__PURE__*/React.createElement(VerticalBar.Close, {\n      onClick: onClose\n    })), /*#__PURE__*/React.createElement(VerticalBar.Content, {\n      paddingInline: 0,\n      ref: ref\n    }, /*#__PURE__*/React.createElement(Box, {\n      display: \"flex\",\n      flexDirection: \"row\",\n      p: \"x24\",\n      borderBlockEndWidth: \"x2\",\n      borderBlockEndStyle: \"solid\",\n      borderBlockEndColor: \"neutral-200\",\n      flexShrink: 0\n    }, /*#__PURE__*/React.createElement(Box, {\n      display: \"flex\",\n      flexDirection: \"row\",\n      flexGrow: 1,\n      mi: \"neg-x4\"\n    }, /*#__PURE__*/React.createElement(Margins, {\n      inline: \"x4\"\n    }, /*#__PURE__*/React.createElement(TextInput, {\n      placeholder: t('Search_Messages'),\n      value: text,\n      onChange: setText,\n      addon: /*#__PURE__*/React.createElement(Icon, {\n        name: \"magnifier\",\n        size: \"x20\"\n      }),\n      ref: inputRef\n    }), /*#__PURE__*/React.createElement(Select, {\n      flexGrow: 0,\n      width: \"110px\",\n      onChange: setType,\n      value: type,\n      options: options\n    })))), loading && /*#__PURE__*/React.createElement(Box, {\n      pi: \"x24\",\n      pb: \"x12\"\n    }, /*#__PURE__*/React.createElement(Throbber, {\n      size: \"x12\"\n    })), error && /*#__PURE__*/React.createElement(Callout, {\n      mi: \"x24\",\n      type: \"danger\"\n    }, error.toString()), !loading && total === 0 && /*#__PURE__*/React.createElement(Box, {\n      p: \"x24\",\n      color: \"neutral-600\",\n      textAlign: \"center\",\n      width: \"full\"\n    }, t('No_Threads')), /*#__PURE__*/React.createElement(Box, {\n      flexGrow: 1,\n      flexShrink: 1,\n      overflow: \"hidden\",\n      display: \"flex\"\n    }, !error && total > 0 && threads.length > 0 && /*#__PURE__*/React.createElement(Virtuoso, {\n      style: {\n        height: blockSize,\n        width: inlineSize\n      },\n      totalCount: total,\n      endReached: loading ? function () {\n        return undefined;\n      } : function (start) {\n        return loadMoreItems(start, Math.min(50, total - start));\n      },\n      overscan: 25,\n      data: threads,\n      components: {\n        Scroller: ScrollableContentWrapper\n      },\n      itemContent: function (_index, data) {\n        return /*#__PURE__*/React.createElement(Row, {\n          thread: data,\n          showRealNames: showRealNames,\n          unread: unread,\n          unreadUser: unreadUser,\n          unreadGroup: unreadGroup,\n          userId: userId || '',\n          onClick: onClick\n        });\n      }\n    }))), typeof mid === 'string' && /*#__PURE__*/React.createElement(VerticalBar.InnerContent, null, /*#__PURE__*/React.createElement(ThreadComponent, {\n      onClickBack: onClick,\n      mid: mid,\n      jump: jump,\n      room: room\n    })));\n  }\n\n  return ThreadList;\n}();\n\nmodule.exportDefault(withData(ThreadList));","map":{"version":3,"sources":["client/views/room/contextualBar/Threads/ThreadList.tsx"],"names":[],"mappings":"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","sourcesContent":["import { Box, Icon, TextInput, Select, Margins, Callout, Throbber } from '@rocket.chat/fuselage';\nimport { useResizeObserver, useMutableCallback, useAutoFocus } from '@rocket.chat/fuselage-hooks';\nimport React, { FC, useMemo } from 'react';\nimport { Virtuoso } from 'react-virtuoso';\n\nimport { IMessage } from '../../../../../definition/IMessage';\nimport { IRoom } from '../../../../../definition/IRoom';\nimport { IUser } from '../../../../../definition/IUser';\nimport ScrollableContentWrapper from '../../../../components/ScrollableContentWrapper';\nimport VerticalBar from '../../../../components/VerticalBar';\nimport { useRoute, useCurrentRoute, useQueryStringParameter } from '../../../../contexts/RouterContext';\nimport { useSetting } from '../../../../contexts/SettingsContext';\nimport { useTranslation } from '../../../../contexts/TranslationContext';\nimport { useTabContext } from '../../providers/ToolboxProvider';\nimport ThreadComponent from '../../threads/ThreadComponent';\nimport Row from './Row';\nimport { withData } from './withData';\n\nexport type ThreadListProps = {\n\ttotal: number;\n\tthreads: IMessage[];\n\troom: IRoom;\n\tunread?: string[];\n\tunreadUser?: string[];\n\tunreadGroup?: string[];\n\tuserId?: IUser['_id'] | null;\n\n\ttype: 'all' | 'following' | 'unread';\n\tsetType: (type: string) => void;\n\n\tloading: boolean;\n\n\terror?: Error;\n\n\ttext: string;\n\tsetText: (text: string) => void;\n\n\tonClose: () => void;\n\n\tloadMoreItems: (min: number, max: number) => void;\n};\n\nexport const ThreadList: FC<ThreadListProps> = function ThreadList({\n\ttotal = 10,\n\tthreads = [],\n\troom,\n\tunread = [],\n\tunreadUser = [],\n\tunreadGroup = [],\n\ttext,\n\ttype,\n\tsetType,\n\tloadMoreItems,\n\tloading,\n\tonClose,\n\terror,\n\tuserId = '',\n\tsetText,\n}) {\n\tconst showRealNames = Boolean(useSetting('UI_Use_Real_Name'));\n\n\tconst t = useTranslation();\n\tconst inputRef = useAutoFocus<HTMLInputElement>(true);\n\tconst [name] = useCurrentRoute();\n\n\tif (!name) {\n\t\tthrow new Error('No route name');\n\t}\n\n\tconst channelRoute = useRoute(name);\n\tconst onClick = useMutableCallback((e) => {\n\t\tconst { id: context } = e.currentTarget.dataset;\n\t\tchannelRoute.push({\n\t\t\ttab: 'thread',\n\t\t\tcontext,\n\t\t\trid: room._id,\n\t\t\t...(room.name && { name: room.name }),\n\t\t});\n\t});\n\n\tconst options: [string, string][] = useMemo(\n\t\t() => [\n\t\t\t['all', t('All')],\n\t\t\t['following', t('Following')],\n\t\t\t['unread', t('Unread')],\n\t\t],\n\t\t[t],\n\t);\n\n\tconst { ref, contentBoxSize: { inlineSize = 378, blockSize = 1 } = {} } = useResizeObserver<HTMLElement>({\n\t\tdebounceDelay: 200,\n\t});\n\n\tconst mid = useTabContext();\n\tconst jump = useQueryStringParameter('jump');\n\n\treturn (\n\t\t<>\n\t\t\t<VerticalBar.Header>\n\t\t\t\t<VerticalBar.Icon name='thread' />\n\t\t\t\t<VerticalBar.Text>{t('Threads')}</VerticalBar.Text>\n\t\t\t\t<VerticalBar.Close onClick={onClose} />\n\t\t\t</VerticalBar.Header>\n\n\t\t\t<VerticalBar.Content paddingInline={0} ref={ref}>\n\t\t\t\t<Box\n\t\t\t\t\tdisplay='flex'\n\t\t\t\t\tflexDirection='row'\n\t\t\t\t\tp='x24'\n\t\t\t\t\tborderBlockEndWidth='x2'\n\t\t\t\t\tborderBlockEndStyle='solid'\n\t\t\t\t\tborderBlockEndColor='neutral-200'\n\t\t\t\t\tflexShrink={0}\n\t\t\t\t>\n\t\t\t\t\t<Box display='flex' flexDirection='row' flexGrow={1} mi='neg-x4'>\n\t\t\t\t\t\t<Margins inline='x4'>\n\t\t\t\t\t\t\t<TextInput\n\t\t\t\t\t\t\t\tplaceholder={t('Search_Messages')}\n\t\t\t\t\t\t\t\tvalue={text}\n\t\t\t\t\t\t\t\tonChange={setText as any}\n\t\t\t\t\t\t\t\taddon={<Icon name='magnifier' size='x20' />}\n\t\t\t\t\t\t\t\tref={inputRef}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<Select flexGrow={0} width='110px' onChange={setType} value={type} options={options} />\n\t\t\t\t\t\t</Margins>\n\t\t\t\t\t</Box>\n\t\t\t\t</Box>\n\n\t\t\t\t{loading && (\n\t\t\t\t\t<Box pi='x24' pb='x12'>\n\t\t\t\t\t\t<Throbber size='x12' />\n\t\t\t\t\t</Box>\n\t\t\t\t)}\n\n\t\t\t\t{error && (\n\t\t\t\t\t<Callout mi='x24' type='danger'>\n\t\t\t\t\t\t{error.toString()}\n\t\t\t\t\t</Callout>\n\t\t\t\t)}\n\n\t\t\t\t{!loading && total === 0 && (\n\t\t\t\t\t<Box p='x24' color='neutral-600' textAlign='center' width='full'>\n\t\t\t\t\t\t{t('No_Threads')}\n\t\t\t\t\t</Box>\n\t\t\t\t)}\n\n\t\t\t\t<Box flexGrow={1} flexShrink={1} overflow='hidden' display='flex'>\n\t\t\t\t\t{!error && total > 0 && threads.length > 0 && (\n\t\t\t\t\t\t<Virtuoso\n\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\theight: blockSize,\n\t\t\t\t\t\t\t\twidth: inlineSize,\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\ttotalCount={total}\n\t\t\t\t\t\t\tendReached={loading ? (): void => undefined : (start): unknown => loadMoreItems(start, Math.min(50, total - start))}\n\t\t\t\t\t\t\toverscan={25}\n\t\t\t\t\t\t\tdata={threads}\n\t\t\t\t\t\t\tcomponents={{ Scroller: ScrollableContentWrapper as any }}\n\t\t\t\t\t\t\titemContent={(_index, data: IMessage): FC<IMessage> =>\n\t\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\t\t\t<Row\n\t\t\t\t\t\t\t\t\t\tthread={data}\n\t\t\t\t\t\t\t\t\t\tshowRealNames={showRealNames}\n\t\t\t\t\t\t\t\t\t\tunread={unread}\n\t\t\t\t\t\t\t\t\t\tunreadUser={unreadUser}\n\t\t\t\t\t\t\t\t\t\tunreadGroup={unreadGroup}\n\t\t\t\t\t\t\t\t\t\tuserId={userId || ''}\n\t\t\t\t\t\t\t\t\t\tonClick={onClick}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t) as unknown as FC<IMessage>\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t/>\n\t\t\t\t\t)}\n\t\t\t\t</Box>\n\t\t\t</VerticalBar.Content>\n\n\t\t\t{typeof mid === 'string' && (\n\t\t\t\t<VerticalBar.InnerContent>\n\t\t\t\t\t<ThreadComponent onClickBack={onClick} mid={mid} jump={jump} room={room} />\n\t\t\t\t</VerticalBar.InnerContent>\n\t\t\t)}\n\t\t</>\n\t);\n};\n\nexport default withData(ThreadList);\n"],"sourceRoot":""},"sourceType":"module","hash":"73eae4b8e682091e766f31816db20294746bcbb0"}
