{"metadata":{},"options":{"assumptions":{},"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat/ee/client/audit/AuditPageBase.js","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","classProperties","classPrivateProperties","jsx","nullishCoalescingOperator","nullishCoalescingOperator","optionalChaining","optionalCatchBinding","optionalCatchBinding","classProperties","classPrivateProperties","classPrivateMethods","classProperties","classPrivateProperties","asyncGenerators","asyncGenerators","objectRestSpread","logicalAssignment"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"allowUndeclaredExports":true,"strictMode":false},"caller":{"name":"meteor","arch":"web.browser"},"sourceFileName":"ee/client/audit/AuditPageBase.js","filename":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat/ee/client/audit/AuditPageBase.js","targets":{"android":"95.0.0","chrome":"95.0.0","edge":"95.0.0","firefox":"78.0.0","ie":"10.0.0","ios":"15.0.0","opera":"81.0.0","safari":"15.1.0","samsung":"14.0.0"},"cloneInputAst":true,"browserslistConfigFile":false,"passPerPreset":false,"envName":"development","cwd":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat","root":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat","rootMode":"root","plugins":[{"key":"base$0","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0","visitor":{"Program":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true},"options":{"avoidModernSyntax":false,"enforceStrictMode":false,"dynamicImport":true,"generateLetDeclarations":true}},{"key":"transform-runtime","visitor":{"MemberExpression":{"enter":[null]},"ObjectPattern":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":{},"_verified":{},"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]}},"options":{"version":"7.16.5","helpers":true,"useESModules":false,"corejs":false}},{"key":"proposal-class-properties","visitor":{"PrivateName":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{"loose":true}},{"key":"transform-react-jsx","visitor":{"_exploded":{},"_verified":{},"JSXNamespacedName":{"enter":[null]},"JSXSpreadChild":{"enter":[null]},"Program":{"enter":[null]},"JSXElement":{"exit":[null]},"JSXFragment":{"exit":[null]},"JSXAttribute":{"enter":[null]}},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","runtime":"classic","throwIfNamespace":true,"useBuiltIns":false}},{"key":"transform-react-display-name","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-react-pure-annotations","visitor":{"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"syntax-nullish-coalescing-operator","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-nullish-coalescing-operator","visitor":{"_exploded":{},"_verified":{},"LogicalExpression":{"enter":[null]}},"options":{}},{"key":"syntax-optional-chaining","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-optional-chaining","visitor":{"_exploded":true,"OptionalCallExpression":{"enter":[null]},"OptionalMemberExpression":{"enter":[null]},"_verified":true},"options":{}},{"key":"syntax-optional-catch-binding","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-optional-catch-binding","visitor":{"_exploded":{},"_verified":{},"CatchClause":{"enter":[null]}},"options":{}},{"key":"syntax-class-properties","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-class-properties","visitor":{"PrivateName":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{}},{"key":"syntax-async-generators","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-async-generator-functions","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]}},"options":{}},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-object-rest-spread","visitor":{"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"proposal-logical-assignment-operators","visitor":{"_exploded":{},"_verified":{},"AssignmentExpression":{"enter":[null]}},"options":{}},{"key":"transform-literals","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-template-literals","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-parameters","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{}},{"key":"transform-exponentiation-operator","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}}],"presets":[],"generatorOpts":{"filename":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat/ee/client/audit/AuditPageBase.js","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"ee/client/audit/AuditPageBase.js"}},"code":"module.export({\n  AuditPageBase: () => AuditPageBase\n});\nlet Box, Field, TextInput, ButtonGroup, Button, Margins, Tabs, Flex;\nmodule.link(\"@rocket.chat/fuselage\", {\n  Box(v) {\n    Box = v;\n  },\n\n  Field(v) {\n    Field = v;\n  },\n\n  TextInput(v) {\n    TextInput = v;\n  },\n\n  ButtonGroup(v) {\n    ButtonGroup = v;\n  },\n\n  Button(v) {\n    Button = v;\n  },\n\n  Margins(v) {\n    Margins = v;\n  },\n\n  Tabs(v) {\n    Tabs = v;\n  },\n\n  Flex(v) {\n    Flex = v;\n  }\n\n}, 0);\nlet useMutableCallback;\nmodule.link(\"@rocket.chat/fuselage-hooks\", {\n  useMutableCallback(v) {\n    useMutableCallback = v;\n  }\n\n}, 1);\nlet React;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  }\n\n}, 2);\nlet Page;\nmodule.link(\"../../../client/components/Page\", {\n  default(v) {\n    Page = v;\n  }\n\n}, 3);\nlet useTranslation;\nmodule.link(\"../../../client/contexts/TranslationContext\", {\n  useTranslation(v) {\n    useTranslation = v;\n  }\n\n}, 4);\nlet useEndpointAction;\nmodule.link(\"../../../client/hooks/useEndpointAction\", {\n  useEndpointAction(v) {\n    useEndpointAction = v;\n  }\n\n}, 5);\nlet DateRangePicker;\nmodule.link(\"./DateRangePicker\", {\n  default(v) {\n    DateRangePicker = v;\n  }\n\n}, 6);\nlet Result;\nmodule.link(\"./Result\", {\n  default(v) {\n    Result = v;\n  }\n\n}, 7);\nlet ChannelTab;\nmodule.link(\"./Tabs/ChannelTab\", {\n  default(v) {\n    ChannelTab = v;\n  }\n\n}, 8);\nlet DirectTab;\nmodule.link(\"./Tabs/DirectTab\", {\n  default(v) {\n    DirectTab = v;\n  }\n\n}, 9);\nlet UsersTab;\nmodule.link(\"./Tabs/UsersTab\", {\n  default(v) {\n    UsersTab = v;\n  }\n\n}, 10);\nlet VisitorsTab;\nmodule.link(\"./Tabs/VisitorsTab\", {\n  default(v) {\n    VisitorsTab = v;\n  }\n\n}, 11);\n\nconst AuditPageBase = _ref => {\n  let {\n    type,\n    handleType,\n    msg,\n    handleMsg,\n    handleDateRange,\n    errors,\n    rid,\n    handleRid,\n    users,\n    handleUsers,\n    onChangeUsers,\n    visitor,\n    handleVisitor,\n    agent,\n    handleAgent,\n    apply,\n    setData\n  } = _ref;\n  const t = useTranslation();\n\n  const useHandleType = type => useMutableCallback(() => {\n    handleVisitor('');\n    handleAgent();\n    handleRid('');\n    handleUsers([]);\n    handleType(type);\n  });\n\n  const eventStats = useEndpointAction('POST', 'statistics.telemetry', {\n    params: [{\n      eventName: 'updateCounter',\n      settingsId: 'Message_Auditing_Apply_Count',\n      timestamp: Date.now()\n    }]\n  });\n  return /*#__PURE__*/React.createElement(Page, null, /*#__PURE__*/React.createElement(Page.Header, {\n    title: t('Message_auditing')\n  }), /*#__PURE__*/React.createElement(Tabs, null, /*#__PURE__*/React.createElement(Tabs.Item, {\n    selected: type === '',\n    onClick: useHandleType('')\n  }, t('Rooms')), /*#__PURE__*/React.createElement(Tabs.Item, {\n    selected: type === 'u',\n    onClick: useHandleType('u')\n  }, t('Users')), /*#__PURE__*/React.createElement(Tabs.Item, {\n    selected: type === 'd',\n    onClick: useHandleType('d')\n  }, t('Direct_Messages')), /*#__PURE__*/React.createElement(Tabs.Item, {\n    selected: type === 'l',\n    onClick: useHandleType('l')\n  }, t('Omnichannel'))), /*#__PURE__*/React.createElement(Page.ScrollableContentWithShadow, {\n    mb: \"neg-x4\"\n  }, /*#__PURE__*/React.createElement(Margins, {\n    block: \"x4\"\n  }, /*#__PURE__*/React.createElement(Box, {\n    display: \"flex\",\n    flexDirection: \"row\",\n    mi: \"neg-x4\",\n    justifyContent: \"stretch\"\n  }, /*#__PURE__*/React.createElement(Margins, {\n    inline: \"x4\"\n  }, /*#__PURE__*/React.createElement(Flex.Item, {\n    shrink: 1\n  }, /*#__PURE__*/React.createElement(Field, null, /*#__PURE__*/React.createElement(Field.Label, null, t('Message')), /*#__PURE__*/React.createElement(Field.Row, null, /*#__PURE__*/React.createElement(TextInput, {\n    value: msg,\n    onChange: handleMsg,\n    placeholder: t('Search')\n  }))), /*#__PURE__*/React.createElement(Field, null, /*#__PURE__*/React.createElement(Field.Label, null, t('Date')), /*#__PURE__*/React.createElement(Field.Row, null, /*#__PURE__*/React.createElement(DateRangePicker, {\n    onChange: handleDateRange,\n    display: \"flex\",\n    flexGrow: 1\n  })))))), /*#__PURE__*/React.createElement(Box, {\n    display: \"flex\",\n    flexDirection: \"row\",\n    alignItems: \"flex-end\"\n  }, /*#__PURE__*/React.createElement(Flex.Item, {\n    shrink: 1\n  }, type === '' && /*#__PURE__*/React.createElement(ChannelTab, {\n    errors: errors,\n    rid: rid,\n    handleRid: handleRid\n  }), type === 'u' && /*#__PURE__*/React.createElement(UsersTab, {\n    errors: errors,\n    users: users,\n    onChangeUsers: onChangeUsers\n  }), type === 'd' && /*#__PURE__*/React.createElement(DirectTab, {\n    errors: errors,\n    users: users,\n    onChangeUsers: onChangeUsers\n  }), type === 'l' && /*#__PURE__*/React.createElement(VisitorsTab, {\n    errors: errors,\n    visitor: visitor,\n    handleVisitor: handleVisitor,\n    agent: agent,\n    handleAgent: handleAgent\n  }), /*#__PURE__*/React.createElement(ButtonGroup, {\n    mis: \"x8\",\n    align: \"end\"\n  }, /*#__PURE__*/React.createElement(Button, {\n    primary: true,\n    onClick: () => apply(eventStats)\n  }, t('Apply'))))), setData && /*#__PURE__*/React.createElement(Result, {\n    setDataRef: setData\n  }))));\n};","map":{"version":3,"sources":["ee/client/audit/AuditPageBase.js"],"names":["module","export","AuditPageBase","Box","Field","TextInput","ButtonGroup","Button","Margins","Tabs","Flex","link","v","useMutableCallback","React","default","Page","useTranslation","useEndpointAction","DateRangePicker","Result","ChannelTab","DirectTab","UsersTab","VisitorsTab","type","handleType","msg","handleMsg","handleDateRange","errors","rid","handleRid","users","handleUsers","onChangeUsers","visitor","handleVisitor","agent","handleAgent","apply","setData","t","useHandleType","eventStats","params","eventName","settingsId","timestamp","Date","now"],"mappings":"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","sourcesContent":["import { Box, Field, TextInput, ButtonGroup, Button, Margins, Tabs, Flex } from '@rocket.chat/fuselage';\nimport { useMutableCallback } from '@rocket.chat/fuselage-hooks';\nimport React from 'react';\n\nimport Page from '../../../client/components/Page';\nimport { useTranslation } from '../../../client/contexts/TranslationContext';\nimport { useEndpointAction } from '../../../client/hooks/useEndpointAction';\nimport DateRangePicker from './DateRangePicker';\nimport Result from './Result';\nimport ChannelTab from './Tabs/ChannelTab';\nimport DirectTab from './Tabs/DirectTab';\nimport UsersTab from './Tabs/UsersTab';\nimport VisitorsTab from './Tabs/VisitorsTab';\n\n// TODO: create more stories for the tabs\nexport const AuditPageBase = ({\n\ttype,\n\thandleType,\n\tmsg,\n\thandleMsg,\n\thandleDateRange,\n\terrors,\n\trid,\n\thandleRid,\n\tusers,\n\thandleUsers,\n\tonChangeUsers,\n\tvisitor,\n\thandleVisitor,\n\tagent,\n\thandleAgent,\n\tapply,\n\tsetData,\n}) => {\n\tconst t = useTranslation();\n\n\tconst useHandleType = (type) =>\n\t\tuseMutableCallback(() => {\n\t\t\thandleVisitor('');\n\t\t\thandleAgent();\n\t\t\thandleRid('');\n\t\t\thandleUsers([]);\n\t\t\thandleType(type);\n\t\t});\n\n\tconst eventStats = useEndpointAction('POST', 'statistics.telemetry', {\n\t\tparams: [{ eventName: 'updateCounter', settingsId: 'Message_Auditing_Apply_Count', timestamp: Date.now() }],\n\t});\n\n\treturn (\n\t\t<Page>\n\t\t\t<Page.Header title={t('Message_auditing')} />\n\t\t\t<Tabs>\n\t\t\t\t<Tabs.Item selected={type === ''} onClick={useHandleType('')}>\n\t\t\t\t\t{t('Rooms')}\n\t\t\t\t</Tabs.Item>\n\t\t\t\t<Tabs.Item selected={type === 'u'} onClick={useHandleType('u')}>\n\t\t\t\t\t{t('Users')}\n\t\t\t\t</Tabs.Item>\n\t\t\t\t<Tabs.Item selected={type === 'd'} onClick={useHandleType('d')}>\n\t\t\t\t\t{t('Direct_Messages')}\n\t\t\t\t</Tabs.Item>\n\t\t\t\t<Tabs.Item selected={type === 'l'} onClick={useHandleType('l')}>\n\t\t\t\t\t{t('Omnichannel')}\n\t\t\t\t</Tabs.Item>\n\t\t\t</Tabs>\n\t\t\t<Page.ScrollableContentWithShadow mb='neg-x4'>\n\t\t\t\t<Margins block='x4'>\n\t\t\t\t\t<Box display='flex' flexDirection='row' mi='neg-x4' justifyContent='stretch'>\n\t\t\t\t\t\t<Margins inline='x4'>\n\t\t\t\t\t\t\t<Flex.Item shrink={1}>\n\t\t\t\t\t\t\t\t<Field>\n\t\t\t\t\t\t\t\t\t<Field.Label>{t('Message')}</Field.Label>\n\t\t\t\t\t\t\t\t\t<Field.Row>\n\t\t\t\t\t\t\t\t\t\t<TextInput value={msg} onChange={handleMsg} placeholder={t('Search')} />\n\t\t\t\t\t\t\t\t\t</Field.Row>\n\t\t\t\t\t\t\t\t</Field>\n\t\t\t\t\t\t\t\t<Field>\n\t\t\t\t\t\t\t\t\t<Field.Label>{t('Date')}</Field.Label>\n\t\t\t\t\t\t\t\t\t<Field.Row>\n\t\t\t\t\t\t\t\t\t\t<DateRangePicker onChange={handleDateRange} display='flex' flexGrow={1} />\n\t\t\t\t\t\t\t\t\t</Field.Row>\n\t\t\t\t\t\t\t\t</Field>\n\t\t\t\t\t\t\t</Flex.Item>\n\t\t\t\t\t\t</Margins>\n\t\t\t\t\t</Box>\n\t\t\t\t\t<Box display='flex' flexDirection='row' alignItems='flex-end'>\n\t\t\t\t\t\t<Flex.Item shrink={1}>\n\t\t\t\t\t\t\t{type === '' && <ChannelTab errors={errors} rid={rid} handleRid={handleRid} />}\n\t\t\t\t\t\t\t{type === 'u' && <UsersTab errors={errors} users={users} onChangeUsers={onChangeUsers} />}\n\t\t\t\t\t\t\t{type === 'd' && <DirectTab errors={errors} users={users} onChangeUsers={onChangeUsers} />}\n\t\t\t\t\t\t\t{type === 'l' && (\n\t\t\t\t\t\t\t\t<VisitorsTab errors={errors} visitor={visitor} handleVisitor={handleVisitor} agent={agent} handleAgent={handleAgent} />\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t<ButtonGroup mis='x8' align='end'>\n\t\t\t\t\t\t\t\t<Button primary onClick={() => apply(eventStats)}>\n\t\t\t\t\t\t\t\t\t{t('Apply')}\n\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t</ButtonGroup>\n\t\t\t\t\t\t</Flex.Item>\n\t\t\t\t\t</Box>\n\t\t\t\t\t{setData && <Result setDataRef={setData} />}\n\t\t\t\t</Margins>\n\t\t\t</Page.ScrollableContentWithShadow>\n\t\t</Page>\n\t);\n};\n"]},"sourceType":"module","hash":"70c280f56464e0a237696c297b323599db44512b"}
