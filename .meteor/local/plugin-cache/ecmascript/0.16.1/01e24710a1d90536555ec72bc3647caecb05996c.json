{"metadata":{},"options":{"assumptions":{},"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat/client/views/admin/apps/AppMenu.js","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","classProperties","classPrivateProperties","jsx","nullishCoalescingOperator","nullishCoalescingOperator","optionalChaining","optionalCatchBinding","optionalCatchBinding","classProperties","classPrivateProperties","classPrivateMethods","classProperties","classPrivateProperties","asyncGenerators","asyncGenerators","objectRestSpread","logicalAssignment"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"allowUndeclaredExports":true,"strictMode":false},"caller":{"name":"meteor","arch":"web.browser.legacy"},"sourceFileName":"client/views/admin/apps/AppMenu.js","filename":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat/client/views/admin/apps/AppMenu.js","targets":{"android":"95.0.0","chrome":"95.0.0","edge":"95.0.0","firefox":"78.0.0","ie":"10.0.0","ios":"15.0.0","opera":"81.0.0","safari":"15.1.0","samsung":"14.0.0"},"cloneInputAst":true,"browserslistConfigFile":false,"passPerPreset":false,"envName":"development","cwd":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat","root":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat","rootMode":"root","plugins":[{"key":"base$0","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0","visitor":{"Program":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true},"options":{"avoidModernSyntax":true,"enforceStrictMode":false,"dynamicImport":true}},{"key":"transform-runtime","visitor":{"MemberExpression":{"enter":[null]},"ObjectPattern":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":{},"_verified":{},"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]}},"options":{"version":"7.16.5","helpers":true,"useESModules":false,"corejs":false}},{"key":"proposal-class-properties","visitor":{"PrivateName":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{"loose":true}},{"key":"base$0$3","visitor":{"FunctionExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$4","visitor":{"ForInStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-react-jsx","visitor":{"_exploded":{},"_verified":{},"JSXNamespacedName":{"enter":[null]},"JSXSpreadChild":{"enter":[null]},"Program":{"enter":[null]},"JSXElement":{"exit":[null]},"JSXFragment":{"exit":[null]},"JSXAttribute":{"enter":[null]}},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","runtime":"classic","throwIfNamespace":true,"useBuiltIns":false}},{"key":"transform-react-display-name","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-react-pure-annotations","visitor":{"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"syntax-nullish-coalescing-operator","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-nullish-coalescing-operator","visitor":{"_exploded":{},"_verified":{},"LogicalExpression":{"enter":[null]}},"options":{}},{"key":"syntax-optional-chaining","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-optional-chaining","visitor":{"_exploded":true,"OptionalCallExpression":{"enter":[null]},"OptionalMemberExpression":{"enter":[null]},"_verified":true},"options":{}},{"key":"syntax-optional-catch-binding","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-optional-catch-binding","visitor":{"_exploded":{},"_verified":{},"CatchClause":{"enter":[null]}},"options":{}},{"key":"syntax-class-properties","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-class-properties","visitor":{"PrivateName":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{}},{"key":"syntax-async-generators","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-async-generator-functions","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]}},"options":{}},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-object-rest-spread","visitor":{"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"proposal-logical-assignment-operators","visitor":{"_exploded":{},"_verified":{},"AssignmentExpression":{"enter":[null]}},"options":{}},{"key":"transform-arrow-functions","visitor":{"ArrowFunctionExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-block-scoped-functions","visitor":{"BlockStatement":{"enter":[null]},"SwitchCase":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-block-scoping","visitor":{"VariableDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"_exploded":true,"BlockStatement":{"enter":[null]},"SwitchStatement":{"enter":[null]},"Program":{"enter":[null]},"_verified":true,"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"transform-classes","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-computed-properties","visitor":{"ObjectExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-destructuring","visitor":{"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"VariableDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"transform-for-of","visitor":{"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-literals","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-object-super","visitor":{"ObjectExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-parameters","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{}},{"key":"transform-shorthand-properties","visitor":{"ObjectMethod":{"enter":[null]},"ObjectProperty":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-spread","visitor":{"ArrayExpression":{"enter":[null]},"CallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-sticky-regex","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-template-literals","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-typeof-symbol","visitor":{"UnaryExpression":{"enter":[null]},"_exploded":true,"_verified":true,"BlockStatement":{"enter":[null]},"CatchClause":{"enter":[null]},"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"Program":{"enter":[null]},"ObjectMethod":{"enter":[null]},"SwitchStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ForOfStatement":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"StaticBlock":{"enter":[null]},"TSModuleBlock":{"enter":[null]},"AssignmentPattern":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectPattern":{"enter":[null]}},"options":{}},{"key":"transform-unicode-regex","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-property-literals","visitor":{"ObjectProperty":{"exit":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-exponentiation-operator","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"regenerator-transform","visitor":{"_exploded":true,"_verified":true,"ObjectMethod":{"enter":[null],"exit":[null]},"ClassMethod":{"enter":[null],"exit":[null]},"ClassPrivateMethod":{"enter":[null],"exit":[null]},"FunctionDeclaration":{"exit":[null]},"FunctionExpression":{"exit":[null]},"ArrowFunctionExpression":{"exit":[null]}},"options":{}}],"presets":[],"generatorOpts":{"filename":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat/client/views/admin/apps/AppMenu.js","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"client/views/admin/apps/AppMenu.js"}},"code":"var _excluded = [\"app\"];\n\nvar _regeneratorRuntime;\n\nmodule.link(\"@babel/runtime/regenerator\", {\n  default: function (v) {\n    _regeneratorRuntime = v;\n  }\n}, 0);\n\nvar _extends;\n\nmodule.link(\"@babel/runtime/helpers/extends\", {\n  default: function (v) {\n    _extends = v;\n  }\n}, 1);\n\nvar _objectSpread;\n\nmodule.link(\"@babel/runtime/helpers/objectSpread2\", {\n  default: function (v) {\n    _objectSpread = v;\n  }\n}, 2);\n\nvar _objectWithoutProperties;\n\nmodule.link(\"@babel/runtime/helpers/objectWithoutProperties\", {\n  default: function (v) {\n    _objectWithoutProperties = v;\n  }\n}, 3);\nvar Box, Icon, Menu;\nmodule.link(\"@rocket.chat/fuselage\", {\n  Box: function (v) {\n    Box = v;\n  },\n  Icon: function (v) {\n    Icon = v;\n  },\n  Menu: function (v) {\n    Menu = v;\n  }\n}, 0);\nvar React, useMemo, useCallback;\nmodule.link(\"react\", {\n  \"default\": function (v) {\n    React = v;\n  },\n  useMemo: function (v) {\n    useMemo = v;\n  },\n  useCallback: function (v) {\n    useCallback = v;\n  }\n}, 1);\nvar useSetModal;\nmodule.link(\"../../../contexts/ModalContext\", {\n  useSetModal: function (v) {\n    useSetModal = v;\n  }\n}, 2);\nvar useRoute;\nmodule.link(\"../../../contexts/RouterContext\", {\n  useRoute: function (v) {\n    useRoute = v;\n  }\n}, 3);\nvar useMethod, useEndpoint;\nmodule.link(\"../../../contexts/ServerContext\", {\n  useMethod: function (v) {\n    useMethod = v;\n  },\n  useEndpoint: function (v) {\n    useEndpoint = v;\n  }\n}, 4);\nvar useTranslation;\nmodule.link(\"../../../contexts/TranslationContext\", {\n  useTranslation: function (v) {\n    useTranslation = v;\n  }\n}, 5);\nvar CloudLoginModal;\nmodule.link(\"./CloudLoginModal\", {\n  \"default\": function (v) {\n    CloudLoginModal = v;\n  }\n}, 6);\nvar IframeModal;\nmodule.link(\"./IframeModal\", {\n  \"default\": function (v) {\n    IframeModal = v;\n  }\n}, 7);\nvar WarningModal;\nmodule.link(\"./WarningModal\", {\n  \"default\": function (v) {\n    WarningModal = v;\n  }\n}, 8);\nvar appEnabledStatuses, warnStatusChange, handleAPIError;\nmodule.link(\"./helpers\", {\n  appEnabledStatuses: function (v) {\n    appEnabledStatuses = v;\n  },\n  warnStatusChange: function (v) {\n    warnStatusChange = v;\n  },\n  handleAPIError: function (v) {\n    handleAPIError = v;\n  }\n}, 9);\n\nfunction AppMenu(_ref) {\n  var app = _ref.app,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  var t = useTranslation();\n  var setModal = useSetModal();\n  var appsRoute = useRoute('admin-apps');\n  var checkUserLoggedIn = useMethod('cloud:checkUserLoggedIn');\n  var setAppStatus = useEndpoint('POST', \"/apps/\" + app.id + \"/status\");\n  var buildExternalUrl = useEndpoint('GET', '/apps');\n  var syncApp = useEndpoint('POST', \"/apps/\" + app.id + \"/sync\");\n  var uninstallApp = useEndpoint('DELETE', \"/apps/\" + app.id);\n  var canAppBeSubscribed = app.purchaseType === 'subscription';\n  var isSubscribed = app.subscriptionInfo && ['active', 'trialing'].includes(app.subscriptionInfo.status);\n  var isAppEnabled = appEnabledStatuses.includes(app.status);\n  var closeModal = useCallback(function () {\n    setModal(null);\n  }, [setModal]);\n  var handleEnable = useCallback(function () {\n    function _callee() {\n      var _await$setAppStatus, status;\n\n      return _regeneratorRuntime.async(function () {\n        function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.prev = 0;\n                _context.next = 3;\n                return _regeneratorRuntime.awrap(setAppStatus({\n                  status: 'manually_enabled'\n                }));\n\n              case 3:\n                _await$setAppStatus = _context.sent;\n                status = _await$setAppStatus.status;\n                warnStatusChange(app.name, status);\n                _context.next = 11;\n                break;\n\n              case 8:\n                _context.prev = 8;\n                _context.t0 = _context[\"catch\"](0);\n                handleAPIError(_context.t0);\n\n              case 11:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }\n\n        return _callee$;\n      }(), null, null, [[0, 8]], Promise);\n    }\n\n    return _callee;\n  }(), [app.name, setAppStatus]);\n  var handleViewLogs = useCallback(function () {\n    appsRoute.push({\n      context: 'logs',\n      id: app.id\n    });\n  }, [app.id, appsRoute]);\n  var handleSubscription = useCallback(function () {\n    function _callee3() {\n      var data, confirm;\n      return _regeneratorRuntime.async(function () {\n        function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                _context3.next = 2;\n                return _regeneratorRuntime.awrap(checkUserLoggedIn());\n\n              case 2:\n                if (_context3.sent) {\n                  _context3.next = 5;\n                  break;\n                }\n\n                setModal( /*#__PURE__*/React.createElement(CloudLoginModal, null));\n                return _context3.abrupt(\"return\");\n\n              case 5:\n                _context3.prev = 5;\n                _context3.next = 8;\n                return _regeneratorRuntime.awrap(buildExternalUrl({\n                  buildExternalUrl: 'true',\n                  appId: app.id,\n                  purchaseType: app.purchaseType,\n                  details: true\n                }));\n\n              case 8:\n                data = _context3.sent;\n                _context3.next = 15;\n                break;\n\n              case 11:\n                _context3.prev = 11;\n                _context3.t0 = _context3[\"catch\"](5);\n                handleAPIError(_context3.t0);\n                return _context3.abrupt(\"return\");\n\n              case 15:\n                confirm = function () {\n                  function _callee2() {\n                    return _regeneratorRuntime.async(function () {\n                      function _callee2$(_context2) {\n                        while (1) {\n                          switch (_context2.prev = _context2.next) {\n                            case 0:\n                              _context2.prev = 0;\n                              _context2.next = 3;\n                              return _regeneratorRuntime.awrap(syncApp());\n\n                            case 3:\n                              _context2.next = 8;\n                              break;\n\n                            case 5:\n                              _context2.prev = 5;\n                              _context2.t0 = _context2[\"catch\"](0);\n                              handleAPIError(_context2.t0);\n\n                            case 8:\n                            case \"end\":\n                              return _context2.stop();\n                          }\n                        }\n                      }\n\n                      return _callee2$;\n                    }(), null, null, [[0, 5]], Promise);\n                  }\n\n                  return _callee2;\n                }();\n\n                setModal( /*#__PURE__*/React.createElement(IframeModal, {\n                  url: data.url,\n                  confirm: confirm,\n                  cancel: closeModal\n                }));\n\n              case 17:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }\n\n        return _callee3$;\n      }(), null, null, [[5, 11]], Promise);\n    }\n\n    return _callee3;\n  }(), [checkUserLoggedIn, setModal, closeModal, buildExternalUrl, app.id, app.purchaseType, syncApp]);\n  var handleDisable = useCallback(function () {\n    var confirm = function () {\n      function _callee4() {\n        var _await$setAppStatus2, status;\n\n        return _regeneratorRuntime.async(function () {\n          function _callee4$(_context4) {\n            while (1) {\n              switch (_context4.prev = _context4.next) {\n                case 0:\n                  closeModal();\n                  _context4.prev = 1;\n                  _context4.next = 4;\n                  return _regeneratorRuntime.awrap(setAppStatus({\n                    status: 'manually_disabled'\n                  }));\n\n                case 4:\n                  _await$setAppStatus2 = _context4.sent;\n                  status = _await$setAppStatus2.status;\n                  warnStatusChange(app.name, status);\n                  _context4.next = 12;\n                  break;\n\n                case 9:\n                  _context4.prev = 9;\n                  _context4.t0 = _context4[\"catch\"](1);\n                  handleAPIError(_context4.t0);\n\n                case 12:\n                case \"end\":\n                  return _context4.stop();\n              }\n            }\n          }\n\n          return _callee4$;\n        }(), null, null, [[1, 9]], Promise);\n      }\n\n      return _callee4;\n    }();\n\n    setModal( /*#__PURE__*/React.createElement(WarningModal, {\n      close: closeModal,\n      confirm: confirm,\n      text: t('Apps_Marketplace_Deactivate_App_Prompt'),\n      confirmText: t('Yes')\n    }));\n  }, [app.name, closeModal, setAppStatus, setModal, t]);\n  var handleUninstall = useCallback(function () {\n    var uninstall = function () {\n      function _callee5() {\n        return _regeneratorRuntime.async(function () {\n          function _callee5$(_context5) {\n            while (1) {\n              switch (_context5.prev = _context5.next) {\n                case 0:\n                  closeModal();\n                  _context5.prev = 1;\n                  _context5.next = 4;\n                  return _regeneratorRuntime.awrap(uninstallApp());\n\n                case 4:\n                  _context5.next = 9;\n                  break;\n\n                case 6:\n                  _context5.prev = 6;\n                  _context5.t0 = _context5[\"catch\"](1);\n                  handleAPIError(_context5.t0);\n\n                case 9:\n                case \"end\":\n                  return _context5.stop();\n              }\n            }\n          }\n\n          return _callee5$;\n        }(), null, null, [[1, 6]], Promise);\n      }\n\n      return _callee5;\n    }();\n\n    if (isSubscribed) {\n      var confirm = function () {\n        function _callee6() {\n          return _regeneratorRuntime.async(function () {\n            function _callee6$(_context6) {\n              while (1) {\n                switch (_context6.prev = _context6.next) {\n                  case 0:\n                    _context6.next = 2;\n                    return _regeneratorRuntime.awrap(handleSubscription());\n\n                  case 2:\n                  case \"end\":\n                    return _context6.stop();\n                }\n              }\n            }\n\n            return _callee6$;\n          }(), null, null, null, Promise);\n        }\n\n        return _callee6;\n      }();\n\n      setModal( /*#__PURE__*/React.createElement(WarningModal, {\n        close: closeModal,\n        cancel: uninstall,\n        confirm: confirm,\n        text: t('Apps_Marketplace_Uninstall_Subscribed_App_Prompt'),\n        confirmText: t('Apps_Marketplace_Modify_App_Subscription'),\n        cancelText: t('Apps_Marketplace_Uninstall_Subscribed_App_Anyway')\n      }));\n    }\n\n    setModal( /*#__PURE__*/React.createElement(WarningModal, {\n      close: closeModal,\n      confirm: uninstall,\n      text: t('Apps_Marketplace_Uninstall_App_Prompt'),\n      confirmText: t('Yes')\n    }));\n  }, [closeModal, handleSubscription, isSubscribed, setModal, t, uninstallApp]);\n  var menuOptions = useMemo(function () {\n    return _objectSpread(_objectSpread(_objectSpread(_objectSpread({}, canAppBeSubscribed && {\n      subscribe: {\n        label: /*#__PURE__*/React.createElement(Box, null, /*#__PURE__*/React.createElement(Icon, {\n          name: \"card\",\n          size: \"x16\",\n          marginInlineEnd: \"x4\"\n        }), t('Subscription')),\n        action: handleSubscription\n      }\n    }), {}, {\n      viewLogs: {\n        label: /*#__PURE__*/React.createElement(Box, null, /*#__PURE__*/React.createElement(Icon, {\n          name: \"list-alt\",\n          size: \"x16\",\n          marginInlineEnd: \"x4\"\n        }), t('View_Logs')),\n        action: handleViewLogs\n      }\n    }, isAppEnabled && {\n      disable: {\n        label: /*#__PURE__*/React.createElement(Box, {\n          color: \"warning\"\n        }, /*#__PURE__*/React.createElement(Icon, {\n          name: \"ban\",\n          size: \"x16\",\n          marginInlineEnd: \"x4\"\n        }), t('Disable')),\n        action: handleDisable\n      }\n    }), !isAppEnabled && {\n      enable: {\n        label: /*#__PURE__*/React.createElement(Box, null, /*#__PURE__*/React.createElement(Icon, {\n          name: \"check\",\n          size: \"x16\",\n          marginInlineEnd: \"x4\"\n        }), t('Enable')),\n        action: handleEnable\n      }\n    }), {}, {\n      uninstall: {\n        label: /*#__PURE__*/React.createElement(Box, {\n          color: \"danger\"\n        }, /*#__PURE__*/React.createElement(Icon, {\n          name: \"trash\",\n          size: \"x16\",\n          marginInlineEnd: \"x4\"\n        }), t('Uninstall')),\n        action: handleUninstall\n      }\n    });\n  }, [canAppBeSubscribed, t, handleSubscription, handleViewLogs, isAppEnabled, handleDisable, handleEnable, handleUninstall]);\n  return /*#__PURE__*/React.createElement(Menu, _extends({\n    options: menuOptions,\n    placement: \"bottom-start\"\n  }, props));\n}\n\nmodule.exportDefault(AppMenu);","map":{"version":3,"sources":["client/views/admin/apps/AppMenu.js"],"names":["_regeneratorRuntime","module","link","default","v","_extends","_objectSpread","_objectWithoutProperties","Box","Icon","Menu","React","useMemo","useCallback","useSetModal","useRoute","useMethod","useEndpoint","useTranslation","CloudLoginModal","IframeModal","WarningModal","appEnabledStatuses","warnStatusChange","handleAPIError","AppMenu","app","props","t","setModal","appsRoute","checkUserLoggedIn","setAppStatus","id","buildExternalUrl","syncApp","uninstallApp","canAppBeSubscribed","purchaseType","isSubscribed","subscriptionInfo","includes","status","isAppEnabled","closeModal","handleEnable","name","handleViewLogs","push","context","handleSubscription","appId","details","data","confirm","url","handleDisable","handleUninstall","uninstall","menuOptions","subscribe","label","action","viewLogs","disable","enable","exportDefault"],"mappings":"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","sourcesContent":["import { Box, Icon, Menu } from '@rocket.chat/fuselage';\nimport React, { useMemo, useCallback } from 'react';\n\nimport { useSetModal } from '../../../contexts/ModalContext';\nimport { useRoute } from '../../../contexts/RouterContext';\nimport { useMethod, useEndpoint } from '../../../contexts/ServerContext';\nimport { useTranslation } from '../../../contexts/TranslationContext';\nimport CloudLoginModal from './CloudLoginModal';\nimport IframeModal from './IframeModal';\nimport WarningModal from './WarningModal';\nimport { appEnabledStatuses, warnStatusChange, handleAPIError } from './helpers';\n\nfunction AppMenu({ app, ...props }) {\n\tconst t = useTranslation();\n\tconst setModal = useSetModal();\n\tconst appsRoute = useRoute('admin-apps');\n\tconst checkUserLoggedIn = useMethod('cloud:checkUserLoggedIn');\n\n\tconst setAppStatus = useEndpoint('POST', `/apps/${app.id}/status`);\n\tconst buildExternalUrl = useEndpoint('GET', '/apps');\n\tconst syncApp = useEndpoint('POST', `/apps/${app.id}/sync`);\n\tconst uninstallApp = useEndpoint('DELETE', `/apps/${app.id}`);\n\n\tconst canAppBeSubscribed = app.purchaseType === 'subscription';\n\tconst isSubscribed = app.subscriptionInfo && ['active', 'trialing'].includes(app.subscriptionInfo.status);\n\tconst isAppEnabled = appEnabledStatuses.includes(app.status);\n\n\tconst closeModal = useCallback(() => {\n\t\tsetModal(null);\n\t}, [setModal]);\n\n\tconst handleEnable = useCallback(async () => {\n\t\ttry {\n\t\t\tconst { status } = await setAppStatus({ status: 'manually_enabled' });\n\t\t\twarnStatusChange(app.name, status);\n\t\t} catch (error) {\n\t\t\thandleAPIError(error);\n\t\t}\n\t}, [app.name, setAppStatus]);\n\n\tconst handleViewLogs = useCallback(() => {\n\t\tappsRoute.push({ context: 'logs', id: app.id });\n\t}, [app.id, appsRoute]);\n\n\tconst handleSubscription = useCallback(async () => {\n\t\tif (!(await checkUserLoggedIn())) {\n\t\t\tsetModal(<CloudLoginModal />);\n\t\t\treturn;\n\t\t}\n\n\t\tlet data;\n\t\ttry {\n\t\t\tdata = await buildExternalUrl({\n\t\t\t\tbuildExternalUrl: 'true',\n\t\t\t\tappId: app.id,\n\t\t\t\tpurchaseType: app.purchaseType,\n\t\t\t\tdetails: true,\n\t\t\t});\n\t\t} catch (error) {\n\t\t\thandleAPIError(error);\n\t\t\treturn;\n\t\t}\n\n\t\tconst confirm = async () => {\n\t\t\ttry {\n\t\t\t\tawait syncApp();\n\t\t\t} catch (error) {\n\t\t\t\thandleAPIError(error);\n\t\t\t}\n\t\t};\n\n\t\tsetModal(<IframeModal url={data.url} confirm={confirm} cancel={closeModal} />);\n\t}, [checkUserLoggedIn, setModal, closeModal, buildExternalUrl, app.id, app.purchaseType, syncApp]);\n\n\tconst handleDisable = useCallback(() => {\n\t\tconst confirm = async () => {\n\t\t\tcloseModal();\n\t\t\ttry {\n\t\t\t\tconst { status } = await setAppStatus({ status: 'manually_disabled' });\n\t\t\t\twarnStatusChange(app.name, status);\n\t\t\t} catch (error) {\n\t\t\t\thandleAPIError(error);\n\t\t\t}\n\t\t};\n\t\tsetModal(\n\t\t\t<WarningModal close={closeModal} confirm={confirm} text={t('Apps_Marketplace_Deactivate_App_Prompt')} confirmText={t('Yes')} />,\n\t\t);\n\t}, [app.name, closeModal, setAppStatus, setModal, t]);\n\n\tconst handleUninstall = useCallback(() => {\n\t\tconst uninstall = async () => {\n\t\t\tcloseModal();\n\t\t\ttry {\n\t\t\t\tawait uninstallApp();\n\t\t\t} catch (error) {\n\t\t\t\thandleAPIError(error);\n\t\t\t}\n\t\t};\n\n\t\tif (isSubscribed) {\n\t\t\tconst confirm = async () => {\n\t\t\t\tawait handleSubscription();\n\t\t\t};\n\n\t\t\tsetModal(\n\t\t\t\t<WarningModal\n\t\t\t\t\tclose={closeModal}\n\t\t\t\t\tcancel={uninstall}\n\t\t\t\t\tconfirm={confirm}\n\t\t\t\t\ttext={t('Apps_Marketplace_Uninstall_Subscribed_App_Prompt')}\n\t\t\t\t\tconfirmText={t('Apps_Marketplace_Modify_App_Subscription')}\n\t\t\t\t\tcancelText={t('Apps_Marketplace_Uninstall_Subscribed_App_Anyway')}\n\t\t\t\t/>,\n\t\t\t);\n\t\t}\n\n\t\tsetModal(\n\t\t\t<WarningModal close={closeModal} confirm={uninstall} text={t('Apps_Marketplace_Uninstall_App_Prompt')} confirmText={t('Yes')} />,\n\t\t);\n\t}, [closeModal, handleSubscription, isSubscribed, setModal, t, uninstallApp]);\n\n\tconst menuOptions = useMemo(\n\t\t() => ({\n\t\t\t...(canAppBeSubscribed && {\n\t\t\t\tsubscribe: {\n\t\t\t\t\tlabel: (\n\t\t\t\t\t\t<Box>\n\t\t\t\t\t\t\t<Icon name='card' size='x16' marginInlineEnd='x4' />\n\t\t\t\t\t\t\t{t('Subscription')}\n\t\t\t\t\t\t</Box>\n\t\t\t\t\t),\n\t\t\t\t\taction: handleSubscription,\n\t\t\t\t},\n\t\t\t}),\n\t\t\tviewLogs: {\n\t\t\t\tlabel: (\n\t\t\t\t\t<Box>\n\t\t\t\t\t\t<Icon name='list-alt' size='x16' marginInlineEnd='x4' />\n\t\t\t\t\t\t{t('View_Logs')}\n\t\t\t\t\t</Box>\n\t\t\t\t),\n\t\t\t\taction: handleViewLogs,\n\t\t\t},\n\t\t\t...(isAppEnabled && {\n\t\t\t\tdisable: {\n\t\t\t\t\tlabel: (\n\t\t\t\t\t\t<Box color='warning'>\n\t\t\t\t\t\t\t<Icon name='ban' size='x16' marginInlineEnd='x4' />\n\t\t\t\t\t\t\t{t('Disable')}\n\t\t\t\t\t\t</Box>\n\t\t\t\t\t),\n\t\t\t\t\taction: handleDisable,\n\t\t\t\t},\n\t\t\t}),\n\t\t\t...(!isAppEnabled && {\n\t\t\t\tenable: {\n\t\t\t\t\tlabel: (\n\t\t\t\t\t\t<Box>\n\t\t\t\t\t\t\t<Icon name='check' size='x16' marginInlineEnd='x4' />\n\t\t\t\t\t\t\t{t('Enable')}\n\t\t\t\t\t\t</Box>\n\t\t\t\t\t),\n\t\t\t\t\taction: handleEnable,\n\t\t\t\t},\n\t\t\t}),\n\t\t\tuninstall: {\n\t\t\t\tlabel: (\n\t\t\t\t\t<Box color='danger'>\n\t\t\t\t\t\t<Icon name='trash' size='x16' marginInlineEnd='x4' />\n\t\t\t\t\t\t{t('Uninstall')}\n\t\t\t\t\t</Box>\n\t\t\t\t),\n\t\t\t\taction: handleUninstall,\n\t\t\t},\n\t\t}),\n\t\t[canAppBeSubscribed, t, handleSubscription, handleViewLogs, isAppEnabled, handleDisable, handleEnable, handleUninstall],\n\t);\n\n\treturn <Menu options={menuOptions} placement='bottom-start' {...props} />;\n}\n\nexport default AppMenu;\n"]},"sourceType":"module","hash":"01e24710a1d90536555ec72bc3647caecb05996c"}
