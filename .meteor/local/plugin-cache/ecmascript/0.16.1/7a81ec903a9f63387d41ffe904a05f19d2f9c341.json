{"metadata":{},"options":{"assumptions":{},"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat/app/ui-message/client/messageBox/messageBoxAutogrow.js","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","classProperties","classPrivateProperties","jsx","nullishCoalescingOperator","nullishCoalescingOperator","optionalChaining","optionalCatchBinding","optionalCatchBinding","classProperties","classPrivateProperties","classPrivateMethods","classProperties","classPrivateProperties","asyncGenerators","asyncGenerators","objectRestSpread","logicalAssignment"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"allowUndeclaredExports":true,"strictMode":false},"caller":{"name":"meteor","arch":"web.browser.legacy"},"sourceFileName":"app/ui-message/client/messageBox/messageBoxAutogrow.js","filename":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat/app/ui-message/client/messageBox/messageBoxAutogrow.js","targets":{"android":"95.0.0","chrome":"95.0.0","edge":"95.0.0","firefox":"78.0.0","ie":"10.0.0","ios":"15.0.0","opera":"81.0.0","safari":"15.1.0","samsung":"14.0.0"},"cloneInputAst":true,"browserslistConfigFile":false,"passPerPreset":false,"envName":"development","cwd":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat","root":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat","rootMode":"root","plugins":[{"key":"base$0","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0","visitor":{"Program":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true},"options":{"avoidModernSyntax":true,"enforceStrictMode":false,"dynamicImport":true}},{"key":"transform-runtime","visitor":{"MemberExpression":{"enter":[null]},"ObjectPattern":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":{},"_verified":{},"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]}},"options":{"version":"7.16.5","helpers":true,"useESModules":false,"corejs":false}},{"key":"proposal-class-properties","visitor":{"PrivateName":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{"loose":true}},{"key":"base$0$3","visitor":{"FunctionExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$4","visitor":{"ForInStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-react-jsx","visitor":{"_exploded":{},"_verified":{},"JSXNamespacedName":{"enter":[null]},"JSXSpreadChild":{"enter":[null]},"Program":{"enter":[null]},"JSXElement":{"exit":[null]},"JSXFragment":{"exit":[null]},"JSXAttribute":{"enter":[null]}},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","runtime":"classic","throwIfNamespace":true,"useBuiltIns":false}},{"key":"transform-react-display-name","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-react-pure-annotations","visitor":{"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"syntax-nullish-coalescing-operator","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-nullish-coalescing-operator","visitor":{"_exploded":{},"_verified":{},"LogicalExpression":{"enter":[null]}},"options":{}},{"key":"syntax-optional-chaining","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-optional-chaining","visitor":{"_exploded":true,"OptionalCallExpression":{"enter":[null]},"OptionalMemberExpression":{"enter":[null]},"_verified":true},"options":{}},{"key":"syntax-optional-catch-binding","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-optional-catch-binding","visitor":{"_exploded":{},"_verified":{},"CatchClause":{"enter":[null]}},"options":{}},{"key":"syntax-class-properties","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-class-properties","visitor":{"PrivateName":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{}},{"key":"syntax-async-generators","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-async-generator-functions","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]}},"options":{}},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-object-rest-spread","visitor":{"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"proposal-logical-assignment-operators","visitor":{"_exploded":{},"_verified":{},"AssignmentExpression":{"enter":[null]}},"options":{}},{"key":"transform-arrow-functions","visitor":{"ArrowFunctionExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-block-scoped-functions","visitor":{"BlockStatement":{"enter":[null]},"SwitchCase":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-block-scoping","visitor":{"VariableDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"_exploded":true,"BlockStatement":{"enter":[null]},"SwitchStatement":{"enter":[null]},"Program":{"enter":[null]},"_verified":true,"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"transform-classes","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-computed-properties","visitor":{"ObjectExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-destructuring","visitor":{"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"VariableDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"transform-for-of","visitor":{"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-literals","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-object-super","visitor":{"ObjectExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-parameters","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{}},{"key":"transform-shorthand-properties","visitor":{"ObjectMethod":{"enter":[null]},"ObjectProperty":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-spread","visitor":{"ArrayExpression":{"enter":[null]},"CallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-sticky-regex","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-template-literals","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-typeof-symbol","visitor":{"UnaryExpression":{"enter":[null]},"_exploded":true,"_verified":true,"BlockStatement":{"enter":[null]},"CatchClause":{"enter":[null]},"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"Program":{"enter":[null]},"ObjectMethod":{"enter":[null]},"SwitchStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ForOfStatement":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"StaticBlock":{"enter":[null]},"TSModuleBlock":{"enter":[null]},"AssignmentPattern":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectPattern":{"enter":[null]}},"options":{}},{"key":"transform-unicode-regex","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-property-literals","visitor":{"ObjectProperty":{"exit":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-exponentiation-operator","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"regenerator-transform","visitor":{"_exploded":true,"_verified":true,"ObjectMethod":{"enter":[null],"exit":[null]},"ClassMethod":{"enter":[null],"exit":[null]},"ClassPrivateMethod":{"enter":[null],"exit":[null]},"FunctionDeclaration":{"exit":[null]},"FunctionExpression":{"exit":[null]},"ArrowFunctionExpression":{"exit":[null]}},"options":{}}],"presets":[],"generatorOpts":{"filename":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat/app/ui-message/client/messageBox/messageBoxAutogrow.js","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"app/ui-message/client/messageBox/messageBoxAutogrow.js"}},"code":"module.export({\n  setupAutogrow: function () {\n    return setupAutogrow;\n  }\n});\n\nvar _;\n\nmodule.link(\"underscore\", {\n  \"default\": function (v) {\n    _ = v;\n  }\n}, 0);\n\nvar replaceWhitespaces = function (whitespaces) {\n  return '&nbsp;'.repeat(whitespaces.length - 1) + \" \";\n};\n\nvar setupAutogrow = function (textarea, shadow, callback) {\n  var width = textarea.clientWidth;\n  var height = textarea.clientHeight;\n\n  var _window$getComputedSt = window.getComputedStyle(textarea),\n      font = _window$getComputedSt.font,\n      lineHeight = _window$getComputedSt.lineHeight,\n      maxHeightPx = _window$getComputedSt.maxHeight;\n\n  shadow.style.position = 'fixed';\n  shadow.style.top = '-10000px';\n  shadow.style.left = '-10000px';\n  shadow.style.width = width + \"px\";\n  shadow.style.font = font;\n  shadow.style.lineHeight = lineHeight;\n  shadow.style.resize = 'none';\n  shadow.style.wordWrap = 'break-word';\n  var minHeight = height;\n  var maxHeight = parseInt(maxHeightPx, 10);\n  var lastWidth = width;\n  var lastHeight = minHeight;\n  var textLenght = 0;\n\n  var update = function () {\n    var width = textarea.clientWidth,\n        text = textarea.value;\n    var isMaximumHeightReached = lastHeight >= maxHeight;\n    var isTextLengthOutdated = textLenght && textLenght < text.length;\n    var wasWidthChanged = width !== lastWidth;\n\n    if (isMaximumHeightReached && isTextLengthOutdated && !wasWidthChanged) {\n      return true;\n    }\n\n    var shadowText = text.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;').replace(/\\n$/, '<br/>&nbsp;').replace(/\\n/g, '<br/>').replace(/ {2,}/g, replaceWhitespaces);\n\n    if (wasWidthChanged) {\n      shadow.style.width = width + \"px\";\n      lastWidth = width;\n    }\n\n    shadow.innerHTML = shadowText;\n    var shadowHeight = Math.max(shadow.clientHeight + 1, minHeight) + 1;\n    var height = Math.min(shadowHeight, maxHeight);\n\n    if (height === lastHeight) {\n      return true;\n    }\n\n    lastHeight = height;\n    var overflow = height < maxHeight ? 'hidden' : '';\n\n    if (height < maxHeight) {\n      textLenght = text.length;\n    }\n\n    textarea.style.overflow = overflow;\n    textarea.style.height = height + \"px\";\n    callback && callback();\n  };\n\n  var updateThrottled = _.throttle(update, 300);\n\n  var $textarea = $(textarea);\n  $textarea.on('focus', update);\n  $textarea.on('change input', updateThrottled);\n  window.addEventListener('resize', updateThrottled, false);\n\n  var destroy = function () {\n    $textarea.off('focus', update);\n    $textarea.off('change input', updateThrottled);\n    window.removeEventListener('resize', updateThrottled);\n  };\n\n  update();\n  return {\n    update: update,\n    destroy: destroy\n  };\n};","map":{"version":3,"sources":["app/ui-message/client/messageBox/messageBoxAutogrow.js"],"names":["module","export","setupAutogrow","_","link","v","replaceWhitespaces","whitespaces","repeat","length","textarea","shadow","callback","width","clientWidth","height","clientHeight","window","getComputedStyle","font","lineHeight","maxHeightPx","maxHeight","style","position","top","left","resize","wordWrap","minHeight","parseInt","lastWidth","lastHeight","textLenght","update","text","value","isMaximumHeightReached","isTextLengthOutdated","wasWidthChanged","shadowText","replace","innerHTML","shadowHeight","Math","max","min","overflow","updateThrottled","throttle","$textarea","$","on","addEventListener","destroy","off","removeEventListener"],"mappings":"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","sourcesContent":["import _ from 'underscore';\n\nconst replaceWhitespaces = (whitespaces) => `${'&nbsp;'.repeat(whitespaces.length - 1)} `;\n\nexport const setupAutogrow = (textarea, shadow, callback) => {\n\tconst width = textarea.clientWidth;\n\tconst height = textarea.clientHeight;\n\tconst { font, lineHeight, maxHeight: maxHeightPx } = window.getComputedStyle(textarea);\n\n\tshadow.style.position = 'fixed';\n\tshadow.style.top = '-10000px';\n\tshadow.style.left = '-10000px';\n\tshadow.style.width = `${width}px`;\n\tshadow.style.font = font;\n\tshadow.style.lineHeight = lineHeight;\n\tshadow.style.resize = 'none';\n\tshadow.style.wordWrap = 'break-word';\n\n\tconst minHeight = height;\n\tconst maxHeight = parseInt(maxHeightPx, 10);\n\n\tlet lastWidth = width;\n\tlet lastHeight = minHeight;\n\tlet textLenght = 0;\n\n\tconst update = () => {\n\t\tconst { clientWidth: width, value: text } = textarea;\n\n\t\tconst isMaximumHeightReached = lastHeight >= maxHeight;\n\t\tconst isTextLengthOutdated = textLenght && textLenght < text.length;\n\t\tconst wasWidthChanged = width !== lastWidth;\n\n\t\tif (isMaximumHeightReached && isTextLengthOutdated && !wasWidthChanged) {\n\t\t\treturn true;\n\t\t}\n\n\t\tconst shadowText = text\n\t\t\t.replace(/&/g, '&amp;')\n\t\t\t.replace(/</g, '&lt;')\n\t\t\t.replace(/>/g, '&gt;')\n\t\t\t.replace(/\\n$/, '<br/>&nbsp;')\n\t\t\t.replace(/\\n/g, '<br/>')\n\t\t\t.replace(/ {2,}/g, replaceWhitespaces);\n\t\tif (wasWidthChanged) {\n\t\t\tshadow.style.width = `${width}px`;\n\t\t\tlastWidth = width;\n\t\t}\n\n\t\tshadow.innerHTML = shadowText;\n\n\t\tconst shadowHeight = Math.max(shadow.clientHeight + 1, minHeight) + 1;\n\t\tconst height = Math.min(shadowHeight, maxHeight);\n\n\t\tif (height === lastHeight) {\n\t\t\treturn true;\n\t\t}\n\n\t\tlastHeight = height;\n\n\t\tconst overflow = height < maxHeight ? 'hidden' : '';\n\n\t\tif (height < maxHeight) {\n\t\t\ttextLenght = text.length;\n\t\t}\n\n\t\ttextarea.style.overflow = overflow;\n\t\ttextarea.style.height = `${height}px`;\n\n\t\tcallback && callback();\n\t};\n\n\tconst updateThrottled = _.throttle(update, 300);\n\n\tconst $textarea = $(textarea);\n\t$textarea.on('focus', update);\n\t$textarea.on('change input', updateThrottled);\n\twindow.addEventListener('resize', updateThrottled, false);\n\n\tconst destroy = () => {\n\t\t$textarea.off('focus', update);\n\t\t$textarea.off('change input', updateThrottled);\n\t\twindow.removeEventListener('resize', updateThrottled);\n\t};\n\n\tupdate();\n\n\treturn {\n\t\tupdate,\n\t\tdestroy,\n\t};\n};\n"]},"sourceType":"module","hash":"7a81ec903a9f63387d41ffe904a05f19d2f9c341"}
