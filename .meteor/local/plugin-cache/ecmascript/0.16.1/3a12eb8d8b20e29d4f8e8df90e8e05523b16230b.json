{"metadata":{},"options":{"assumptions":{},"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat/client/views/room/contextualBar/RoomMembers/List/RoomMembersWithData.js","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","classProperties","classPrivateProperties","jsx","nullishCoalescingOperator","nullishCoalescingOperator","optionalChaining","optionalCatchBinding","optionalCatchBinding","classProperties","classPrivateProperties","classPrivateMethods","classProperties","classPrivateProperties","asyncGenerators","asyncGenerators","objectRestSpread","logicalAssignment"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"allowUndeclaredExports":true,"strictMode":false},"caller":{"name":"meteor","arch":"web.browser.legacy"},"sourceFileName":"client/views/room/contextualBar/RoomMembers/List/RoomMembersWithData.js","filename":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat/client/views/room/contextualBar/RoomMembers/List/RoomMembersWithData.js","targets":{"android":"95.0.0","chrome":"95.0.0","edge":"95.0.0","firefox":"78.0.0","ie":"10.0.0","ios":"15.0.0","opera":"81.0.0","safari":"15.1.0","samsung":"14.0.0"},"cloneInputAst":true,"browserslistConfigFile":false,"passPerPreset":false,"envName":"development","cwd":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat","root":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat","rootMode":"root","plugins":[{"key":"base$0","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0","visitor":{"Program":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true},"options":{"avoidModernSyntax":true,"enforceStrictMode":false,"dynamicImport":true}},{"key":"transform-runtime","visitor":{"MemberExpression":{"enter":[null]},"ObjectPattern":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":{},"_verified":{},"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]}},"options":{"version":"7.16.5","helpers":true,"useESModules":false,"corejs":false}},{"key":"proposal-class-properties","visitor":{"PrivateName":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{"loose":true}},{"key":"base$0$3","visitor":{"FunctionExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$4","visitor":{"ForInStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-react-jsx","visitor":{"_exploded":{},"_verified":{},"JSXNamespacedName":{"enter":[null]},"JSXSpreadChild":{"enter":[null]},"Program":{"enter":[null]},"JSXElement":{"exit":[null]},"JSXFragment":{"exit":[null]},"JSXAttribute":{"enter":[null]}},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","runtime":"classic","throwIfNamespace":true,"useBuiltIns":false}},{"key":"transform-react-display-name","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-react-pure-annotations","visitor":{"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"syntax-nullish-coalescing-operator","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-nullish-coalescing-operator","visitor":{"_exploded":{},"_verified":{},"LogicalExpression":{"enter":[null]}},"options":{}},{"key":"syntax-optional-chaining","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-optional-chaining","visitor":{"_exploded":true,"OptionalCallExpression":{"enter":[null]},"OptionalMemberExpression":{"enter":[null]},"_verified":true},"options":{}},{"key":"syntax-optional-catch-binding","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-optional-catch-binding","visitor":{"_exploded":{},"_verified":{},"CatchClause":{"enter":[null]}},"options":{}},{"key":"syntax-class-properties","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-class-properties","visitor":{"PrivateName":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{}},{"key":"syntax-async-generators","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-async-generator-functions","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]}},"options":{}},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-object-rest-spread","visitor":{"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"proposal-logical-assignment-operators","visitor":{"_exploded":{},"_verified":{},"AssignmentExpression":{"enter":[null]}},"options":{}},{"key":"transform-arrow-functions","visitor":{"ArrowFunctionExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-block-scoped-functions","visitor":{"BlockStatement":{"enter":[null]},"SwitchCase":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-block-scoping","visitor":{"VariableDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"_exploded":true,"BlockStatement":{"enter":[null]},"SwitchStatement":{"enter":[null]},"Program":{"enter":[null]},"_verified":true,"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"transform-classes","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-computed-properties","visitor":{"ObjectExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-destructuring","visitor":{"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"VariableDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"transform-for-of","visitor":{"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-literals","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-object-super","visitor":{"ObjectExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-parameters","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{}},{"key":"transform-shorthand-properties","visitor":{"ObjectMethod":{"enter":[null]},"ObjectProperty":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-spread","visitor":{"ArrayExpression":{"enter":[null]},"CallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-sticky-regex","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-template-literals","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-typeof-symbol","visitor":{"UnaryExpression":{"enter":[null]},"_exploded":true,"_verified":true,"BlockStatement":{"enter":[null]},"CatchClause":{"enter":[null]},"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"Program":{"enter":[null]},"ObjectMethod":{"enter":[null]},"SwitchStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ForOfStatement":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"StaticBlock":{"enter":[null]},"TSModuleBlock":{"enter":[null]},"AssignmentPattern":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectPattern":{"enter":[null]}},"options":{}},{"key":"transform-unicode-regex","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-property-literals","visitor":{"ObjectProperty":{"exit":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-exponentiation-operator","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"regenerator-transform","visitor":{"_exploded":true,"_verified":true,"ObjectMethod":{"enter":[null],"exit":[null]},"ClassMethod":{"enter":[null],"exit":[null]},"ClassPrivateMethod":{"enter":[null],"exit":[null]},"FunctionDeclaration":{"exit":[null]},"FunctionExpression":{"exit":[null]},"ArrowFunctionExpression":{"exit":[null]}},"options":{}}],"presets":[],"generatorOpts":{"filename":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat/client/views/room/contextualBar/RoomMembers/List/RoomMembersWithData.js","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"client/views/room/contextualBar/RoomMembers/List/RoomMembersWithData.js"}},"code":"var _slicedToArray;\n\nmodule.link(\"@babel/runtime/helpers/slicedToArray\", {\n  default: function (v) {\n    _slicedToArray = v;\n  }\n}, 0);\nvar useMutableCallback, useDebouncedValue, useLocalStorage;\nmodule.link(\"@rocket.chat/fuselage-hooks\", {\n  useMutableCallback: function (v) {\n    useMutableCallback = v;\n  },\n  useDebouncedValue: function (v) {\n    useDebouncedValue = v;\n  },\n  useLocalStorage: function (v) {\n    useLocalStorage = v;\n  }\n}, 0);\nvar React, useCallback, useMemo, useState;\nmodule.link(\"react\", {\n  \"default\": function (v) {\n    React = v;\n  },\n  useCallback: function (v) {\n    useCallback = v;\n  },\n  useMemo: function (v) {\n    useMemo = v;\n  },\n  useState: function (v) {\n    useState = v;\n  }\n}, 1);\nvar useAtLeastOnePermission;\nmodule.link(\"../../../../../contexts/AuthorizationContext\", {\n  useAtLeastOnePermission: function (v) {\n    useAtLeastOnePermission = v;\n  }\n}, 2);\nvar useUserRoom;\nmodule.link(\"../../../../../contexts/UserContext\", {\n  useUserRoom: function (v) {\n    useUserRoom = v;\n  }\n}, 3);\nvar useRecordList;\nmodule.link(\"../../../../../hooks/lists/useRecordList\", {\n  useRecordList: function (v) {\n    useRecordList = v;\n  }\n}, 4);\nvar AsyncStatePhase;\nmodule.link(\"../../../../../hooks/useAsyncState\", {\n  AsyncStatePhase: function (v) {\n    AsyncStatePhase = v;\n  }\n}, 5);\nvar useMembersList;\nmodule.link(\"../../../../hooks/useMembersList\", {\n  useMembersList: function (v) {\n    useMembersList = v;\n  }\n}, 6);\nvar useTabBarClose;\nmodule.link(\"../../../providers/ToolboxProvider\", {\n  useTabBarClose: function (v) {\n    useTabBarClose = v;\n  }\n}, 7);\nvar UserInfoWithData;\nmodule.link(\"../../UserInfo\", {\n  \"default\": function (v) {\n    UserInfoWithData = v;\n  }\n}, 8);\nvar AddUsers;\nmodule.link(\"../AddUsers\", {\n  \"default\": function (v) {\n    AddUsers = v;\n  }\n}, 9);\nvar InviteUsers;\nmodule.link(\"../InviteUsers\", {\n  \"default\": function (v) {\n    InviteUsers = v;\n  }\n}, 10);\nvar RoomMembers;\nmodule.link(\"./RoomMembers\", {\n  \"default\": function (v) {\n    RoomMembers = v;\n  }\n}, 11);\n\nvar RoomMembersWithData = function (_ref) {\n  var rid = _ref.rid;\n\n  var _useState = useState({}),\n      _useState2 = _slicedToArray(_useState, 2),\n      state = _useState2[0],\n      setState = _useState2[1];\n\n  var onClickClose = useTabBarClose();\n  var room = useUserRoom(rid);\n  var isTeam = room.teamMain;\n  var isDirect = room.t === 'd';\n  room.type = room.t;\n  room.rid = rid;\n\n  var _useLocalStorage = useLocalStorage('members-list-type', 'online'),\n      _useLocalStorage2 = _slicedToArray(_useLocalStorage, 2),\n      type = _useLocalStorage2[0],\n      setType = _useLocalStorage2[1];\n\n  var _useState3 = useState(''),\n      _useState4 = _slicedToArray(_useState3, 2),\n      text = _useState4[0],\n      setText = _useState4[1];\n\n  var debouncedText = useDebouncedValue(text, 800);\n\n  var _useMembersList = useMembersList(useMemo(function () {\n    return {\n      rid: rid,\n      type: type,\n      limit: 50,\n      debouncedText: debouncedText,\n      roomType: room.t\n    };\n  }, [rid, type, debouncedText, room.t])),\n      membersList = _useMembersList.membersList,\n      loadMoreItems = _useMembersList.loadMoreItems,\n      reload = _useMembersList.reload;\n\n  var _useRecordList = useRecordList(membersList),\n      phase = _useRecordList.phase,\n      items = _useRecordList.items,\n      total = _useRecordList.itemCount;\n\n  var canAddUsers = useAtLeastOnePermission(useMemo(function () {\n    return [room.t === 'p' ? 'add-user-to-any-p-room' : 'add-user-to-any-c-room', 'add-user-to-joined-room'];\n  }, [room.t]), rid);\n  var handleTextChange = useCallback(function (event) {\n    setText(event.currentTarget.value);\n  }, []);\n  var viewUser = useMutableCallback(function (e) {\n    var username = e.currentTarget.dataset.username;\n    setState({\n      tab: 'UserInfo',\n      username: username\n    });\n  });\n  var createInvite = useMutableCallback(function () {\n    setState({\n      tab: 'InviteUsers'\n    });\n  });\n  var addUser = useMutableCallback(function () {\n    setState({\n      tab: 'AddUsers'\n    });\n  });\n  var handleBack = useCallback(function () {\n    setState({});\n    reload();\n  }, [setState, reload]);\n\n  if (state.tab === 'UserInfo') {\n    return /*#__PURE__*/React.createElement(UserInfoWithData, {\n      rid: rid,\n      onClickClose: onClickClose,\n      onClickBack: handleBack,\n      username: state.username\n    });\n  }\n\n  if (state.tab === 'InviteUsers') {\n    return /*#__PURE__*/React.createElement(InviteUsers, {\n      onClickClose: onClickClose,\n      rid: rid,\n      onClickBack: handleBack\n    });\n  }\n\n  if (state.tab === 'AddUsers') {\n    return /*#__PURE__*/React.createElement(AddUsers, {\n      onClickClose: onClickClose,\n      rid: rid,\n      onClickBack: handleBack,\n      reload: reload\n    });\n  }\n\n  return /*#__PURE__*/React.createElement(RoomMembers, {\n    rid: rid,\n    isTeam: isTeam,\n    isDirect: isDirect,\n    loading: phase === AsyncStatePhase.LOADING,\n    type: type,\n    text: text,\n    setType: setType,\n    setText: handleTextChange,\n    members: items,\n    total: total,\n    onClickClose: onClickClose,\n    onClickView: viewUser,\n    onClickAdd: canAddUsers && addUser,\n    onClickInvite: canAddUsers && createInvite,\n    loadMoreItems: loadMoreItems,\n    reload: reload\n  });\n};\n\nmodule.exportDefault(RoomMembersWithData);","map":{"version":3,"sources":["client/views/room/contextualBar/RoomMembers/List/RoomMembersWithData.js"],"names":["_slicedToArray","module","link","default","v","useMutableCallback","useDebouncedValue","useLocalStorage","React","useCallback","useMemo","useState","useAtLeastOnePermission","useUserRoom","useRecordList","AsyncStatePhase","useMembersList","useTabBarClose","UserInfoWithData","AddUsers","InviteUsers","RoomMembers","RoomMembersWithData","rid","state","setState","onClickClose","room","isTeam","teamMain","isDirect","t","type","setType","text","setText","debouncedText","limit","roomType","membersList","loadMoreItems","reload","phase","items","total","itemCount","canAddUsers","handleTextChange","event","currentTarget","value","viewUser","e","username","dataset","tab","createInvite","addUser","handleBack","LOADING","exportDefault"],"mappings":"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","sourcesContent":["import { useMutableCallback, useDebouncedValue, useLocalStorage } from '@rocket.chat/fuselage-hooks';\nimport React, { useCallback, useMemo, useState } from 'react';\n\nimport { useAtLeastOnePermission } from '../../../../../contexts/AuthorizationContext';\nimport { useUserRoom } from '../../../../../contexts/UserContext';\nimport { useRecordList } from '../../../../../hooks/lists/useRecordList';\nimport { AsyncStatePhase } from '../../../../../hooks/useAsyncState';\nimport { useMembersList } from '../../../../hooks/useMembersList';\nimport { useTabBarClose } from '../../../providers/ToolboxProvider';\nimport UserInfoWithData from '../../UserInfo';\nimport AddUsers from '../AddUsers';\nimport InviteUsers from '../InviteUsers';\nimport RoomMembers from './RoomMembers';\n\nconst RoomMembersWithData = ({ rid }) => {\n\tconst [state, setState] = useState({});\n\tconst onClickClose = useTabBarClose();\n\tconst room = useUserRoom(rid);\n\tconst isTeam = room.teamMain;\n\tconst isDirect = room.t === 'd';\n\n\troom.type = room.t;\n\troom.rid = rid;\n\n\tconst [type, setType] = useLocalStorage('members-list-type', 'online');\n\tconst [text, setText] = useState('');\n\n\tconst debouncedText = useDebouncedValue(text, 800);\n\n\tconst { membersList, loadMoreItems, reload } = useMembersList(\n\t\tuseMemo(() => ({ rid, type, limit: 50, debouncedText, roomType: room.t }), [rid, type, debouncedText, room.t]),\n\t);\n\n\tconst { phase, items, itemCount: total } = useRecordList(membersList);\n\n\tconst canAddUsers = useAtLeastOnePermission(\n\t\tuseMemo(() => [room.t === 'p' ? 'add-user-to-any-p-room' : 'add-user-to-any-c-room', 'add-user-to-joined-room'], [room.t]),\n\t\trid,\n\t);\n\n\tconst handleTextChange = useCallback((event) => {\n\t\tsetText(event.currentTarget.value);\n\t}, []);\n\n\tconst viewUser = useMutableCallback((e) => {\n\t\tconst { username } = e.currentTarget.dataset;\n\t\tsetState({\n\t\t\ttab: 'UserInfo',\n\t\t\tusername,\n\t\t});\n\t});\n\n\tconst createInvite = useMutableCallback(() => {\n\t\tsetState({ tab: 'InviteUsers' });\n\t});\n\n\tconst addUser = useMutableCallback(() => {\n\t\tsetState({ tab: 'AddUsers' });\n\t});\n\n\tconst handleBack = useCallback(() => {\n\t\tsetState({});\n\t\treload();\n\t}, [setState, reload]);\n\n\tif (state.tab === 'UserInfo') {\n\t\treturn <UserInfoWithData rid={rid} onClickClose={onClickClose} onClickBack={handleBack} username={state.username} />;\n\t}\n\n\tif (state.tab === 'InviteUsers') {\n\t\treturn <InviteUsers onClickClose={onClickClose} rid={rid} onClickBack={handleBack} />;\n\t}\n\n\tif (state.tab === 'AddUsers') {\n\t\treturn <AddUsers onClickClose={onClickClose} rid={rid} onClickBack={handleBack} reload={reload} />;\n\t}\n\n\treturn (\n\t\t<RoomMembers\n\t\t\trid={rid}\n\t\t\tisTeam={isTeam}\n\t\t\tisDirect={isDirect}\n\t\t\tloading={phase === AsyncStatePhase.LOADING}\n\t\t\ttype={type}\n\t\t\ttext={text}\n\t\t\tsetType={setType}\n\t\t\tsetText={handleTextChange}\n\t\t\tmembers={items}\n\t\t\ttotal={total}\n\t\t\tonClickClose={onClickClose}\n\t\t\tonClickView={viewUser}\n\t\t\tonClickAdd={canAddUsers && addUser}\n\t\t\tonClickInvite={canAddUsers && createInvite}\n\t\t\tloadMoreItems={loadMoreItems}\n\t\t\treload={reload}\n\t\t/>\n\t);\n};\n\nexport default RoomMembersWithData;\n"]},"sourceType":"module","hash":"3a12eb8d8b20e29d4f8e8df90e8e05523b16230b"}
