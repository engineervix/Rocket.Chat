{"metadata":{},"options":{"assumptions":{},"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat/app/emoji-emojione/lib/rocketchat.js","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","classProperties","classPrivateProperties","jsx","nullishCoalescingOperator","nullishCoalescingOperator","optionalChaining","optionalCatchBinding","optionalCatchBinding","classProperties","classPrivateProperties","classPrivateMethods","classProperties","classPrivateProperties","asyncGenerators","asyncGenerators","objectRestSpread","logicalAssignment"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"allowUndeclaredExports":true,"strictMode":false},"caller":{"name":"meteor","arch":"web.browser.legacy"},"sourceFileName":"app/emoji-emojione/lib/rocketchat.js","filename":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat/app/emoji-emojione/lib/rocketchat.js","targets":{"android":"95.0.0","chrome":"95.0.0","edge":"95.0.0","firefox":"78.0.0","ie":"10.0.0","ios":"15.0.0","opera":"81.0.0","safari":"15.1.0","samsung":"14.0.0"},"cloneInputAst":true,"browserslistConfigFile":false,"passPerPreset":false,"envName":"development","cwd":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat","root":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat","rootMode":"root","plugins":[{"key":"base$0","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0","visitor":{"Program":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true},"options":{"avoidModernSyntax":true,"enforceStrictMode":false,"dynamicImport":true}},{"key":"transform-runtime","visitor":{"MemberExpression":{"enter":[null]},"ObjectPattern":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":{},"_verified":{},"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]}},"options":{"version":"7.16.5","helpers":true,"useESModules":false,"corejs":false}},{"key":"proposal-class-properties","visitor":{"PrivateName":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{"loose":true}},{"key":"base$0$3","visitor":{"FunctionExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$4","visitor":{"ForInStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-react-jsx","visitor":{"_exploded":{},"_verified":{},"JSXNamespacedName":{"enter":[null]},"JSXSpreadChild":{"enter":[null]},"Program":{"enter":[null]},"JSXElement":{"exit":[null]},"JSXFragment":{"exit":[null]},"JSXAttribute":{"enter":[null]}},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","runtime":"classic","throwIfNamespace":true,"useBuiltIns":false}},{"key":"transform-react-display-name","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-react-pure-annotations","visitor":{"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"syntax-nullish-coalescing-operator","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-nullish-coalescing-operator","visitor":{"_exploded":{},"_verified":{},"LogicalExpression":{"enter":[null]}},"options":{}},{"key":"syntax-optional-chaining","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-optional-chaining","visitor":{"_exploded":true,"OptionalCallExpression":{"enter":[null]},"OptionalMemberExpression":{"enter":[null]},"_verified":true},"options":{}},{"key":"syntax-optional-catch-binding","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-optional-catch-binding","visitor":{"_exploded":{},"_verified":{},"CatchClause":{"enter":[null]}},"options":{}},{"key":"syntax-class-properties","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-class-properties","visitor":{"PrivateName":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{}},{"key":"syntax-async-generators","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-async-generator-functions","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]}},"options":{}},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-object-rest-spread","visitor":{"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"proposal-logical-assignment-operators","visitor":{"_exploded":{},"_verified":{},"AssignmentExpression":{"enter":[null]}},"options":{}},{"key":"transform-arrow-functions","visitor":{"ArrowFunctionExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-block-scoped-functions","visitor":{"BlockStatement":{"enter":[null]},"SwitchCase":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-block-scoping","visitor":{"VariableDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"_exploded":true,"BlockStatement":{"enter":[null]},"SwitchStatement":{"enter":[null]},"Program":{"enter":[null]},"_verified":true,"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"transform-classes","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-computed-properties","visitor":{"ObjectExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-destructuring","visitor":{"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"VariableDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"transform-for-of","visitor":{"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-literals","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-object-super","visitor":{"ObjectExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-parameters","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{}},{"key":"transform-shorthand-properties","visitor":{"ObjectMethod":{"enter":[null]},"ObjectProperty":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-spread","visitor":{"ArrayExpression":{"enter":[null]},"CallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-sticky-regex","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-template-literals","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-typeof-symbol","visitor":{"UnaryExpression":{"enter":[null]},"_exploded":true,"_verified":true,"BlockStatement":{"enter":[null]},"CatchClause":{"enter":[null]},"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"Program":{"enter":[null]},"ObjectMethod":{"enter":[null]},"SwitchStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ForOfStatement":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"StaticBlock":{"enter":[null]},"TSModuleBlock":{"enter":[null]},"AssignmentPattern":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectPattern":{"enter":[null]}},"options":{}},{"key":"transform-unicode-regex","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-property-literals","visitor":{"ObjectProperty":{"exit":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-exponentiation-operator","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"regenerator-transform","visitor":{"_exploded":true,"_verified":true,"ObjectMethod":{"enter":[null],"exit":[null]},"ClassMethod":{"enter":[null],"exit":[null]},"ClassPrivateMethod":{"enter":[null],"exit":[null]},"FunctionDeclaration":{"exit":[null]},"FunctionExpression":{"exit":[null]},"ArrowFunctionExpression":{"exit":[null]}},"options":{}}],"presets":[],"generatorOpts":{"filename":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat/app/emoji-emojione/lib/rocketchat.js","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"app/emoji-emojione/lib/rocketchat.js"}},"code":"var emojione;\nmodule.link(\"emojione\", {\n  \"default\": function (v) {\n    emojione = v;\n  }\n}, 0);\nvar Meteor;\nmodule.link(\"meteor/meteor\", {\n  Meteor: function (v) {\n    Meteor = v;\n  }\n}, 1);\nvar Tracker;\nmodule.link(\"meteor/tracker\", {\n  Tracker: function (v) {\n    Tracker = v;\n  }\n}, 2);\nvar mem;\nmodule.link(\"mem\", {\n  \"default\": function (v) {\n    mem = v;\n  }\n}, 3);\nvar emojioneRender, emojioneRenderFromShort;\nmodule.link(\"./emojioneRender\", {\n  emojioneRender: function (v) {\n    emojioneRender = v;\n  },\n  emojioneRenderFromShort: function (v) {\n    emojioneRenderFromShort = v;\n  }\n}, 4);\nvar emojisByCategory, emojiCategories, toneList;\nmodule.link(\"./emojiPicker\", {\n  emojisByCategory: function (v) {\n    emojisByCategory = v;\n  },\n  emojiCategories: function (v) {\n    emojiCategories = v;\n  },\n  toneList: function (v) {\n    toneList = v;\n  }\n}, 5);\nvar emoji;\nmodule.link(\"../../emoji\", {\n  emoji: function (v) {\n    emoji = v;\n  }\n}, 6);\nvar getUserPreference;\nmodule.link(\"../../utils\", {\n  getUserPreference: function (v) {\n    getUserPreference = v;\n  }\n}, 7);\n// TODO remove fix below when issue is solved: https://github.com/joypixels/emojione/issues/617\n// add missing emojis not provided by JS object, but included on emoji.json\nemojione.shortnames += '|:tm:|:copyright:|:registered:|:digit_zero:|:digit_one:|:digit_two:|:digit_three:|:digit_four:|:digit_five:|:digit_six:|:digit_seven:|:digit_eight:|:digit_nine:|:pound_symbol:|:asterisk_symbol:';\nemojione.regShortNames = new RegExp(\"<object[^>]*>.*?</object>|<span[^>]*>.*?</span>|<(?:object|embed|svg|img|div|span|p|a)[^>]*>|(\" + emojione.shortnames + \")\", 'gi');\nemojione.emojioneList[':tm:'] = {\n  uc_base: '2122',\n  uc_output: '2122-fe0f',\n  uc_match: '2122-fe0f',\n  uc_greedy: '2122-fe0f',\n  shortnames: [],\n  category: 'symbols',\n  emojiPackage: 'emojione'\n};\nemojione.emojioneList[':copyright:'] = {\n  uc_base: '00a9',\n  uc_output: '00a9-f0ef',\n  uc_match: '00a9-fe0f',\n  uc_greedy: '00a9-fe0f',\n  shortnames: [],\n  category: 'symbols',\n  emojiPackage: 'emojione'\n};\nemojione.emojioneList[':registered:'] = {\n  uc_base: '00ae',\n  uc_output: '00ae-fe0f',\n  uc_match: '00ae-fe0f',\n  uc_greedy: '00ae-fe0f',\n  shortnames: [],\n  category: 'symbols',\n  emojiPackage: 'emojione'\n};\nemojione.emojioneList[':digit_zero:'] = {\n  uc_base: '0030',\n  uc_output: '0030-fe0f',\n  uc_match: '0030-fe0f',\n  uc_greedy: '0030-fe0f',\n  shortnames: [],\n  category: 'symbols',\n  emojiPackage: 'emojione'\n};\nemojione.emojioneList[':digit_one:'] = {\n  uc_base: '0031',\n  uc_output: '0031-fe0f',\n  uc_match: '0031-fe0f',\n  uc_greedy: '0031-fe0f',\n  shortnames: [],\n  category: 'symbols',\n  emojiPackage: 'emojione'\n};\nemojione.emojioneList[':digit_two:'] = {\n  uc_base: '0032',\n  uc_output: '0032-fe0f',\n  uc_match: '0032-fe0f',\n  uc_greedy: '0032-fe0f',\n  shortnames: [],\n  category: 'symbols',\n  emojiPackage: 'emojione'\n};\nemojione.emojioneList[':digit_three:'] = {\n  uc_base: '0033',\n  uc_output: '0033-fe0f',\n  uc_match: '0033-fe0f',\n  uc_greedy: '0033-fe0f',\n  shortnames: [],\n  category: 'symbols',\n  emojiPackage: 'emojione'\n};\nemojione.emojioneList[':digit_four:'] = {\n  uc_base: '0034',\n  uc_output: '0034-fe0f',\n  uc_match: '0034-fe0f',\n  uc_greedy: '0034-fe0f',\n  shortnames: [],\n  category: 'symbols',\n  emojiPackage: 'emojione'\n};\nemojione.emojioneList[':digit_five:'] = {\n  uc_base: '0035',\n  uc_output: '0035-fe0f',\n  uc_match: '0035-fe0f',\n  uc_greedy: '0035-fe0f',\n  shortnames: [],\n  category: 'symbols',\n  emojiPackage: 'emojione'\n};\nemojione.emojioneList[':digit_six:'] = {\n  uc_base: '0036',\n  uc_output: '0036-fe0f',\n  uc_match: '0036-fe0f',\n  uc_greedy: '0036-fe0f',\n  shortnames: [],\n  category: 'symbols',\n  emojiPackage: 'emojione'\n};\nemojione.emojioneList[':digit_seven:'] = {\n  uc_base: '0037',\n  uc_output: '0037-fe0f',\n  uc_match: '0037-fe0f',\n  uc_greedy: '0037-fe0f',\n  shortnames: [],\n  category: 'symbols',\n  emojiPackage: 'emojione'\n};\nemojione.emojioneList[':digit_eight:'] = {\n  uc_base: '0038',\n  uc_output: '0038-fe0f',\n  uc_match: '0038-fe0f',\n  uc_greedy: '0038-fe0f',\n  shortnames: [],\n  category: 'symbols',\n  emojiPackage: 'emojione'\n};\nemojione.emojioneList[':digit_nine:'] = {\n  uc_base: '0039',\n  uc_output: '0039-fe0f',\n  uc_match: '0039-fe0f',\n  uc_greedy: '0039-fe0f',\n  shortnames: [],\n  category: 'symbols',\n  emojiPackage: 'emojione'\n};\nemojione.emojioneList[':pound_symbol:'] = {\n  uc_base: '0023',\n  uc_output: '0023-fe0f',\n  uc_match: '0023-fe0f',\n  uc_greedy: '0023-fe0f',\n  shortnames: [],\n  category: 'symbols',\n  emojiPackage: 'emojione'\n};\nemojione.emojioneList[':asterisk_symbol:'] = {\n  uc_base: '002a',\n  uc_output: '002a-fe0f',\n  uc_match: '002a-fe0f',\n  uc_greedy: '002a-fe0f',\n  shortnames: [],\n  category: 'symbols',\n  emojiPackage: 'emojione'\n}; // end fix\n// fix for :+1: - had to replace all function that does its conversion: https://github.com/joypixels/emojione/blob/4.5.0/lib/js/emojione.js#L249\n\n(function (ns) {\n  ns.shortnameConversionMap = mem(ns.shortnameConversionMap, {\n    maxAge: 1000\n  });\n  ns.unicodeCharRegex = mem(ns.unicodeCharRegex, {\n    maxAge: 1000\n  });\n  var convertShortName = mem(function (shortname) {\n    // the fix is basically adding this .replace(/[+]/g, '\\\\$&')\n    if (typeof shortname === 'undefined' || shortname === '' || ns.shortnames.indexOf(shortname.replace(/[+]/g, '\\\\$&')) === -1) {\n      // if the shortname doesnt exist just return the entire match\n      return shortname;\n    } // map shortname to parent\n\n\n    if (!ns.emojioneList[shortname]) {\n      for (var _emoji in meteorBabelHelpers.sanitizeForInObject(ns.emojioneList)) {\n        if (!ns.emojioneList.hasOwnProperty(_emoji) || _emoji === '') {\n          continue;\n        }\n\n        if (ns.emojioneList[_emoji].shortnames.indexOf(shortname) === -1) {\n          continue;\n        }\n\n        shortname = _emoji;\n        break;\n      }\n    }\n\n    var unicode = ns.emojioneList[shortname].uc_output;\n    var fname = ns.emojioneList[shortname].uc_base;\n    var category = fname.indexOf('-1f3f') >= 0 ? 'diversity' : ns.emojioneList[shortname].category;\n    var title = ns.imageTitleTag ? \"title=\\\"\" + shortname + \"\\\"\" : ''; // const size = ns.spriteSize === '32' || ns.spriteSize === '64' ? ns.spriteSize : '32';\n    // if the emoji path has been set, we'll use the provided path, otherwise we'll use the default path\n\n    var ePath = ns.defaultPathPNG !== ns.imagePathPNG ? ns.imagePathPNG : ns.defaultPathPNG + ns.emojiSize + \"/\"; // depending on the settings, we'll either add the native unicode as the alt tag, otherwise the shortname\n\n    var alt = ns.unicodeAlt ? ns.convert(unicode.toUpperCase()) : shortname;\n\n    if (ns.sprites) {\n      return \"<span class=\\\"emojione emojione-\" + category + \" _\" + fname + \"\\\" \" + title + \">\" + alt + \"</span>\";\n    }\n\n    return \"<img class=\\\"emojione\\\" alt=\\\"\" + alt + \"\\\" \" + title + \" src=\\\"\" + ePath + fname + ns.fileExtension + \"\\\"/>\";\n  }, {\n    maxAge: 1000\n  });\n  var convertUnicode = mem(function (entire, m1, m2, m3) {\n    var mappedUnicode = ns.mapUnicodeToShort();\n\n    if (typeof m3 === 'undefined' || m3 === '' || !(ns.unescapeHTML(m3) in ns.asciiList)) {\n      // if the ascii doesnt exist just return the entire match\n      return entire;\n    }\n\n    m3 = ns.unescapeHTML(m3);\n    var unicode = ns.asciiList[m3];\n    var shortname = mappedUnicode[unicode];\n    var category = unicode.indexOf('-1f3f') >= 0 ? 'diversity' : ns.emojioneList[shortname].category;\n    var title = ns.imageTitleTag ? \"title=\\\"\" + ns.escapeHTML(m3) + \"\\\"\" : ''; // const size = ns.spriteSize === '32' || ns.spriteSize === '64' ? ns.spriteSize : '32';\n    // if the emoji path has been set, we'll use the provided path, otherwise we'll use the default path\n\n    var ePath = ns.defaultPathPNG !== ns.imagePathPNG ? ns.imagePathPNG : ns.defaultPathPNG + ns.emojiSize + \"/\"; // depending on the settings, we'll either add the native unicode as the alt tag, otherwise the shortname\n\n    var alt = ns.unicodeAlt ? ns.convert(unicode.toUpperCase()) : ns.escapeHTML(m3);\n\n    if (ns.sprites) {\n      return m2 + \"<span class=\\\"emojione emojione-\" + category + \" _\" + unicode + \"\\\"  \" + title + \">\" + alt + \"</span>\";\n    }\n\n    return m2 + \"<img class=\\\"emojione\\\" alt=\\\"\" + alt + \"\\\" \" + title + \" src=\\\"\" + ePath + unicode + ns.fileExtension + \"\\\"/>\";\n  }, {\n    maxAge: 1000,\n    cacheKey: JSON.stringify\n  });\n\n  ns.shortnameToImage = function (str) {\n    // replace regular shortnames first\n    str = str.replace(ns.regShortNames, convertShortName); // if ascii smileys are turned on, then we'll replace them!\n\n    if (ns.ascii) {\n      var asciiRX = ns.riskyMatchAscii ? ns.regAsciiRisky : ns.regAscii;\n      return str.replace(asciiRX, convertUnicode);\n    }\n\n    return str;\n  };\n})(emojione);\n\nemoji.packages.emojione = emojione;\nemoji.packages.emojione.sprites = true;\nemoji.packages.emojione.emojisByCategory = emojisByCategory;\nemoji.packages.emojione.emojiCategories = emojiCategories;\nemoji.packages.emojione.toneList = toneList;\nemoji.packages.emojione.render = emojioneRender;\nemoji.packages.emojione.renderPicker = emojioneRenderFromShort; // http://stackoverflow.com/a/26990347 function isSet() from Gajus\n\nfunction isSetNotNull(fn) {\n  var value;\n\n  try {\n    value = fn();\n  } catch (e) {\n    value = null;\n  }\n\n  return value !== null && value !== undefined;\n} // RocketChat.emoji.list is the collection of emojis from all emoji packages\n\n\nfor (var key in meteorBabelHelpers.sanitizeForInObject(emojione.emojioneList)) {\n  if (emojione.emojioneList.hasOwnProperty(key)) {\n    (function () {\n      var currentEmoji = emojione.emojioneList[key];\n      currentEmoji.emojiPackage = 'emojione';\n      emoji.list[key] = currentEmoji;\n\n      if (currentEmoji.shortnames) {\n        currentEmoji.shortnames.forEach(function (shortname) {\n          emoji.list[shortname] = currentEmoji;\n        });\n      }\n    })();\n  }\n} // Additional settings -- ascii emojis\n\n\nMeteor.startup(function () {\n  Tracker.autorun(function () {\n    if (isSetNotNull(function () {\n      return emoji.packages.emojione;\n    })) {\n      if (isSetNotNull(function () {\n        return getUserPreference(Meteor.userId(), 'convertAsciiEmoji');\n      })) {\n        emoji.packages.emojione.ascii = getUserPreference(Meteor.userId(), 'convertAsciiEmoji');\n      } else {\n        emoji.packages.emojione.ascii = true;\n      }\n    }\n  });\n});","map":{"version":3,"sources":["app/emoji-emojione/lib/rocketchat.js"],"names":["emojione","module","link","v","Meteor","Tracker","mem","emojioneRender","emojioneRenderFromShort","emojisByCategory","emojiCategories","toneList","emoji","getUserPreference","shortnames","regShortNames","RegExp","emojioneList","uc_base","uc_output","uc_match","uc_greedy","category","emojiPackage","ns","shortnameConversionMap","maxAge","unicodeCharRegex","convertShortName","shortname","indexOf","replace","hasOwnProperty","unicode","fname","title","imageTitleTag","ePath","defaultPathPNG","imagePathPNG","emojiSize","alt","unicodeAlt","convert","toUpperCase","sprites","fileExtension","convertUnicode","entire","m1","m2","m3","mappedUnicode","mapUnicodeToShort","unescapeHTML","asciiList","escapeHTML","cacheKey","JSON","stringify","shortnameToImage","str","ascii","asciiRX","riskyMatchAscii","regAsciiRisky","regAscii","packages","render","renderPicker","isSetNotNull","fn","value","e","undefined","key","currentEmoji","list","forEach","startup","autorun","userId"],"mappings":"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","sourcesContent":["import emojione from 'emojione';\nimport { Meteor } from 'meteor/meteor';\nimport { Tracker } from 'meteor/tracker';\nimport mem from 'mem';\n\nimport { emojioneRender, emojioneRenderFromShort } from './emojioneRender';\nimport { emojisByCategory, emojiCategories, toneList } from './emojiPicker';\nimport { emoji } from '../../emoji';\nimport { getUserPreference } from '../../utils';\n\n// TODO remove fix below when issue is solved: https://github.com/joypixels/emojione/issues/617\n\n// add missing emojis not provided by JS object, but included on emoji.json\nemojione.shortnames +=\n\t'|:tm:|:copyright:|:registered:|:digit_zero:|:digit_one:|:digit_two:|:digit_three:|:digit_four:|:digit_five:|:digit_six:|:digit_seven:|:digit_eight:|:digit_nine:|:pound_symbol:|:asterisk_symbol:';\nemojione.regShortNames = new RegExp(\n\t`<object[^>]*>.*?<\\/object>|<span[^>]*>.*?<\\/span>|<(?:object|embed|svg|img|div|span|p|a)[^>]*>|(${emojione.shortnames})`,\n\t'gi',\n);\n\nemojione.emojioneList[':tm:'] = {\n\tuc_base: '2122',\n\tuc_output: '2122-fe0f',\n\tuc_match: '2122-fe0f',\n\tuc_greedy: '2122-fe0f',\n\tshortnames: [],\n\tcategory: 'symbols',\n\temojiPackage: 'emojione',\n};\n\nemojione.emojioneList[':copyright:'] = {\n\tuc_base: '00a9',\n\tuc_output: '00a9-f0ef',\n\tuc_match: '00a9-fe0f',\n\tuc_greedy: '00a9-fe0f',\n\tshortnames: [],\n\tcategory: 'symbols',\n\temojiPackage: 'emojione',\n};\n\nemojione.emojioneList[':registered:'] = {\n\tuc_base: '00ae',\n\tuc_output: '00ae-fe0f',\n\tuc_match: '00ae-fe0f',\n\tuc_greedy: '00ae-fe0f',\n\tshortnames: [],\n\tcategory: 'symbols',\n\temojiPackage: 'emojione',\n};\n\nemojione.emojioneList[':digit_zero:'] = {\n\tuc_base: '0030',\n\tuc_output: '0030-fe0f',\n\tuc_match: '0030-fe0f',\n\tuc_greedy: '0030-fe0f',\n\tshortnames: [],\n\tcategory: 'symbols',\n\temojiPackage: 'emojione',\n};\n\nemojione.emojioneList[':digit_one:'] = {\n\tuc_base: '0031',\n\tuc_output: '0031-fe0f',\n\tuc_match: '0031-fe0f',\n\tuc_greedy: '0031-fe0f',\n\tshortnames: [],\n\tcategory: 'symbols',\n\temojiPackage: 'emojione',\n};\n\nemojione.emojioneList[':digit_two:'] = {\n\tuc_base: '0032',\n\tuc_output: '0032-fe0f',\n\tuc_match: '0032-fe0f',\n\tuc_greedy: '0032-fe0f',\n\tshortnames: [],\n\tcategory: 'symbols',\n\temojiPackage: 'emojione',\n};\n\nemojione.emojioneList[':digit_three:'] = {\n\tuc_base: '0033',\n\tuc_output: '0033-fe0f',\n\tuc_match: '0033-fe0f',\n\tuc_greedy: '0033-fe0f',\n\tshortnames: [],\n\tcategory: 'symbols',\n\temojiPackage: 'emojione',\n};\n\nemojione.emojioneList[':digit_four:'] = {\n\tuc_base: '0034',\n\tuc_output: '0034-fe0f',\n\tuc_match: '0034-fe0f',\n\tuc_greedy: '0034-fe0f',\n\tshortnames: [],\n\tcategory: 'symbols',\n\temojiPackage: 'emojione',\n};\n\nemojione.emojioneList[':digit_five:'] = {\n\tuc_base: '0035',\n\tuc_output: '0035-fe0f',\n\tuc_match: '0035-fe0f',\n\tuc_greedy: '0035-fe0f',\n\tshortnames: [],\n\tcategory: 'symbols',\n\temojiPackage: 'emojione',\n};\n\nemojione.emojioneList[':digit_six:'] = {\n\tuc_base: '0036',\n\tuc_output: '0036-fe0f',\n\tuc_match: '0036-fe0f',\n\tuc_greedy: '0036-fe0f',\n\tshortnames: [],\n\tcategory: 'symbols',\n\temojiPackage: 'emojione',\n};\n\nemojione.emojioneList[':digit_seven:'] = {\n\tuc_base: '0037',\n\tuc_output: '0037-fe0f',\n\tuc_match: '0037-fe0f',\n\tuc_greedy: '0037-fe0f',\n\tshortnames: [],\n\tcategory: 'symbols',\n\temojiPackage: 'emojione',\n};\n\nemojione.emojioneList[':digit_eight:'] = {\n\tuc_base: '0038',\n\tuc_output: '0038-fe0f',\n\tuc_match: '0038-fe0f',\n\tuc_greedy: '0038-fe0f',\n\tshortnames: [],\n\tcategory: 'symbols',\n\temojiPackage: 'emojione',\n};\n\nemojione.emojioneList[':digit_nine:'] = {\n\tuc_base: '0039',\n\tuc_output: '0039-fe0f',\n\tuc_match: '0039-fe0f',\n\tuc_greedy: '0039-fe0f',\n\tshortnames: [],\n\tcategory: 'symbols',\n\temojiPackage: 'emojione',\n};\n\nemojione.emojioneList[':pound_symbol:'] = {\n\tuc_base: '0023',\n\tuc_output: '0023-fe0f',\n\tuc_match: '0023-fe0f',\n\tuc_greedy: '0023-fe0f',\n\tshortnames: [],\n\tcategory: 'symbols',\n\temojiPackage: 'emojione',\n};\n\nemojione.emojioneList[':asterisk_symbol:'] = {\n\tuc_base: '002a',\n\tuc_output: '002a-fe0f',\n\tuc_match: '002a-fe0f',\n\tuc_greedy: '002a-fe0f',\n\tshortnames: [],\n\tcategory: 'symbols',\n\temojiPackage: 'emojione',\n};\n// end fix\n\n// fix for :+1: - had to replace all function that does its conversion: https://github.com/joypixels/emojione/blob/4.5.0/lib/js/emojione.js#L249\n(function (ns) {\n\tns.shortnameConversionMap = mem(ns.shortnameConversionMap, { maxAge: 1000 });\n\n\tns.unicodeCharRegex = mem(ns.unicodeCharRegex, { maxAge: 1000 });\n\n\tconst convertShortName = mem(\n\t\tfunction (shortname) {\n\t\t\t// the fix is basically adding this .replace(/[+]/g, '\\\\$&')\n\t\t\tif (typeof shortname === 'undefined' || shortname === '' || ns.shortnames.indexOf(shortname.replace(/[+]/g, '\\\\$&')) === -1) {\n\t\t\t\t// if the shortname doesnt exist just return the entire match\n\t\t\t\treturn shortname;\n\t\t\t}\n\n\t\t\t// map shortname to parent\n\t\t\tif (!ns.emojioneList[shortname]) {\n\t\t\t\tfor (const emoji in ns.emojioneList) {\n\t\t\t\t\tif (!ns.emojioneList.hasOwnProperty(emoji) || emoji === '') {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t\tif (ns.emojioneList[emoji].shortnames.indexOf(shortname) === -1) {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t\tshortname = emoji;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tconst unicode = ns.emojioneList[shortname].uc_output;\n\t\t\tconst fname = ns.emojioneList[shortname].uc_base;\n\t\t\tconst category = fname.indexOf('-1f3f') >= 0 ? 'diversity' : ns.emojioneList[shortname].category;\n\t\t\tconst title = ns.imageTitleTag ? `title=\"${shortname}\"` : '';\n\t\t\t// const size = ns.spriteSize === '32' || ns.spriteSize === '64' ? ns.spriteSize : '32';\n\t\t\t// if the emoji path has been set, we'll use the provided path, otherwise we'll use the default path\n\t\t\tconst ePath = ns.defaultPathPNG !== ns.imagePathPNG ? ns.imagePathPNG : `${ns.defaultPathPNG + ns.emojiSize}/`;\n\n\t\t\t// depending on the settings, we'll either add the native unicode as the alt tag, otherwise the shortname\n\t\t\tconst alt = ns.unicodeAlt ? ns.convert(unicode.toUpperCase()) : shortname;\n\n\t\t\tif (ns.sprites) {\n\t\t\t\treturn `<span class=\"emojione emojione-${category} _${fname}\" ${title}>${alt}</span>`;\n\t\t\t}\n\t\t\treturn `<img class=\"emojione\" alt=\"${alt}\" ${title} src=\"${ePath}${fname}${ns.fileExtension}\"/>`;\n\t\t},\n\t\t{ maxAge: 1000 },\n\t);\n\n\tconst convertUnicode = mem(\n\t\tfunction (entire, m1, m2, m3) {\n\t\t\tconst mappedUnicode = ns.mapUnicodeToShort();\n\n\t\t\tif (typeof m3 === 'undefined' || m3 === '' || !(ns.unescapeHTML(m3) in ns.asciiList)) {\n\t\t\t\t// if the ascii doesnt exist just return the entire match\n\t\t\t\treturn entire;\n\t\t\t}\n\n\t\t\tm3 = ns.unescapeHTML(m3);\n\t\t\tconst unicode = ns.asciiList[m3];\n\t\t\tconst shortname = mappedUnicode[unicode];\n\t\t\tconst category = unicode.indexOf('-1f3f') >= 0 ? 'diversity' : ns.emojioneList[shortname].category;\n\t\t\tconst title = ns.imageTitleTag ? `title=\"${ns.escapeHTML(m3)}\"` : '';\n\t\t\t// const size = ns.spriteSize === '32' || ns.spriteSize === '64' ? ns.spriteSize : '32';\n\t\t\t// if the emoji path has been set, we'll use the provided path, otherwise we'll use the default path\n\t\t\tconst ePath = ns.defaultPathPNG !== ns.imagePathPNG ? ns.imagePathPNG : `${ns.defaultPathPNG + ns.emojiSize}/`;\n\n\t\t\t// depending on the settings, we'll either add the native unicode as the alt tag, otherwise the shortname\n\t\t\tconst alt = ns.unicodeAlt ? ns.convert(unicode.toUpperCase()) : ns.escapeHTML(m3);\n\n\t\t\tif (ns.sprites) {\n\t\t\t\treturn `${m2}<span class=\"emojione emojione-${category} _${unicode}\"  ${title}>${alt}</span>`;\n\t\t\t}\n\t\t\treturn `${m2}<img class=\"emojione\" alt=\"${alt}\" ${title} src=\"${ePath}${unicode}${ns.fileExtension}\"/>`;\n\t\t},\n\t\t{ maxAge: 1000, cacheKey: JSON.stringify },\n\t);\n\n\tns.shortnameToImage = function (str) {\n\t\t// replace regular shortnames first\n\t\tstr = str.replace(ns.regShortNames, convertShortName);\n\n\t\t// if ascii smileys are turned on, then we'll replace them!\n\t\tif (ns.ascii) {\n\t\t\tconst asciiRX = ns.riskyMatchAscii ? ns.regAsciiRisky : ns.regAscii;\n\n\t\t\treturn str.replace(asciiRX, convertUnicode);\n\t\t}\n\n\t\treturn str;\n\t};\n})(emojione);\n\nemoji.packages.emojione = emojione;\nemoji.packages.emojione.sprites = true;\nemoji.packages.emojione.emojisByCategory = emojisByCategory;\nemoji.packages.emojione.emojiCategories = emojiCategories;\nemoji.packages.emojione.toneList = toneList;\n\nemoji.packages.emojione.render = emojioneRender;\nemoji.packages.emojione.renderPicker = emojioneRenderFromShort;\n\n// http://stackoverflow.com/a/26990347 function isSet() from Gajus\nfunction isSetNotNull(fn) {\n\tlet value;\n\ttry {\n\t\tvalue = fn();\n\t} catch (e) {\n\t\tvalue = null;\n\t}\n\treturn value !== null && value !== undefined;\n}\n\n// RocketChat.emoji.list is the collection of emojis from all emoji packages\nfor (const key in emojione.emojioneList) {\n\tif (emojione.emojioneList.hasOwnProperty(key)) {\n\t\tconst currentEmoji = emojione.emojioneList[key];\n\t\tcurrentEmoji.emojiPackage = 'emojione';\n\t\temoji.list[key] = currentEmoji;\n\n\t\tif (currentEmoji.shortnames) {\n\t\t\tcurrentEmoji.shortnames.forEach((shortname) => {\n\t\t\t\temoji.list[shortname] = currentEmoji;\n\t\t\t});\n\t\t}\n\t}\n}\n\n// Additional settings -- ascii emojis\nMeteor.startup(function () {\n\tTracker.autorun(function () {\n\t\tif (isSetNotNull(() => emoji.packages.emojione)) {\n\t\t\tif (isSetNotNull(() => getUserPreference(Meteor.userId(), 'convertAsciiEmoji'))) {\n\t\t\t\temoji.packages.emojione.ascii = getUserPreference(Meteor.userId(), 'convertAsciiEmoji');\n\t\t\t} else {\n\t\t\t\temoji.packages.emojione.ascii = true;\n\t\t\t}\n\t\t}\n\t});\n});\n"]},"sourceType":"module","hash":"d1b1377bd6214b55437063d59bea1828606727ca"}
