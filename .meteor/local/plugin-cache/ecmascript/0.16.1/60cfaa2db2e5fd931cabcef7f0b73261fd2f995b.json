{"metadata":{},"options":{"assumptions":{},"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat/client/views/admin/users/UserInfoActions.js","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","classProperties","classPrivateProperties","jsx","nullishCoalescingOperator","nullishCoalescingOperator","optionalChaining","optionalCatchBinding","optionalCatchBinding","classProperties","classPrivateProperties","classPrivateMethods","classProperties","classPrivateProperties","asyncGenerators","asyncGenerators","objectRestSpread","logicalAssignment"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"allowUndeclaredExports":true,"strictMode":false},"caller":{"name":"meteor","arch":"web.browser.legacy"},"sourceFileName":"client/views/admin/users/UserInfoActions.js","filename":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat/client/views/admin/users/UserInfoActions.js","targets":{"android":"95.0.0","chrome":"95.0.0","edge":"95.0.0","firefox":"78.0.0","ie":"10.0.0","ios":"15.0.0","opera":"81.0.0","safari":"15.1.0","samsung":"14.0.0"},"cloneInputAst":true,"browserslistConfigFile":false,"passPerPreset":false,"envName":"development","cwd":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat","root":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat","rootMode":"root","plugins":[{"key":"base$0","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0","visitor":{"Program":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true},"options":{"avoidModernSyntax":true,"enforceStrictMode":false,"dynamicImport":true}},{"key":"transform-runtime","visitor":{"MemberExpression":{"enter":[null]},"ObjectPattern":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":{},"_verified":{},"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]}},"options":{"version":"7.16.5","helpers":true,"useESModules":false,"corejs":false}},{"key":"proposal-class-properties","visitor":{"PrivateName":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{"loose":true}},{"key":"base$0$3","visitor":{"FunctionExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$4","visitor":{"ForInStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-react-jsx","visitor":{"_exploded":{},"_verified":{},"JSXNamespacedName":{"enter":[null]},"JSXSpreadChild":{"enter":[null]},"Program":{"enter":[null]},"JSXElement":{"exit":[null]},"JSXFragment":{"exit":[null]},"JSXAttribute":{"enter":[null]}},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","runtime":"classic","throwIfNamespace":true,"useBuiltIns":false}},{"key":"transform-react-display-name","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-react-pure-annotations","visitor":{"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"syntax-nullish-coalescing-operator","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-nullish-coalescing-operator","visitor":{"_exploded":{},"_verified":{},"LogicalExpression":{"enter":[null]}},"options":{}},{"key":"syntax-optional-chaining","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-optional-chaining","visitor":{"_exploded":true,"OptionalCallExpression":{"enter":[null]},"OptionalMemberExpression":{"enter":[null]},"_verified":true},"options":{}},{"key":"syntax-optional-catch-binding","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-optional-catch-binding","visitor":{"_exploded":{},"_verified":{},"CatchClause":{"enter":[null]}},"options":{}},{"key":"syntax-class-properties","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-class-properties","visitor":{"PrivateName":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{}},{"key":"syntax-async-generators","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-async-generator-functions","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]}},"options":{}},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-object-rest-spread","visitor":{"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"proposal-logical-assignment-operators","visitor":{"_exploded":{},"_verified":{},"AssignmentExpression":{"enter":[null]}},"options":{}},{"key":"transform-arrow-functions","visitor":{"ArrowFunctionExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-block-scoped-functions","visitor":{"BlockStatement":{"enter":[null]},"SwitchCase":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-block-scoping","visitor":{"VariableDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"_exploded":true,"BlockStatement":{"enter":[null]},"SwitchStatement":{"enter":[null]},"Program":{"enter":[null]},"_verified":true,"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"transform-classes","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-computed-properties","visitor":{"ObjectExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-destructuring","visitor":{"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"VariableDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"transform-for-of","visitor":{"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-literals","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-object-super","visitor":{"ObjectExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-parameters","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{}},{"key":"transform-shorthand-properties","visitor":{"ObjectMethod":{"enter":[null]},"ObjectProperty":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-spread","visitor":{"ArrayExpression":{"enter":[null]},"CallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-sticky-regex","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-template-literals","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-typeof-symbol","visitor":{"UnaryExpression":{"enter":[null]},"_exploded":true,"_verified":true,"BlockStatement":{"enter":[null]},"CatchClause":{"enter":[null]},"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"Program":{"enter":[null]},"ObjectMethod":{"enter":[null]},"SwitchStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ForOfStatement":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"StaticBlock":{"enter":[null]},"TSModuleBlock":{"enter":[null]},"AssignmentPattern":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectPattern":{"enter":[null]}},"options":{}},{"key":"transform-unicode-regex","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-property-literals","visitor":{"ObjectProperty":{"exit":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-exponentiation-operator","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"regenerator-transform","visitor":{"_exploded":true,"_verified":true,"ObjectMethod":{"enter":[null],"exit":[null]},"ClassMethod":{"enter":[null],"exit":[null]},"ClassPrivateMethod":{"enter":[null],"exit":[null]},"FunctionDeclaration":{"exit":[null]},"FunctionExpression":{"exit":[null]},"ArrowFunctionExpression":{"exit":[null]}},"options":{}}],"presets":[],"generatorOpts":{"filename":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat/client/views/admin/users/UserInfoActions.js","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"client/views/admin/users/UserInfoActions.js"}},"code":"var _excluded = [\"label\"];\n\nvar _toConsumableArray;\n\nmodule.link(\"@babel/runtime/helpers/toConsumableArray\", {\n  default: function (v) {\n    _toConsumableArray = v;\n  }\n}, 0);\n\nvar _slicedToArray;\n\nmodule.link(\"@babel/runtime/helpers/slicedToArray\", {\n  default: function (v) {\n    _slicedToArray = v;\n  }\n}, 1);\n\nvar _objectWithoutProperties;\n\nmodule.link(\"@babel/runtime/helpers/objectWithoutProperties\", {\n  default: function (v) {\n    _objectWithoutProperties = v;\n  }\n}, 2);\n\nvar _objectSpread;\n\nmodule.link(\"@babel/runtime/helpers/objectSpread2\", {\n  default: function (v) {\n    _objectSpread = v;\n  }\n}, 3);\n\nvar _extends;\n\nmodule.link(\"@babel/runtime/helpers/extends\", {\n  default: function (v) {\n    _extends = v;\n  }\n}, 4);\n\nvar _regeneratorRuntime;\n\nmodule.link(\"@babel/runtime/regenerator\", {\n  default: function (v) {\n    _regeneratorRuntime = v;\n  }\n}, 5);\nmodule.export({\n  UserInfoActions: function () {\n    return UserInfoActions;\n  }\n});\nvar ButtonGroup, Menu, Option;\nmodule.link(\"@rocket.chat/fuselage\", {\n  ButtonGroup: function (v) {\n    ButtonGroup = v;\n  },\n  Menu: function (v) {\n    Menu = v;\n  },\n  Option: function (v) {\n    Option = v;\n  }\n}, 0);\nvar React, useCallback, useMemo;\nmodule.link(\"react\", {\n  \"default\": function (v) {\n    React = v;\n  },\n  useCallback: function (v) {\n    useCallback = v;\n  },\n  useMemo: function (v) {\n    useMemo = v;\n  }\n}, 1);\nvar ConfirmOwnerChangeWarningModal;\nmodule.link(\"../../../components/ConfirmOwnerChangeWarningModal\", {\n  \"default\": function (v) {\n    ConfirmOwnerChangeWarningModal = v;\n  }\n}, 2);\nvar GenericModal;\nmodule.link(\"../../../components/GenericModal\", {\n  \"default\": function (v) {\n    GenericModal = v;\n  }\n}, 3);\nvar usePermission;\nmodule.link(\"../../../contexts/AuthorizationContext\", {\n  usePermission: function (v) {\n    usePermission = v;\n  }\n}, 4);\nvar useSetModal;\nmodule.link(\"../../../contexts/ModalContext\", {\n  useSetModal: function (v) {\n    useSetModal = v;\n  }\n}, 5);\nvar useRoute;\nmodule.link(\"../../../contexts/RouterContext\", {\n  useRoute: function (v) {\n    useRoute = v;\n  }\n}, 6);\nvar useMethod, useEndpoint;\nmodule.link(\"../../../contexts/ServerContext\", {\n  useMethod: function (v) {\n    useMethod = v;\n  },\n  useEndpoint: function (v) {\n    useEndpoint = v;\n  }\n}, 7);\nvar useSetting;\nmodule.link(\"../../../contexts/SettingsContext\", {\n  useSetting: function (v) {\n    useSetting = v;\n  }\n}, 8);\nvar useToastMessageDispatch;\nmodule.link(\"../../../contexts/ToastMessagesContext\", {\n  useToastMessageDispatch: function (v) {\n    useToastMessageDispatch = v;\n  }\n}, 9);\nvar useTranslation;\nmodule.link(\"../../../contexts/TranslationContext\", {\n  useTranslation: function (v) {\n    useTranslation = v;\n  }\n}, 10);\nvar useActionSpread;\nmodule.link(\"../../hooks/useActionSpread\", {\n  useActionSpread: function (v) {\n    useActionSpread = v;\n  }\n}, 11);\nvar UserInfo;\nmodule.link(\"../../room/contextualBar/UserInfo\", {\n  \"default\": function (v) {\n    UserInfo = v;\n  }\n}, 12);\n\nvar UserInfoActions = function (_ref) {\n  var username = _ref.username,\n      _id = _ref._id,\n      isActive = _ref.isActive,\n      isAdmin = _ref.isAdmin,\n      onChange = _ref.onChange,\n      onReload = _ref.onReload;\n  var t = useTranslation();\n  var setModal = useSetModal();\n  var directRoute = useRoute('direct');\n  var userRoute = useRoute('admin-users');\n  var dispatchToastMessage = useToastMessageDispatch();\n  var canDirectMessage = usePermission('create-d');\n  var canEditOtherUserInfo = usePermission('edit-other-user-info');\n  var canAssignAdminRole = usePermission('assign-admin-role');\n  var canResetE2EEKey = usePermission('edit-other-user-e2ee');\n  var canResetTOTP = usePermission('edit-other-user-totp');\n  var canEditOtherUserActiveStatus = usePermission('edit-other-user-active-status');\n  var canDeleteUser = usePermission('delete-user');\n  var enforcePassword = useSetting('Accounts_TwoFactorAuthentication_Enforce_Password_Fallback');\n  var handleClose = useCallback(function () {\n    setModal();\n    onChange();\n  }, [setModal, onChange]);\n\n  var handleDeletedUser = function () {\n    setModal();\n    userRoute.push({});\n    onReload();\n  };\n\n  var confirmOwnerChanges = function (action) {\n    var modalProps = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    return function () {\n      function _callee2() {\n        var _error$xhr, _error$xhr$responseJS, _error$xhr$responseJS2, shouldChangeOwner, shouldBeRemoved;\n\n        return _regeneratorRuntime.async(function () {\n          function _callee2$(_context2) {\n            while (1) {\n              switch (_context2.prev = _context2.next) {\n                case 0:\n                  _context2.prev = 0;\n                  _context2.next = 3;\n                  return _regeneratorRuntime.awrap(action());\n\n                case 3:\n                  return _context2.abrupt(\"return\", _context2.sent);\n\n                case 6:\n                  _context2.prev = 6;\n                  _context2.t0 = _context2[\"catch\"](0);\n\n                  if (!(((_error$xhr = _context2.t0.xhr) === null || _error$xhr === void 0 ? void 0 : (_error$xhr$responseJS = _error$xhr.responseJSON) === null || _error$xhr$responseJS === void 0 ? void 0 : _error$xhr$responseJS.errorType) === 'user-last-owner')) {\n                    _context2.next = 12;\n                    break;\n                  }\n\n                  _error$xhr$responseJS2 = _context2.t0.xhr.responseJSON.details, shouldChangeOwner = _error$xhr$responseJS2.shouldChangeOwner, shouldBeRemoved = _error$xhr$responseJS2.shouldBeRemoved;\n                  setModal( /*#__PURE__*/React.createElement(ConfirmOwnerChangeWarningModal, _extends({\n                    shouldChangeOwner: shouldChangeOwner,\n                    shouldBeRemoved: shouldBeRemoved\n                  }, modalProps, {\n                    onConfirm: function () {\n                      function _callee() {\n                        return _regeneratorRuntime.async(function () {\n                          function _callee$(_context) {\n                            while (1) {\n                              switch (_context.prev = _context.next) {\n                                case 0:\n                                  _context.next = 2;\n                                  return _regeneratorRuntime.awrap(action(true));\n\n                                case 2:\n                                  setModal();\n\n                                case 3:\n                                case \"end\":\n                                  return _context.stop();\n                              }\n                            }\n                          }\n\n                          return _callee$;\n                        }(), null, null, null, Promise);\n                      }\n\n                      return _callee;\n                    }(),\n                    onCancel: function () {\n                      setModal();\n                      onChange();\n                    }\n                  })));\n                  return _context2.abrupt(\"return\");\n\n                case 12:\n                  dispatchToastMessage({\n                    type: 'error',\n                    message: _context2.t0\n                  });\n\n                case 13:\n                case \"end\":\n                  return _context2.stop();\n              }\n            }\n          }\n\n          return _callee2$;\n        }(), null, null, [[0, 6]], Promise);\n      }\n\n      return _callee2;\n    }();\n  };\n\n  var deleteUserQuery = useMemo(function () {\n    return {\n      userId: _id\n    };\n  }, [_id]);\n  var deleteUserEndpoint = useEndpoint('POST', 'users.delete');\n  var erasureType = useSetting('Message_ErasureType');\n  var deleteUser = confirmOwnerChanges(function () {\n    function _callee3() {\n      var confirm,\n          result,\n          _args3 = arguments;\n      return _regeneratorRuntime.async(function () {\n        function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                confirm = _args3.length > 0 && _args3[0] !== undefined ? _args3[0] : false;\n\n                if (confirm) {\n                  deleteUserQuery.confirmRelinquish = confirm;\n                }\n\n                _context3.next = 4;\n                return _regeneratorRuntime.awrap(deleteUserEndpoint(deleteUserQuery));\n\n              case 4:\n                result = _context3.sent;\n\n                if (result.success) {\n                  handleDeletedUser();\n                  dispatchToastMessage({\n                    type: 'success',\n                    message: t('User_has_been_deleted')\n                  });\n                } else {\n                  setModal();\n                }\n\n              case 6:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }\n\n        return _callee3$;\n      }(), null, null, null, Promise);\n    }\n\n    return _callee3;\n  }(), {\n    contentTitle: t(\"Delete_User_Warning_\" + erasureType),\n    confirmLabel: t('Delete')\n  });\n  var confirmDeleteUser = useCallback(function () {\n    setModal( /*#__PURE__*/React.createElement(GenericModal, {\n      variant: \"danger\",\n      onConfirm: deleteUser,\n      onCancel: function () {\n        return setModal();\n      },\n      confirmText: t('Delete')\n    }, t(\"Delete_User_Warning_\" + erasureType)));\n  }, [deleteUser, erasureType, setModal, t]);\n  var setAdminStatus = useMethod('setAdminStatus');\n  var changeAdminStatus = useCallback(function () {\n    function _callee4() {\n      var message;\n      return _regeneratorRuntime.async(function () {\n        function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                _context4.prev = 0;\n                _context4.next = 3;\n                return _regeneratorRuntime.awrap(setAdminStatus(_id, !isAdmin));\n\n              case 3:\n                message = isAdmin ? 'User_is_no_longer_an_admin' : 'User_is_now_an_admin';\n                dispatchToastMessage({\n                  type: 'success',\n                  message: t(message)\n                });\n                onChange();\n                _context4.next = 11;\n                break;\n\n              case 8:\n                _context4.prev = 8;\n                _context4.t0 = _context4[\"catch\"](0);\n                dispatchToastMessage({\n                  type: 'error',\n                  message: _context4.t0\n                });\n\n              case 11:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }\n\n        return _callee4$;\n      }(), null, null, [[0, 8]], Promise);\n    }\n\n    return _callee4;\n  }(), [_id, dispatchToastMessage, isAdmin, onChange, setAdminStatus, t]);\n  var resetE2EEKeyRequest = useEndpoint('POST', 'users.resetE2EKey');\n  var resetTOTPRequest = useEndpoint('POST', 'users.resetTOTP');\n  var resetE2EEKey = useCallback(function () {\n    function _callee5() {\n      var result;\n      return _regeneratorRuntime.async(function () {\n        function _callee5$(_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                setModal();\n                _context5.next = 3;\n                return _regeneratorRuntime.awrap(resetE2EEKeyRequest({\n                  userId: _id\n                }));\n\n              case 3:\n                result = _context5.sent;\n\n                if (result) {\n                  setModal( /*#__PURE__*/React.createElement(GenericModal, {\n                    variant: \"success\",\n                    onClose: handleClose,\n                    onConfirm: handleClose\n                  }, t('Users_key_has_been_reset')));\n                }\n\n              case 5:\n              case \"end\":\n                return _context5.stop();\n            }\n          }\n        }\n\n        return _callee5$;\n      }(), null, null, null, Promise);\n    }\n\n    return _callee5;\n  }(), [resetE2EEKeyRequest, setModal, t, _id, handleClose]);\n  var resetTOTP = useCallback(function () {\n    function _callee6() {\n      var result;\n      return _regeneratorRuntime.async(function () {\n        function _callee6$(_context6) {\n          while (1) {\n            switch (_context6.prev = _context6.next) {\n              case 0:\n                setModal();\n                _context6.next = 3;\n                return _regeneratorRuntime.awrap(resetTOTPRequest({\n                  userId: _id\n                }));\n\n              case 3:\n                result = _context6.sent;\n\n                if (result) {\n                  setModal( /*#__PURE__*/React.createElement(GenericModal, {\n                    variant: \"success\",\n                    onClose: handleClose,\n                    onConfirm: handleClose\n                  }, t('Users_TOTP_has_been_reset')));\n                }\n\n              case 5:\n              case \"end\":\n                return _context6.stop();\n            }\n          }\n        }\n\n        return _callee6$;\n      }(), null, null, null, Promise);\n    }\n\n    return _callee6;\n  }(), [resetTOTPRequest, setModal, t, _id, handleClose]);\n  var confirmResetE2EEKey = useCallback(function () {\n    setModal( /*#__PURE__*/React.createElement(GenericModal, {\n      variant: \"danger\",\n      onConfirm: resetE2EEKey,\n      onCancel: function () {\n        return setModal();\n      },\n      confirmText: t('Reset')\n    }, t('E2E_Reset_Other_Key_Warning')));\n  }, [resetE2EEKey, t, setModal]);\n  var confirmResetTOTP = useCallback(function () {\n    setModal( /*#__PURE__*/React.createElement(GenericModal, {\n      variant: \"danger\",\n      onConfirm: resetTOTP,\n      onCancel: function () {\n        return setModal();\n      },\n      confirmText: t('Reset')\n    }, t('TOTP_Reset_Other_Key_Warning')));\n  }, [resetTOTP, t, setModal]);\n  var activeStatusQuery = useMemo(function () {\n    return {\n      userId: _id,\n      activeStatus: !isActive\n    };\n  }, [_id, isActive]);\n  var changeActiveStatusMessage = isActive ? 'User_has_been_deactivated' : 'User_has_been_activated';\n  var changeActiveStatusRequest = useEndpoint('POST', 'users.setActiveStatus');\n  var changeActiveStatus = confirmOwnerChanges(function () {\n    function _callee7() {\n      var confirm,\n          result,\n          _args7 = arguments;\n      return _regeneratorRuntime.async(function () {\n        function _callee7$(_context7) {\n          while (1) {\n            switch (_context7.prev = _context7.next) {\n              case 0:\n                confirm = _args7.length > 0 && _args7[0] !== undefined ? _args7[0] : false;\n\n                if (confirm) {\n                  activeStatusQuery.confirmRelinquish = confirm;\n                }\n\n                _context7.prev = 2;\n                _context7.next = 5;\n                return _regeneratorRuntime.awrap(changeActiveStatusRequest(activeStatusQuery));\n\n              case 5:\n                result = _context7.sent;\n\n                if (result.success) {\n                  dispatchToastMessage({\n                    type: 'success',\n                    message: t(changeActiveStatusMessage)\n                  });\n                  onChange();\n                }\n\n                _context7.next = 12;\n                break;\n\n              case 9:\n                _context7.prev = 9;\n                _context7.t0 = _context7[\"catch\"](2);\n                throw _context7.t0;\n\n              case 12:\n              case \"end\":\n                return _context7.stop();\n            }\n          }\n        }\n\n        return _callee7$;\n      }(), null, null, [[2, 9]], Promise);\n    }\n\n    return _callee7;\n  }(), {\n    confirmLabel: t('Yes_deactivate_it')\n  });\n  var directMessageClick = useCallback(function () {\n    return directRoute.push({\n      rid: username\n    });\n  }, [directRoute, username]);\n  var editUserClick = useCallback(function () {\n    return userRoute.push({\n      context: 'edit',\n      id: _id\n    });\n  }, [_id, userRoute]);\n  var options = useMemo(function () {\n    return _objectSpread(_objectSpread(_objectSpread(_objectSpread(_objectSpread(_objectSpread(_objectSpread({}, canDirectMessage && {\n      directMessage: {\n        icon: 'balloon',\n        label: t('Direct_Message'),\n        action: directMessageClick\n      }\n    }), canEditOtherUserInfo && {\n      editUser: {\n        icon: 'edit',\n        label: t('Edit'),\n        action: editUserClick\n      }\n    }), canAssignAdminRole && username && {\n      makeAdmin: {\n        icon: 'key',\n        label: isAdmin ? t('Remove_Admin') : t('Make_Admin'),\n        action: changeAdminStatus\n      }\n    }), canResetE2EEKey && enforcePassword && {\n      resetE2EEKey: {\n        icon: 'key',\n        label: t('Reset_E2E_Key'),\n        action: confirmResetE2EEKey\n      }\n    }), canResetTOTP && enforcePassword && {\n      resetTOTP: {\n        icon: 'key',\n        label: t('Reset_TOTP'),\n        action: confirmResetTOTP\n      }\n    }), canDeleteUser && {\n      \"delete\": {\n        icon: 'trash',\n        label: t('Delete'),\n        action: confirmDeleteUser\n      }\n    }), canEditOtherUserActiveStatus && {\n      changeActiveStatus: {\n        icon: 'user',\n        label: isActive ? t('Deactivate') : t('Activate'),\n        action: changeActiveStatus\n      }\n    });\n  }, [t, canDirectMessage, directMessageClick, canEditOtherUserInfo, editUserClick, canAssignAdminRole, isAdmin, changeAdminStatus, canDeleteUser, confirmDeleteUser, canEditOtherUserActiveStatus, isActive, changeActiveStatus, enforcePassword, canResetE2EEKey, canResetTOTP, confirmResetE2EEKey, confirmResetTOTP, username]);\n\n  var _useActionSpread = useActionSpread(options),\n      actionsDefinition = _useActionSpread.actions,\n      menuOptions = _useActionSpread.menu;\n\n  var menu = useMemo(function () {\n    if (!menuOptions) {\n      return null;\n    }\n\n    return /*#__PURE__*/React.createElement(Menu, {\n      mi: \"x4\",\n      placement: \"bottom-start\",\n      small: false,\n      ghost: false,\n      flexShrink: 0,\n      key: \"menu\",\n      renderItem: function (_ref2) {\n        var _ref2$label = _ref2.label,\n            label = _ref2$label.label,\n            icon = _ref2$label.icon,\n            props = _objectWithoutProperties(_ref2, _excluded);\n\n        return /*#__PURE__*/React.createElement(Option, _extends({\n          label: label,\n          title: label,\n          icon: icon\n        }, props));\n      },\n      options: menuOptions\n    });\n  }, [menuOptions]);\n  var actions = useMemo(function () {\n    var mapAction = function (_ref3) {\n      var _ref4 = _slicedToArray(_ref3, 2),\n          key = _ref4[0],\n          _ref4$ = _ref4[1],\n          label = _ref4$.label,\n          icon = _ref4$.icon,\n          action = _ref4$.action;\n\n      return /*#__PURE__*/React.createElement(UserInfo.Action, {\n        key: key,\n        title: label,\n        label: label,\n        onClick: action,\n        icon: icon\n      });\n    };\n\n    return [].concat(_toConsumableArray(actionsDefinition.map(mapAction)), [menu]).filter(Boolean);\n  }, [actionsDefinition, menu]);\n  return /*#__PURE__*/React.createElement(ButtonGroup, {\n    flexGrow: 0,\n    justifyContent: \"center\"\n  }, actions);\n};","map":{"version":3,"sources":["client/views/admin/users/UserInfoActions.js"],"names":["_toConsumableArray","module","link","default","v","_slicedToArray","_objectWithoutProperties","_objectSpread","_extends","_regeneratorRuntime","export","UserInfoActions","ButtonGroup","Menu","Option","React","useCallback","useMemo","ConfirmOwnerChangeWarningModal","GenericModal","usePermission","useSetModal","useRoute","useMethod","useEndpoint","useSetting","useToastMessageDispatch","useTranslation","useActionSpread","UserInfo","username","_id","isActive","isAdmin","onChange","onReload","t","setModal","directRoute","userRoute","dispatchToastMessage","canDirectMessage","canEditOtherUserInfo","canAssignAdminRole","canResetE2EEKey","canResetTOTP","canEditOtherUserActiveStatus","canDeleteUser","enforcePassword","handleClose","handleDeletedUser","push","confirmOwnerChanges","action","modalProps","xhr","responseJSON","errorType","details","shouldChangeOwner","shouldBeRemoved","type","message","deleteUserQuery","userId","deleteUserEndpoint","erasureType","deleteUser","confirm","confirmRelinquish","result","success","contentTitle","confirmLabel","confirmDeleteUser","setAdminStatus","changeAdminStatus","resetE2EEKeyRequest","resetTOTPRequest","resetE2EEKey","resetTOTP","confirmResetE2EEKey","confirmResetTOTP","activeStatusQuery","activeStatus","changeActiveStatusMessage","changeActiveStatusRequest","changeActiveStatus","directMessageClick","rid","editUserClick","context","id","options","directMessage","icon","label","editUser","makeAdmin","actionsDefinition","actions","menuOptions","menu","props","mapAction","key","map","filter","Boolean"],"mappings":"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","sourcesContent":["import { ButtonGroup, Menu, Option } from '@rocket.chat/fuselage';\nimport React, { useCallback, useMemo } from 'react';\n\nimport ConfirmOwnerChangeWarningModal from '../../../components/ConfirmOwnerChangeWarningModal';\nimport GenericModal from '../../../components/GenericModal';\nimport { usePermission } from '../../../contexts/AuthorizationContext';\nimport { useSetModal } from '../../../contexts/ModalContext';\nimport { useRoute } from '../../../contexts/RouterContext';\nimport { useMethod, useEndpoint } from '../../../contexts/ServerContext';\nimport { useSetting } from '../../../contexts/SettingsContext';\nimport { useToastMessageDispatch } from '../../../contexts/ToastMessagesContext';\nimport { useTranslation } from '../../../contexts/TranslationContext';\nimport { useActionSpread } from '../../hooks/useActionSpread';\nimport UserInfo from '../../room/contextualBar/UserInfo';\n\nexport const UserInfoActions = ({ username, _id, isActive, isAdmin, onChange, onReload }) => {\n\tconst t = useTranslation();\n\tconst setModal = useSetModal();\n\n\tconst directRoute = useRoute('direct');\n\tconst userRoute = useRoute('admin-users');\n\tconst dispatchToastMessage = useToastMessageDispatch();\n\n\tconst canDirectMessage = usePermission('create-d');\n\tconst canEditOtherUserInfo = usePermission('edit-other-user-info');\n\tconst canAssignAdminRole = usePermission('assign-admin-role');\n\tconst canResetE2EEKey = usePermission('edit-other-user-e2ee');\n\tconst canResetTOTP = usePermission('edit-other-user-totp');\n\tconst canEditOtherUserActiveStatus = usePermission('edit-other-user-active-status');\n\tconst canDeleteUser = usePermission('delete-user');\n\n\tconst enforcePassword = useSetting('Accounts_TwoFactorAuthentication_Enforce_Password_Fallback');\n\n\tconst handleClose = useCallback(() => {\n\t\tsetModal();\n\t\tonChange();\n\t}, [setModal, onChange]);\n\n\tconst handleDeletedUser = () => {\n\t\tsetModal();\n\t\tuserRoute.push({});\n\t\tonReload();\n\t};\n\n\tconst confirmOwnerChanges =\n\t\t(action, modalProps = {}) =>\n\t\tasync () => {\n\t\t\ttry {\n\t\t\t\treturn await action();\n\t\t\t} catch (error) {\n\t\t\t\tif (error.xhr?.responseJSON?.errorType === 'user-last-owner') {\n\t\t\t\t\tconst { shouldChangeOwner, shouldBeRemoved } = error.xhr.responseJSON.details;\n\t\t\t\t\tsetModal(\n\t\t\t\t\t\t<ConfirmOwnerChangeWarningModal\n\t\t\t\t\t\t\tshouldChangeOwner={shouldChangeOwner}\n\t\t\t\t\t\t\tshouldBeRemoved={shouldBeRemoved}\n\t\t\t\t\t\t\t{...modalProps}\n\t\t\t\t\t\t\tonConfirm={async () => {\n\t\t\t\t\t\t\t\tawait action(true);\n\t\t\t\t\t\t\t\tsetModal();\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tonCancel={() => {\n\t\t\t\t\t\t\t\tsetModal();\n\t\t\t\t\t\t\t\tonChange();\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t/>,\n\t\t\t\t\t);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tdispatchToastMessage({ type: 'error', message: error });\n\t\t\t}\n\t\t};\n\n\tconst deleteUserQuery = useMemo(() => ({ userId: _id }), [_id]);\n\tconst deleteUserEndpoint = useEndpoint('POST', 'users.delete');\n\n\tconst erasureType = useSetting('Message_ErasureType');\n\n\tconst deleteUser = confirmOwnerChanges(\n\t\tasync (confirm = false) => {\n\t\t\tif (confirm) {\n\t\t\t\tdeleteUserQuery.confirmRelinquish = confirm;\n\t\t\t}\n\n\t\t\tconst result = await deleteUserEndpoint(deleteUserQuery);\n\t\t\tif (result.success) {\n\t\t\t\thandleDeletedUser();\n\t\t\t\tdispatchToastMessage({ type: 'success', message: t('User_has_been_deleted') });\n\t\t\t} else {\n\t\t\t\tsetModal();\n\t\t\t}\n\t\t},\n\t\t{\n\t\t\tcontentTitle: t(`Delete_User_Warning_${erasureType}`),\n\t\t\tconfirmLabel: t('Delete'),\n\t\t},\n\t);\n\n\tconst confirmDeleteUser = useCallback(() => {\n\t\tsetModal(\n\t\t\t<GenericModal variant='danger' onConfirm={deleteUser} onCancel={() => setModal()} confirmText={t('Delete')}>\n\t\t\t\t{t(`Delete_User_Warning_${erasureType}`)}\n\t\t\t</GenericModal>,\n\t\t);\n\t}, [deleteUser, erasureType, setModal, t]);\n\n\tconst setAdminStatus = useMethod('setAdminStatus');\n\tconst changeAdminStatus = useCallback(async () => {\n\t\ttry {\n\t\t\tawait setAdminStatus(_id, !isAdmin);\n\t\t\tconst message = isAdmin ? 'User_is_no_longer_an_admin' : 'User_is_now_an_admin';\n\t\t\tdispatchToastMessage({ type: 'success', message: t(message) });\n\t\t\tonChange();\n\t\t} catch (error) {\n\t\t\tdispatchToastMessage({ type: 'error', message: error });\n\t\t}\n\t}, [_id, dispatchToastMessage, isAdmin, onChange, setAdminStatus, t]);\n\n\tconst resetE2EEKeyRequest = useEndpoint('POST', 'users.resetE2EKey');\n\tconst resetTOTPRequest = useEndpoint('POST', 'users.resetTOTP');\n\tconst resetE2EEKey = useCallback(async () => {\n\t\tsetModal();\n\t\tconst result = await resetE2EEKeyRequest({ userId: _id });\n\n\t\tif (result) {\n\t\t\tsetModal(\n\t\t\t\t<GenericModal variant='success' onClose={handleClose} onConfirm={handleClose}>\n\t\t\t\t\t{t('Users_key_has_been_reset')}\n\t\t\t\t</GenericModal>,\n\t\t\t);\n\t\t}\n\t}, [resetE2EEKeyRequest, setModal, t, _id, handleClose]);\n\n\tconst resetTOTP = useCallback(async () => {\n\t\tsetModal();\n\t\tconst result = await resetTOTPRequest({ userId: _id });\n\n\t\tif (result) {\n\t\t\tsetModal(\n\t\t\t\t<GenericModal variant='success' onClose={handleClose} onConfirm={handleClose}>\n\t\t\t\t\t{t('Users_TOTP_has_been_reset')}\n\t\t\t\t</GenericModal>,\n\t\t\t);\n\t\t}\n\t}, [resetTOTPRequest, setModal, t, _id, handleClose]);\n\n\tconst confirmResetE2EEKey = useCallback(() => {\n\t\tsetModal(\n\t\t\t<GenericModal variant='danger' onConfirm={resetE2EEKey} onCancel={() => setModal()} confirmText={t('Reset')}>\n\t\t\t\t{t('E2E_Reset_Other_Key_Warning')}\n\t\t\t</GenericModal>,\n\t\t);\n\t}, [resetE2EEKey, t, setModal]);\n\n\tconst confirmResetTOTP = useCallback(() => {\n\t\tsetModal(\n\t\t\t<GenericModal variant='danger' onConfirm={resetTOTP} onCancel={() => setModal()} confirmText={t('Reset')}>\n\t\t\t\t{t('TOTP_Reset_Other_Key_Warning')}\n\t\t\t</GenericModal>,\n\t\t);\n\t}, [resetTOTP, t, setModal]);\n\n\tconst activeStatusQuery = useMemo(\n\t\t() => ({\n\t\t\tuserId: _id,\n\t\t\tactiveStatus: !isActive,\n\t\t}),\n\t\t[_id, isActive],\n\t);\n\tconst changeActiveStatusMessage = isActive ? 'User_has_been_deactivated' : 'User_has_been_activated';\n\tconst changeActiveStatusRequest = useEndpoint('POST', 'users.setActiveStatus');\n\n\tconst changeActiveStatus = confirmOwnerChanges(\n\t\tasync (confirm = false) => {\n\t\t\tif (confirm) {\n\t\t\t\tactiveStatusQuery.confirmRelinquish = confirm;\n\t\t\t}\n\n\t\t\ttry {\n\t\t\t\tconst result = await changeActiveStatusRequest(activeStatusQuery);\n\t\t\t\tif (result.success) {\n\t\t\t\t\tdispatchToastMessage({ type: 'success', message: t(changeActiveStatusMessage) });\n\t\t\t\t\tonChange();\n\t\t\t\t}\n\t\t\t} catch (error) {\n\t\t\t\tthrow error;\n\t\t\t}\n\t\t},\n\t\t{\n\t\t\tconfirmLabel: t('Yes_deactivate_it'),\n\t\t},\n\t);\n\n\tconst directMessageClick = useCallback(\n\t\t() =>\n\t\t\tdirectRoute.push({\n\t\t\t\trid: username,\n\t\t\t}),\n\t\t[directRoute, username],\n\t);\n\n\tconst editUserClick = useCallback(\n\t\t() =>\n\t\t\tuserRoute.push({\n\t\t\t\tcontext: 'edit',\n\t\t\t\tid: _id,\n\t\t\t}),\n\t\t[_id, userRoute],\n\t);\n\n\tconst options = useMemo(\n\t\t() => ({\n\t\t\t...(canDirectMessage && {\n\t\t\t\tdirectMessage: {\n\t\t\t\t\ticon: 'balloon',\n\t\t\t\t\tlabel: t('Direct_Message'),\n\t\t\t\t\taction: directMessageClick,\n\t\t\t\t},\n\t\t\t}),\n\t\t\t...(canEditOtherUserInfo && {\n\t\t\t\teditUser: {\n\t\t\t\t\ticon: 'edit',\n\t\t\t\t\tlabel: t('Edit'),\n\t\t\t\t\taction: editUserClick,\n\t\t\t\t},\n\t\t\t}),\n\t\t\t...(canAssignAdminRole &&\n\t\t\t\tusername && {\n\t\t\t\t\tmakeAdmin: {\n\t\t\t\t\t\ticon: 'key',\n\t\t\t\t\t\tlabel: isAdmin ? t('Remove_Admin') : t('Make_Admin'),\n\t\t\t\t\t\taction: changeAdminStatus,\n\t\t\t\t\t},\n\t\t\t\t}),\n\t\t\t...(canResetE2EEKey &&\n\t\t\t\tenforcePassword && {\n\t\t\t\t\tresetE2EEKey: {\n\t\t\t\t\t\ticon: 'key',\n\t\t\t\t\t\tlabel: t('Reset_E2E_Key'),\n\t\t\t\t\t\taction: confirmResetE2EEKey,\n\t\t\t\t\t},\n\t\t\t\t}),\n\t\t\t...(canResetTOTP &&\n\t\t\t\tenforcePassword && {\n\t\t\t\t\tresetTOTP: {\n\t\t\t\t\t\ticon: 'key',\n\t\t\t\t\t\tlabel: t('Reset_TOTP'),\n\t\t\t\t\t\taction: confirmResetTOTP,\n\t\t\t\t\t},\n\t\t\t\t}),\n\t\t\t...(canDeleteUser && {\n\t\t\t\tdelete: {\n\t\t\t\t\ticon: 'trash',\n\t\t\t\t\tlabel: t('Delete'),\n\t\t\t\t\taction: confirmDeleteUser,\n\t\t\t\t},\n\t\t\t}),\n\t\t\t...(canEditOtherUserActiveStatus && {\n\t\t\t\tchangeActiveStatus: {\n\t\t\t\t\ticon: 'user',\n\t\t\t\t\tlabel: isActive ? t('Deactivate') : t('Activate'),\n\t\t\t\t\taction: changeActiveStatus,\n\t\t\t\t},\n\t\t\t}),\n\t\t}),\n\t\t[\n\t\t\tt,\n\t\t\tcanDirectMessage,\n\t\t\tdirectMessageClick,\n\t\t\tcanEditOtherUserInfo,\n\t\t\teditUserClick,\n\t\t\tcanAssignAdminRole,\n\t\t\tisAdmin,\n\t\t\tchangeAdminStatus,\n\t\t\tcanDeleteUser,\n\t\t\tconfirmDeleteUser,\n\t\t\tcanEditOtherUserActiveStatus,\n\t\t\tisActive,\n\t\t\tchangeActiveStatus,\n\t\t\tenforcePassword,\n\t\t\tcanResetE2EEKey,\n\t\t\tcanResetTOTP,\n\t\t\tconfirmResetE2EEKey,\n\t\t\tconfirmResetTOTP,\n\t\t\tusername,\n\t\t],\n\t);\n\n\tconst { actions: actionsDefinition, menu: menuOptions } = useActionSpread(options);\n\n\tconst menu = useMemo(() => {\n\t\tif (!menuOptions) {\n\t\t\treturn null;\n\t\t}\n\n\t\treturn (\n\t\t\t<Menu\n\t\t\t\tmi='x4'\n\t\t\t\tplacement='bottom-start'\n\t\t\t\tsmall={false}\n\t\t\t\tghost={false}\n\t\t\t\tflexShrink={0}\n\t\t\t\tkey='menu'\n\t\t\t\trenderItem={({ label: { label, icon }, ...props }) => <Option label={label} title={label} icon={icon} {...props} />}\n\t\t\t\toptions={menuOptions}\n\t\t\t/>\n\t\t);\n\t}, [menuOptions]);\n\n\tconst actions = useMemo(() => {\n\t\tconst mapAction = ([key, { label, icon, action }]) => (\n\t\t\t<UserInfo.Action key={key} title={label} label={label} onClick={action} icon={icon} />\n\t\t);\n\t\treturn [...actionsDefinition.map(mapAction), menu].filter(Boolean);\n\t}, [actionsDefinition, menu]);\n\n\treturn (\n\t\t<ButtonGroup flexGrow={0} justifyContent='center'>\n\t\t\t{actions}\n\t\t</ButtonGroup>\n\t);\n};\n"]},"sourceType":"module","hash":"60cfaa2db2e5fd931cabcef7f0b73261fd2f995b"}
