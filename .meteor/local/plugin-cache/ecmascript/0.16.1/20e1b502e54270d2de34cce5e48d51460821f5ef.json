{"metadata":{},"options":{"assumptions":{},"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat/client/views/room/contextualBar/RoomMembers/List/RoomMembersWithData.js","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","classProperties","classPrivateProperties","jsx","nullishCoalescingOperator","nullishCoalescingOperator","optionalChaining","optionalCatchBinding","optionalCatchBinding","classProperties","classPrivateProperties","classPrivateMethods","classProperties","classPrivateProperties","asyncGenerators","asyncGenerators","objectRestSpread","logicalAssignment"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"allowUndeclaredExports":true,"strictMode":false},"caller":{"name":"meteor","arch":"web.browser"},"sourceFileName":"client/views/room/contextualBar/RoomMembers/List/RoomMembersWithData.js","filename":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat/client/views/room/contextualBar/RoomMembers/List/RoomMembersWithData.js","targets":{"android":"95.0.0","chrome":"95.0.0","edge":"95.0.0","firefox":"78.0.0","ie":"10.0.0","ios":"15.0.0","opera":"81.0.0","safari":"15.1.0","samsung":"14.0.0"},"cloneInputAst":true,"browserslistConfigFile":false,"passPerPreset":false,"envName":"development","cwd":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat","root":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat","rootMode":"root","plugins":[{"key":"base$0","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0","visitor":{"Program":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true},"options":{"avoidModernSyntax":false,"enforceStrictMode":false,"dynamicImport":true,"generateLetDeclarations":true}},{"key":"transform-runtime","visitor":{"MemberExpression":{"enter":[null]},"ObjectPattern":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":{},"_verified":{},"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]}},"options":{"version":"7.16.5","helpers":true,"useESModules":false,"corejs":false}},{"key":"proposal-class-properties","visitor":{"PrivateName":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{"loose":true}},{"key":"transform-react-jsx","visitor":{"_exploded":{},"_verified":{},"JSXNamespacedName":{"enter":[null]},"JSXSpreadChild":{"enter":[null]},"Program":{"enter":[null]},"JSXElement":{"exit":[null]},"JSXFragment":{"exit":[null]},"JSXAttribute":{"enter":[null]}},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","runtime":"classic","throwIfNamespace":true,"useBuiltIns":false}},{"key":"transform-react-display-name","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-react-pure-annotations","visitor":{"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"syntax-nullish-coalescing-operator","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-nullish-coalescing-operator","visitor":{"_exploded":{},"_verified":{},"LogicalExpression":{"enter":[null]}},"options":{}},{"key":"syntax-optional-chaining","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-optional-chaining","visitor":{"_exploded":true,"OptionalCallExpression":{"enter":[null]},"OptionalMemberExpression":{"enter":[null]},"_verified":true},"options":{}},{"key":"syntax-optional-catch-binding","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-optional-catch-binding","visitor":{"_exploded":{},"_verified":{},"CatchClause":{"enter":[null]}},"options":{}},{"key":"syntax-class-properties","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-class-properties","visitor":{"PrivateName":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{}},{"key":"syntax-async-generators","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-async-generator-functions","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]}},"options":{}},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-object-rest-spread","visitor":{"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"proposal-logical-assignment-operators","visitor":{"_exploded":{},"_verified":{},"AssignmentExpression":{"enter":[null]}},"options":{}},{"key":"transform-literals","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-template-literals","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-parameters","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{}},{"key":"transform-exponentiation-operator","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}}],"presets":[],"generatorOpts":{"filename":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat/client/views/room/contextualBar/RoomMembers/List/RoomMembersWithData.js","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"client/views/room/contextualBar/RoomMembers/List/RoomMembersWithData.js"}},"code":"let useMutableCallback, useDebouncedValue, useLocalStorage;\nmodule.link(\"@rocket.chat/fuselage-hooks\", {\n  useMutableCallback(v) {\n    useMutableCallback = v;\n  },\n\n  useDebouncedValue(v) {\n    useDebouncedValue = v;\n  },\n\n  useLocalStorage(v) {\n    useLocalStorage = v;\n  }\n\n}, 0);\nlet React, useCallback, useMemo, useState;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  },\n\n  useCallback(v) {\n    useCallback = v;\n  },\n\n  useMemo(v) {\n    useMemo = v;\n  },\n\n  useState(v) {\n    useState = v;\n  }\n\n}, 1);\nlet useAtLeastOnePermission;\nmodule.link(\"../../../../../contexts/AuthorizationContext\", {\n  useAtLeastOnePermission(v) {\n    useAtLeastOnePermission = v;\n  }\n\n}, 2);\nlet useUserRoom;\nmodule.link(\"../../../../../contexts/UserContext\", {\n  useUserRoom(v) {\n    useUserRoom = v;\n  }\n\n}, 3);\nlet useRecordList;\nmodule.link(\"../../../../../hooks/lists/useRecordList\", {\n  useRecordList(v) {\n    useRecordList = v;\n  }\n\n}, 4);\nlet AsyncStatePhase;\nmodule.link(\"../../../../../hooks/useAsyncState\", {\n  AsyncStatePhase(v) {\n    AsyncStatePhase = v;\n  }\n\n}, 5);\nlet useMembersList;\nmodule.link(\"../../../../hooks/useMembersList\", {\n  useMembersList(v) {\n    useMembersList = v;\n  }\n\n}, 6);\nlet useTabBarClose;\nmodule.link(\"../../../providers/ToolboxProvider\", {\n  useTabBarClose(v) {\n    useTabBarClose = v;\n  }\n\n}, 7);\nlet UserInfoWithData;\nmodule.link(\"../../UserInfo\", {\n  default(v) {\n    UserInfoWithData = v;\n  }\n\n}, 8);\nlet AddUsers;\nmodule.link(\"../AddUsers\", {\n  default(v) {\n    AddUsers = v;\n  }\n\n}, 9);\nlet InviteUsers;\nmodule.link(\"../InviteUsers\", {\n  default(v) {\n    InviteUsers = v;\n  }\n\n}, 10);\nlet RoomMembers;\nmodule.link(\"./RoomMembers\", {\n  default(v) {\n    RoomMembers = v;\n  }\n\n}, 11);\n\nconst RoomMembersWithData = _ref => {\n  let {\n    rid\n  } = _ref;\n  const [state, setState] = useState({});\n  const onClickClose = useTabBarClose();\n  const room = useUserRoom(rid);\n  const isTeam = room.teamMain;\n  const isDirect = room.t === 'd';\n  room.type = room.t;\n  room.rid = rid;\n  const [type, setType] = useLocalStorage('members-list-type', 'online');\n  const [text, setText] = useState('');\n  const debouncedText = useDebouncedValue(text, 800);\n  const {\n    membersList,\n    loadMoreItems,\n    reload\n  } = useMembersList(useMemo(() => ({\n    rid,\n    type,\n    limit: 50,\n    debouncedText,\n    roomType: room.t\n  }), [rid, type, debouncedText, room.t]));\n  const {\n    phase,\n    items,\n    itemCount: total\n  } = useRecordList(membersList);\n  const canAddUsers = useAtLeastOnePermission(useMemo(() => [room.t === 'p' ? 'add-user-to-any-p-room' : 'add-user-to-any-c-room', 'add-user-to-joined-room'], [room.t]), rid);\n  const handleTextChange = useCallback(event => {\n    setText(event.currentTarget.value);\n  }, []);\n  const viewUser = useMutableCallback(e => {\n    const {\n      username\n    } = e.currentTarget.dataset;\n    setState({\n      tab: 'UserInfo',\n      username\n    });\n  });\n  const createInvite = useMutableCallback(() => {\n    setState({\n      tab: 'InviteUsers'\n    });\n  });\n  const addUser = useMutableCallback(() => {\n    setState({\n      tab: 'AddUsers'\n    });\n  });\n  const handleBack = useCallback(() => {\n    setState({});\n    reload();\n  }, [setState, reload]);\n\n  if (state.tab === 'UserInfo') {\n    return /*#__PURE__*/React.createElement(UserInfoWithData, {\n      rid: rid,\n      onClickClose: onClickClose,\n      onClickBack: handleBack,\n      username: state.username\n    });\n  }\n\n  if (state.tab === 'InviteUsers') {\n    return /*#__PURE__*/React.createElement(InviteUsers, {\n      onClickClose: onClickClose,\n      rid: rid,\n      onClickBack: handleBack\n    });\n  }\n\n  if (state.tab === 'AddUsers') {\n    return /*#__PURE__*/React.createElement(AddUsers, {\n      onClickClose: onClickClose,\n      rid: rid,\n      onClickBack: handleBack,\n      reload: reload\n    });\n  }\n\n  return /*#__PURE__*/React.createElement(RoomMembers, {\n    rid: rid,\n    isTeam: isTeam,\n    isDirect: isDirect,\n    loading: phase === AsyncStatePhase.LOADING,\n    type: type,\n    text: text,\n    setType: setType,\n    setText: handleTextChange,\n    members: items,\n    total: total,\n    onClickClose: onClickClose,\n    onClickView: viewUser,\n    onClickAdd: canAddUsers && addUser,\n    onClickInvite: canAddUsers && createInvite,\n    loadMoreItems: loadMoreItems,\n    reload: reload\n  });\n};\n\nmodule.exportDefault(RoomMembersWithData);","map":{"version":3,"sources":["client/views/room/contextualBar/RoomMembers/List/RoomMembersWithData.js"],"names":["useMutableCallback","useDebouncedValue","useLocalStorage","module","link","v","React","useCallback","useMemo","useState","default","useAtLeastOnePermission","useUserRoom","useRecordList","AsyncStatePhase","useMembersList","useTabBarClose","UserInfoWithData","AddUsers","InviteUsers","RoomMembers","RoomMembersWithData","rid","state","setState","onClickClose","room","isTeam","teamMain","isDirect","t","type","setType","text","setText","debouncedText","membersList","loadMoreItems","reload","limit","roomType","phase","items","itemCount","total","canAddUsers","handleTextChange","event","currentTarget","value","viewUser","e","username","dataset","tab","createInvite","addUser","handleBack","LOADING","exportDefault"],"mappings":"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","sourcesContent":["import { useMutableCallback, useDebouncedValue, useLocalStorage } from '@rocket.chat/fuselage-hooks';\nimport React, { useCallback, useMemo, useState } from 'react';\n\nimport { useAtLeastOnePermission } from '../../../../../contexts/AuthorizationContext';\nimport { useUserRoom } from '../../../../../contexts/UserContext';\nimport { useRecordList } from '../../../../../hooks/lists/useRecordList';\nimport { AsyncStatePhase } from '../../../../../hooks/useAsyncState';\nimport { useMembersList } from '../../../../hooks/useMembersList';\nimport { useTabBarClose } from '../../../providers/ToolboxProvider';\nimport UserInfoWithData from '../../UserInfo';\nimport AddUsers from '../AddUsers';\nimport InviteUsers from '../InviteUsers';\nimport RoomMembers from './RoomMembers';\n\nconst RoomMembersWithData = ({ rid }) => {\n\tconst [state, setState] = useState({});\n\tconst onClickClose = useTabBarClose();\n\tconst room = useUserRoom(rid);\n\tconst isTeam = room.teamMain;\n\tconst isDirect = room.t === 'd';\n\n\troom.type = room.t;\n\troom.rid = rid;\n\n\tconst [type, setType] = useLocalStorage('members-list-type', 'online');\n\tconst [text, setText] = useState('');\n\n\tconst debouncedText = useDebouncedValue(text, 800);\n\n\tconst { membersList, loadMoreItems, reload } = useMembersList(\n\t\tuseMemo(() => ({ rid, type, limit: 50, debouncedText, roomType: room.t }), [rid, type, debouncedText, room.t]),\n\t);\n\n\tconst { phase, items, itemCount: total } = useRecordList(membersList);\n\n\tconst canAddUsers = useAtLeastOnePermission(\n\t\tuseMemo(() => [room.t === 'p' ? 'add-user-to-any-p-room' : 'add-user-to-any-c-room', 'add-user-to-joined-room'], [room.t]),\n\t\trid,\n\t);\n\n\tconst handleTextChange = useCallback((event) => {\n\t\tsetText(event.currentTarget.value);\n\t}, []);\n\n\tconst viewUser = useMutableCallback((e) => {\n\t\tconst { username } = e.currentTarget.dataset;\n\t\tsetState({\n\t\t\ttab: 'UserInfo',\n\t\t\tusername,\n\t\t});\n\t});\n\n\tconst createInvite = useMutableCallback(() => {\n\t\tsetState({ tab: 'InviteUsers' });\n\t});\n\n\tconst addUser = useMutableCallback(() => {\n\t\tsetState({ tab: 'AddUsers' });\n\t});\n\n\tconst handleBack = useCallback(() => {\n\t\tsetState({});\n\t\treload();\n\t}, [setState, reload]);\n\n\tif (state.tab === 'UserInfo') {\n\t\treturn <UserInfoWithData rid={rid} onClickClose={onClickClose} onClickBack={handleBack} username={state.username} />;\n\t}\n\n\tif (state.tab === 'InviteUsers') {\n\t\treturn <InviteUsers onClickClose={onClickClose} rid={rid} onClickBack={handleBack} />;\n\t}\n\n\tif (state.tab === 'AddUsers') {\n\t\treturn <AddUsers onClickClose={onClickClose} rid={rid} onClickBack={handleBack} reload={reload} />;\n\t}\n\n\treturn (\n\t\t<RoomMembers\n\t\t\trid={rid}\n\t\t\tisTeam={isTeam}\n\t\t\tisDirect={isDirect}\n\t\t\tloading={phase === AsyncStatePhase.LOADING}\n\t\t\ttype={type}\n\t\t\ttext={text}\n\t\t\tsetType={setType}\n\t\t\tsetText={handleTextChange}\n\t\t\tmembers={items}\n\t\t\ttotal={total}\n\t\t\tonClickClose={onClickClose}\n\t\t\tonClickView={viewUser}\n\t\t\tonClickAdd={canAddUsers && addUser}\n\t\t\tonClickInvite={canAddUsers && createInvite}\n\t\t\tloadMoreItems={loadMoreItems}\n\t\t\treload={reload}\n\t\t/>\n\t);\n};\n\nexport default RoomMembersWithData;\n"]},"sourceType":"module","hash":"20e1b502e54270d2de34cce5e48d51460821f5ef"}
