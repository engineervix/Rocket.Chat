{"metadata":{},"options":{"assumptions":{},"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat/client/views/account/tokens/AddToken.js","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","classProperties","classPrivateProperties","jsx","nullishCoalescingOperator","nullishCoalescingOperator","optionalChaining","optionalCatchBinding","optionalCatchBinding","classProperties","classPrivateProperties","classPrivateMethods","classProperties","classPrivateProperties","asyncGenerators","asyncGenerators","objectRestSpread","logicalAssignment"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"allowUndeclaredExports":true,"strictMode":false},"caller":{"name":"meteor","arch":"web.browser"},"sourceFileName":"client/views/account/tokens/AddToken.js","filename":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat/client/views/account/tokens/AddToken.js","targets":{"android":"95.0.0","chrome":"95.0.0","edge":"95.0.0","firefox":"78.0.0","ie":"10.0.0","ios":"15.0.0","opera":"81.0.0","safari":"15.1.0","samsung":"14.0.0"},"cloneInputAst":true,"browserslistConfigFile":false,"passPerPreset":false,"envName":"development","cwd":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat","root":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat","rootMode":"root","plugins":[{"key":"base$0","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0","visitor":{"Program":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true},"options":{"avoidModernSyntax":false,"enforceStrictMode":false,"dynamicImport":true,"generateLetDeclarations":true}},{"key":"transform-runtime","visitor":{"MemberExpression":{"enter":[null]},"ObjectPattern":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":{},"_verified":{},"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]}},"options":{"version":"7.16.5","helpers":true,"useESModules":false,"corejs":false}},{"key":"proposal-class-properties","visitor":{"PrivateName":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{"loose":true}},{"key":"transform-react-jsx","visitor":{"_exploded":{},"_verified":{},"JSXNamespacedName":{"enter":[null]},"JSXSpreadChild":{"enter":[null]},"Program":{"enter":[null]},"JSXElement":{"exit":[null]},"JSXFragment":{"exit":[null]},"JSXAttribute":{"enter":[null]}},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","runtime":"classic","throwIfNamespace":true,"useBuiltIns":false}},{"key":"transform-react-display-name","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-react-pure-annotations","visitor":{"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"syntax-nullish-coalescing-operator","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-nullish-coalescing-operator","visitor":{"_exploded":{},"_verified":{},"LogicalExpression":{"enter":[null]}},"options":{}},{"key":"syntax-optional-chaining","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-optional-chaining","visitor":{"_exploded":true,"OptionalCallExpression":{"enter":[null]},"OptionalMemberExpression":{"enter":[null]},"_verified":true},"options":{}},{"key":"syntax-optional-catch-binding","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-optional-catch-binding","visitor":{"_exploded":{},"_verified":{},"CatchClause":{"enter":[null]}},"options":{}},{"key":"syntax-class-properties","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-class-properties","visitor":{"PrivateName":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{}},{"key":"syntax-async-generators","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-async-generator-functions","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]}},"options":{}},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-object-rest-spread","visitor":{"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"proposal-logical-assignment-operators","visitor":{"_exploded":{},"_verified":{},"AssignmentExpression":{"enter":[null]}},"options":{}},{"key":"transform-literals","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-template-literals","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-parameters","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{}},{"key":"transform-exponentiation-operator","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}}],"presets":[],"generatorOpts":{"filename":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat/client/views/account/tokens/AddToken.js","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"client/views/account/tokens/AddToken.js"}},"code":"const _excluded = [\"onDidAddToken\"];\n\nlet _extends;\n\nmodule.link(\"@babel/runtime/helpers/extends\", {\n  default(v) {\n    _extends = v;\n  }\n\n}, 0);\n\nlet _objectWithoutProperties;\n\nmodule.link(\"@babel/runtime/helpers/objectWithoutProperties\", {\n  default(v) {\n    _objectWithoutProperties = v;\n  }\n\n}, 1);\nlet Box, TextInput, Button, Field, FieldGroup, Margins, CheckBox;\nmodule.link(\"@rocket.chat/fuselage\", {\n  Box(v) {\n    Box = v;\n  },\n\n  TextInput(v) {\n    TextInput = v;\n  },\n\n  Button(v) {\n    Button = v;\n  },\n\n  Field(v) {\n    Field = v;\n  },\n\n  FieldGroup(v) {\n    FieldGroup = v;\n  },\n\n  Margins(v) {\n    Margins = v;\n  },\n\n  CheckBox(v) {\n    CheckBox = v;\n  }\n\n}, 0);\nlet useUniqueId;\nmodule.link(\"@rocket.chat/fuselage-hooks\", {\n  useUniqueId(v) {\n    useUniqueId = v;\n  }\n\n}, 1);\nlet React, useCallback;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  },\n\n  useCallback(v) {\n    useCallback = v;\n  }\n\n}, 2);\nlet useSetModal;\nmodule.link(\"../../../contexts/ModalContext\", {\n  useSetModal(v) {\n    useSetModal = v;\n  }\n\n}, 3);\nlet useMethod;\nmodule.link(\"../../../contexts/ServerContext\", {\n  useMethod(v) {\n    useMethod = v;\n  }\n\n}, 4);\nlet useToastMessageDispatch;\nmodule.link(\"../../../contexts/ToastMessagesContext\", {\n  useToastMessageDispatch(v) {\n    useToastMessageDispatch = v;\n  }\n\n}, 5);\nlet useTranslation;\nmodule.link(\"../../../contexts/TranslationContext\", {\n  useTranslation(v) {\n    useTranslation = v;\n  }\n\n}, 6);\nlet useUserId;\nmodule.link(\"../../../contexts/UserContext\", {\n  useUserId(v) {\n    useUserId = v;\n  }\n\n}, 7);\nlet useForm;\nmodule.link(\"../../../hooks/useForm\", {\n  useForm(v) {\n    useForm = v;\n  }\n\n}, 8);\nlet InfoModal;\nmodule.link(\"./InfoModal\", {\n  default(v) {\n    InfoModal = v;\n  }\n\n}, 9);\nconst initialValues = {\n  name: '',\n  bypassTwoFactor: false\n};\n\nconst AddToken = _ref => {\n  let {\n    onDidAddToken\n  } = _ref,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  const t = useTranslation();\n  const createTokenFn = useMethod('personalAccessTokens:generateToken');\n  const dispatchToastMessage = useToastMessageDispatch();\n  const setModal = useSetModal();\n  const userId = useUserId();\n  const {\n    values,\n    handlers,\n    reset\n  } = useForm(initialValues);\n  const {\n    name,\n    bypassTwoFactor\n  } = values;\n  const {\n    handleName,\n    handleBypassTwoFactor\n  } = handlers;\n  const closeModal = useCallback(() => setModal(null), [setModal]);\n  const handleAdd = useCallback(async () => {\n    try {\n      const token = await createTokenFn({\n        tokenName: name,\n        bypassTwoFactor\n      });\n      setModal( /*#__PURE__*/React.createElement(InfoModal, {\n        title: t('API_Personal_Access_Token_Generated'),\n        content: /*#__PURE__*/React.createElement(Box, {\n          dangerouslySetInnerHTML: {\n            __html: t('API_Personal_Access_Token_Generated_Text_Token_s_UserId_s', {\n              token,\n              userId\n            })\n          }\n        }),\n        confirmText: t('ok'),\n        onConfirm: closeModal\n      }));\n      reset();\n      onDidAddToken();\n    } catch (error) {\n      dispatchToastMessage({\n        type: 'error',\n        message: error\n      });\n    }\n  }, [bypassTwoFactor, closeModal, createTokenFn, dispatchToastMessage, name, onDidAddToken, reset, setModal, t, userId]);\n  const bypassTwoFactorCheckboxId = useUniqueId();\n  return /*#__PURE__*/React.createElement(FieldGroup, _extends({\n    is: \"form\",\n    marginBlock: \"x8\"\n  }, props), /*#__PURE__*/React.createElement(Field, null, /*#__PURE__*/React.createElement(Field.Row, null, /*#__PURE__*/React.createElement(Margins, {\n    inlineEnd: \"x4\"\n  }, /*#__PURE__*/React.createElement(TextInput, {\n    value: name,\n    onChange: handleName,\n    placeholder: t('API_Add_Personal_Access_Token')\n  })), /*#__PURE__*/React.createElement(Button, {\n    primary: true,\n    disabled: name.length === 0,\n    onClick: handleAdd\n  }, t('Add'))), /*#__PURE__*/React.createElement(Field.Row, null, /*#__PURE__*/React.createElement(CheckBox, {\n    id: bypassTwoFactorCheckboxId,\n    checked: bypassTwoFactor,\n    onChange: handleBypassTwoFactor\n  }), /*#__PURE__*/React.createElement(Field.Label, {\n    htmlFor: bypassTwoFactorCheckboxId\n  }, t('Ignore'), \" \", t('Two Factor Authentication')))));\n};\n\nmodule.exportDefault(AddToken);","map":{"version":3,"sources":["client/views/account/tokens/AddToken.js"],"names":["_extends","module","link","default","v","_objectWithoutProperties","Box","TextInput","Button","Field","FieldGroup","Margins","CheckBox","useUniqueId","React","useCallback","useSetModal","useMethod","useToastMessageDispatch","useTranslation","useUserId","useForm","InfoModal","initialValues","name","bypassTwoFactor","AddToken","onDidAddToken","props","t","createTokenFn","dispatchToastMessage","setModal","userId","values","handlers","reset","handleName","handleBypassTwoFactor","closeModal","handleAdd","token","tokenName","__html","error","type","message","bypassTwoFactorCheckboxId","length","exportDefault"],"mappings":"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","sourcesContent":["import { Box, TextInput, Button, Field, FieldGroup, Margins, CheckBox } from '@rocket.chat/fuselage';\nimport { useUniqueId } from '@rocket.chat/fuselage-hooks';\nimport React, { useCallback } from 'react';\n\nimport { useSetModal } from '../../../contexts/ModalContext';\nimport { useMethod } from '../../../contexts/ServerContext';\nimport { useToastMessageDispatch } from '../../../contexts/ToastMessagesContext';\nimport { useTranslation } from '../../../contexts/TranslationContext';\nimport { useUserId } from '../../../contexts/UserContext';\nimport { useForm } from '../../../hooks/useForm';\nimport InfoModal from './InfoModal';\n\nconst initialValues = {\n\tname: '',\n\tbypassTwoFactor: false,\n};\n\nconst AddToken = ({ onDidAddToken, ...props }) => {\n\tconst t = useTranslation();\n\tconst createTokenFn = useMethod('personalAccessTokens:generateToken');\n\tconst dispatchToastMessage = useToastMessageDispatch();\n\tconst setModal = useSetModal();\n\n\tconst userId = useUserId();\n\n\tconst { values, handlers, reset } = useForm(initialValues);\n\n\tconst { name, bypassTwoFactor } = values;\n\tconst { handleName, handleBypassTwoFactor } = handlers;\n\n\tconst closeModal = useCallback(() => setModal(null), [setModal]);\n\n\tconst handleAdd = useCallback(async () => {\n\t\ttry {\n\t\t\tconst token = await createTokenFn({ tokenName: name, bypassTwoFactor });\n\n\t\t\tsetModal(\n\t\t\t\t<InfoModal\n\t\t\t\t\ttitle={t('API_Personal_Access_Token_Generated')}\n\t\t\t\t\tcontent={\n\t\t\t\t\t\t<Box\n\t\t\t\t\t\t\tdangerouslySetInnerHTML={{\n\t\t\t\t\t\t\t\t__html: t('API_Personal_Access_Token_Generated_Text_Token_s_UserId_s', {\n\t\t\t\t\t\t\t\t\ttoken,\n\t\t\t\t\t\t\t\t\tuserId,\n\t\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t/>\n\t\t\t\t\t}\n\t\t\t\t\tconfirmText={t('ok')}\n\t\t\t\t\tonConfirm={closeModal}\n\t\t\t\t/>,\n\t\t\t);\n\t\t\treset();\n\t\t\tonDidAddToken();\n\t\t} catch (error) {\n\t\t\tdispatchToastMessage({ type: 'error', message: error });\n\t\t}\n\t}, [bypassTwoFactor, closeModal, createTokenFn, dispatchToastMessage, name, onDidAddToken, reset, setModal, t, userId]);\n\n\tconst bypassTwoFactorCheckboxId = useUniqueId();\n\n\treturn (\n\t\t<FieldGroup is='form' marginBlock='x8' {...props}>\n\t\t\t<Field>\n\t\t\t\t<Field.Row>\n\t\t\t\t\t<Margins inlineEnd='x4'>\n\t\t\t\t\t\t<TextInput value={name} onChange={handleName} placeholder={t('API_Add_Personal_Access_Token')} />\n\t\t\t\t\t</Margins>\n\t\t\t\t\t<Button primary disabled={name.length === 0} onClick={handleAdd}>\n\t\t\t\t\t\t{t('Add')}\n\t\t\t\t\t</Button>\n\t\t\t\t</Field.Row>\n\t\t\t\t<Field.Row>\n\t\t\t\t\t<CheckBox id={bypassTwoFactorCheckboxId} checked={bypassTwoFactor} onChange={handleBypassTwoFactor} />\n\t\t\t\t\t<Field.Label htmlFor={bypassTwoFactorCheckboxId}>\n\t\t\t\t\t\t{t('Ignore')} {t('Two Factor Authentication')}\n\t\t\t\t\t</Field.Label>\n\t\t\t\t</Field.Row>\n\t\t\t</Field>\n\t\t</FieldGroup>\n\t);\n};\n\nexport default AddToken;\n"]},"sourceType":"module","hash":"0099400e5857d07971561a3c75d8b420af49806d"}
