{"metadata":{},"options":{"assumptions":{},"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat/imports/client/@rocket.chat/apps-engine/definition/uikit/blocks/BlockBuilder.js","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","classProperties","classPrivateProperties","jsx","nullishCoalescingOperator","nullishCoalescingOperator","optionalChaining","optionalCatchBinding","optionalCatchBinding","classProperties","classPrivateProperties","classPrivateMethods","classProperties","classPrivateProperties","asyncGenerators","asyncGenerators","objectRestSpread","logicalAssignment"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"allowUndeclaredExports":true,"strictMode":false},"caller":{"name":"meteor","arch":"web.browser.legacy"},"sourceFileName":"imports/client/@rocket.chat/apps-engine/definition/uikit/blocks/BlockBuilder.js","filename":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat/imports/client/@rocket.chat/apps-engine/definition/uikit/blocks/BlockBuilder.js","targets":{"android":"95.0.0","chrome":"95.0.0","edge":"95.0.0","firefox":"78.0.0","ie":"10.0.0","ios":"15.0.0","opera":"81.0.0","safari":"15.1.0","samsung":"14.0.0"},"cloneInputAst":true,"browserslistConfigFile":false,"passPerPreset":false,"envName":"development","cwd":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat","root":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat","rootMode":"root","plugins":[{"key":"base$0","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0","visitor":{"Program":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true},"options":{"avoidModernSyntax":true,"enforceStrictMode":false,"dynamicImport":true}},{"key":"transform-runtime","visitor":{"MemberExpression":{"enter":[null]},"ObjectPattern":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":{},"_verified":{},"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]}},"options":{"version":"7.16.5","helpers":true,"useESModules":false,"corejs":false}},{"key":"proposal-class-properties","visitor":{"PrivateName":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{"loose":true}},{"key":"base$0$3","visitor":{"FunctionExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$4","visitor":{"ForInStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-react-jsx","visitor":{"_exploded":{},"_verified":{},"JSXNamespacedName":{"enter":[null]},"JSXSpreadChild":{"enter":[null]},"Program":{"enter":[null]},"JSXElement":{"exit":[null]},"JSXFragment":{"exit":[null]},"JSXAttribute":{"enter":[null]}},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","runtime":"classic","throwIfNamespace":true,"useBuiltIns":false}},{"key":"transform-react-display-name","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-react-pure-annotations","visitor":{"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"syntax-nullish-coalescing-operator","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-nullish-coalescing-operator","visitor":{"_exploded":{},"_verified":{},"LogicalExpression":{"enter":[null]}},"options":{}},{"key":"syntax-optional-chaining","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-optional-chaining","visitor":{"_exploded":true,"OptionalCallExpression":{"enter":[null]},"OptionalMemberExpression":{"enter":[null]},"_verified":true},"options":{}},{"key":"syntax-optional-catch-binding","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-optional-catch-binding","visitor":{"_exploded":{},"_verified":{},"CatchClause":{"enter":[null]}},"options":{}},{"key":"syntax-class-properties","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-class-properties","visitor":{"PrivateName":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{}},{"key":"syntax-async-generators","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-async-generator-functions","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]}},"options":{}},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-object-rest-spread","visitor":{"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"proposal-logical-assignment-operators","visitor":{"_exploded":{},"_verified":{},"AssignmentExpression":{"enter":[null]}},"options":{}},{"key":"transform-arrow-functions","visitor":{"ArrowFunctionExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-block-scoped-functions","visitor":{"BlockStatement":{"enter":[null]},"SwitchCase":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-block-scoping","visitor":{"VariableDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"_exploded":true,"BlockStatement":{"enter":[null]},"SwitchStatement":{"enter":[null]},"Program":{"enter":[null]},"_verified":true,"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"transform-classes","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-computed-properties","visitor":{"ObjectExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-destructuring","visitor":{"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"VariableDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"transform-for-of","visitor":{"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-literals","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-object-super","visitor":{"ObjectExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-parameters","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{}},{"key":"transform-shorthand-properties","visitor":{"ObjectMethod":{"enter":[null]},"ObjectProperty":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-spread","visitor":{"ArrayExpression":{"enter":[null]},"CallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-sticky-regex","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-template-literals","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-typeof-symbol","visitor":{"UnaryExpression":{"enter":[null]},"_exploded":true,"_verified":true,"BlockStatement":{"enter":[null]},"CatchClause":{"enter":[null]},"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"Program":{"enter":[null]},"ObjectMethod":{"enter":[null]},"SwitchStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ForOfStatement":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"StaticBlock":{"enter":[null]},"TSModuleBlock":{"enter":[null]},"AssignmentPattern":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectPattern":{"enter":[null]}},"options":{}},{"key":"transform-unicode-regex","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-property-literals","visitor":{"ObjectProperty":{"exit":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-exponentiation-operator","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"regenerator-transform","visitor":{"_exploded":true,"_verified":true,"ObjectMethod":{"enter":[null],"exit":[null]},"ClassMethod":{"enter":[null],"exit":[null]},"ClassPrivateMethod":{"enter":[null],"exit":[null]},"FunctionDeclaration":{"exit":[null]},"FunctionExpression":{"exit":[null]},"ArrowFunctionExpression":{"exit":[null]}},"options":{}}],"presets":[],"generatorOpts":{"filename":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat/imports/client/@rocket.chat/apps-engine/definition/uikit/blocks/BlockBuilder.js","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"imports/client/@rocket.chat/apps-engine/definition/uikit/blocks/BlockBuilder.js"}},"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.BlockBuilder = void 0;\n\nvar uuid = require(\"uuid/v1\");\n\nvar Blocks_1 = require(\"./Blocks\");\n\nvar Elements_1 = require(\"./Elements\");\n\nvar Objects_1 = require(\"./Objects\");\n\nvar BlockBuilder = /*#__PURE__*/function () {\n  function BlockBuilder(appId) {\n    this.appId = appId;\n    this.blocks = [];\n  }\n\n  var _proto = BlockBuilder.prototype;\n\n  _proto.addSectionBlock = function () {\n    function addSectionBlock(block) {\n      this.addBlock(Object.assign({\n        type: Blocks_1.BlockType.SECTION\n      }, block));\n      return this;\n    }\n\n    return addSectionBlock;\n  }();\n\n  _proto.addImageBlock = function () {\n    function addImageBlock(block) {\n      this.addBlock(Object.assign({\n        type: Blocks_1.BlockType.IMAGE\n      }, block));\n      return this;\n    }\n\n    return addImageBlock;\n  }();\n\n  _proto.addDividerBlock = function () {\n    function addDividerBlock() {\n      this.addBlock({\n        type: Blocks_1.BlockType.DIVIDER\n      });\n      return this;\n    }\n\n    return addDividerBlock;\n  }();\n\n  _proto.addActionsBlock = function () {\n    function addActionsBlock(block) {\n      this.addBlock(Object.assign({\n        type: Blocks_1.BlockType.ACTIONS\n      }, block));\n      return this;\n    }\n\n    return addActionsBlock;\n  }();\n\n  _proto.addContextBlock = function () {\n    function addContextBlock(block) {\n      this.addBlock(Object.assign({\n        type: Blocks_1.BlockType.CONTEXT\n      }, block));\n      return this;\n    }\n\n    return addContextBlock;\n  }();\n\n  _proto.addInputBlock = function () {\n    function addInputBlock(block) {\n      this.addBlock(Object.assign({\n        type: Blocks_1.BlockType.INPUT\n      }, block));\n      return this;\n    }\n\n    return addInputBlock;\n  }();\n\n  _proto.addConditionalBlock = function () {\n    function addConditionalBlock(innerBlocks, condition) {\n      var render = innerBlocks instanceof BlockBuilder ? innerBlocks.getBlocks() : innerBlocks;\n      this.addBlock({\n        type: Blocks_1.BlockType.CONDITIONAL,\n        render: render,\n        when: condition\n      });\n      return this;\n    }\n\n    return addConditionalBlock;\n  }();\n\n  _proto.getBlocks = function () {\n    function getBlocks() {\n      return this.blocks;\n    }\n\n    return getBlocks;\n  }();\n\n  _proto.newPlainTextObject = function () {\n    function newPlainTextObject(text) {\n      var emoji = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      return {\n        type: Objects_1.TextObjectType.PLAINTEXT,\n        text: text,\n        emoji: emoji\n      };\n    }\n\n    return newPlainTextObject;\n  }();\n\n  _proto.newMarkdownTextObject = function () {\n    function newMarkdownTextObject(text) {\n      return {\n        type: Objects_1.TextObjectType.MARKDOWN,\n        text: text\n      };\n    }\n\n    return newMarkdownTextObject;\n  }();\n\n  _proto.newButtonElement = function () {\n    function newButtonElement(info) {\n      return this.newInteractiveElement(Object.assign({\n        type: Elements_1.BlockElementType.BUTTON\n      }, info));\n    }\n\n    return newButtonElement;\n  }();\n\n  _proto.newImageElement = function () {\n    function newImageElement(info) {\n      return Object.assign({\n        type: Elements_1.BlockElementType.IMAGE\n      }, info);\n    }\n\n    return newImageElement;\n  }();\n\n  _proto.newOverflowMenuElement = function () {\n    function newOverflowMenuElement(info) {\n      return this.newInteractiveElement(Object.assign({\n        type: Elements_1.BlockElementType.OVERFLOW_MENU\n      }, info));\n    }\n\n    return newOverflowMenuElement;\n  }();\n\n  _proto.newPlainTextInputElement = function () {\n    function newPlainTextInputElement(info) {\n      return this.newInputElement(Object.assign({\n        type: Elements_1.BlockElementType.PLAIN_TEXT_INPUT\n      }, info));\n    }\n\n    return newPlainTextInputElement;\n  }();\n\n  _proto.newStaticSelectElement = function () {\n    function newStaticSelectElement(info) {\n      return this.newSelectElement(Object.assign({\n        type: Elements_1.BlockElementType.STATIC_SELECT\n      }, info));\n    }\n\n    return newStaticSelectElement;\n  }();\n\n  _proto.newMultiStaticElement = function () {\n    function newMultiStaticElement(info) {\n      return this.newSelectElement(Object.assign({\n        type: Elements_1.BlockElementType.MULTI_STATIC_SELECT\n      }, info));\n    }\n\n    return newMultiStaticElement;\n  }();\n\n  _proto.newInteractiveElement = function () {\n    function newInteractiveElement(element) {\n      if (!element.actionId) {\n        element.actionId = this.generateActionId();\n      }\n\n      return element;\n    }\n\n    return newInteractiveElement;\n  }();\n\n  _proto.newInputElement = function () {\n    function newInputElement(element) {\n      if (!element.actionId) {\n        element.actionId = this.generateActionId();\n      }\n\n      return element;\n    }\n\n    return newInputElement;\n  }();\n\n  _proto.newSelectElement = function () {\n    function newSelectElement(element) {\n      if (!element.actionId) {\n        element.actionId = this.generateActionId();\n      }\n\n      return element;\n    }\n\n    return newSelectElement;\n  }();\n\n  _proto.addBlock = function () {\n    function addBlock(block) {\n      if (!block.blockId) {\n        block.blockId = this.generateBlockId();\n      }\n\n      block.appId = this.appId;\n      this.blocks.push(block);\n    }\n\n    return addBlock;\n  }();\n\n  _proto.generateBlockId = function () {\n    function generateBlockId() {\n      return uuid();\n    }\n\n    return generateBlockId;\n  }();\n\n  _proto.generateActionId = function () {\n    function generateActionId() {\n      return uuid();\n    }\n\n    return generateActionId;\n  }();\n\n  return BlockBuilder;\n}();\n\nexports.BlockBuilder = BlockBuilder;","map":{"version":3,"sources":["src/definition/uikit/blocks/BlockBuilder.ts"],"names":[],"mappings":"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","sourcesContent":["import * as uuid from 'uuid/v1';\nimport { Omit } from '../../../lib/utils';\nimport { BlockType, IActionsBlock, IBlock, IConditionalBlock, IConditionalBlockFilters, IContextBlock, IImageBlock, IInputBlock, ISectionBlock } from './Blocks';\nimport {\n    BlockElementType,\n    IBlockElement,\n    IButtonElement,\n    IImageElement,\n    IInputElement,\n    IInteractiveElement,\n    IMultiStaticSelectElement,\n    IOverflowMenuElement,\n    IPlainTextInputElement,\n    ISelectElement,\n    IStaticSelectElement,\n} from './Elements';\nimport { ITextObject, TextObjectType } from './Objects';\n\ntype BlockFunctionParameter<T extends IBlock> = Omit<T, 'type'>;\ntype ElementFunctionParameter<T extends IBlockElement> = T extends IInteractiveElement\n    ? Omit<T, 'type' | 'actionId'> | Partial<Pick<T, 'actionId'>> : Omit<T, 'type'>;\n\ntype SectionBlockParam = BlockFunctionParameter<ISectionBlock>;\ntype ImageBlockParam = BlockFunctionParameter<IImageBlock>;\ntype ActionsBlockParam = BlockFunctionParameter<IActionsBlock>;\ntype ContextBlockParam = BlockFunctionParameter<IContextBlock>;\ntype InputBlockParam = BlockFunctionParameter<IInputBlock>;\n\ntype ButtonElementParam = ElementFunctionParameter<IButtonElement>;\ntype ImageElementParam = ElementFunctionParameter<IImageElement>;\ntype OverflowMenuElementParam = ElementFunctionParameter<IOverflowMenuElement>;\ntype PlainTextInputElementParam = ElementFunctionParameter<IPlainTextInputElement>;\ntype StaticSelectElementParam = ElementFunctionParameter<IStaticSelectElement>;\ntype MultiStaticSelectElementParam = ElementFunctionParameter<IMultiStaticSelectElement>;\n\nexport class BlockBuilder {\n    private readonly blocks: Array<IBlock>;\n\n    constructor(private readonly appId: string) {\n        this.blocks = [];\n    }\n\n    public addSectionBlock(block: SectionBlockParam): BlockBuilder {\n        this.addBlock({ type: BlockType.SECTION, ...block } as ISectionBlock);\n\n        return this;\n    }\n\n    public addImageBlock(block: ImageBlockParam): BlockBuilder {\n        this.addBlock({ type: BlockType.IMAGE, ...block } as IImageBlock);\n\n        return this;\n    }\n\n    public addDividerBlock(): BlockBuilder {\n        this.addBlock({ type: BlockType.DIVIDER });\n\n        return this;\n    }\n\n    public addActionsBlock(block: ActionsBlockParam): BlockBuilder {\n        this.addBlock({ type: BlockType.ACTIONS, ...block } as IActionsBlock);\n\n        return this;\n    }\n\n    public addContextBlock(block: ContextBlockParam): BlockBuilder {\n        this.addBlock({ type: BlockType.CONTEXT, ...block } as IContextBlock);\n\n        return this;\n    }\n\n    public addInputBlock(block: InputBlockParam): BlockBuilder {\n        this.addBlock({ type: BlockType.INPUT, ...block } as IInputBlock);\n\n        return this;\n    }\n\n    public addConditionalBlock(innerBlocks: BlockBuilder | Array<IBlock>, condition?: IConditionalBlockFilters): BlockBuilder {\n        const render = innerBlocks instanceof BlockBuilder ? innerBlocks.getBlocks() : innerBlocks;\n\n        this.addBlock({ type: BlockType.CONDITIONAL, render, when: condition } as IConditionalBlock);\n\n        return this;\n    }\n\n    public getBlocks() {\n        return this.blocks;\n    }\n\n    public newPlainTextObject(text: string, emoji: boolean = false): ITextObject {\n        return {\n            type: TextObjectType.PLAINTEXT,\n            text,\n            emoji,\n        };\n    }\n\n    public newMarkdownTextObject(text: string): ITextObject {\n        return {\n            type: TextObjectType.MARKDOWN,\n            text,\n        };\n    }\n\n    public newButtonElement(info: ButtonElementParam): IButtonElement {\n        return this.newInteractiveElement({\n            type: BlockElementType.BUTTON,\n            ...info,\n        } as IButtonElement);\n    }\n\n    public newImageElement(info: ImageElementParam): IImageElement {\n        return {\n            type: BlockElementType.IMAGE,\n            ...info,\n       };\n    }\n\n    public newOverflowMenuElement(info: OverflowMenuElementParam): IOverflowMenuElement {\n        return this.newInteractiveElement({\n            type: BlockElementType.OVERFLOW_MENU,\n            ...info,\n        } as IOverflowMenuElement);\n    }\n\n    public newPlainTextInputElement(info: PlainTextInputElementParam): IPlainTextInputElement {\n        return this.newInputElement({\n            type: BlockElementType.PLAIN_TEXT_INPUT,\n            ...info,\n        } as IPlainTextInputElement);\n    }\n\n    public newStaticSelectElement(info: StaticSelectElementParam): IStaticSelectElement {\n        return this.newSelectElement({\n            type: BlockElementType.STATIC_SELECT,\n            ...info,\n        } as IStaticSelectElement);\n    }\n\n    public newMultiStaticElement(info: MultiStaticSelectElementParam): IMultiStaticSelectElement {\n        return this.newSelectElement({\n            type: BlockElementType.MULTI_STATIC_SELECT,\n            ...info,\n        } as IMultiStaticSelectElement);\n    }\n\n    private newInteractiveElement<T extends IInteractiveElement>(element: T): T {\n        if (!element.actionId) {\n            element.actionId = this.generateActionId();\n        }\n\n        return element;\n    }\n\n    private newInputElement<T extends IInputElement>(element: T): T {\n        if (!element.actionId) {\n            element.actionId = this.generateActionId();\n        }\n\n        return element;\n    }\n\n    private newSelectElement<T extends ISelectElement>(element: T): T {\n        if (!element.actionId) {\n            element.actionId = this.generateActionId();\n        }\n\n        return element;\n    }\n\n    private addBlock(block: IBlock): void {\n        if (!block.blockId) {\n            block.blockId = this.generateBlockId();\n        }\n\n        block.appId = this.appId;\n\n        this.blocks.push(block);\n    }\n\n    private generateBlockId(): string {\n        return uuid();\n    }\n\n    private generateActionId(): string {\n        return uuid();\n    }\n}\n"]},"sourceType":"module","hash":"6d8b4e5663f2d783f668a1ee48f3ee2255a2818c"}
