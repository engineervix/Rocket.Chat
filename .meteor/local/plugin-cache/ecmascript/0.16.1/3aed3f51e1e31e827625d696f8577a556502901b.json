{"metadata":{},"options":{"assumptions":{},"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat/app/ui-utils/client/lib/AccountBox.js","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","classProperties","classPrivateProperties","jsx","nullishCoalescingOperator","nullishCoalescingOperator","optionalChaining","optionalCatchBinding","optionalCatchBinding","classProperties","classPrivateProperties","classPrivateMethods","classProperties","classPrivateProperties","asyncGenerators","asyncGenerators","objectRestSpread","logicalAssignment"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"allowUndeclaredExports":true,"strictMode":false},"caller":{"name":"meteor","arch":"web.browser"},"sourceFileName":"app/ui-utils/client/lib/AccountBox.js","filename":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat/app/ui-utils/client/lib/AccountBox.js","targets":{"android":"95.0.0","chrome":"95.0.0","edge":"95.0.0","firefox":"78.0.0","ie":"10.0.0","ios":"15.0.0","opera":"81.0.0","safari":"15.1.0","samsung":"14.0.0"},"cloneInputAst":true,"browserslistConfigFile":false,"passPerPreset":false,"envName":"development","cwd":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat","root":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat","rootMode":"root","plugins":[{"key":"base$0","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0","visitor":{"Program":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true},"options":{"avoidModernSyntax":false,"enforceStrictMode":false,"dynamicImport":true,"generateLetDeclarations":true}},{"key":"transform-runtime","visitor":{"MemberExpression":{"enter":[null]},"ObjectPattern":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":{},"_verified":{},"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]}},"options":{"version":"7.16.5","helpers":true,"useESModules":false,"corejs":false}},{"key":"proposal-class-properties","visitor":{"PrivateName":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{"loose":true}},{"key":"transform-react-jsx","visitor":{"_exploded":{},"_verified":{},"JSXNamespacedName":{"enter":[null]},"JSXSpreadChild":{"enter":[null]},"Program":{"enter":[null]},"JSXElement":{"exit":[null]},"JSXFragment":{"exit":[null]},"JSXAttribute":{"enter":[null]}},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","runtime":"classic","throwIfNamespace":true,"useBuiltIns":false}},{"key":"transform-react-display-name","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-react-pure-annotations","visitor":{"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"syntax-nullish-coalescing-operator","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-nullish-coalescing-operator","visitor":{"_exploded":{},"_verified":{},"LogicalExpression":{"enter":[null]}},"options":{}},{"key":"syntax-optional-chaining","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-optional-chaining","visitor":{"_exploded":true,"OptionalCallExpression":{"enter":[null]},"OptionalMemberExpression":{"enter":[null]},"_verified":true},"options":{}},{"key":"syntax-optional-catch-binding","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-optional-catch-binding","visitor":{"_exploded":{},"_verified":{},"CatchClause":{"enter":[null]}},"options":{}},{"key":"syntax-class-properties","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-class-properties","visitor":{"PrivateName":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{}},{"key":"syntax-async-generators","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-async-generator-functions","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]}},"options":{}},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-object-rest-spread","visitor":{"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"proposal-logical-assignment-operators","visitor":{"_exploded":{},"_verified":{},"AssignmentExpression":{"enter":[null]}},"options":{}},{"key":"transform-literals","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-template-literals","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-parameters","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{}},{"key":"transform-exponentiation-operator","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}}],"presets":[],"generatorOpts":{"filename":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat/app/ui-utils/client/lib/AccountBox.js","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"app/ui-utils/client/lib/AccountBox.js"}},"code":"module.export({\n  AccountBox: () => AccountBox\n});\nlet Meteor;\nmodule.link(\"meteor/meteor\", {\n  Meteor(v) {\n    Meteor = v;\n  }\n\n}, 0);\nlet ReactiveVar;\nmodule.link(\"meteor/reactive-var\", {\n  ReactiveVar(v) {\n    ReactiveVar = v;\n  }\n\n}, 1);\nlet Tracker;\nmodule.link(\"meteor/tracker\", {\n  Tracker(v) {\n    Tracker = v;\n  }\n\n}, 2);\nlet FlowRouter;\nmodule.link(\"meteor/kadira:flow-router\", {\n  FlowRouter(v) {\n    FlowRouter = v;\n  }\n\n}, 3);\nlet Session;\nmodule.link(\"meteor/session\", {\n  Session(v) {\n    Session = v;\n  }\n\n}, 4);\n\nlet _;\n\nmodule.link(\"underscore\", {\n  default(v) {\n    _ = v;\n  }\n\n}, 5);\nlet appLayout;\nmodule.link(\"../../../../client/lib/appLayout\", {\n  appLayout(v) {\n    appLayout = v;\n  }\n\n}, 6);\nlet SideNav;\nmodule.link(\"./SideNav\", {\n  SideNav(v) {\n    SideNav = v;\n  }\n\n}, 7);\n\nconst AccountBox = function () {\n  let status = 0;\n  const items = new ReactiveVar([]);\n\n  function setStatus(status, statusText) {\n    return Meteor.call('setUserStatus', status, statusText);\n  }\n\n  function open() {\n    if (SideNav.flexStatus()) {\n      SideNav.closeFlex();\n      return;\n    }\n\n    status = 1;\n  }\n\n  function close() {\n    status = 0;\n  }\n\n  function toggle() {\n    if (status) {\n      return close();\n    }\n\n    return open();\n  }\n\n  function openFlex() {\n    status = 0;\n  }\n  /*\n   * @param newOption:\n   *   name: Button label\n   *   icon: Button icon\n   *   class: Class of the item\n   *   permissions: Which permissions a user should have (all of them) to see this item\n   */\n\n\n  function addItem(newItem) {\n    return Tracker.nonreactive(function () {\n      const actual = items.get();\n      actual.push(newItem);\n      return items.set(actual);\n    });\n  }\n\n  function checkCondition(item) {\n    return item.condition == null || item.condition();\n  }\n\n  function getItems() {\n    return _.filter(items.get(), function (item) {\n      if (checkCondition(item)) {\n        return true;\n      }\n    });\n  }\n\n  function addRoute(newRoute, router) {\n    let wait = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : () => {};\n\n    if (router == null) {\n      router = FlowRouter;\n    }\n\n    const container = newRoute.customContainer ? 'pageCustomContainer' : 'pageContainer';\n    const routeConfig = {\n      center: container,\n      pageTemplate: newRoute.pageTemplate\n    };\n\n    if (newRoute.i18nPageTitle != null) {\n      routeConfig.i18nPageTitle = newRoute.i18nPageTitle;\n    }\n\n    if (newRoute.pageTitle != null) {\n      routeConfig.pageTitle = newRoute.pageTitle;\n    }\n\n    return router.route(newRoute.path, {\n      name: newRoute.name,\n\n      async action() {\n        await wait();\n        Session.set('openedRoom');\n        appLayout.renderMainLayout(routeConfig);\n      },\n\n      triggersEnter: [function () {\n        if (newRoute.sideNav != null) {\n          SideNav.setFlex(newRoute.sideNav);\n          SideNav.openFlex();\n        }\n      }]\n    });\n  }\n\n  return {\n    setStatus,\n    toggle,\n    open,\n    close,\n    openFlex,\n    addRoute,\n    addItem,\n    getItems\n  };\n}();","map":{"version":3,"sources":["app/ui-utils/client/lib/AccountBox.js"],"names":["module","export","AccountBox","Meteor","link","v","ReactiveVar","Tracker","FlowRouter","Session","_","default","appLayout","SideNav","status","items","setStatus","statusText","call","open","flexStatus","closeFlex","close","toggle","openFlex","addItem","newItem","nonreactive","actual","get","push","set","checkCondition","item","condition","getItems","filter","addRoute","newRoute","router","wait","container","customContainer","routeConfig","center","pageTemplate","i18nPageTitle","pageTitle","route","path","name","action","renderMainLayout","triggersEnter","sideNav","setFlex"],"mappings":"AAAAA,MAAM,CAACC,MAAP,CAAc;AAACC,EAAAA,UAAU,EAAC,MAAIA;AAAhB,CAAd;AAA2C,IAAIC,MAAJ;AAAWH,MAAM,CAACI,IAAP,CAAY,eAAZ,EAA4B;AAACD,EAAAA,MAAM,CAACE,CAAD,EAAG;AAACF,IAAAA,MAAM,GAACE,CAAP;AAAS;;AAApB,CAA5B,EAAkD,CAAlD;AAAqD,IAAIC,WAAJ;AAAgBN,MAAM,CAACI,IAAP,CAAY,qBAAZ,EAAkC;AAACE,EAAAA,WAAW,CAACD,CAAD,EAAG;AAACC,IAAAA,WAAW,GAACD,CAAZ;AAAc;;AAA9B,CAAlC,EAAkE,CAAlE;AAAqE,IAAIE,OAAJ;AAAYP,MAAM,CAACI,IAAP,CAAY,gBAAZ,EAA6B;AAACG,EAAAA,OAAO,CAACF,CAAD,EAAG;AAACE,IAAAA,OAAO,GAACF,CAAR;AAAU;;AAAtB,CAA7B,EAAqD,CAArD;AAAwD,IAAIG,UAAJ;AAAeR,MAAM,CAACI,IAAP,CAAY,2BAAZ,EAAwC;AAACI,EAAAA,UAAU,CAACH,CAAD,EAAG;AAACG,IAAAA,UAAU,GAACH,CAAX;AAAa;;AAA5B,CAAxC,EAAsE,CAAtE;AAAyE,IAAII,OAAJ;AAAYT,MAAM,CAACI,IAAP,CAAY,gBAAZ,EAA6B;AAACK,EAAAA,OAAO,CAACJ,CAAD,EAAG;AAACI,IAAAA,OAAO,GAACJ,CAAR;AAAU;;AAAtB,CAA7B,EAAqD,CAArD;;AAAwD,IAAIK,CAAJ;;AAAMV,MAAM,CAACI,IAAP,CAAY,YAAZ,EAAyB;AAACO,EAAAA,OAAO,CAACN,CAAD,EAAG;AAACK,IAAAA,CAAC,GAACL,CAAF;AAAI;;AAAhB,CAAzB,EAA2C,CAA3C;AAA8C,IAAIO,SAAJ;AAAcZ,MAAM,CAACI,IAAP,CAAY,kCAAZ,EAA+C;AAACQ,EAAAA,SAAS,CAACP,CAAD,EAAG;AAACO,IAAAA,SAAS,GAACP,CAAV;AAAY;;AAA1B,CAA/C,EAA2E,CAA3E;AAA8E,IAAIQ,OAAJ;AAAYb,MAAM,CAACI,IAAP,CAAY,WAAZ,EAAwB;AAACS,EAAAA,OAAO,CAACR,CAAD,EAAG;AAACQ,IAAAA,OAAO,GAACR,CAAR;AAAU;;AAAtB,CAAxB,EAAgD,CAAhD;;AAUrjB,MAAMH,UAAU,GAAI,YAAY;AACtC,MAAIY,MAAM,GAAG,CAAb;AACA,QAAMC,KAAK,GAAG,IAAIT,WAAJ,CAAgB,EAAhB,CAAd;;AACA,WAASU,SAAT,CAAmBF,MAAnB,EAA2BG,UAA3B,EAAuC;AACtC,WAAOd,MAAM,CAACe,IAAP,CAAY,eAAZ,EAA6BJ,MAA7B,EAAqCG,UAArC,CAAP;AACA;;AACD,WAASE,IAAT,GAAgB;AACf,QAAIN,OAAO,CAACO,UAAR,EAAJ,EAA0B;AACzBP,MAAAA,OAAO,CAACQ,SAAR;AACA;AACA;;AACDP,IAAAA,MAAM,GAAG,CAAT;AACA;;AACD,WAASQ,KAAT,GAAiB;AAChBR,IAAAA,MAAM,GAAG,CAAT;AACA;;AACD,WAASS,MAAT,GAAkB;AACjB,QAAIT,MAAJ,EAAY;AACX,aAAOQ,KAAK,EAAZ;AACA;;AACD,WAAOH,IAAI,EAAX;AACA;;AACD,WAASK,QAAT,GAAoB;AACnBV,IAAAA,MAAM,GAAG,CAAT;AACA;AAED;AACD;AACA;AACA;AACA;AACA;AACA;;;AACC,WAASW,OAAT,CAAiBC,OAAjB,EAA0B;AACzB,WAAOnB,OAAO,CAACoB,WAAR,CAAoB,YAAY;AACtC,YAAMC,MAAM,GAAGb,KAAK,CAACc,GAAN,EAAf;AACAD,MAAAA,MAAM,CAACE,IAAP,CAAYJ,OAAZ;AACA,aAAOX,KAAK,CAACgB,GAAN,CAAUH,MAAV,CAAP;AACA,KAJM,CAAP;AAKA;;AACD,WAASI,cAAT,CAAwBC,IAAxB,EAA8B;AAC7B,WAAOA,IAAI,CAACC,SAAL,IAAkB,IAAlB,IAA0BD,IAAI,CAACC,SAAL,EAAjC;AACA;;AACD,WAASC,QAAT,GAAoB;AACnB,WAAOzB,CAAC,CAAC0B,MAAF,CAASrB,KAAK,CAACc,GAAN,EAAT,EAAsB,UAAUI,IAAV,EAAgB;AAC5C,UAAID,cAAc,CAACC,IAAD,CAAlB,EAA0B;AACzB,eAAO,IAAP;AACA;AACD,KAJM,CAAP;AAKA;;AACD,WAASI,QAAT,CAAkBC,QAAlB,EAA4BC,MAA5B,EAAqD;AAAA,QAAjBC,IAAiB,uEAAV,MAAM,CAAE,CAAE;;AACpD,QAAID,MAAM,IAAI,IAAd,EAAoB;AACnBA,MAAAA,MAAM,GAAG/B,UAAT;AACA;;AACD,UAAMiC,SAAS,GAAGH,QAAQ,CAACI,eAAT,GAA2B,qBAA3B,GAAmD,eAArE;AACA,UAAMC,WAAW,GAAG;AACnBC,MAAAA,MAAM,EAAEH,SADW;AAEnBI,MAAAA,YAAY,EAAEP,QAAQ,CAACO;AAFJ,KAApB;;AAIA,QAAIP,QAAQ,CAACQ,aAAT,IAA0B,IAA9B,EAAoC;AACnCH,MAAAA,WAAW,CAACG,aAAZ,GAA4BR,QAAQ,CAACQ,aAArC;AACA;;AACD,QAAIR,QAAQ,CAACS,SAAT,IAAsB,IAA1B,EAAgC;AAC/BJ,MAAAA,WAAW,CAACI,SAAZ,GAAwBT,QAAQ,CAACS,SAAjC;AACA;;AACD,WAAOR,MAAM,CAACS,KAAP,CAAaV,QAAQ,CAACW,IAAtB,EAA4B;AAClCC,MAAAA,IAAI,EAAEZ,QAAQ,CAACY,IADmB;;AAElC,YAAMC,MAAN,GAAe;AACd,cAAMX,IAAI,EAAV;AACA/B,QAAAA,OAAO,CAACsB,GAAR,CAAY,YAAZ;AACAnB,QAAAA,SAAS,CAACwC,gBAAV,CAA2BT,WAA3B;AACA,OANiC;;AAOlCU,MAAAA,aAAa,EAAE,CACd,YAAY;AACX,YAAIf,QAAQ,CAACgB,OAAT,IAAoB,IAAxB,EAA8B;AAC7BzC,UAAAA,OAAO,CAAC0C,OAAR,CAAgBjB,QAAQ,CAACgB,OAAzB;AACAzC,UAAAA,OAAO,CAACW,QAAR;AACA;AACD,OANa;AAPmB,KAA5B,CAAP;AAgBA;;AACD,SAAO;AACNR,IAAAA,SADM;AAENO,IAAAA,MAFM;AAGNJ,IAAAA,IAHM;AAING,IAAAA,KAJM;AAKNE,IAAAA,QALM;AAMNa,IAAAA,QANM;AAONZ,IAAAA,OAPM;AAQNU,IAAAA;AARM,GAAP;AAUA,CA5FyB,EAAnB","sourcesContent":["import { Meteor } from 'meteor/meteor';\nimport { ReactiveVar } from 'meteor/reactive-var';\nimport { Tracker } from 'meteor/tracker';\nimport { FlowRouter } from 'meteor/kadira:flow-router';\nimport { Session } from 'meteor/session';\nimport _ from 'underscore';\n\nimport { appLayout } from '../../../../client/lib/appLayout';\nimport { SideNav } from './SideNav';\n\nexport const AccountBox = (function () {\n\tlet status = 0;\n\tconst items = new ReactiveVar([]);\n\tfunction setStatus(status, statusText) {\n\t\treturn Meteor.call('setUserStatus', status, statusText);\n\t}\n\tfunction open() {\n\t\tif (SideNav.flexStatus()) {\n\t\t\tSideNav.closeFlex();\n\t\t\treturn;\n\t\t}\n\t\tstatus = 1;\n\t}\n\tfunction close() {\n\t\tstatus = 0;\n\t}\n\tfunction toggle() {\n\t\tif (status) {\n\t\t\treturn close();\n\t\t}\n\t\treturn open();\n\t}\n\tfunction openFlex() {\n\t\tstatus = 0;\n\t}\n\n\t/*\n\t * @param newOption:\n\t *   name: Button label\n\t *   icon: Button icon\n\t *   class: Class of the item\n\t *   permissions: Which permissions a user should have (all of them) to see this item\n\t */\n\tfunction addItem(newItem) {\n\t\treturn Tracker.nonreactive(function () {\n\t\t\tconst actual = items.get();\n\t\t\tactual.push(newItem);\n\t\t\treturn items.set(actual);\n\t\t});\n\t}\n\tfunction checkCondition(item) {\n\t\treturn item.condition == null || item.condition();\n\t}\n\tfunction getItems() {\n\t\treturn _.filter(items.get(), function (item) {\n\t\t\tif (checkCondition(item)) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t});\n\t}\n\tfunction addRoute(newRoute, router, wait = () => {}) {\n\t\tif (router == null) {\n\t\t\trouter = FlowRouter;\n\t\t}\n\t\tconst container = newRoute.customContainer ? 'pageCustomContainer' : 'pageContainer';\n\t\tconst routeConfig = {\n\t\t\tcenter: container,\n\t\t\tpageTemplate: newRoute.pageTemplate,\n\t\t};\n\t\tif (newRoute.i18nPageTitle != null) {\n\t\t\trouteConfig.i18nPageTitle = newRoute.i18nPageTitle;\n\t\t}\n\t\tif (newRoute.pageTitle != null) {\n\t\t\trouteConfig.pageTitle = newRoute.pageTitle;\n\t\t}\n\t\treturn router.route(newRoute.path, {\n\t\t\tname: newRoute.name,\n\t\t\tasync action() {\n\t\t\t\tawait wait();\n\t\t\t\tSession.set('openedRoom');\n\t\t\t\tappLayout.renderMainLayout(routeConfig);\n\t\t\t},\n\t\t\ttriggersEnter: [\n\t\t\t\tfunction () {\n\t\t\t\t\tif (newRoute.sideNav != null) {\n\t\t\t\t\t\tSideNav.setFlex(newRoute.sideNav);\n\t\t\t\t\t\tSideNav.openFlex();\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t],\n\t\t});\n\t}\n\treturn {\n\t\tsetStatus,\n\t\ttoggle,\n\t\topen,\n\t\tclose,\n\t\topenFlex,\n\t\taddRoute,\n\t\taddItem,\n\t\tgetItems,\n\t};\n})();\n"]},"sourceType":"module","hash":"3aed3f51e1e31e827625d696f8577a556502901b"}
