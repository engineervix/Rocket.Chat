{"metadata":{},"options":{"assumptions":{},"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat/packages/jalik:ufs/ufs-store-permissions.js","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","classProperties","classPrivateProperties","jsx","nullishCoalescingOperator","nullishCoalescingOperator","optionalChaining","optionalCatchBinding","optionalCatchBinding","classProperties","classPrivateProperties","classPrivateMethods","classProperties","classPrivateProperties","asyncGenerators","asyncGenerators","objectRestSpread","logicalAssignment"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"allowUndeclaredExports":true,"strictMode":false},"caller":{"name":"meteor","arch":"web.browser"},"sourceFileName":"packages/jalik:ufs/ufs-store-permissions.js","filename":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat/packages/jalik:ufs/ufs-store-permissions.js","targets":{"android":"95.0.0","chrome":"95.0.0","edge":"95.0.0","firefox":"78.0.0","ie":"10.0.0","ios":"15.0.0","opera":"81.0.0","safari":"15.1.0","samsung":"14.0.0"},"cloneInputAst":true,"browserslistConfigFile":false,"passPerPreset":false,"envName":"development","cwd":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat","root":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat","rootMode":"root","plugins":[{"key":"base$0","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0","visitor":{"Program":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true},"options":{"avoidModernSyntax":false,"enforceStrictMode":false,"dynamicImport":true,"generateLetDeclarations":true}},{"key":"transform-runtime","visitor":{"MemberExpression":{"enter":[null]},"ObjectPattern":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":{},"_verified":{},"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]}},"options":{"version":"7.16.5","helpers":true,"useESModules":false,"corejs":false}},{"key":"proposal-class-properties","visitor":{"PrivateName":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{"loose":true}},{"key":"transform-react-jsx","visitor":{"_exploded":{},"_verified":{},"JSXNamespacedName":{"enter":[null]},"JSXSpreadChild":{"enter":[null]},"Program":{"enter":[null]},"JSXElement":{"exit":[null]},"JSXFragment":{"exit":[null]},"JSXAttribute":{"enter":[null]}},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","runtime":"classic","throwIfNamespace":true,"useBuiltIns":false}},{"key":"transform-react-display-name","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-react-pure-annotations","visitor":{"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"syntax-nullish-coalescing-operator","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-nullish-coalescing-operator","visitor":{"_exploded":{},"_verified":{},"LogicalExpression":{"enter":[null]}},"options":{}},{"key":"syntax-optional-chaining","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-optional-chaining","visitor":{"_exploded":true,"OptionalCallExpression":{"enter":[null]},"OptionalMemberExpression":{"enter":[null]},"_verified":true},"options":{}},{"key":"syntax-optional-catch-binding","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-optional-catch-binding","visitor":{"_exploded":{},"_verified":{},"CatchClause":{"enter":[null]}},"options":{}},{"key":"syntax-class-properties","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-class-properties","visitor":{"PrivateName":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{}},{"key":"syntax-async-generators","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-async-generator-functions","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]}},"options":{}},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-object-rest-spread","visitor":{"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"proposal-logical-assignment-operators","visitor":{"_exploded":{},"_verified":{},"AssignmentExpression":{"enter":[null]}},"options":{}},{"key":"transform-literals","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-template-literals","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-parameters","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{}},{"key":"transform-exponentiation-operator","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}}],"presets":[],"generatorOpts":{"filename":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat/packages/jalik:ufs/ufs-store-permissions.js","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"packages/jalik:ufs/ufs-store-permissions.js"}},"code":"module.export({\n  StorePermissions: () => StorePermissions\n});\n\nlet _;\n\nmodule.link(\"meteor/underscore\", {\n  _(v) {\n    _ = v;\n  }\n\n}, 0);\n\nclass StorePermissions {\n  constructor(options) {\n    // Default options\n    options = _.extend({\n      insert: null,\n      remove: null,\n      update: null\n    }, options); // Check options\n\n    if (options.insert && typeof options.insert !== 'function') {\n      throw new TypeError('StorePermissions: insert is not a function');\n    }\n\n    if (options.remove && typeof options.remove !== 'function') {\n      throw new TypeError('StorePermissions: remove is not a function');\n    }\n\n    if (options.update && typeof options.update !== 'function') {\n      throw new TypeError('StorePermissions: update is not a function');\n    } // Public attributes\n\n\n    this.actions = {\n      insert: options.insert,\n      remove: options.remove,\n      update: options.update\n    };\n  }\n  /**\n   * Checks the permission for the action\n   * @param action\n   * @param userId\n   * @param file\n   * @param fields\n   * @param modifiers\n   * @return {*}\n   */\n\n\n  check(action, userId, file, fields, modifiers) {\n    if (typeof this.actions[action] === 'function') {\n      return this.actions[action](userId, file, fields, modifiers);\n    }\n\n    return true; // by default allow all\n  }\n  /**\n   * Checks the insert permission\n   * @param userId\n   * @param file\n   * @returns {*}\n   */\n\n\n  checkInsert(userId, file) {\n    return this.check('insert', userId, file);\n  }\n  /**\n   * Checks the remove permission\n   * @param userId\n   * @param file\n   * @returns {*}\n   */\n\n\n  checkRemove(userId, file) {\n    return this.check('remove', userId, file);\n  }\n  /**\n   * Checks the update permission\n   * @param userId\n   * @param file\n   * @param fields\n   * @param modifiers\n   * @returns {*}\n   */\n\n\n  checkUpdate(userId, file, fields, modifiers) {\n    return this.check('update', userId, file, fields, modifiers);\n  }\n\n}","map":{"version":3,"sources":["packages/jalik:ufs/ufs-store-permissions.js"],"names":["module","export","StorePermissions","_","link","v","constructor","options","extend","insert","remove","update","TypeError","actions","check","action","userId","file","fields","modifiers","checkInsert","checkRemove","checkUpdate"],"mappings":"AAAAA,MAAM,CAACC,MAAP,CAAc;AAACC,EAAAA,gBAAgB,EAAC,MAAIA;AAAtB,CAAd;;AAAuD,IAAIC,CAAJ;;AAAMH,MAAM,CAACI,IAAP,CAAY,mBAAZ,EAAgC;AAACD,EAAAA,CAAC,CAACE,CAAD,EAAG;AAACF,IAAAA,CAAC,GAACE,CAAF;AAAI;;AAAV,CAAhC,EAA4C,CAA5C;;AA8BtD,MAAMH,gBAAN,CAAuB;AAC7BI,EAAAA,WAAW,CAACC,OAAD,EAAU;AACpB;AACAA,IAAAA,OAAO,GAAGJ,CAAC,CAACK,MAAF,CACT;AACCC,MAAAA,MAAM,EAAE,IADT;AAECC,MAAAA,MAAM,EAAE,IAFT;AAGCC,MAAAA,MAAM,EAAE;AAHT,KADS,EAMTJ,OANS,CAAV,CAFoB,CAWpB;;AACA,QAAIA,OAAO,CAACE,MAAR,IAAkB,OAAOF,OAAO,CAACE,MAAf,KAA0B,UAAhD,EAA4D;AAC3D,YAAM,IAAIG,SAAJ,CAAc,4CAAd,CAAN;AACA;;AACD,QAAIL,OAAO,CAACG,MAAR,IAAkB,OAAOH,OAAO,CAACG,MAAf,KAA0B,UAAhD,EAA4D;AAC3D,YAAM,IAAIE,SAAJ,CAAc,4CAAd,CAAN;AACA;;AACD,QAAIL,OAAO,CAACI,MAAR,IAAkB,OAAOJ,OAAO,CAACI,MAAf,KAA0B,UAAhD,EAA4D;AAC3D,YAAM,IAAIC,SAAJ,CAAc,4CAAd,CAAN;AACA,KApBmB,CAsBpB;;;AACA,SAAKC,OAAL,GAAe;AACdJ,MAAAA,MAAM,EAAEF,OAAO,CAACE,MADF;AAEdC,MAAAA,MAAM,EAAEH,OAAO,CAACG,MAFF;AAGdC,MAAAA,MAAM,EAAEJ,OAAO,CAACI;AAHF,KAAf;AAKA;AAED;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACCG,EAAAA,KAAK,CAACC,MAAD,EAASC,MAAT,EAAiBC,IAAjB,EAAuBC,MAAvB,EAA+BC,SAA/B,EAA0C;AAC9C,QAAI,OAAO,KAAKN,OAAL,CAAaE,MAAb,CAAP,KAAgC,UAApC,EAAgD;AAC/C,aAAO,KAAKF,OAAL,CAAaE,MAAb,EAAqBC,MAArB,EAA6BC,IAA7B,EAAmCC,MAAnC,EAA2CC,SAA3C,CAAP;AACA;;AACD,WAAO,IAAP,CAJ8C,CAIjC;AACb;AAED;AACD;AACA;AACA;AACA;AACA;;;AACCC,EAAAA,WAAW,CAACJ,MAAD,EAASC,IAAT,EAAe;AACzB,WAAO,KAAKH,KAAL,CAAW,QAAX,EAAqBE,MAArB,EAA6BC,IAA7B,CAAP;AACA;AAED;AACD;AACA;AACA;AACA;AACA;;;AACCI,EAAAA,WAAW,CAACL,MAAD,EAASC,IAAT,EAAe;AACzB,WAAO,KAAKH,KAAL,CAAW,QAAX,EAAqBE,MAArB,EAA6BC,IAA7B,CAAP;AACA;AAED;AACD;AACA;AACA;AACA;AACA;AACA;AACA;;;AACCK,EAAAA,WAAW,CAACN,MAAD,EAASC,IAAT,EAAeC,MAAf,EAAuBC,SAAvB,EAAkC;AAC5C,WAAO,KAAKL,KAAL,CAAW,QAAX,EAAqBE,MAArB,EAA6BC,IAA7B,EAAmCC,MAAnC,EAA2CC,SAA3C,CAAP;AACA;;AA7E4B","sourcesContent":["/*\n * The MIT License (MIT)\n *\n * Copyright (c) 2017 Karl STEIN\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n *\n */\n\nimport { _ } from 'meteor/underscore';\n\n/**\n * Store permissions\n */\nexport class StorePermissions {\n\tconstructor(options) {\n\t\t// Default options\n\t\toptions = _.extend(\n\t\t\t{\n\t\t\t\tinsert: null,\n\t\t\t\tremove: null,\n\t\t\t\tupdate: null,\n\t\t\t},\n\t\t\toptions,\n\t\t);\n\n\t\t// Check options\n\t\tif (options.insert && typeof options.insert !== 'function') {\n\t\t\tthrow new TypeError('StorePermissions: insert is not a function');\n\t\t}\n\t\tif (options.remove && typeof options.remove !== 'function') {\n\t\t\tthrow new TypeError('StorePermissions: remove is not a function');\n\t\t}\n\t\tif (options.update && typeof options.update !== 'function') {\n\t\t\tthrow new TypeError('StorePermissions: update is not a function');\n\t\t}\n\n\t\t// Public attributes\n\t\tthis.actions = {\n\t\t\tinsert: options.insert,\n\t\t\tremove: options.remove,\n\t\t\tupdate: options.update,\n\t\t};\n\t}\n\n\t/**\n\t * Checks the permission for the action\n\t * @param action\n\t * @param userId\n\t * @param file\n\t * @param fields\n\t * @param modifiers\n\t * @return {*}\n\t */\n\tcheck(action, userId, file, fields, modifiers) {\n\t\tif (typeof this.actions[action] === 'function') {\n\t\t\treturn this.actions[action](userId, file, fields, modifiers);\n\t\t}\n\t\treturn true; // by default allow all\n\t}\n\n\t/**\n\t * Checks the insert permission\n\t * @param userId\n\t * @param file\n\t * @returns {*}\n\t */\n\tcheckInsert(userId, file) {\n\t\treturn this.check('insert', userId, file);\n\t}\n\n\t/**\n\t * Checks the remove permission\n\t * @param userId\n\t * @param file\n\t * @returns {*}\n\t */\n\tcheckRemove(userId, file) {\n\t\treturn this.check('remove', userId, file);\n\t}\n\n\t/**\n\t * Checks the update permission\n\t * @param userId\n\t * @param file\n\t * @param fields\n\t * @param modifiers\n\t * @returns {*}\n\t */\n\tcheckUpdate(userId, file, fields, modifiers) {\n\t\treturn this.check('update', userId, file, fields, modifiers);\n\t}\n}\n"]},"sourceType":"module","hash":"8f7f6ed7b0c7093142e3271e8a2e9caeb038937a"}
