{"metadata":{},"options":{"assumptions":{},"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat/app/lib/client/views/customFieldsForm.js","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","classProperties","classPrivateProperties","jsx","nullishCoalescingOperator","nullishCoalescingOperator","optionalChaining","optionalCatchBinding","optionalCatchBinding","classProperties","classPrivateProperties","classPrivateMethods","classProperties","classPrivateProperties","asyncGenerators","asyncGenerators","objectRestSpread","logicalAssignment"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"allowUndeclaredExports":true,"strictMode":false},"caller":{"name":"meteor","arch":"web.browser.legacy"},"sourceFileName":"app/lib/client/views/customFieldsForm.js","filename":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat/app/lib/client/views/customFieldsForm.js","targets":{"android":"95.0.0","chrome":"95.0.0","edge":"95.0.0","firefox":"78.0.0","ie":"10.0.0","ios":"15.0.0","opera":"81.0.0","safari":"15.1.0","samsung":"14.0.0"},"cloneInputAst":true,"browserslistConfigFile":false,"passPerPreset":false,"envName":"development","cwd":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat","root":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat","rootMode":"root","plugins":[{"key":"base$0","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0","visitor":{"Program":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true},"options":{"avoidModernSyntax":true,"enforceStrictMode":false,"dynamicImport":true}},{"key":"transform-runtime","visitor":{"MemberExpression":{"enter":[null]},"ObjectPattern":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":{},"_verified":{},"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]}},"options":{"version":"7.16.5","helpers":true,"useESModules":false,"corejs":false}},{"key":"proposal-class-properties","visitor":{"PrivateName":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{"loose":true}},{"key":"base$0$3","visitor":{"FunctionExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$4","visitor":{"ForInStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-react-jsx","visitor":{"_exploded":{},"_verified":{},"JSXNamespacedName":{"enter":[null]},"JSXSpreadChild":{"enter":[null]},"Program":{"enter":[null]},"JSXElement":{"exit":[null]},"JSXFragment":{"exit":[null]},"JSXAttribute":{"enter":[null]}},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","runtime":"classic","throwIfNamespace":true,"useBuiltIns":false}},{"key":"transform-react-display-name","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-react-pure-annotations","visitor":{"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"syntax-nullish-coalescing-operator","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-nullish-coalescing-operator","visitor":{"_exploded":{},"_verified":{},"LogicalExpression":{"enter":[null]}},"options":{}},{"key":"syntax-optional-chaining","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-optional-chaining","visitor":{"_exploded":true,"OptionalCallExpression":{"enter":[null]},"OptionalMemberExpression":{"enter":[null]},"_verified":true},"options":{}},{"key":"syntax-optional-catch-binding","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-optional-catch-binding","visitor":{"_exploded":{},"_verified":{},"CatchClause":{"enter":[null]}},"options":{}},{"key":"syntax-class-properties","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-class-properties","visitor":{"PrivateName":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{}},{"key":"syntax-async-generators","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-async-generator-functions","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]}},"options":{}},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-object-rest-spread","visitor":{"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"proposal-logical-assignment-operators","visitor":{"_exploded":{},"_verified":{},"AssignmentExpression":{"enter":[null]}},"options":{}},{"key":"transform-arrow-functions","visitor":{"ArrowFunctionExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-block-scoped-functions","visitor":{"BlockStatement":{"enter":[null]},"SwitchCase":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-block-scoping","visitor":{"VariableDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"_exploded":true,"BlockStatement":{"enter":[null]},"SwitchStatement":{"enter":[null]},"Program":{"enter":[null]},"_verified":true,"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"transform-classes","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-computed-properties","visitor":{"ObjectExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-destructuring","visitor":{"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"VariableDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"transform-for-of","visitor":{"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-literals","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-object-super","visitor":{"ObjectExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-parameters","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{}},{"key":"transform-shorthand-properties","visitor":{"ObjectMethod":{"enter":[null]},"ObjectProperty":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-spread","visitor":{"ArrayExpression":{"enter":[null]},"CallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-sticky-regex","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-template-literals","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-typeof-symbol","visitor":{"UnaryExpression":{"enter":[null]},"_exploded":true,"_verified":true,"BlockStatement":{"enter":[null]},"CatchClause":{"enter":[null]},"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"Program":{"enter":[null]},"ObjectMethod":{"enter":[null]},"SwitchStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ForOfStatement":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"StaticBlock":{"enter":[null]},"TSModuleBlock":{"enter":[null]},"AssignmentPattern":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectPattern":{"enter":[null]}},"options":{}},{"key":"transform-unicode-regex","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-property-literals","visitor":{"ObjectProperty":{"exit":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-exponentiation-operator","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"regenerator-transform","visitor":{"_exploded":true,"_verified":true,"ObjectMethod":{"enter":[null],"exit":[null]},"ClassMethod":{"enter":[null],"exit":[null]},"ClassPrivateMethod":{"enter":[null],"exit":[null]},"FunctionDeclaration":{"exit":[null]},"FunctionExpression":{"exit":[null]},"ArrowFunctionExpression":{"exit":[null]}},"options":{}}],"presets":[],"generatorOpts":{"filename":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat/app/lib/client/views/customFieldsForm.js","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"app/lib/client/views/customFieldsForm.js"}},"code":"var ReactiveVar;\nmodule.link(\"meteor/reactive-var\", {\n  ReactiveVar: function (v) {\n    ReactiveVar = v;\n  }\n}, 0);\nvar Tracker;\nmodule.link(\"meteor/tracker\", {\n  Tracker: function (v) {\n    Tracker = v;\n  }\n}, 1);\nvar Template;\nmodule.link(\"meteor/templating\", {\n  Template: function (v) {\n    Template = v;\n  }\n}, 2);\nvar settings;\nmodule.link(\"../../../settings\", {\n  settings: function (v) {\n    settings = v;\n  }\n}, 3);\nTemplate.customFieldsForm.helpers({\n  \"new\": function () {\n    return this.new;\n  },\n  customFields: function () {\n    var customFields = Template.instance().customFields.get();\n\n    if (!customFields) {\n      return [];\n    }\n\n    var customFieldsArray = [];\n    Object.keys(customFields).forEach(function (key) {\n      var value = customFields[key];\n\n      if (value.hideFromForm === true && Template.instance().hideFromForm === true) {\n        return;\n      }\n\n      customFieldsArray.push({\n        fieldName: key,\n        field: value\n      });\n    });\n    return customFieldsArray;\n  },\n  selectedField: function (current, field) {\n    var _Template$instance = Template.instance(),\n        formData = _Template$instance.formData;\n\n    if (typeof formData[field.fieldName] !== 'undefined') {\n      return formData[field.fieldName] === current;\n    }\n\n    if (typeof field.defaultValue !== 'undefined') {\n      return field.defaultValue === current;\n    }\n  },\n  fieldValue: function () {\n    var _Template$instance2 = Template.instance(),\n        formData = _Template$instance2.formData;\n\n    return formData[this.fieldName];\n  }\n});\nTemplate.customFieldsForm.onCreated(function () {\n  var _this = this;\n\n  this.customFields = new ReactiveVar();\n  var currentData = Template.currentData();\n  this.hideFromForm = currentData && currentData.hideFromForm;\n  this.formData = currentData && currentData.formData || {};\n  Tracker.autorun(function () {\n    var Accounts_CustomFields = settings.get('Accounts_CustomFields');\n\n    if (typeof Accounts_CustomFields === 'string' && Accounts_CustomFields.trim() !== '') {\n      try {\n        _this.customFields.set(JSON.parse(settings.get('Accounts_CustomFields')));\n      } catch (e) {\n        console.error('Invalid JSON for Accounts_CustomFields');\n      }\n    } else {\n      _this.customFields.set(undefined);\n    }\n  });\n});","map":{"version":3,"sources":["app/lib/client/views/customFieldsForm.js"],"names":["ReactiveVar","module","link","v","Tracker","Template","settings","customFieldsForm","helpers","new","customFields","instance","get","customFieldsArray","Object","keys","forEach","key","value","hideFromForm","push","fieldName","field","selectedField","current","formData","defaultValue","fieldValue","onCreated","currentData","autorun","Accounts_CustomFields","trim","set","JSON","parse","e","console","error","undefined"],"mappings":"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","sourcesContent":["import { ReactiveVar } from 'meteor/reactive-var';\nimport { Tracker } from 'meteor/tracker';\nimport { Template } from 'meteor/templating';\n\nimport { settings } from '../../../settings';\n\nTemplate.customFieldsForm.helpers({\n\tnew() {\n\t\treturn this.new;\n\t},\n\tcustomFields() {\n\t\tconst customFields = Template.instance().customFields.get();\n\n\t\tif (!customFields) {\n\t\t\treturn [];\n\t\t}\n\n\t\tconst customFieldsArray = [];\n\n\t\tObject.keys(customFields).forEach((key) => {\n\t\t\tconst value = customFields[key];\n\t\t\tif (value.hideFromForm === true && Template.instance().hideFromForm === true) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tcustomFieldsArray.push({\n\t\t\t\tfieldName: key,\n\t\t\t\tfield: value,\n\t\t\t});\n\t\t});\n\n\t\treturn customFieldsArray;\n\t},\n\tselectedField(current, field) {\n\t\tconst { formData } = Template.instance();\n\n\t\tif (typeof formData[field.fieldName] !== 'undefined') {\n\t\t\treturn formData[field.fieldName] === current;\n\t\t}\n\t\tif (typeof field.defaultValue !== 'undefined') {\n\t\t\treturn field.defaultValue === current;\n\t\t}\n\t},\n\tfieldValue() {\n\t\tconst { formData } = Template.instance();\n\n\t\treturn formData[this.fieldName];\n\t},\n});\n\nTemplate.customFieldsForm.onCreated(function () {\n\tthis.customFields = new ReactiveVar();\n\n\tconst currentData = Template.currentData();\n\tthis.hideFromForm = currentData && currentData.hideFromForm;\n\tthis.formData = (currentData && currentData.formData) || {};\n\n\tTracker.autorun(() => {\n\t\tconst Accounts_CustomFields = settings.get('Accounts_CustomFields');\n\t\tif (typeof Accounts_CustomFields === 'string' && Accounts_CustomFields.trim() !== '') {\n\t\t\ttry {\n\t\t\t\tthis.customFields.set(JSON.parse(settings.get('Accounts_CustomFields')));\n\t\t\t} catch (e) {\n\t\t\t\tconsole.error('Invalid JSON for Accounts_CustomFields');\n\t\t\t}\n\t\t} else {\n\t\t\tthis.customFields.set(undefined);\n\t\t}\n\t});\n});\n"]},"sourceType":"module","hash":"a31a072025621faa0b5f1bd87a3720260b84d85b"}
