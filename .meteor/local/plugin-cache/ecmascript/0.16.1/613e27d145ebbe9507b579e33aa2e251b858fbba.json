{"metadata":{},"options":{"assumptions":{},"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat/client/views/room/contextualBar/ExportMessages/FileExport.js","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","classProperties","classPrivateProperties","jsx","nullishCoalescingOperator","nullishCoalescingOperator","optionalChaining","optionalCatchBinding","optionalCatchBinding","classProperties","classPrivateProperties","classPrivateMethods","classProperties","classPrivateProperties","asyncGenerators","asyncGenerators","objectRestSpread","logicalAssignment"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"allowUndeclaredExports":true,"strictMode":false},"caller":{"name":"meteor","arch":"web.browser.legacy"},"sourceFileName":"client/views/room/contextualBar/ExportMessages/FileExport.js","filename":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat/client/views/room/contextualBar/ExportMessages/FileExport.js","targets":{"android":"95.0.0","chrome":"95.0.0","edge":"95.0.0","firefox":"78.0.0","ie":"10.0.0","ios":"15.0.0","opera":"81.0.0","safari":"15.1.0","samsung":"14.0.0"},"cloneInputAst":true,"browserslistConfigFile":false,"passPerPreset":false,"envName":"development","cwd":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat","root":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat","rootMode":"root","plugins":[{"key":"base$0","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0","visitor":{"Program":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true},"options":{"avoidModernSyntax":true,"enforceStrictMode":false,"dynamicImport":true}},{"key":"transform-runtime","visitor":{"MemberExpression":{"enter":[null]},"ObjectPattern":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":{},"_verified":{},"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]}},"options":{"version":"7.16.5","helpers":true,"useESModules":false,"corejs":false}},{"key":"proposal-class-properties","visitor":{"PrivateName":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{"loose":true}},{"key":"base$0$3","visitor":{"FunctionExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$4","visitor":{"ForInStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-react-jsx","visitor":{"_exploded":{},"_verified":{},"JSXNamespacedName":{"enter":[null]},"JSXSpreadChild":{"enter":[null]},"Program":{"enter":[null]},"JSXElement":{"exit":[null]},"JSXFragment":{"exit":[null]},"JSXAttribute":{"enter":[null]}},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","runtime":"classic","throwIfNamespace":true,"useBuiltIns":false}},{"key":"transform-react-display-name","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-react-pure-annotations","visitor":{"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"syntax-nullish-coalescing-operator","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-nullish-coalescing-operator","visitor":{"_exploded":{},"_verified":{},"LogicalExpression":{"enter":[null]}},"options":{}},{"key":"syntax-optional-chaining","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-optional-chaining","visitor":{"_exploded":true,"OptionalCallExpression":{"enter":[null]},"OptionalMemberExpression":{"enter":[null]},"_verified":true},"options":{}},{"key":"syntax-optional-catch-binding","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-optional-catch-binding","visitor":{"_exploded":{},"_verified":{},"CatchClause":{"enter":[null]}},"options":{}},{"key":"syntax-class-properties","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-class-properties","visitor":{"PrivateName":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{}},{"key":"syntax-async-generators","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-async-generator-functions","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]}},"options":{}},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-object-rest-spread","visitor":{"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"proposal-logical-assignment-operators","visitor":{"_exploded":{},"_verified":{},"AssignmentExpression":{"enter":[null]}},"options":{}},{"key":"transform-arrow-functions","visitor":{"ArrowFunctionExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-block-scoped-functions","visitor":{"BlockStatement":{"enter":[null]},"SwitchCase":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-block-scoping","visitor":{"VariableDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"_exploded":true,"BlockStatement":{"enter":[null]},"SwitchStatement":{"enter":[null]},"Program":{"enter":[null]},"_verified":true,"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"transform-classes","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-computed-properties","visitor":{"ObjectExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-destructuring","visitor":{"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"VariableDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"transform-for-of","visitor":{"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-literals","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-object-super","visitor":{"ObjectExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-parameters","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{}},{"key":"transform-shorthand-properties","visitor":{"ObjectMethod":{"enter":[null]},"ObjectProperty":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-spread","visitor":{"ArrayExpression":{"enter":[null]},"CallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-sticky-regex","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-template-literals","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-typeof-symbol","visitor":{"UnaryExpression":{"enter":[null]},"_exploded":true,"_verified":true,"BlockStatement":{"enter":[null]},"CatchClause":{"enter":[null]},"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"Program":{"enter":[null]},"ObjectMethod":{"enter":[null]},"SwitchStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ForOfStatement":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"StaticBlock":{"enter":[null]},"TSModuleBlock":{"enter":[null]},"AssignmentPattern":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectPattern":{"enter":[null]}},"options":{}},{"key":"transform-unicode-regex","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-property-literals","visitor":{"ObjectProperty":{"exit":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-exponentiation-operator","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"regenerator-transform","visitor":{"_exploded":true,"_verified":true,"ObjectMethod":{"enter":[null],"exit":[null]},"ClassMethod":{"enter":[null],"exit":[null]},"ClassPrivateMethod":{"enter":[null],"exit":[null]},"FunctionDeclaration":{"exit":[null]},"FunctionExpression":{"exit":[null]},"ArrowFunctionExpression":{"exit":[null]}},"options":{}}],"presets":[],"generatorOpts":{"filename":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat/client/views/room/contextualBar/ExportMessages/FileExport.js","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"client/views/room/contextualBar/ExportMessages/FileExport.js"}},"code":"var _regeneratorRuntime;\n\nmodule.link(\"@babel/runtime/regenerator\", {\n  default: function (v) {\n    _regeneratorRuntime = v;\n  }\n}, 0);\n\nvar _objectSpread;\n\nmodule.link(\"@babel/runtime/helpers/objectSpread2\", {\n  default: function (v) {\n    _objectSpread = v;\n  }\n}, 1);\nvar Field, TextInput, Select, ButtonGroup, Button, FieldGroup;\nmodule.link(\"@rocket.chat/fuselage\", {\n  Field: function (v) {\n    Field = v;\n  },\n  TextInput: function (v) {\n    TextInput = v;\n  },\n  Select: function (v) {\n    Select = v;\n  },\n  ButtonGroup: function (v) {\n    ButtonGroup = v;\n  },\n  Button: function (v) {\n    Button = v;\n  },\n  FieldGroup: function (v) {\n    FieldGroup = v;\n  }\n}, 0);\nvar React, useMemo;\nmodule.link(\"react\", {\n  \"default\": function (v) {\n    React = v;\n  },\n  useMemo: function (v) {\n    useMemo = v;\n  }\n}, 1);\nvar useEndpoint;\nmodule.link(\"../../../../contexts/ServerContext\", {\n  useEndpoint: function (v) {\n    useEndpoint = v;\n  }\n}, 2);\nvar useToastMessageDispatch;\nmodule.link(\"../../../../contexts/ToastMessagesContext\", {\n  useToastMessageDispatch: function (v) {\n    useToastMessageDispatch = v;\n  }\n}, 3);\nvar useTranslation;\nmodule.link(\"../../../../contexts/TranslationContext\", {\n  useTranslation: function (v) {\n    useTranslation = v;\n  }\n}, 4);\nvar useForm;\nmodule.link(\"../../../../hooks/useForm\", {\n  useForm: function (v) {\n    useForm = v;\n  }\n}, 5);\n\nvar FileExport = function (_ref) {\n  var onCancel = _ref.onCancel,\n      rid = _ref.rid;\n  var t = useTranslation();\n\n  var _useForm = useForm({\n    dateFrom: '',\n    dateTo: '',\n    format: 'html'\n  }),\n      values = _useForm.values,\n      handlers = _useForm.handlers;\n\n  var dateFrom = values.dateFrom,\n      dateTo = values.dateTo,\n      format = values.format;\n  var handleDateFrom = handlers.handleDateFrom,\n      handleDateTo = handlers.handleDateTo,\n      handleFormat = handlers.handleFormat;\n  var outputOptions = useMemo(function () {\n    return [['html', t('HTML')], ['json', t('JSON')]];\n  }, [t]);\n  var roomsExport = useEndpoint('POST', 'rooms.export');\n  var dispatchToastMessage = useToastMessageDispatch();\n\n  var handleSubmit = function () {\n    function _callee() {\n      return _regeneratorRuntime.async(function () {\n        function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.prev = 0;\n                _context.next = 3;\n                return _regeneratorRuntime.awrap(roomsExport(_objectSpread(_objectSpread(_objectSpread({\n                  rid: rid,\n                  type: 'file'\n                }, dateFrom && {\n                  dateFrom: new Date(dateFrom)\n                }), dateTo && {\n                  dateTo: new Date(dateTo)\n                }), {}, {\n                  format: format\n                })));\n\n              case 3:\n                dispatchToastMessage({\n                  type: 'success',\n                  message: t('Your_email_has_been_queued_for_sending')\n                });\n                _context.next = 9;\n                break;\n\n              case 6:\n                _context.prev = 6;\n                _context.t0 = _context[\"catch\"](0);\n                dispatchToastMessage({\n                  type: 'error',\n                  message: _context.t0\n                });\n\n              case 9:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }\n\n        return _callee$;\n      }(), null, null, [[0, 6]], Promise);\n    }\n\n    return _callee;\n  }();\n\n  return /*#__PURE__*/React.createElement(FieldGroup, null, /*#__PURE__*/React.createElement(Field, null, /*#__PURE__*/React.createElement(Field.Label, null, t('Date_From')), /*#__PURE__*/React.createElement(Field.Row, null, /*#__PURE__*/React.createElement(TextInput, {\n    type: \"date\",\n    value: dateFrom,\n    onChange: handleDateFrom\n  }))), /*#__PURE__*/React.createElement(Field, null, /*#__PURE__*/React.createElement(Field.Label, null, t('Date_to')), /*#__PURE__*/React.createElement(Field.Row, null, /*#__PURE__*/React.createElement(TextInput, {\n    type: \"date\",\n    value: dateTo,\n    onChange: handleDateTo\n  }))), /*#__PURE__*/React.createElement(Field, null, /*#__PURE__*/React.createElement(Field.Label, null, t('Output_format')), /*#__PURE__*/React.createElement(Field.Row, null, /*#__PURE__*/React.createElement(Select, {\n    value: format,\n    onChange: handleFormat,\n    placeholder: t('Format'),\n    options: outputOptions\n  }))), /*#__PURE__*/React.createElement(ButtonGroup, {\n    stretch: true,\n    mb: \"x12\"\n  }, /*#__PURE__*/React.createElement(Button, {\n    onClick: onCancel\n  }, t('Cancel')), /*#__PURE__*/React.createElement(Button, {\n    primary: true,\n    onClick: function () {\n      return handleSubmit();\n    }\n  }, t('Export'))));\n};\n\nmodule.exportDefault(FileExport);","map":{"version":3,"sources":["client/views/room/contextualBar/ExportMessages/FileExport.js"],"names":["_regeneratorRuntime","module","link","default","v","_objectSpread","Field","TextInput","Select","ButtonGroup","Button","FieldGroup","React","useMemo","useEndpoint","useToastMessageDispatch","useTranslation","useForm","FileExport","onCancel","rid","t","dateFrom","dateTo","format","values","handlers","handleDateFrom","handleDateTo","handleFormat","outputOptions","roomsExport","dispatchToastMessage","handleSubmit","type","Date","message","exportDefault"],"mappings":"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","sourcesContent":["import { Field, TextInput, Select, ButtonGroup, Button, FieldGroup } from '@rocket.chat/fuselage';\nimport React, { useMemo } from 'react';\n\nimport { useEndpoint } from '../../../../contexts/ServerContext';\nimport { useToastMessageDispatch } from '../../../../contexts/ToastMessagesContext';\nimport { useTranslation } from '../../../../contexts/TranslationContext';\nimport { useForm } from '../../../../hooks/useForm';\n\nconst FileExport = ({ onCancel, rid }) => {\n\tconst t = useTranslation();\n\n\tconst { values, handlers } = useForm({\n\t\tdateFrom: '',\n\t\tdateTo: '',\n\t\tformat: 'html',\n\t});\n\n\tconst { dateFrom, dateTo, format } = values;\n\n\tconst { handleDateFrom, handleDateTo, handleFormat } = handlers;\n\n\tconst outputOptions = useMemo(\n\t\t() => [\n\t\t\t['html', t('HTML')],\n\t\t\t['json', t('JSON')],\n\t\t],\n\t\t[t],\n\t);\n\n\tconst roomsExport = useEndpoint('POST', 'rooms.export');\n\n\tconst dispatchToastMessage = useToastMessageDispatch();\n\n\tconst handleSubmit = async () => {\n\t\ttry {\n\t\t\tawait roomsExport({\n\t\t\t\trid,\n\t\t\t\ttype: 'file',\n\t\t\t\t...(dateFrom && { dateFrom: new Date(dateFrom) }),\n\t\t\t\t...(dateTo && { dateTo: new Date(dateTo) }),\n\t\t\t\tformat,\n\t\t\t});\n\n\t\t\tdispatchToastMessage({\n\t\t\t\ttype: 'success',\n\t\t\t\tmessage: t('Your_email_has_been_queued_for_sending'),\n\t\t\t});\n\t\t} catch (error) {\n\t\t\tdispatchToastMessage({\n\t\t\t\ttype: 'error',\n\t\t\t\tmessage: error,\n\t\t\t});\n\t\t}\n\t};\n\n\treturn (\n\t\t<FieldGroup>\n\t\t\t<Field>\n\t\t\t\t<Field.Label>{t('Date_From')}</Field.Label>\n\t\t\t\t<Field.Row>\n\t\t\t\t\t<TextInput type='date' value={dateFrom} onChange={handleDateFrom} />\n\t\t\t\t</Field.Row>\n\t\t\t</Field>\n\t\t\t<Field>\n\t\t\t\t<Field.Label>{t('Date_to')}</Field.Label>\n\t\t\t\t<Field.Row>\n\t\t\t\t\t<TextInput type='date' value={dateTo} onChange={handleDateTo} />\n\t\t\t\t</Field.Row>\n\t\t\t</Field>\n\t\t\t<Field>\n\t\t\t\t<Field.Label>{t('Output_format')}</Field.Label>\n\t\t\t\t<Field.Row>\n\t\t\t\t\t<Select value={format} onChange={handleFormat} placeholder={t('Format')} options={outputOptions} />\n\t\t\t\t</Field.Row>\n\t\t\t</Field>\n\t\t\t<ButtonGroup stretch mb='x12'>\n\t\t\t\t<Button onClick={onCancel}>{t('Cancel')}</Button>\n\t\t\t\t<Button primary onClick={() => handleSubmit()}>\n\t\t\t\t\t{t('Export')}\n\t\t\t\t</Button>\n\t\t\t</ButtonGroup>\n\t\t</FieldGroup>\n\t);\n};\n\nexport default FileExport;\n"]},"sourceType":"module","hash":"613e27d145ebbe9507b579e33aa2e251b858fbba"}
