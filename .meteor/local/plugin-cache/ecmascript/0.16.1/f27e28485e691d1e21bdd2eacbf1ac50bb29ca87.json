{"metadata":{},"options":{"assumptions":{},"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat/app/livechat/client/lib/chartHandler.js","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","classProperties","classPrivateProperties","jsx","nullishCoalescingOperator","nullishCoalescingOperator","optionalChaining","optionalCatchBinding","optionalCatchBinding","classProperties","classPrivateProperties","classPrivateMethods","classProperties","classPrivateProperties","asyncGenerators","asyncGenerators","objectRestSpread","logicalAssignment"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"allowUndeclaredExports":true,"strictMode":false},"caller":{"name":"meteor","arch":"web.browser.legacy"},"sourceFileName":"app/livechat/client/lib/chartHandler.js","filename":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat/app/livechat/client/lib/chartHandler.js","targets":{"android":"95.0.0","chrome":"95.0.0","edge":"95.0.0","firefox":"78.0.0","ie":"10.0.0","ios":"15.0.0","opera":"81.0.0","safari":"15.1.0","samsung":"14.0.0"},"cloneInputAst":true,"browserslistConfigFile":false,"passPerPreset":false,"envName":"development","cwd":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat","root":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat","rootMode":"root","plugins":[{"key":"base$0","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0","visitor":{"Program":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true},"options":{"avoidModernSyntax":true,"enforceStrictMode":false,"dynamicImport":true}},{"key":"transform-runtime","visitor":{"MemberExpression":{"enter":[null]},"ObjectPattern":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":{},"_verified":{},"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]}},"options":{"version":"7.16.5","helpers":true,"useESModules":false,"corejs":false}},{"key":"proposal-class-properties","visitor":{"PrivateName":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{"loose":true}},{"key":"base$0$3","visitor":{"FunctionExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$4","visitor":{"ForInStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-react-jsx","visitor":{"_exploded":{},"_verified":{},"JSXNamespacedName":{"enter":[null]},"JSXSpreadChild":{"enter":[null]},"Program":{"enter":[null]},"JSXElement":{"exit":[null]},"JSXFragment":{"exit":[null]},"JSXAttribute":{"enter":[null]}},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","runtime":"classic","throwIfNamespace":true,"useBuiltIns":false}},{"key":"transform-react-display-name","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-react-pure-annotations","visitor":{"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"syntax-nullish-coalescing-operator","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-nullish-coalescing-operator","visitor":{"_exploded":{},"_verified":{},"LogicalExpression":{"enter":[null]}},"options":{}},{"key":"syntax-optional-chaining","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-optional-chaining","visitor":{"_exploded":true,"OptionalCallExpression":{"enter":[null]},"OptionalMemberExpression":{"enter":[null]},"_verified":true},"options":{}},{"key":"syntax-optional-catch-binding","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-optional-catch-binding","visitor":{"_exploded":{},"_verified":{},"CatchClause":{"enter":[null]}},"options":{}},{"key":"syntax-class-properties","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-class-properties","visitor":{"PrivateName":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{}},{"key":"syntax-async-generators","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-async-generator-functions","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]}},"options":{}},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-object-rest-spread","visitor":{"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"proposal-logical-assignment-operators","visitor":{"_exploded":{},"_verified":{},"AssignmentExpression":{"enter":[null]}},"options":{}},{"key":"transform-arrow-functions","visitor":{"ArrowFunctionExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-block-scoped-functions","visitor":{"BlockStatement":{"enter":[null]},"SwitchCase":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-block-scoping","visitor":{"VariableDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"_exploded":true,"BlockStatement":{"enter":[null]},"SwitchStatement":{"enter":[null]},"Program":{"enter":[null]},"_verified":true,"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"transform-classes","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-computed-properties","visitor":{"ObjectExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-destructuring","visitor":{"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"VariableDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"transform-for-of","visitor":{"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-literals","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-object-super","visitor":{"ObjectExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-parameters","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{}},{"key":"transform-shorthand-properties","visitor":{"ObjectMethod":{"enter":[null]},"ObjectProperty":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-spread","visitor":{"ArrayExpression":{"enter":[null]},"CallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-sticky-regex","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-template-literals","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-typeof-symbol","visitor":{"UnaryExpression":{"enter":[null]},"_exploded":true,"_verified":true,"BlockStatement":{"enter":[null]},"CatchClause":{"enter":[null]},"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"Program":{"enter":[null]},"ObjectMethod":{"enter":[null]},"SwitchStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ForOfStatement":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"StaticBlock":{"enter":[null]},"TSModuleBlock":{"enter":[null]},"AssignmentPattern":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectPattern":{"enter":[null]}},"options":{}},{"key":"transform-unicode-regex","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-property-literals","visitor":{"ObjectProperty":{"exit":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-exponentiation-operator","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"regenerator-transform","visitor":{"_exploded":true,"_verified":true,"ObjectMethod":{"enter":[null],"exit":[null]},"ClassMethod":{"enter":[null],"exit":[null]},"ClassPrivateMethod":{"enter":[null],"exit":[null]},"FunctionDeclaration":{"exit":[null]},"FunctionExpression":{"exit":[null]},"ArrowFunctionExpression":{"exit":[null]}},"options":{}}],"presets":[],"generatorOpts":{"filename":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat/app/livechat/client/lib/chartHandler.js","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"app/livechat/client/lib/chartHandler.js"}},"code":"var _regeneratorRuntime;\n\nmodule.link(\"@babel/runtime/regenerator\", {\n  default: function (v) {\n    _regeneratorRuntime = v;\n  }\n}, 0);\n\nvar _objectSpread;\n\nmodule.link(\"@babel/runtime/helpers/objectSpread2\", {\n  default: function (v) {\n    _objectSpread = v;\n  }\n}, 1);\nmodule.export({\n  drawLineChart: function () {\n    return drawLineChart;\n  },\n  drawDoughnutChart: function () {\n    return drawDoughnutChart;\n  },\n  updateChart: function () {\n    return updateChart;\n  }\n});\nvar TAPi18n;\nmodule.link(\"meteor/rocketchat:tap-i18n\", {\n  TAPi18n: function (v) {\n    TAPi18n = v;\n  }\n}, 0);\n\nvar lineChartConfiguration = function (_ref) {\n  var _ref$legends = _ref.legends,\n      legends = _ref$legends === void 0 ? false : _ref$legends,\n      _ref$anim = _ref.anim,\n      anim = _ref$anim === void 0 ? false : _ref$anim,\n      _ref$smallTicks = _ref.smallTicks,\n      smallTicks = _ref$smallTicks === void 0 ? false : _ref$smallTicks,\n      _ref$displayColors = _ref.displayColors,\n      displayColors = _ref$displayColors === void 0 ? false : _ref$displayColors,\n      _ref$tooltipCallbacks = _ref.tooltipCallbacks,\n      tooltipCallbacks = _ref$tooltipCallbacks === void 0 ? {} : _ref$tooltipCallbacks;\n  var config = {\n    layout: {\n      padding: {\n        top: 10,\n        bottom: 0\n      }\n    },\n    legend: {\n      display: false\n    },\n    title: {\n      display: false\n    },\n    tooltips: _objectSpread({\n      enabled: true,\n      mode: 'point',\n      displayColors: displayColors\n    }, tooltipCallbacks),\n    scales: {\n      xAxes: [{\n        scaleLabel: {\n          display: false\n        },\n        gridLines: {\n          display: true,\n          color: 'rgba(0, 0, 0, 0.03)'\n        }\n      }],\n      yAxes: [{\n        scaleLabel: {\n          display: false\n        },\n        gridLines: {\n          display: true,\n          color: 'rgba(0, 0, 0, 0.03)'\n        },\n        ticks: {\n          beginAtZero: true\n        }\n      }]\n    },\n    hover: {\n      animationDuration: 0 // duration of animations when hovering an item\n\n    },\n    responsive: true,\n    maintainAspectRatio: false,\n    responsiveAnimationDuration: 0 // animation duration after a resize\n\n  };\n\n  if (!anim) {\n    config.animation = {\n      duration: 0 // general animation time\n\n    };\n  }\n\n  if (legends) {\n    config.legend = {\n      display: true,\n      labels: {\n        boxWidth: 20,\n        fontSize: 8\n      }\n    };\n  }\n\n  if (smallTicks) {\n    config.scales.xAxes[0].ticks = {\n      fontSize: 8\n    };\n    config.scales.yAxes[0].ticks = {\n      beginAtZero: true,\n      fontSize: 8\n    };\n  }\n\n  return config;\n};\n\nvar doughnutChartConfiguration = function (title) {\n  var tooltipCallbacks = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  return {\n    layout: {\n      padding: {\n        top: 0,\n        bottom: 0\n      }\n    },\n    legend: {\n      display: true,\n      position: 'right',\n      labels: {\n        boxWidth: 20,\n        fontSize: 8\n      }\n    },\n    title: {\n      display: 'true',\n      text: title\n    },\n    tooltips: _objectSpread({\n      enabled: true,\n      mode: 'point',\n      displayColors: false\n    }, tooltipCallbacks),\n    // animation: {\n    // \tduration: 0 // general animation time\n    // },\n    hover: {\n      animationDuration: 0 // duration of animations when hovering an item\n\n    },\n    responsive: true,\n    maintainAspectRatio: false,\n    responsiveAnimationDuration: 0 // animation duration after a resize\n\n  };\n};\n/**\n *\n * @param {Object} chart - chart element\n * @param {Object} chartContext - Context of chart\n * @param {Array(String)} chartLabel\n * @param {Array(String)} dataLabels\n * @param {Array(Array(Double))} dataPoints\n */\n\n\nvar drawLineChart = function () {\n  function _callee(chart, chartContext, chartLabels, dataLabels, dataSets) {\n    var options,\n        colors,\n        datasets,\n        chartImport,\n        Chart,\n        _args = arguments;\n    return _regeneratorRuntime.async(function () {\n      function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              options = _args.length > 5 && _args[5] !== undefined ? _args[5] : {};\n\n              if (chart) {\n                _context.next = 4;\n                break;\n              }\n\n              console.log('No chart element');\n              return _context.abrupt(\"return\");\n\n            case 4:\n              if (chartContext) {\n                chartContext.destroy();\n              }\n\n              colors = ['#2de0a5', '#ffd21f', '#f5455c', '#cbced1'];\n              datasets = [];\n              chartLabels.forEach(function (chartLabel, index) {\n                datasets.push({\n                  label: TAPi18n.__(chartLabel),\n                  // chart label\n                  data: dataSets[index],\n                  // data points corresponding to data labels, x-axis points\n                  backgroundColor: [colors[index]],\n                  borderColor: [colors[index]],\n                  borderWidth: 3,\n                  fill: false\n                });\n              });\n              _context.next = 10;\n              return _regeneratorRuntime.awrap(module.dynamicImport('chart.js'));\n\n            case 10:\n              chartImport = _context.sent;\n              Chart = chartImport.default;\n              return _context.abrupt(\"return\", new Chart(chart, {\n                type: 'line',\n                data: {\n                  labels: dataLabels,\n                  // data labels, y-axis points\n                  datasets: datasets\n                },\n                options: lineChartConfiguration(options)\n              }));\n\n            case 13:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }\n\n      return _callee$;\n    }(), null, null, null, Promise);\n  }\n\n  return _callee;\n}();\n\nvar drawDoughnutChart = function () {\n  function _callee2(chart, title, chartContext, dataLabels, dataPoints) {\n    var chartImport, Chart;\n    return _regeneratorRuntime.async(function () {\n      function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              if (chart) {\n                _context2.next = 2;\n                break;\n              }\n\n              return _context2.abrupt(\"return\");\n\n            case 2:\n              if (chartContext) {\n                chartContext.destroy();\n              }\n\n              _context2.next = 5;\n              return _regeneratorRuntime.awrap(module.dynamicImport('chart.js'));\n\n            case 5:\n              chartImport = _context2.sent;\n              Chart = chartImport.default;\n              return _context2.abrupt(\"return\", new Chart(chart, {\n                type: 'doughnut',\n                data: {\n                  labels: dataLabels,\n                  // data labels, y-axis points\n                  datasets: [{\n                    data: dataPoints,\n                    // data points corresponding to data labels, x-axis points\n                    backgroundColor: ['#2de0a5', '#cbced1', '#f5455c', '#ffd21f'],\n                    borderWidth: 0\n                  }]\n                },\n                options: doughnutChartConfiguration(title)\n              }));\n\n            case 8:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }\n\n      return _callee2$;\n    }(), null, null, null, Promise);\n  }\n\n  return _callee2;\n}();\n\nvar updateChart = function () {\n  function _callee3(c, label, data) {\n    var chart, index;\n    return _regeneratorRuntime.async(function () {\n      function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              _context3.next = 2;\n              return _regeneratorRuntime.awrap(c);\n\n            case 2:\n              chart = _context3.sent;\n\n              if (chart.data.labels.indexOf(label) === -1) {\n                // insert data\n                chart.data.labels.push(label);\n                chart.data.datasets.forEach(function (dataset, idx) {\n                  dataset.data.push(data[idx]);\n                });\n              } else {\n                // update data\n                index = chart.data.labels.indexOf(label);\n                chart.data.datasets.forEach(function (dataset, idx) {\n                  dataset.data[index] = data[idx];\n                });\n              }\n\n              chart.update();\n\n            case 5:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }\n\n      return _callee3$;\n    }(), null, null, null, Promise);\n  }\n\n  return _callee3;\n}();","map":{"version":3,"sources":["app/livechat/client/lib/chartHandler.js"],"names":["_regeneratorRuntime","module","link","default","v","_objectSpread","export","drawLineChart","drawDoughnutChart","updateChart","TAPi18n","lineChartConfiguration","legends","anim","smallTicks","displayColors","tooltipCallbacks","config","layout","padding","top","bottom","legend","display","title","tooltips","enabled","mode","scales","xAxes","scaleLabel","gridLines","color","yAxes","ticks","beginAtZero","hover","animationDuration","responsive","maintainAspectRatio","responsiveAnimationDuration","animation","duration","labels","boxWidth","fontSize","doughnutChartConfiguration","position","text","chart","chartContext","chartLabels","dataLabels","dataSets","options","console","log","destroy","colors","datasets","forEach","chartLabel","index","push","label","__","data","backgroundColor","borderColor","borderWidth","fill","chartImport","Chart","type","dataPoints","c","indexOf","dataset","idx","update"],"mappings":"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","sourcesContent":["import { TAPi18n } from 'meteor/rocketchat:tap-i18n';\n\nconst lineChartConfiguration = ({ legends = false, anim = false, smallTicks = false, displayColors = false, tooltipCallbacks = {} }) => {\n\tconst config = {\n\t\tlayout: {\n\t\t\tpadding: {\n\t\t\t\ttop: 10,\n\t\t\t\tbottom: 0,\n\t\t\t},\n\t\t},\n\t\tlegend: {\n\t\t\tdisplay: false,\n\t\t},\n\t\ttitle: {\n\t\t\tdisplay: false,\n\t\t},\n\t\ttooltips: {\n\t\t\tenabled: true,\n\t\t\tmode: 'point',\n\t\t\tdisplayColors,\n\t\t\t...tooltipCallbacks,\n\t\t},\n\t\tscales: {\n\t\t\txAxes: [\n\t\t\t\t{\n\t\t\t\t\tscaleLabel: {\n\t\t\t\t\t\tdisplay: false,\n\t\t\t\t\t},\n\t\t\t\t\tgridLines: {\n\t\t\t\t\t\tdisplay: true,\n\t\t\t\t\t\tcolor: 'rgba(0, 0, 0, 0.03)',\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t],\n\t\t\tyAxes: [\n\t\t\t\t{\n\t\t\t\t\tscaleLabel: {\n\t\t\t\t\t\tdisplay: false,\n\t\t\t\t\t},\n\t\t\t\t\tgridLines: {\n\t\t\t\t\t\tdisplay: true,\n\t\t\t\t\t\tcolor: 'rgba(0, 0, 0, 0.03)',\n\t\t\t\t\t},\n\t\t\t\t\tticks: {\n\t\t\t\t\t\tbeginAtZero: true,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t],\n\t\t},\n\t\thover: {\n\t\t\tanimationDuration: 0, // duration of animations when hovering an item\n\t\t},\n\t\tresponsive: true,\n\t\tmaintainAspectRatio: false,\n\t\tresponsiveAnimationDuration: 0, // animation duration after a resize\n\t};\n\n\tif (!anim) {\n\t\tconfig.animation = {\n\t\t\tduration: 0, // general animation time\n\t\t};\n\t}\n\n\tif (legends) {\n\t\tconfig.legend = {\n\t\t\tdisplay: true,\n\t\t\tlabels: {\n\t\t\t\tboxWidth: 20,\n\t\t\t\tfontSize: 8,\n\t\t\t},\n\t\t};\n\t}\n\n\tif (smallTicks) {\n\t\tconfig.scales.xAxes[0].ticks = {\n\t\t\tfontSize: 8,\n\t\t};\n\n\t\tconfig.scales.yAxes[0].ticks = {\n\t\t\tbeginAtZero: true,\n\t\t\tfontSize: 8,\n\t\t};\n\t}\n\n\treturn config;\n};\n\nconst doughnutChartConfiguration = (title, tooltipCallbacks = {}) => ({\n\tlayout: {\n\t\tpadding: {\n\t\t\ttop: 0,\n\t\t\tbottom: 0,\n\t\t},\n\t},\n\tlegend: {\n\t\tdisplay: true,\n\t\tposition: 'right',\n\t\tlabels: {\n\t\t\tboxWidth: 20,\n\t\t\tfontSize: 8,\n\t\t},\n\t},\n\ttitle: {\n\t\tdisplay: 'true',\n\t\ttext: title,\n\t},\n\ttooltips: {\n\t\tenabled: true,\n\t\tmode: 'point',\n\t\tdisplayColors: false, // hide color box\n\t\t...tooltipCallbacks,\n\t},\n\t// animation: {\n\t// \tduration: 0 // general animation time\n\t// },\n\thover: {\n\t\tanimationDuration: 0, // duration of animations when hovering an item\n\t},\n\tresponsive: true,\n\tmaintainAspectRatio: false,\n\tresponsiveAnimationDuration: 0, // animation duration after a resize\n});\n\n/**\n *\n * @param {Object} chart - chart element\n * @param {Object} chartContext - Context of chart\n * @param {Array(String)} chartLabel\n * @param {Array(String)} dataLabels\n * @param {Array(Array(Double))} dataPoints\n */\nexport const drawLineChart = async (chart, chartContext, chartLabels, dataLabels, dataSets, options = {}) => {\n\tif (!chart) {\n\t\tconsole.log('No chart element');\n\t\treturn;\n\t}\n\tif (chartContext) {\n\t\tchartContext.destroy();\n\t}\n\tconst colors = ['#2de0a5', '#ffd21f', '#f5455c', '#cbced1'];\n\n\tconst datasets = [];\n\n\tchartLabels.forEach(function (chartLabel, index) {\n\t\tdatasets.push({\n\t\t\tlabel: TAPi18n.__(chartLabel), // chart label\n\t\t\tdata: dataSets[index], // data points corresponding to data labels, x-axis points\n\t\t\tbackgroundColor: [colors[index]],\n\t\t\tborderColor: [colors[index]],\n\t\t\tborderWidth: 3,\n\t\t\tfill: false,\n\t\t});\n\t});\n\tconst chartImport = await import('chart.js');\n\tconst Chart = chartImport.default;\n\treturn new Chart(chart, {\n\t\ttype: 'line',\n\t\tdata: {\n\t\t\tlabels: dataLabels, // data labels, y-axis points\n\t\t\tdatasets,\n\t\t},\n\t\toptions: lineChartConfiguration(options),\n\t});\n};\n\n/**\n *\n * @param {Object} chart - chart element\n * @param {Object} chartContext - Context of chart\n * @param {Array(String)} dataLabels\n * @param {Array(Double)} dataPoints\n */\nexport const drawDoughnutChart = async (chart, title, chartContext, dataLabels, dataPoints) => {\n\tif (!chart) {\n\t\treturn;\n\t}\n\tif (chartContext) {\n\t\tchartContext.destroy();\n\t}\n\tconst chartImport = await import('chart.js');\n\tconst Chart = chartImport.default;\n\treturn new Chart(chart, {\n\t\ttype: 'doughnut',\n\t\tdata: {\n\t\t\tlabels: dataLabels, // data labels, y-axis points\n\t\t\tdatasets: [\n\t\t\t\t{\n\t\t\t\t\tdata: dataPoints, // data points corresponding to data labels, x-axis points\n\t\t\t\t\tbackgroundColor: ['#2de0a5', '#cbced1', '#f5455c', '#ffd21f'],\n\t\t\t\t\tborderWidth: 0,\n\t\t\t\t},\n\t\t\t],\n\t\t},\n\t\toptions: doughnutChartConfiguration(title),\n\t});\n};\n\n/**\n * Update chart\n * @param  {Object} chart [Chart context]\n * @param  {String} label [chart label]\n * @param  {Array(Double)} data  [updated data]\n */\nexport const updateChart = async (c, label, data) => {\n\tconst chart = await c;\n\tif (chart.data.labels.indexOf(label) === -1) {\n\t\t// insert data\n\t\tchart.data.labels.push(label);\n\t\tchart.data.datasets.forEach((dataset, idx) => {\n\t\t\tdataset.data.push(data[idx]);\n\t\t});\n\t} else {\n\t\t// update data\n\t\tconst index = chart.data.labels.indexOf(label);\n\t\tchart.data.datasets.forEach((dataset, idx) => {\n\t\t\tdataset.data[index] = data[idx];\n\t\t});\n\t}\n\n\tchart.update();\n};\n"]},"sourceType":"module","hash":"f27e28485e691d1e21bdd2eacbf1ac50bb29ca87"}
