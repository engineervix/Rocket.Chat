{"metadata":{},"options":{"assumptions":{},"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat/app/custom-sounds/client/lib/CustomSounds.js","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","classProperties","classPrivateProperties","jsx","nullishCoalescingOperator","nullishCoalescingOperator","optionalChaining","optionalCatchBinding","optionalCatchBinding","classProperties","classPrivateProperties","classPrivateMethods","classProperties","classPrivateProperties","asyncGenerators","asyncGenerators","objectRestSpread","logicalAssignment"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"allowUndeclaredExports":true,"strictMode":false},"caller":{"name":"meteor","arch":"web.browser.legacy"},"sourceFileName":"app/custom-sounds/client/lib/CustomSounds.js","filename":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat/app/custom-sounds/client/lib/CustomSounds.js","targets":{"android":"95.0.0","chrome":"95.0.0","edge":"95.0.0","firefox":"78.0.0","ie":"10.0.0","ios":"15.0.0","opera":"81.0.0","safari":"15.1.0","samsung":"14.0.0"},"cloneInputAst":true,"browserslistConfigFile":false,"passPerPreset":false,"envName":"development","cwd":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat","root":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat","rootMode":"root","plugins":[{"key":"base$0","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0","visitor":{"Program":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true},"options":{"avoidModernSyntax":true,"enforceStrictMode":false,"dynamicImport":true}},{"key":"transform-runtime","visitor":{"MemberExpression":{"enter":[null]},"ObjectPattern":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":{},"_verified":{},"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]}},"options":{"version":"7.16.5","helpers":true,"useESModules":false,"corejs":false}},{"key":"proposal-class-properties","visitor":{"PrivateName":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{"loose":true}},{"key":"base$0$3","visitor":{"FunctionExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$4","visitor":{"ForInStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-react-jsx","visitor":{"_exploded":{},"_verified":{},"JSXNamespacedName":{"enter":[null]},"JSXSpreadChild":{"enter":[null]},"Program":{"enter":[null]},"JSXElement":{"exit":[null]},"JSXFragment":{"exit":[null]},"JSXAttribute":{"enter":[null]}},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","runtime":"classic","throwIfNamespace":true,"useBuiltIns":false}},{"key":"transform-react-display-name","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-react-pure-annotations","visitor":{"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"syntax-nullish-coalescing-operator","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-nullish-coalescing-operator","visitor":{"_exploded":{},"_verified":{},"LogicalExpression":{"enter":[null]}},"options":{}},{"key":"syntax-optional-chaining","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-optional-chaining","visitor":{"_exploded":true,"OptionalCallExpression":{"enter":[null]},"OptionalMemberExpression":{"enter":[null]},"_verified":true},"options":{}},{"key":"syntax-optional-catch-binding","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-optional-catch-binding","visitor":{"_exploded":{},"_verified":{},"CatchClause":{"enter":[null]}},"options":{}},{"key":"syntax-class-properties","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-class-properties","visitor":{"PrivateName":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{}},{"key":"syntax-async-generators","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-async-generator-functions","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]}},"options":{}},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-object-rest-spread","visitor":{"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"proposal-logical-assignment-operators","visitor":{"_exploded":{},"_verified":{},"AssignmentExpression":{"enter":[null]}},"options":{}},{"key":"transform-arrow-functions","visitor":{"ArrowFunctionExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-block-scoped-functions","visitor":{"BlockStatement":{"enter":[null]},"SwitchCase":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-block-scoping","visitor":{"VariableDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"_exploded":true,"BlockStatement":{"enter":[null]},"SwitchStatement":{"enter":[null]},"Program":{"enter":[null]},"_verified":true,"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"transform-classes","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-computed-properties","visitor":{"ObjectExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-destructuring","visitor":{"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"VariableDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"transform-for-of","visitor":{"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-literals","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-object-super","visitor":{"ObjectExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-parameters","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{}},{"key":"transform-shorthand-properties","visitor":{"ObjectMethod":{"enter":[null]},"ObjectProperty":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-spread","visitor":{"ArrayExpression":{"enter":[null]},"CallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-sticky-regex","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-template-literals","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-typeof-symbol","visitor":{"UnaryExpression":{"enter":[null]},"_exploded":true,"_verified":true,"BlockStatement":{"enter":[null]},"CatchClause":{"enter":[null]},"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"Program":{"enter":[null]},"ObjectMethod":{"enter":[null]},"SwitchStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ForOfStatement":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"StaticBlock":{"enter":[null]},"TSModuleBlock":{"enter":[null]},"AssignmentPattern":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectPattern":{"enter":[null]}},"options":{}},{"key":"transform-unicode-regex","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-property-literals","visitor":{"ObjectProperty":{"exit":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-exponentiation-operator","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"regenerator-transform","visitor":{"_exploded":true,"_verified":true,"ObjectMethod":{"enter":[null],"exit":[null]},"ClassMethod":{"enter":[null],"exit":[null]},"ClassPrivateMethod":{"enter":[null],"exit":[null]},"FunctionDeclaration":{"exit":[null]},"FunctionExpression":{"exit":[null]},"ArrowFunctionExpression":{"exit":[null]}},"options":{}}],"presets":[],"generatorOpts":{"filename":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat/app/custom-sounds/client/lib/CustomSounds.js","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"app/custom-sounds/client/lib/CustomSounds.js"}},"code":"var _createForOfIteratorHelperLoose;\n\nmodule.link(\"@babel/runtime/helpers/createForOfIteratorHelperLoose\", {\n  default: function (v) {\n    _createForOfIteratorHelperLoose = v;\n  }\n}, 0);\nmodule.export({\n  CustomSounds: function () {\n    return CustomSounds;\n  }\n});\nvar Meteor;\nmodule.link(\"meteor/meteor\", {\n  Meteor: function (v) {\n    Meteor = v;\n  }\n}, 0);\nvar ReactiveVar;\nmodule.link(\"meteor/reactive-var\", {\n  ReactiveVar: function (v) {\n    ReactiveVar = v;\n  }\n}, 1);\n\nvar _;\n\nmodule.link(\"underscore\", {\n  \"default\": function (v) {\n    _ = v;\n  }\n}, 2);\nvar CachedCollectionManager;\nmodule.link(\"../../../ui-cached-collection\", {\n  CachedCollectionManager: function (v) {\n    CachedCollectionManager = v;\n  }\n}, 3);\n\nvar _getURL;\n\nmodule.link(\"../../../utils/client\", {\n  getURL: function (v) {\n    _getURL = v;\n  }\n}, 4);\n\nvar getCustomSoundId = function (sound) {\n  return \"custom-sound-\" + sound;\n};\n\nvar CustomSoundsClass = /*#__PURE__*/function () {\n  function CustomSoundsClass() {\n    this.play = function (sound) {\n      var _ref = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n          _ref$volume = _ref.volume,\n          volume = _ref$volume === void 0 ? 1 : _ref$volume,\n          _ref$loop = _ref.loop,\n          loop = _ref$loop === void 0 ? false : _ref$loop;\n\n      var audio = document.querySelector(\"#\" + getCustomSoundId(sound));\n\n      if (!audio || !audio.play) {\n        return;\n      }\n\n      audio.volume = volume;\n      audio.loop = loop;\n      audio.play();\n      return audio;\n    };\n\n    this.pause = function (sound) {\n      var audio = document.querySelector(\"#\" + getCustomSoundId(sound));\n\n      if (!audio || !audio.pause) {\n        return;\n      }\n\n      audio.pause();\n\n      if (audio.currentTime !== 0) {\n        audio.currentTime = 0;\n      }\n    };\n\n    this.list = new ReactiveVar({});\n    this.add({\n      _id: 'chime',\n      name: 'Chime',\n      extension: 'mp3',\n      src: _getURL('sounds/chime.mp3')\n    });\n    this.add({\n      _id: 'door',\n      name: 'Door',\n      extension: 'mp3',\n      src: _getURL('sounds/door.mp3')\n    });\n    this.add({\n      _id: 'beep',\n      name: 'Beep',\n      extension: 'mp3',\n      src: _getURL('sounds/beep.mp3')\n    });\n    this.add({\n      _id: 'chelle',\n      name: 'Chelle',\n      extension: 'mp3',\n      src: _getURL('sounds/chelle.mp3')\n    });\n    this.add({\n      _id: 'ding',\n      name: 'Ding',\n      extension: 'mp3',\n      src: _getURL('sounds/ding.mp3')\n    });\n    this.add({\n      _id: 'droplet',\n      name: 'Droplet',\n      extension: 'mp3',\n      src: _getURL('sounds/droplet.mp3')\n    });\n    this.add({\n      _id: 'highbell',\n      name: 'Highbell',\n      extension: 'mp3',\n      src: _getURL('sounds/highbell.mp3')\n    });\n    this.add({\n      _id: 'seasons',\n      name: 'Seasons',\n      extension: 'mp3',\n      src: _getURL('sounds/seasons.mp3')\n    });\n    this.add({\n      _id: 'telephone',\n      name: 'Telephone',\n      extension: 'mp3',\n      src: _getURL('sounds/telephone.mp3')\n    });\n  }\n\n  var _proto = CustomSoundsClass.prototype;\n\n  _proto.add = function () {\n    function add(sound) {\n      if (!sound.src) {\n        sound.src = this.getURL(sound);\n      }\n\n      var audio = $('<audio />', {\n        id: getCustomSoundId(sound._id),\n        preload: true\n      }).append($('<source />', {\n        src: sound.src\n      }));\n      var list = this.list.get();\n      list[sound._id] = sound;\n      this.list.set(list);\n      $('body').append(audio);\n    }\n\n    return add;\n  }();\n\n  _proto.remove = function () {\n    function remove(sound) {\n      var list = this.list.get();\n      delete list[sound._id];\n      this.list.set(list);\n      $(\"#\" + sound._id).remove();\n    }\n\n    return remove;\n  }();\n\n  _proto.update = function () {\n    function update(sound) {\n      var audio = $(\"#\" + sound._id);\n\n      if (audio && audio[0]) {\n        var list = this.list.get();\n\n        if (!sound.src) {\n          sound.src = this.getURL(sound);\n        }\n\n        list[sound._id] = sound;\n        this.list.set(list);\n        $('source', audio).attr('src', sound.src);\n        audio[0].load();\n      } else {\n        this.add(sound);\n      }\n    }\n\n    return update;\n  }();\n\n  _proto.getURL = function () {\n    function getURL(sound) {\n      return _getURL(\"/custom-sounds/\" + sound._id + \".\" + sound.extension + \"?_dc=\" + (sound.random || 0));\n    }\n\n    return getURL;\n  }();\n\n  _proto.getList = function () {\n    function getList() {\n      var list = Object.values(this.list.get());\n      return _.sortBy(list, 'name');\n    }\n\n    return getList;\n  }();\n\n  return CustomSoundsClass;\n}();\n\nvar CustomSounds = new CustomSoundsClass();\nMeteor.startup(function () {\n  return CachedCollectionManager.onLogin(function () {\n    Meteor.call('listCustomSounds', function (error, result) {\n      for (var _iterator = _createForOfIteratorHelperLoose(result), _step; !(_step = _iterator()).done;) {\n        var sound = _step.value;\n        CustomSounds.add(sound);\n      }\n    });\n  });\n});","map":{"version":3,"sources":["app/custom-sounds/client/lib/CustomSounds.js"],"names":["_createForOfIteratorHelperLoose","module","link","default","v","export","CustomSounds","Meteor","ReactiveVar","_","CachedCollectionManager","getURL","getCustomSoundId","sound","CustomSoundsClass","play","volume","loop","audio","document","querySelector","pause","currentTime","list","add","_id","name","extension","src","$","id","preload","append","get","set","remove","update","attr","load","random","getList","Object","values","sortBy","startup","onLogin","call","error","result"],"mappings":"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","sourcesContent":["import { Meteor } from 'meteor/meteor';\nimport { ReactiveVar } from 'meteor/reactive-var';\nimport _ from 'underscore';\n\nimport { CachedCollectionManager } from '../../../ui-cached-collection';\nimport { getURL } from '../../../utils/client';\n\nconst getCustomSoundId = (sound) => `custom-sound-${sound}`;\n\nclass CustomSoundsClass {\n\tconstructor() {\n\t\tthis.list = new ReactiveVar({});\n\t\tthis.add({ _id: 'chime', name: 'Chime', extension: 'mp3', src: getURL('sounds/chime.mp3') });\n\t\tthis.add({ _id: 'door', name: 'Door', extension: 'mp3', src: getURL('sounds/door.mp3') });\n\t\tthis.add({ _id: 'beep', name: 'Beep', extension: 'mp3', src: getURL('sounds/beep.mp3') });\n\t\tthis.add({ _id: 'chelle', name: 'Chelle', extension: 'mp3', src: getURL('sounds/chelle.mp3') });\n\t\tthis.add({ _id: 'ding', name: 'Ding', extension: 'mp3', src: getURL('sounds/ding.mp3') });\n\t\tthis.add({\n\t\t\t_id: 'droplet',\n\t\t\tname: 'Droplet',\n\t\t\textension: 'mp3',\n\t\t\tsrc: getURL('sounds/droplet.mp3'),\n\t\t});\n\t\tthis.add({\n\t\t\t_id: 'highbell',\n\t\t\tname: 'Highbell',\n\t\t\textension: 'mp3',\n\t\t\tsrc: getURL('sounds/highbell.mp3'),\n\t\t});\n\t\tthis.add({\n\t\t\t_id: 'seasons',\n\t\t\tname: 'Seasons',\n\t\t\textension: 'mp3',\n\t\t\tsrc: getURL('sounds/seasons.mp3'),\n\t\t});\n\t\tthis.add({\n\t\t\t_id: 'telephone',\n\t\t\tname: 'Telephone',\n\t\t\textension: 'mp3',\n\t\t\tsrc: getURL('sounds/telephone.mp3'),\n\t\t});\n\t}\n\n\tadd(sound) {\n\t\tif (!sound.src) {\n\t\t\tsound.src = this.getURL(sound);\n\t\t}\n\t\tconst audio = $('<audio />', { id: getCustomSoundId(sound._id), preload: true }).append($('<source />', { src: sound.src }));\n\t\tconst list = this.list.get();\n\t\tlist[sound._id] = sound;\n\t\tthis.list.set(list);\n\t\t$('body').append(audio);\n\t}\n\n\tremove(sound) {\n\t\tconst list = this.list.get();\n\t\tdelete list[sound._id];\n\t\tthis.list.set(list);\n\t\t$(`#${sound._id}`).remove();\n\t}\n\n\tupdate(sound) {\n\t\tconst audio = $(`#${sound._id}`);\n\t\tif (audio && audio[0]) {\n\t\t\tconst list = this.list.get();\n\t\t\tif (!sound.src) {\n\t\t\t\tsound.src = this.getURL(sound);\n\t\t\t}\n\t\t\tlist[sound._id] = sound;\n\t\t\tthis.list.set(list);\n\t\t\t$('source', audio).attr('src', sound.src);\n\t\t\taudio[0].load();\n\t\t} else {\n\t\t\tthis.add(sound);\n\t\t}\n\t}\n\n\tgetURL(sound) {\n\t\treturn getURL(`/custom-sounds/${sound._id}.${sound.extension}?_dc=${sound.random || 0}`);\n\t}\n\n\tgetList() {\n\t\tconst list = Object.values(this.list.get());\n\t\treturn _.sortBy(list, 'name');\n\t}\n\n\tplay = (sound, { volume = 1, loop = false } = {}) => {\n\t\tconst audio = document.querySelector(`#${getCustomSoundId(sound)}`);\n\t\tif (!audio || !audio.play) {\n\t\t\treturn;\n\t\t}\n\n\t\taudio.volume = volume;\n\t\taudio.loop = loop;\n\t\taudio.play();\n\n\t\treturn audio;\n\t};\n\n\tpause = (sound) => {\n\t\tconst audio = document.querySelector(`#${getCustomSoundId(sound)}`);\n\t\tif (!audio || !audio.pause) {\n\t\t\treturn;\n\t\t}\n\n\t\taudio.pause();\n\t\tif (audio.currentTime !== 0) {\n\t\t\taudio.currentTime = 0;\n\t\t}\n\t};\n}\n\nexport const CustomSounds = new CustomSoundsClass();\n\nMeteor.startup(() =>\n\tCachedCollectionManager.onLogin(() => {\n\t\tMeteor.call('listCustomSounds', (error, result) => {\n\t\t\tfor (const sound of result) {\n\t\t\t\tCustomSounds.add(sound);\n\t\t\t}\n\t\t});\n\t}),\n);\n"]},"sourceType":"module","hash":"d81c791571169a6e411388860e14b36d7bd303e0"}
