{"metadata":{},"options":{"assumptions":{},"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat/client/views/admin/settings/Setting.js","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","classProperties","classPrivateProperties","jsx","nullishCoalescingOperator","nullishCoalescingOperator","optionalChaining","optionalCatchBinding","optionalCatchBinding","classProperties","classPrivateProperties","classPrivateMethods","classProperties","classPrivateProperties","asyncGenerators","asyncGenerators","objectRestSpread","logicalAssignment"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"allowUndeclaredExports":true,"strictMode":false},"caller":{"name":"meteor","arch":"web.browser"},"sourceFileName":"client/views/admin/settings/Setting.js","filename":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat/client/views/admin/settings/Setting.js","targets":{"android":"95.0.0","chrome":"95.0.0","edge":"95.0.0","firefox":"78.0.0","ie":"10.0.0","ios":"15.0.0","opera":"81.0.0","safari":"15.1.0","samsung":"14.0.0"},"cloneInputAst":true,"browserslistConfigFile":false,"passPerPreset":false,"envName":"development","cwd":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat","root":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat","rootMode":"root","plugins":[{"key":"base$0","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0","visitor":{"Program":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true},"options":{"avoidModernSyntax":false,"enforceStrictMode":false,"dynamicImport":true,"generateLetDeclarations":true}},{"key":"transform-runtime","visitor":{"MemberExpression":{"enter":[null]},"ObjectPattern":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":{},"_verified":{},"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]}},"options":{"version":"7.16.5","helpers":true,"useESModules":false,"corejs":false}},{"key":"proposal-class-properties","visitor":{"PrivateName":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{"loose":true}},{"key":"transform-react-jsx","visitor":{"_exploded":{},"_verified":{},"JSXNamespacedName":{"enter":[null]},"JSXSpreadChild":{"enter":[null]},"Program":{"enter":[null]},"JSXElement":{"exit":[null]},"JSXFragment":{"exit":[null]},"JSXAttribute":{"enter":[null]}},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","runtime":"classic","throwIfNamespace":true,"useBuiltIns":false}},{"key":"transform-react-display-name","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-react-pure-annotations","visitor":{"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"syntax-nullish-coalescing-operator","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-nullish-coalescing-operator","visitor":{"_exploded":{},"_verified":{},"LogicalExpression":{"enter":[null]}},"options":{}},{"key":"syntax-optional-chaining","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-optional-chaining","visitor":{"_exploded":true,"OptionalCallExpression":{"enter":[null]},"OptionalMemberExpression":{"enter":[null]},"_verified":true},"options":{}},{"key":"syntax-optional-catch-binding","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-optional-catch-binding","visitor":{"_exploded":{},"_verified":{},"CatchClause":{"enter":[null]}},"options":{}},{"key":"syntax-class-properties","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-class-properties","visitor":{"PrivateName":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{}},{"key":"syntax-async-generators","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-async-generator-functions","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]}},"options":{}},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-object-rest-spread","visitor":{"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"proposal-logical-assignment-operators","visitor":{"_exploded":{},"_verified":{},"AssignmentExpression":{"enter":[null]}},"options":{}},{"key":"transform-literals","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-template-literals","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-parameters","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{}},{"key":"transform-exponentiation-operator","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}}],"presets":[],"generatorOpts":{"filename":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat/client/views/admin/settings/Setting.js","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"client/views/admin/settings/Setting.js"}},"code":"let _extends;\n\nmodule.link(\"@babel/runtime/helpers/extends\", {\n  default(v) {\n    _extends = v;\n  }\n\n}, 0);\n\nlet _objectSpread;\n\nmodule.link(\"@babel/runtime/helpers/objectSpread2\", {\n  default(v) {\n    _objectSpread = v;\n  }\n\n}, 1);\nlet useDebouncedCallback;\nmodule.link(\"@rocket.chat/fuselage-hooks\", {\n  useDebouncedCallback(v) {\n    useDebouncedCallback = v;\n  }\n\n}, 0);\nlet React, useEffect, useMemo, useState, useCallback;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  },\n\n  useEffect(v) {\n    useEffect = v;\n  },\n\n  useMemo(v) {\n    useMemo = v;\n  },\n\n  useState(v) {\n    useState = v;\n  },\n\n  useCallback(v) {\n    useCallback = v;\n  }\n\n}, 1);\nlet MarkdownText;\nmodule.link(\"../../../components/MarkdownText\", {\n  default(v) {\n    MarkdownText = v;\n  }\n\n}, 2);\nlet useEditableSetting, useEditableSettingsDispatch;\nmodule.link(\"../../../contexts/EditableSettingsContext\", {\n  useEditableSetting(v) {\n    useEditableSetting = v;\n  },\n\n  useEditableSettingsDispatch(v) {\n    useEditableSettingsDispatch = v;\n  }\n\n}, 3);\nlet useSettingStructure;\nmodule.link(\"../../../contexts/SettingsContext\", {\n  useSettingStructure(v) {\n    useSettingStructure = v;\n  }\n\n}, 4);\nlet useTranslation;\nmodule.link(\"../../../contexts/TranslationContext\", {\n  useTranslation(v) {\n    useTranslation = v;\n  }\n\n}, 5);\nlet MemoizedSetting;\nmodule.link(\"./MemoizedSetting\", {\n  default(v) {\n    MemoizedSetting = v;\n  }\n\n}, 6);\nlet SettingSkeleton;\nmodule.link(\"./SettingSkeleton\", {\n  default(v) {\n    SettingSkeleton = v;\n  }\n\n}, 7);\n\nfunction Setting(_ref) {\n  let {\n    className,\n    settingId,\n    sectionChanged\n  } = _ref;\n  const setting = useEditableSetting(settingId);\n  const persistedSetting = useSettingStructure(settingId);\n  const dispatch = useEditableSettingsDispatch();\n  const update = useDebouncedCallback(_ref2 => {\n    let {\n      value,\n      editor\n    } = _ref2;\n\n    if (!persistedSetting) {\n      return;\n    }\n\n    dispatch([_objectSpread(_objectSpread(_objectSpread({\n      _id: persistedSetting._id\n    }, value !== undefined && {\n      value\n    }), editor !== undefined && {\n      editor\n    }), {}, {\n      changed: JSON.stringify(persistedSetting.value) !== JSON.stringify(value) || JSON.stringify(persistedSetting.editor) !== JSON.stringify(editor)\n    })]);\n  }, 230, [persistedSetting, dispatch]);\n  const t = useTranslation();\n  const [value, setValue] = useState(setting.value);\n  const [editor, setEditor] = useState(setting.editor);\n  useEffect(() => {\n    setValue(setting.value);\n  }, [setting.value]);\n  useEffect(() => {\n    setEditor(setting.editor);\n  }, [setting.editor]);\n  const onChangeValue = useCallback(value => {\n    setValue(value);\n    update({\n      value\n    });\n  }, [update]);\n  const onChangeEditor = useCallback(editor => {\n    setEditor(editor);\n    update({\n      editor\n    });\n  }, [update]);\n  const onResetButtonClick = useCallback(() => {\n    setValue(setting.value);\n    setEditor(setting.editor);\n    update({\n      value: persistedSetting.packageValue,\n      editor: persistedSetting.packageEditor\n    });\n  }, [setting.value, setting.editor, update, persistedSetting]);\n  const {\n    _id,\n    disabled,\n    disableReset,\n    readonly,\n    type,\n    packageEditor,\n    packageValue,\n    i18nLabel,\n    i18nDescription,\n    alert,\n    invisible\n  } = setting;\n  const label = i18nLabel && t(i18nLabel) || _id || t(_id);\n  const hint = useMemo(() => t.has(i18nDescription) && /*#__PURE__*/React.createElement(MarkdownText, {\n    preserveHtml: true,\n    content: t(i18nDescription)\n  }), [i18nDescription, t]);\n  const callout = useMemo(() => alert && /*#__PURE__*/React.createElement(\"span\", {\n    dangerouslySetInnerHTML: {\n      __html: t(alert)\n    }\n  }), [alert, t]);\n  const hasResetButton = !disableReset && !readonly && type !== 'asset' && (JSON.stringify(packageEditor) !== JSON.stringify(editor) || JSON.stringify(value) !== JSON.stringify(packageValue)) && !disabled;\n  return /*#__PURE__*/React.createElement(MemoizedSetting, _extends({\n    className: className,\n    type: type,\n    label: label,\n    hint: hint,\n    callout: callout,\n    sectionChanged: sectionChanged\n  }, setting, {\n    value: value,\n    editor: editor,\n    hasResetButton: hasResetButton,\n    onChangeValue: onChangeValue,\n    onChangeEditor: onChangeEditor,\n    onResetButtonClick: onResetButtonClick,\n    invisible: invisible\n  }));\n}\n\nmodule.exportDefault(Object.assign(Setting, {\n  Memoized: MemoizedSetting,\n  Skeleton: SettingSkeleton\n}));","map":{"version":3,"sources":["client/views/admin/settings/Setting.js"],"names":["_extends","module","link","default","v","_objectSpread","useDebouncedCallback","React","useEffect","useMemo","useState","useCallback","MarkdownText","useEditableSetting","useEditableSettingsDispatch","useSettingStructure","useTranslation","MemoizedSetting","SettingSkeleton","Setting","className","settingId","sectionChanged","setting","persistedSetting","dispatch","update","value","editor","_id","undefined","changed","JSON","stringify","t","setValue","setEditor","onChangeValue","onChangeEditor","onResetButtonClick","packageValue","packageEditor","disabled","disableReset","readonly","type","i18nLabel","i18nDescription","alert","invisible","label","hint","has","callout","__html","hasResetButton","exportDefault","Object","assign","Memoized","Skeleton"],"mappings":"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","sourcesContent":["import { useDebouncedCallback } from '@rocket.chat/fuselage-hooks';\nimport React, { useEffect, useMemo, useState, useCallback } from 'react';\n\nimport MarkdownText from '../../../components/MarkdownText';\nimport { useEditableSetting, useEditableSettingsDispatch } from '../../../contexts/EditableSettingsContext';\nimport { useSettingStructure } from '../../../contexts/SettingsContext';\nimport { useTranslation } from '../../../contexts/TranslationContext';\nimport MemoizedSetting from './MemoizedSetting';\nimport SettingSkeleton from './SettingSkeleton';\n\nfunction Setting({ className, settingId, sectionChanged }) {\n\tconst setting = useEditableSetting(settingId);\n\n\tconst persistedSetting = useSettingStructure(settingId);\n\tconst dispatch = useEditableSettingsDispatch();\n\n\tconst update = useDebouncedCallback(\n\t\t({ value, editor }) => {\n\t\t\tif (!persistedSetting) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tdispatch([\n\t\t\t\t{\n\t\t\t\t\t_id: persistedSetting._id,\n\t\t\t\t\t...(value !== undefined && { value }),\n\t\t\t\t\t...(editor !== undefined && { editor }),\n\t\t\t\t\tchanged:\n\t\t\t\t\t\tJSON.stringify(persistedSetting.value) !== JSON.stringify(value) ||\n\t\t\t\t\t\tJSON.stringify(persistedSetting.editor) !== JSON.stringify(editor),\n\t\t\t\t},\n\t\t\t]);\n\t\t},\n\t\t230,\n\t\t[persistedSetting, dispatch],\n\t);\n\n\tconst t = useTranslation();\n\n\tconst [value, setValue] = useState(setting.value);\n\tconst [editor, setEditor] = useState(setting.editor);\n\n\tuseEffect(() => {\n\t\tsetValue(setting.value);\n\t}, [setting.value]);\n\n\tuseEffect(() => {\n\t\tsetEditor(setting.editor);\n\t}, [setting.editor]);\n\n\tconst onChangeValue = useCallback(\n\t\t(value) => {\n\t\t\tsetValue(value);\n\t\t\tupdate({ value });\n\t\t},\n\t\t[update],\n\t);\n\n\tconst onChangeEditor = useCallback(\n\t\t(editor) => {\n\t\t\tsetEditor(editor);\n\t\t\tupdate({ editor });\n\t\t},\n\t\t[update],\n\t);\n\n\tconst onResetButtonClick = useCallback(() => {\n\t\tsetValue(setting.value);\n\t\tsetEditor(setting.editor);\n\t\tupdate({\n\t\t\tvalue: persistedSetting.packageValue,\n\t\t\teditor: persistedSetting.packageEditor,\n\t\t});\n\t}, [setting.value, setting.editor, update, persistedSetting]);\n\n\tconst { _id, disabled, disableReset, readonly, type, packageEditor, packageValue, i18nLabel, i18nDescription, alert, invisible } =\n\t\tsetting;\n\n\tconst label = (i18nLabel && t(i18nLabel)) || _id || t(_id);\n\tconst hint = useMemo(\n\t\t() => t.has(i18nDescription) && <MarkdownText preserveHtml={true} content={t(i18nDescription)} />,\n\t\t[i18nDescription, t],\n\t);\n\tconst callout = useMemo(() => alert && <span dangerouslySetInnerHTML={{ __html: t(alert) }} />, [alert, t]);\n\tconst hasResetButton =\n\t\t!disableReset &&\n\t\t!readonly &&\n\t\ttype !== 'asset' &&\n\t\t(JSON.stringify(packageEditor) !== JSON.stringify(editor) || JSON.stringify(value) !== JSON.stringify(packageValue)) &&\n\t\t!disabled;\n\n\treturn (\n\t\t<MemoizedSetting\n\t\t\tclassName={className}\n\t\t\ttype={type}\n\t\t\tlabel={label}\n\t\t\thint={hint}\n\t\t\tcallout={callout}\n\t\t\tsectionChanged={sectionChanged}\n\t\t\t{...setting}\n\t\t\tvalue={value}\n\t\t\teditor={editor}\n\t\t\thasResetButton={hasResetButton}\n\t\t\tonChangeValue={onChangeValue}\n\t\t\tonChangeEditor={onChangeEditor}\n\t\t\tonResetButtonClick={onResetButtonClick}\n\t\t\tinvisible={invisible}\n\t\t/>\n\t);\n}\n\nexport default Object.assign(Setting, {\n\tMemoized: MemoizedSetting,\n\tSkeleton: SettingSkeleton,\n});\n"]},"sourceType":"module","hash":"ff17045a6ceb49d123ca8f9e9050765eda6499fd"}
