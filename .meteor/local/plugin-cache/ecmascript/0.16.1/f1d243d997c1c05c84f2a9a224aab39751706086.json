{"metadata":{},"options":{"assumptions":{},"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat/client/views/admin/emailInbox/EmailInboxForm.js","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","classProperties","classPrivateProperties","jsx","nullishCoalescingOperator","nullishCoalescingOperator","optionalChaining","optionalCatchBinding","optionalCatchBinding","classProperties","classPrivateProperties","classPrivateMethods","classProperties","classPrivateProperties","asyncGenerators","asyncGenerators","objectRestSpread","logicalAssignment"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"allowUndeclaredExports":true,"strictMode":false},"caller":{"name":"meteor","arch":"web.browser.legacy"},"sourceFileName":"client/views/admin/emailInbox/EmailInboxForm.js","filename":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat/client/views/admin/emailInbox/EmailInboxForm.js","targets":{"android":"95.0.0","chrome":"95.0.0","edge":"95.0.0","firefox":"78.0.0","ie":"10.0.0","ios":"15.0.0","opera":"81.0.0","safari":"15.1.0","samsung":"14.0.0"},"cloneInputAst":true,"browserslistConfigFile":false,"passPerPreset":false,"envName":"development","cwd":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat","root":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat","rootMode":"root","plugins":[{"key":"base$0","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0","visitor":{"Program":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true},"options":{"avoidModernSyntax":true,"enforceStrictMode":false,"dynamicImport":true}},{"key":"transform-runtime","visitor":{"MemberExpression":{"enter":[null]},"ObjectPattern":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":{},"_verified":{},"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]}},"options":{"version":"7.16.5","helpers":true,"useESModules":false,"corejs":false}},{"key":"proposal-class-properties","visitor":{"PrivateName":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{"loose":true}},{"key":"base$0$3","visitor":{"FunctionExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$4","visitor":{"ForInStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-react-jsx","visitor":{"_exploded":{},"_verified":{},"JSXNamespacedName":{"enter":[null]},"JSXSpreadChild":{"enter":[null]},"Program":{"enter":[null]},"JSXElement":{"exit":[null]},"JSXFragment":{"exit":[null]},"JSXAttribute":{"enter":[null]}},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","runtime":"classic","throwIfNamespace":true,"useBuiltIns":false}},{"key":"transform-react-display-name","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-react-pure-annotations","visitor":{"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"syntax-nullish-coalescing-operator","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-nullish-coalescing-operator","visitor":{"_exploded":{},"_verified":{},"LogicalExpression":{"enter":[null]}},"options":{}},{"key":"syntax-optional-chaining","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-optional-chaining","visitor":{"_exploded":true,"OptionalCallExpression":{"enter":[null]},"OptionalMemberExpression":{"enter":[null]},"_verified":true},"options":{}},{"key":"syntax-optional-catch-binding","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-optional-catch-binding","visitor":{"_exploded":{},"_verified":{},"CatchClause":{"enter":[null]}},"options":{}},{"key":"syntax-class-properties","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-class-properties","visitor":{"PrivateName":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{}},{"key":"syntax-async-generators","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-async-generator-functions","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]}},"options":{}},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-object-rest-spread","visitor":{"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"proposal-logical-assignment-operators","visitor":{"_exploded":{},"_verified":{},"AssignmentExpression":{"enter":[null]}},"options":{}},{"key":"transform-arrow-functions","visitor":{"ArrowFunctionExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-block-scoped-functions","visitor":{"BlockStatement":{"enter":[null]},"SwitchCase":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-block-scoping","visitor":{"VariableDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"_exploded":true,"BlockStatement":{"enter":[null]},"SwitchStatement":{"enter":[null]},"Program":{"enter":[null]},"_verified":true,"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"transform-classes","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-computed-properties","visitor":{"ObjectExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-destructuring","visitor":{"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"VariableDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"transform-for-of","visitor":{"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-literals","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-object-super","visitor":{"ObjectExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-parameters","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{}},{"key":"transform-shorthand-properties","visitor":{"ObjectMethod":{"enter":[null]},"ObjectProperty":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-spread","visitor":{"ArrayExpression":{"enter":[null]},"CallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-sticky-regex","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-template-literals","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-typeof-symbol","visitor":{"UnaryExpression":{"enter":[null]},"_exploded":true,"_verified":true,"BlockStatement":{"enter":[null]},"CatchClause":{"enter":[null]},"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"Program":{"enter":[null]},"ObjectMethod":{"enter":[null]},"SwitchStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ForOfStatement":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"StaticBlock":{"enter":[null]},"TSModuleBlock":{"enter":[null]},"AssignmentPattern":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectPattern":{"enter":[null]}},"options":{}},{"key":"transform-unicode-regex","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-property-literals","visitor":{"ObjectProperty":{"exit":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-exponentiation-operator","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"regenerator-transform","visitor":{"_exploded":true,"_verified":true,"ObjectMethod":{"enter":[null],"exit":[null]},"ClassMethod":{"enter":[null],"exit":[null]},"ClassPrivateMethod":{"enter":[null],"exit":[null]},"FunctionDeclaration":{"exit":[null]},"FunctionExpression":{"exit":[null]},"ArrowFunctionExpression":{"exit":[null]}},"options":{}}],"presets":[],"generatorOpts":{"filename":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat/client/views/admin/emailInbox/EmailInboxForm.js","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"client/views/admin/emailInbox/EmailInboxForm.js"}},"code":"var _regeneratorRuntime;\n\nmodule.link(\"@babel/runtime/regenerator\", {\n  default: function (v) {\n    _regeneratorRuntime = v;\n  }\n}, 0);\n\nvar _slicedToArray;\n\nmodule.link(\"@babel/runtime/helpers/slicedToArray\", {\n  default: function (v) {\n    _slicedToArray = v;\n  }\n}, 1);\nvar Accordion, Button, ButtonGroup, TextInput, TextAreaInput, Field, ToggleSwitch, FieldGroup, Box, Margins;\nmodule.link(\"@rocket.chat/fuselage\", {\n  Accordion: function (v) {\n    Accordion = v;\n  },\n  Button: function (v) {\n    Button = v;\n  },\n  ButtonGroup: function (v) {\n    ButtonGroup = v;\n  },\n  TextInput: function (v) {\n    TextInput = v;\n  },\n  TextAreaInput: function (v) {\n    TextAreaInput = v;\n  },\n  Field: function (v) {\n    Field = v;\n  },\n  ToggleSwitch: function (v) {\n    ToggleSwitch = v;\n  },\n  FieldGroup: function (v) {\n    FieldGroup = v;\n  },\n  Box: function (v) {\n    Box = v;\n  },\n  Margins: function (v) {\n    Margins = v;\n  }\n}, 0);\nvar useMutableCallback;\nmodule.link(\"@rocket.chat/fuselage-hooks\", {\n  useMutableCallback: function (v) {\n    useMutableCallback = v;\n  }\n}, 1);\nvar React, useCallback, useState;\nmodule.link(\"react\", {\n  \"default\": function (v) {\n    React = v;\n  },\n  useCallback: function (v) {\n    useCallback = v;\n  },\n  useState: function (v) {\n    useState = v;\n  }\n}, 2);\nvar validateEmail;\nmodule.link(\"../../../../lib/emailValidator\", {\n  validateEmail: function (v) {\n    validateEmail = v;\n  }\n}, 3);\nvar AutoCompleteDepartment;\nmodule.link(\"../../../components/AutoCompleteDepartment\", {\n  \"default\": function (v) {\n    AutoCompleteDepartment = v;\n  }\n}, 4);\nvar GenericModal;\nmodule.link(\"../../../components/GenericModal\", {\n  \"default\": function (v) {\n    GenericModal = v;\n  }\n}, 5);\nvar Page;\nmodule.link(\"../../../components/Page\", {\n  \"default\": function (v) {\n    Page = v;\n  }\n}, 6);\nvar useSetModal;\nmodule.link(\"../../../contexts/ModalContext\", {\n  useSetModal: function (v) {\n    useSetModal = v;\n  }\n}, 7);\nvar useRoute;\nmodule.link(\"../../../contexts/RouterContext\", {\n  useRoute: function (v) {\n    useRoute = v;\n  }\n}, 8);\nvar useEndpoint;\nmodule.link(\"../../../contexts/ServerContext\", {\n  useEndpoint: function (v) {\n    useEndpoint = v;\n  }\n}, 9);\nvar useToastMessageDispatch;\nmodule.link(\"../../../contexts/ToastMessagesContext\", {\n  useToastMessageDispatch: function (v) {\n    useToastMessageDispatch = v;\n  }\n}, 10);\nvar useTranslation;\nmodule.link(\"../../../contexts/TranslationContext\", {\n  useTranslation: function (v) {\n    useTranslation = v;\n  }\n}, 11);\nvar useComponentDidUpdate;\nmodule.link(\"../../../hooks/useComponentDidUpdate\", {\n  useComponentDidUpdate: function (v) {\n    useComponentDidUpdate = v;\n  }\n}, 12);\nvar useForm;\nmodule.link(\"../../../hooks/useForm\", {\n  useForm: function (v) {\n    useForm = v;\n  }\n}, 13);\nvar initialValues = {\n  active: true,\n  name: '',\n  email: '',\n  description: '',\n  senderInfo: '',\n  department: '',\n  // SMTP\n  smtpServer: '',\n  smtpPort: 587,\n  smtpUsername: '',\n  smtpPassword: '',\n  smtpSecure: false,\n  // IMAP\n  imapServer: '',\n  imapPort: 993,\n  imapUsername: '',\n  imapPassword: '',\n  imapSecure: false\n};\n\nvar getInitialValues = function (data) {\n  var _smtp$server, _smtp$port, _smtp$username, _smtp$password, _smtp$secure, _imap$server, _imap$port, _imap$username, _imap$password, _imap$secure;\n\n  if (!data) {\n    return initialValues;\n  }\n\n  var active = data.active,\n      name = data.name,\n      email = data.email,\n      description = data.description,\n      senderInfo = data.senderInfo,\n      department = data.department,\n      smtp = data.smtp,\n      imap = data.imap;\n  return {\n    active: active !== null && active !== void 0 ? active : true,\n    name: name !== null && name !== void 0 ? name : '',\n    email: email !== null && email !== void 0 ? email : '',\n    description: description !== null && description !== void 0 ? description : '',\n    senderInfo: senderInfo !== null && senderInfo !== void 0 ? senderInfo : '',\n    department: department !== null && department !== void 0 ? department : '',\n    // SMTP\n    smtpServer: (_smtp$server = smtp.server) !== null && _smtp$server !== void 0 ? _smtp$server : '',\n    smtpPort: (_smtp$port = smtp.port) !== null && _smtp$port !== void 0 ? _smtp$port : 587,\n    smtpUsername: (_smtp$username = smtp.username) !== null && _smtp$username !== void 0 ? _smtp$username : '',\n    smtpPassword: (_smtp$password = smtp.password) !== null && _smtp$password !== void 0 ? _smtp$password : '',\n    smtpSecure: (_smtp$secure = smtp.secure) !== null && _smtp$secure !== void 0 ? _smtp$secure : false,\n    // IMAP\n    imapServer: (_imap$server = imap.server) !== null && _imap$server !== void 0 ? _imap$server : '',\n    imapPort: (_imap$port = imap.port) !== null && _imap$port !== void 0 ? _imap$port : 993,\n    imapUsername: (_imap$username = imap.username) !== null && _imap$username !== void 0 ? _imap$username : '',\n    imapPassword: (_imap$password = imap.password) !== null && _imap$password !== void 0 ? _imap$password : '',\n    imapSecure: (_imap$secure = imap.secure) !== null && _imap$secure !== void 0 ? _imap$secure : false\n  };\n};\n\nfunction EmailInboxForm(_ref) {\n  var id = _ref.id,\n      data = _ref.data;\n  var t = useTranslation();\n  var dispatchToastMessage = useToastMessageDispatch();\n  var setModal = useSetModal();\n\n  var _useState = useState(),\n      _useState2 = _slicedToArray(_useState, 2),\n      emailError = _useState2[0],\n      setEmailError = _useState2[1];\n\n  var _useForm = useForm(getInitialValues(data)),\n      values = _useForm.values,\n      handlers = _useForm.handlers,\n      hasUnsavedChanges = _useForm.hasUnsavedChanges;\n\n  var handleActive = handlers.handleActive,\n      handleName = handlers.handleName,\n      handleEmail = handlers.handleEmail,\n      handleDescription = handlers.handleDescription,\n      handleSenderInfo = handlers.handleSenderInfo,\n      handleDepartment = handlers.handleDepartment,\n      handleSmtpServer = handlers.handleSmtpServer,\n      handleSmtpPort = handlers.handleSmtpPort,\n      handleSmtpUsername = handlers.handleSmtpUsername,\n      handleSmtpPassword = handlers.handleSmtpPassword,\n      handleSmtpSecure = handlers.handleSmtpSecure,\n      handleImapServer = handlers.handleImapServer,\n      handleImapPort = handlers.handleImapPort,\n      handleImapUsername = handlers.handleImapUsername,\n      handleImapPassword = handlers.handleImapPassword,\n      handleImapSecure = handlers.handleImapSecure;\n  var active = values.active,\n      name = values.name,\n      email = values.email,\n      description = values.description,\n      senderInfo = values.senderInfo,\n      department = values.department,\n      smtpServer = values.smtpServer,\n      smtpPort = values.smtpPort,\n      smtpUsername = values.smtpUsername,\n      smtpPassword = values.smtpPassword,\n      smtpSecure = values.smtpSecure,\n      imapServer = values.imapServer,\n      imapPort = values.imapPort,\n      imapUsername = values.imapUsername,\n      imapPassword = values.imapPassword,\n      imapSecure = values.imapSecure;\n  var router = useRoute('admin-email-inboxes');\n  var close = useCallback(function () {\n    return router.push({});\n  }, [router]);\n  var saveEmailInbox = useEndpoint('POST', 'email-inbox');\n  var deleteAction = useEndpoint('DELETE', \"email-inbox/\" + id);\n  var emailAlreadyExistsAction = useEndpoint('GET', \"email-inbox.search?email=\" + email);\n  useComponentDidUpdate(function () {\n    setEmailError(!validateEmail(email) ? t('Validate_email_address') : null);\n  }, [t, email]);\n  useComponentDidUpdate(function () {\n    !email && setEmailError(null);\n  }, [email]);\n  var handleRemoveClick = useMutableCallback(function () {\n    function _callee() {\n      var result;\n      return _regeneratorRuntime.async(function () {\n        function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return _regeneratorRuntime.awrap(deleteAction());\n\n              case 2:\n                result = _context.sent;\n\n                if (result.success === true) {\n                  close();\n                }\n\n              case 4:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }\n\n        return _callee$;\n      }(), null, null, null, Promise);\n    }\n\n    return _callee;\n  }());\n  var handleDelete = useMutableCallback(function (e) {\n    e.stopPropagation();\n\n    var onDeleteManager = function () {\n      function _callee2() {\n        return _regeneratorRuntime.async(function () {\n          function _callee2$(_context2) {\n            while (1) {\n              switch (_context2.prev = _context2.next) {\n                case 0:\n                  _context2.prev = 0;\n                  _context2.next = 3;\n                  return _regeneratorRuntime.awrap(handleRemoveClick());\n\n                case 3:\n                  dispatchToastMessage({\n                    type: 'success',\n                    message: t('Removed')\n                  });\n                  _context2.next = 9;\n                  break;\n\n                case 6:\n                  _context2.prev = 6;\n                  _context2.t0 = _context2[\"catch\"](0);\n                  dispatchToastMessage({\n                    type: 'error',\n                    message: _context2.t0\n                  });\n\n                case 9:\n                  setModal();\n\n                case 10:\n                case \"end\":\n                  return _context2.stop();\n              }\n            }\n          }\n\n          return _callee2$;\n        }(), null, null, [[0, 6]], Promise);\n      }\n\n      return _callee2;\n    }();\n\n    setModal( /*#__PURE__*/React.createElement(GenericModal, {\n      variant: \"danger\",\n      onConfirm: onDeleteManager,\n      onCancel: function () {\n        return setModal();\n      },\n      confirmText: t('Delete')\n    }, t('You_will_not_be_able_to_recover_email_inbox')));\n  });\n  var handleSave = useMutableCallback(function () {\n    function _callee3() {\n      var smtp, imap, departmentValue, payload;\n      return _regeneratorRuntime.async(function () {\n        function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                smtp = {\n                  server: smtpServer,\n                  port: parseInt(smtpPort),\n                  username: smtpUsername,\n                  password: smtpPassword,\n                  secure: smtpSecure\n                };\n                imap = {\n                  server: imapServer,\n                  port: parseInt(imapPort),\n                  username: imapUsername,\n                  password: imapPassword,\n                  secure: imapSecure\n                };\n                departmentValue = department.value;\n                payload = {\n                  active: active,\n                  name: name,\n                  email: email,\n                  description: description,\n                  senderInfo: senderInfo,\n                  department: departmentValue,\n                  smtp: smtp,\n                  imap: imap\n                };\n\n                if (id) {\n                  payload._id = id;\n                }\n\n                _context3.prev = 5;\n                _context3.next = 8;\n                return _regeneratorRuntime.awrap(saveEmailInbox(payload));\n\n              case 8:\n                dispatchToastMessage({\n                  type: 'success',\n                  message: t('Saved')\n                });\n                close();\n                _context3.next = 15;\n                break;\n\n              case 12:\n                _context3.prev = 12;\n                _context3.t0 = _context3[\"catch\"](5);\n                dispatchToastMessage({\n                  type: 'error',\n                  message: _context3.t0\n                });\n\n              case 15:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }\n\n        return _callee3$;\n      }(), null, null, [[5, 12]], Promise);\n    }\n\n    return _callee3;\n  }());\n  var checkEmailExists = useMutableCallback(function () {\n    function _callee4() {\n      var _await$emailAlreadyEx, emailInbox;\n\n      return _regeneratorRuntime.async(function () {\n        function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                if (!(!email && !validateEmail(email))) {\n                  _context4.next = 2;\n                  break;\n                }\n\n                return _context4.abrupt(\"return\");\n\n              case 2:\n                _context4.next = 4;\n                return _regeneratorRuntime.awrap(emailAlreadyExistsAction());\n\n              case 4:\n                _await$emailAlreadyEx = _context4.sent;\n                emailInbox = _await$emailAlreadyEx.emailInbox;\n\n                if (!(!emailInbox || id && emailInbox._id === id)) {\n                  _context4.next = 8;\n                  break;\n                }\n\n                return _context4.abrupt(\"return\");\n\n              case 8:\n                setEmailError(t('Email_already_exists'));\n\n              case 9:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }\n\n        return _callee4$;\n      }(), null, null, null, Promise);\n    }\n\n    return _callee4;\n  }());\n  var canSave = hasUnsavedChanges && name && email && validateEmail(email) && !emailError && smtpServer && smtpPort && smtpUsername && smtpPassword && imapServer && imapPort && imapUsername && imapPassword;\n  return /*#__PURE__*/React.createElement(Page.ScrollableContentWithShadow, null, /*#__PURE__*/React.createElement(Box, {\n    maxWidth: \"x600\",\n    w: \"full\",\n    alignSelf: \"center\"\n  }, /*#__PURE__*/React.createElement(Accordion, null, /*#__PURE__*/React.createElement(Accordion.Item, {\n    defaultExpanded: true,\n    title: t('Inbox_Info')\n  }, /*#__PURE__*/React.createElement(FieldGroup, null, /*#__PURE__*/React.createElement(Field, null, /*#__PURE__*/React.createElement(Field.Label, {\n    display: \"flex\",\n    justifyContent: \"space-between\",\n    w: \"full\"\n  }, t('Active'), /*#__PURE__*/React.createElement(ToggleSwitch, {\n    checked: active,\n    onChange: handleActive\n  }))), /*#__PURE__*/React.createElement(Field, null, /*#__PURE__*/React.createElement(Field.Label, null, t('Name'), \"*\"), /*#__PURE__*/React.createElement(Field.Row, null, /*#__PURE__*/React.createElement(TextInput, {\n    value: name,\n    onChange: handleName\n  }))), /*#__PURE__*/React.createElement(Field, null, /*#__PURE__*/React.createElement(Field.Label, null, t('Email'), \"*\"), /*#__PURE__*/React.createElement(Field.Row, null, /*#__PURE__*/React.createElement(TextInput, {\n    onBlur: checkEmailExists,\n    error: emailError,\n    value: email,\n    onChange: handleEmail\n  })), /*#__PURE__*/React.createElement(Field.Error, null, t(emailError))), /*#__PURE__*/React.createElement(Field, null, /*#__PURE__*/React.createElement(Field.Label, null, t('Description')), /*#__PURE__*/React.createElement(Field.Row, null, /*#__PURE__*/React.createElement(TextAreaInput, {\n    value: description,\n    rows: 4,\n    onChange: handleDescription\n  }))), /*#__PURE__*/React.createElement(Field, null, /*#__PURE__*/React.createElement(Field.Label, null, t('Sender_Info')), /*#__PURE__*/React.createElement(Field.Row, null, /*#__PURE__*/React.createElement(TextInput, {\n    value: senderInfo,\n    onChange: handleSenderInfo,\n    placeholder: t('Optional')\n  })), /*#__PURE__*/React.createElement(Field.Hint, null, t('Will_Appear_In_From'))), /*#__PURE__*/React.createElement(Field, null, /*#__PURE__*/React.createElement(Field.Label, null, t('Department')), /*#__PURE__*/React.createElement(Field.Row, null, /*#__PURE__*/React.createElement(AutoCompleteDepartment, {\n    value: department,\n    onChange: handleDepartment\n  })), /*#__PURE__*/React.createElement(Field.Hint, null, t('Only_Members_Selected_Department_Can_View_Channel'))))), /*#__PURE__*/React.createElement(Accordion.Item, {\n    title: t('Configure_Outgoing_Mail_SMTP')\n  }, /*#__PURE__*/React.createElement(FieldGroup, null, /*#__PURE__*/React.createElement(Field, null, /*#__PURE__*/React.createElement(Field.Label, null, t('Server'), \"*\"), /*#__PURE__*/React.createElement(Field.Row, null, /*#__PURE__*/React.createElement(TextInput, {\n    value: smtpServer,\n    onChange: handleSmtpServer\n  }))), /*#__PURE__*/React.createElement(Field, null, /*#__PURE__*/React.createElement(Field.Label, null, t('Port'), \"*\"), /*#__PURE__*/React.createElement(Field.Row, null, /*#__PURE__*/React.createElement(TextInput, {\n    type: \"number\",\n    value: smtpPort,\n    onChange: handleSmtpPort\n  }))), /*#__PURE__*/React.createElement(Field, null, /*#__PURE__*/React.createElement(Field.Label, null, t('Username'), \"*\"), /*#__PURE__*/React.createElement(Field.Row, null, /*#__PURE__*/React.createElement(TextInput, {\n    value: smtpUsername,\n    onChange: handleSmtpUsername\n  }))), /*#__PURE__*/React.createElement(Field, null, /*#__PURE__*/React.createElement(Field.Label, null, t('Password'), \"*\"), /*#__PURE__*/React.createElement(Field.Row, null, /*#__PURE__*/React.createElement(TextInput, {\n    type: \"password\",\n    value: smtpPassword,\n    onChange: handleSmtpPassword\n  }))), /*#__PURE__*/React.createElement(Field, null, /*#__PURE__*/React.createElement(Field.Label, {\n    display: \"flex\",\n    justifyContent: \"space-between\",\n    w: \"full\"\n  }, t('Connect_SSL_TLS'), /*#__PURE__*/React.createElement(ToggleSwitch, {\n    checked: smtpSecure,\n    onChange: handleSmtpSecure\n  }))))), /*#__PURE__*/React.createElement(Accordion.Item, {\n    title: t('Configure_Incoming_Mail_IMAP')\n  }, /*#__PURE__*/React.createElement(FieldGroup, null, /*#__PURE__*/React.createElement(Field, null, /*#__PURE__*/React.createElement(Field.Label, null, t('Server'), \"*\"), /*#__PURE__*/React.createElement(Field.Row, null, /*#__PURE__*/React.createElement(TextInput, {\n    value: imapServer,\n    onChange: handleImapServer\n  }))), /*#__PURE__*/React.createElement(Field, null, /*#__PURE__*/React.createElement(Field.Label, null, t('Port'), \"*\"), /*#__PURE__*/React.createElement(Field.Row, null, /*#__PURE__*/React.createElement(TextInput, {\n    type: \"number\",\n    value: imapPort,\n    onChange: handleImapPort\n  }))), /*#__PURE__*/React.createElement(Field, null, /*#__PURE__*/React.createElement(Field.Label, null, t('Username'), \"*\"), /*#__PURE__*/React.createElement(Field.Row, null, /*#__PURE__*/React.createElement(TextInput, {\n    value: imapUsername,\n    onChange: handleImapUsername\n  }))), /*#__PURE__*/React.createElement(Field, null, /*#__PURE__*/React.createElement(Field.Label, null, t('Password'), \"*\"), /*#__PURE__*/React.createElement(Field.Row, null, /*#__PURE__*/React.createElement(TextInput, {\n    type: \"password\",\n    value: imapPassword,\n    onChange: handleImapPassword\n  }))), /*#__PURE__*/React.createElement(Field, null, /*#__PURE__*/React.createElement(Field.Label, {\n    display: \"flex\",\n    justifyContent: \"space-between\",\n    w: \"full\"\n  }, t('Connect_SSL_TLS'), /*#__PURE__*/React.createElement(ToggleSwitch, {\n    checked: imapSecure,\n    onChange: handleImapSecure\n  }))))), /*#__PURE__*/React.createElement(Field, null, /*#__PURE__*/React.createElement(Field.Row, null, /*#__PURE__*/React.createElement(ButtonGroup, {\n    stretch: true,\n    w: \"full\"\n  }, /*#__PURE__*/React.createElement(Button, {\n    onClick: close\n  }, t('Cancel')), /*#__PURE__*/React.createElement(Button, {\n    disabled: !canSave,\n    primary: true,\n    onClick: handleSave\n  }, t('Save')))), /*#__PURE__*/React.createElement(Field.Row, null, /*#__PURE__*/React.createElement(Margins, {\n    blockStart: \"x16\"\n  }, /*#__PURE__*/React.createElement(ButtonGroup, {\n    stretch: true,\n    w: \"full\"\n  }, id && /*#__PURE__*/React.createElement(Button, {\n    primary: true,\n    danger: true,\n    onClick: handleDelete\n  }, t('Delete')))))))));\n}\n\nmodule.exportDefault(EmailInboxForm);","map":{"version":3,"sources":["client/views/admin/emailInbox/EmailInboxForm.js"],"names":["_regeneratorRuntime","module","link","default","v","_slicedToArray","Accordion","Button","ButtonGroup","TextInput","TextAreaInput","Field","ToggleSwitch","FieldGroup","Box","Margins","useMutableCallback","React","useCallback","useState","validateEmail","AutoCompleteDepartment","GenericModal","Page","useSetModal","useRoute","useEndpoint","useToastMessageDispatch","useTranslation","useComponentDidUpdate","useForm","initialValues","active","name","email","description","senderInfo","department","smtpServer","smtpPort","smtpUsername","smtpPassword","smtpSecure","imapServer","imapPort","imapUsername","imapPassword","imapSecure","getInitialValues","data","smtp","imap","server","port","username","password","secure","EmailInboxForm","id","t","dispatchToastMessage","setModal","emailError","setEmailError","values","handlers","hasUnsavedChanges","handleActive","handleName","handleEmail","handleDescription","handleSenderInfo","handleDepartment","handleSmtpServer","handleSmtpPort","handleSmtpUsername","handleSmtpPassword","handleSmtpSecure","handleImapServer","handleImapPort","handleImapUsername","handleImapPassword","handleImapSecure","router","close","push","saveEmailInbox","deleteAction","emailAlreadyExistsAction","handleRemoveClick","result","success","handleDelete","e","stopPropagation","onDeleteManager","type","message","handleSave","parseInt","departmentValue","value","payload","_id","checkEmailExists","emailInbox","canSave","exportDefault"],"mappings":"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","sourcesContent":["import {\n\tAccordion,\n\tButton,\n\tButtonGroup,\n\tTextInput,\n\tTextAreaInput,\n\tField,\n\tToggleSwitch,\n\tFieldGroup,\n\tBox,\n\tMargins,\n} from '@rocket.chat/fuselage';\nimport { useMutableCallback } from '@rocket.chat/fuselage-hooks';\nimport React, { useCallback, useState } from 'react';\n\nimport { validateEmail } from '../../../../lib/emailValidator';\nimport AutoCompleteDepartment from '../../../components/AutoCompleteDepartment';\nimport GenericModal from '../../../components/GenericModal';\nimport Page from '../../../components/Page';\nimport { useSetModal } from '../../../contexts/ModalContext';\nimport { useRoute } from '../../../contexts/RouterContext';\nimport { useEndpoint } from '../../../contexts/ServerContext';\nimport { useToastMessageDispatch } from '../../../contexts/ToastMessagesContext';\nimport { useTranslation } from '../../../contexts/TranslationContext';\nimport { useComponentDidUpdate } from '../../../hooks/useComponentDidUpdate';\nimport { useForm } from '../../../hooks/useForm';\n\nconst initialValues = {\n\tactive: true,\n\tname: '',\n\temail: '',\n\tdescription: '',\n\tsenderInfo: '',\n\tdepartment: '',\n\t// SMTP\n\tsmtpServer: '',\n\tsmtpPort: 587,\n\tsmtpUsername: '',\n\tsmtpPassword: '',\n\tsmtpSecure: false,\n\t// IMAP\n\timapServer: '',\n\timapPort: 993,\n\timapUsername: '',\n\timapPassword: '',\n\timapSecure: false,\n};\n\nconst getInitialValues = (data) => {\n\tif (!data) {\n\t\treturn initialValues;\n\t}\n\n\tconst { active, name, email, description, senderInfo, department, smtp, imap } = data;\n\n\treturn {\n\t\tactive: active ?? true,\n\t\tname: name ?? '',\n\t\temail: email ?? '',\n\t\tdescription: description ?? '',\n\t\tsenderInfo: senderInfo ?? '',\n\t\tdepartment: department ?? '',\n\t\t// SMTP\n\t\tsmtpServer: smtp.server ?? '',\n\t\tsmtpPort: smtp.port ?? 587,\n\t\tsmtpUsername: smtp.username ?? '',\n\t\tsmtpPassword: smtp.password ?? '',\n\t\tsmtpSecure: smtp.secure ?? false,\n\t\t// IMAP\n\t\timapServer: imap.server ?? '',\n\t\timapPort: imap.port ?? 993,\n\t\timapUsername: imap.username ?? '',\n\t\timapPassword: imap.password ?? '',\n\t\timapSecure: imap.secure ?? false,\n\t};\n};\n\nfunction EmailInboxForm({ id, data }) {\n\tconst t = useTranslation();\n\tconst dispatchToastMessage = useToastMessageDispatch();\n\tconst setModal = useSetModal();\n\tconst [emailError, setEmailError] = useState();\n\tconst { values, handlers, hasUnsavedChanges } = useForm(getInitialValues(data));\n\n\tconst {\n\t\thandleActive,\n\t\thandleName,\n\t\thandleEmail,\n\t\thandleDescription,\n\t\thandleSenderInfo,\n\t\thandleDepartment,\n\t\t// SMTP\n\t\thandleSmtpServer,\n\t\thandleSmtpPort,\n\t\thandleSmtpUsername,\n\t\thandleSmtpPassword,\n\t\thandleSmtpSecure,\n\t\t// IMAP\n\t\thandleImapServer,\n\t\thandleImapPort,\n\t\thandleImapUsername,\n\t\thandleImapPassword,\n\t\thandleImapSecure,\n\t} = handlers;\n\tconst {\n\t\tactive,\n\t\tname,\n\t\temail,\n\t\tdescription,\n\t\tsenderInfo,\n\t\tdepartment,\n\t\t// SMTP\n\t\tsmtpServer,\n\t\tsmtpPort,\n\t\tsmtpUsername,\n\t\tsmtpPassword,\n\t\tsmtpSecure,\n\t\t// IMAP\n\t\timapServer,\n\t\timapPort,\n\t\timapUsername,\n\t\timapPassword,\n\t\timapSecure,\n\t} = values;\n\n\tconst router = useRoute('admin-email-inboxes');\n\n\tconst close = useCallback(() => router.push({}), [router]);\n\n\tconst saveEmailInbox = useEndpoint('POST', 'email-inbox');\n\tconst deleteAction = useEndpoint('DELETE', `email-inbox/${id}`);\n\tconst emailAlreadyExistsAction = useEndpoint('GET', `email-inbox.search?email=${email}`);\n\n\tuseComponentDidUpdate(() => {\n\t\tsetEmailError(!validateEmail(email) ? t('Validate_email_address') : null);\n\t}, [t, email]);\n\tuseComponentDidUpdate(() => {\n\t\t!email && setEmailError(null);\n\t}, [email]);\n\n\tconst handleRemoveClick = useMutableCallback(async () => {\n\t\tconst result = await deleteAction();\n\t\tif (result.success === true) {\n\t\t\tclose();\n\t\t}\n\t});\n\n\tconst handleDelete = useMutableCallback((e) => {\n\t\te.stopPropagation();\n\t\tconst onDeleteManager = async () => {\n\t\t\ttry {\n\t\t\t\tawait handleRemoveClick();\n\t\t\t\tdispatchToastMessage({ type: 'success', message: t('Removed') });\n\t\t\t} catch (error) {\n\t\t\t\tdispatchToastMessage({ type: 'error', message: error });\n\t\t\t}\n\t\t\tsetModal();\n\t\t};\n\n\t\tsetModal(\n\t\t\t<GenericModal variant='danger' onConfirm={onDeleteManager} onCancel={() => setModal()} confirmText={t('Delete')}>\n\t\t\t\t{t('You_will_not_be_able_to_recover_email_inbox')}\n\t\t\t</GenericModal>,\n\t\t);\n\t});\n\n\tconst handleSave = useMutableCallback(async () => {\n\t\tconst smtp = {\n\t\t\tserver: smtpServer,\n\t\t\tport: parseInt(smtpPort),\n\t\t\tusername: smtpUsername,\n\t\t\tpassword: smtpPassword,\n\t\t\tsecure: smtpSecure,\n\t\t};\n\t\tconst imap = {\n\t\t\tserver: imapServer,\n\t\t\tport: parseInt(imapPort),\n\t\t\tusername: imapUsername,\n\t\t\tpassword: imapPassword,\n\t\t\tsecure: imapSecure,\n\t\t};\n\t\tconst departmentValue = department.value;\n\t\tconst payload = {\n\t\t\tactive,\n\t\t\tname,\n\t\t\temail,\n\t\t\tdescription,\n\t\t\tsenderInfo,\n\t\t\tdepartment: departmentValue,\n\t\t\tsmtp,\n\t\t\timap,\n\t\t};\n\t\tif (id) {\n\t\t\tpayload._id = id;\n\t\t}\n\t\ttry {\n\t\t\tawait saveEmailInbox(payload);\n\t\t\tdispatchToastMessage({ type: 'success', message: t('Saved') });\n\t\t\tclose();\n\t\t} catch (e) {\n\t\t\tdispatchToastMessage({ type: 'error', message: e });\n\t\t}\n\t});\n\n\tconst checkEmailExists = useMutableCallback(async () => {\n\t\tif (!email && !validateEmail(email)) {\n\t\t\treturn;\n\t\t}\n\t\tconst { emailInbox } = await emailAlreadyExistsAction();\n\n\t\tif (!emailInbox || (id && emailInbox._id === id)) {\n\t\t\treturn;\n\t\t}\n\t\tsetEmailError(t('Email_already_exists'));\n\t});\n\tconst canSave =\n\t\thasUnsavedChanges &&\n\t\tname &&\n\t\temail &&\n\t\tvalidateEmail(email) &&\n\t\t!emailError &&\n\t\tsmtpServer &&\n\t\tsmtpPort &&\n\t\tsmtpUsername &&\n\t\tsmtpPassword &&\n\t\timapServer &&\n\t\timapPort &&\n\t\timapUsername &&\n\t\timapPassword;\n\n\treturn (\n\t\t<Page.ScrollableContentWithShadow>\n\t\t\t<Box maxWidth='x600' w='full' alignSelf='center'>\n\t\t\t\t<Accordion>\n\t\t\t\t\t<Accordion.Item defaultExpanded title={t('Inbox_Info')}>\n\t\t\t\t\t\t<FieldGroup>\n\t\t\t\t\t\t\t<Field>\n\t\t\t\t\t\t\t\t<Field.Label display='flex' justifyContent='space-between' w='full'>\n\t\t\t\t\t\t\t\t\t{t('Active')}\n\t\t\t\t\t\t\t\t\t<ToggleSwitch checked={active} onChange={handleActive} />\n\t\t\t\t\t\t\t\t</Field.Label>\n\t\t\t\t\t\t\t</Field>\n\t\t\t\t\t\t\t<Field>\n\t\t\t\t\t\t\t\t<Field.Label>{t('Name')}*</Field.Label>\n\t\t\t\t\t\t\t\t<Field.Row>\n\t\t\t\t\t\t\t\t\t<TextInput value={name} onChange={handleName} />\n\t\t\t\t\t\t\t\t</Field.Row>\n\t\t\t\t\t\t\t</Field>\n\t\t\t\t\t\t\t<Field>\n\t\t\t\t\t\t\t\t<Field.Label>{t('Email')}*</Field.Label>\n\t\t\t\t\t\t\t\t<Field.Row>\n\t\t\t\t\t\t\t\t\t<TextInput onBlur={checkEmailExists} error={emailError} value={email} onChange={handleEmail} />\n\t\t\t\t\t\t\t\t</Field.Row>\n\t\t\t\t\t\t\t\t<Field.Error>{t(emailError)}</Field.Error>\n\t\t\t\t\t\t\t</Field>\n\t\t\t\t\t\t\t<Field>\n\t\t\t\t\t\t\t\t<Field.Label>{t('Description')}</Field.Label>\n\t\t\t\t\t\t\t\t<Field.Row>\n\t\t\t\t\t\t\t\t\t<TextAreaInput value={description} rows={4} onChange={handleDescription} />\n\t\t\t\t\t\t\t\t</Field.Row>\n\t\t\t\t\t\t\t</Field>\n\t\t\t\t\t\t\t<Field>\n\t\t\t\t\t\t\t\t<Field.Label>{t('Sender_Info')}</Field.Label>\n\t\t\t\t\t\t\t\t<Field.Row>\n\t\t\t\t\t\t\t\t\t<TextInput value={senderInfo} onChange={handleSenderInfo} placeholder={t('Optional')} />\n\t\t\t\t\t\t\t\t</Field.Row>\n\t\t\t\t\t\t\t\t<Field.Hint>{t('Will_Appear_In_From')}</Field.Hint>\n\t\t\t\t\t\t\t</Field>\n\t\t\t\t\t\t\t<Field>\n\t\t\t\t\t\t\t\t<Field.Label>{t('Department')}</Field.Label>\n\t\t\t\t\t\t\t\t<Field.Row>\n\t\t\t\t\t\t\t\t\t<AutoCompleteDepartment value={department} onChange={handleDepartment} />\n\t\t\t\t\t\t\t\t</Field.Row>\n\t\t\t\t\t\t\t\t<Field.Hint>{t('Only_Members_Selected_Department_Can_View_Channel')}</Field.Hint>\n\t\t\t\t\t\t\t</Field>\n\t\t\t\t\t\t</FieldGroup>\n\t\t\t\t\t</Accordion.Item>\n\t\t\t\t\t<Accordion.Item title={t('Configure_Outgoing_Mail_SMTP')}>\n\t\t\t\t\t\t<FieldGroup>\n\t\t\t\t\t\t\t<Field>\n\t\t\t\t\t\t\t\t<Field.Label>{t('Server')}*</Field.Label>\n\t\t\t\t\t\t\t\t<Field.Row>\n\t\t\t\t\t\t\t\t\t<TextInput value={smtpServer} onChange={handleSmtpServer} />\n\t\t\t\t\t\t\t\t</Field.Row>\n\t\t\t\t\t\t\t</Field>\n\t\t\t\t\t\t\t<Field>\n\t\t\t\t\t\t\t\t<Field.Label>{t('Port')}*</Field.Label>\n\t\t\t\t\t\t\t\t<Field.Row>\n\t\t\t\t\t\t\t\t\t<TextInput type='number' value={smtpPort} onChange={handleSmtpPort} />\n\t\t\t\t\t\t\t\t</Field.Row>\n\t\t\t\t\t\t\t</Field>\n\t\t\t\t\t\t\t<Field>\n\t\t\t\t\t\t\t\t<Field.Label>{t('Username')}*</Field.Label>\n\t\t\t\t\t\t\t\t<Field.Row>\n\t\t\t\t\t\t\t\t\t<TextInput value={smtpUsername} onChange={handleSmtpUsername} />\n\t\t\t\t\t\t\t\t</Field.Row>\n\t\t\t\t\t\t\t</Field>\n\t\t\t\t\t\t\t<Field>\n\t\t\t\t\t\t\t\t<Field.Label>{t('Password')}*</Field.Label>\n\t\t\t\t\t\t\t\t<Field.Row>\n\t\t\t\t\t\t\t\t\t<TextInput type='password' value={smtpPassword} onChange={handleSmtpPassword} />\n\t\t\t\t\t\t\t\t</Field.Row>\n\t\t\t\t\t\t\t</Field>\n\t\t\t\t\t\t\t<Field>\n\t\t\t\t\t\t\t\t<Field.Label display='flex' justifyContent='space-between' w='full'>\n\t\t\t\t\t\t\t\t\t{t('Connect_SSL_TLS')}\n\t\t\t\t\t\t\t\t\t<ToggleSwitch checked={smtpSecure} onChange={handleSmtpSecure} />\n\t\t\t\t\t\t\t\t</Field.Label>\n\t\t\t\t\t\t\t</Field>\n\t\t\t\t\t\t</FieldGroup>\n\t\t\t\t\t</Accordion.Item>\n\t\t\t\t\t<Accordion.Item title={t('Configure_Incoming_Mail_IMAP')}>\n\t\t\t\t\t\t<FieldGroup>\n\t\t\t\t\t\t\t<Field>\n\t\t\t\t\t\t\t\t<Field.Label>{t('Server')}*</Field.Label>\n\t\t\t\t\t\t\t\t<Field.Row>\n\t\t\t\t\t\t\t\t\t<TextInput value={imapServer} onChange={handleImapServer} />\n\t\t\t\t\t\t\t\t</Field.Row>\n\t\t\t\t\t\t\t</Field>\n\t\t\t\t\t\t\t<Field>\n\t\t\t\t\t\t\t\t<Field.Label>{t('Port')}*</Field.Label>\n\t\t\t\t\t\t\t\t<Field.Row>\n\t\t\t\t\t\t\t\t\t<TextInput type='number' value={imapPort} onChange={handleImapPort} />\n\t\t\t\t\t\t\t\t</Field.Row>\n\t\t\t\t\t\t\t</Field>\n\t\t\t\t\t\t\t<Field>\n\t\t\t\t\t\t\t\t<Field.Label>{t('Username')}*</Field.Label>\n\t\t\t\t\t\t\t\t<Field.Row>\n\t\t\t\t\t\t\t\t\t<TextInput value={imapUsername} onChange={handleImapUsername} />\n\t\t\t\t\t\t\t\t</Field.Row>\n\t\t\t\t\t\t\t</Field>\n\t\t\t\t\t\t\t<Field>\n\t\t\t\t\t\t\t\t<Field.Label>{t('Password')}*</Field.Label>\n\t\t\t\t\t\t\t\t<Field.Row>\n\t\t\t\t\t\t\t\t\t<TextInput type='password' value={imapPassword} onChange={handleImapPassword} />\n\t\t\t\t\t\t\t\t</Field.Row>\n\t\t\t\t\t\t\t</Field>\n\t\t\t\t\t\t\t<Field>\n\t\t\t\t\t\t\t\t<Field.Label display='flex' justifyContent='space-between' w='full'>\n\t\t\t\t\t\t\t\t\t{t('Connect_SSL_TLS')}\n\t\t\t\t\t\t\t\t\t<ToggleSwitch checked={imapSecure} onChange={handleImapSecure} />\n\t\t\t\t\t\t\t\t</Field.Label>\n\t\t\t\t\t\t\t</Field>\n\t\t\t\t\t\t</FieldGroup>\n\t\t\t\t\t</Accordion.Item>\n\t\t\t\t\t<Field>\n\t\t\t\t\t\t<Field.Row>\n\t\t\t\t\t\t\t<ButtonGroup stretch w='full'>\n\t\t\t\t\t\t\t\t<Button onClick={close}>{t('Cancel')}</Button>\n\t\t\t\t\t\t\t\t<Button disabled={!canSave} primary onClick={handleSave}>\n\t\t\t\t\t\t\t\t\t{t('Save')}\n\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t</ButtonGroup>\n\t\t\t\t\t\t</Field.Row>\n\t\t\t\t\t\t<Field.Row>\n\t\t\t\t\t\t\t<Margins blockStart='x16'>\n\t\t\t\t\t\t\t\t<ButtonGroup stretch w='full'>\n\t\t\t\t\t\t\t\t\t{id && (\n\t\t\t\t\t\t\t\t\t\t<Button primary danger onClick={handleDelete}>\n\t\t\t\t\t\t\t\t\t\t\t{t('Delete')}\n\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t</ButtonGroup>\n\t\t\t\t\t\t\t</Margins>\n\t\t\t\t\t\t</Field.Row>\n\t\t\t\t\t</Field>\n\t\t\t\t</Accordion>\n\t\t\t</Box>\n\t\t</Page.ScrollableContentWithShadow>\n\t);\n}\n\nexport default EmailInboxForm;\n"]},"sourceType":"module","hash":"f1d243d997c1c05c84f2a9a224aab39751706086"}
