{"metadata":{},"options":{"assumptions":{},"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat/app/lib/client/views/customFieldsForm.js","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","classProperties","classPrivateProperties","jsx","nullishCoalescingOperator","nullishCoalescingOperator","optionalChaining","optionalCatchBinding","optionalCatchBinding","classProperties","classPrivateProperties","classPrivateMethods","classProperties","classPrivateProperties","asyncGenerators","asyncGenerators","objectRestSpread","logicalAssignment"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"allowUndeclaredExports":true,"strictMode":false},"caller":{"name":"meteor","arch":"web.browser"},"sourceFileName":"app/lib/client/views/customFieldsForm.js","filename":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat/app/lib/client/views/customFieldsForm.js","targets":{"android":"95.0.0","chrome":"95.0.0","edge":"95.0.0","firefox":"78.0.0","ie":"10.0.0","ios":"15.0.0","opera":"81.0.0","safari":"15.1.0","samsung":"14.0.0"},"cloneInputAst":true,"browserslistConfigFile":false,"passPerPreset":false,"envName":"development","cwd":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat","root":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat","rootMode":"root","plugins":[{"key":"base$0","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0","visitor":{"Program":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true},"options":{"avoidModernSyntax":false,"enforceStrictMode":false,"dynamicImport":true,"generateLetDeclarations":true}},{"key":"transform-runtime","visitor":{"MemberExpression":{"enter":[null]},"ObjectPattern":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":{},"_verified":{},"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]}},"options":{"version":"7.16.5","helpers":true,"useESModules":false,"corejs":false}},{"key":"proposal-class-properties","visitor":{"PrivateName":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{"loose":true}},{"key":"transform-react-jsx","visitor":{"_exploded":{},"_verified":{},"JSXNamespacedName":{"enter":[null]},"JSXSpreadChild":{"enter":[null]},"Program":{"enter":[null]},"JSXElement":{"exit":[null]},"JSXFragment":{"exit":[null]},"JSXAttribute":{"enter":[null]}},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","runtime":"classic","throwIfNamespace":true,"useBuiltIns":false}},{"key":"transform-react-display-name","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-react-pure-annotations","visitor":{"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"syntax-nullish-coalescing-operator","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-nullish-coalescing-operator","visitor":{"_exploded":{},"_verified":{},"LogicalExpression":{"enter":[null]}},"options":{}},{"key":"syntax-optional-chaining","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-optional-chaining","visitor":{"_exploded":true,"OptionalCallExpression":{"enter":[null]},"OptionalMemberExpression":{"enter":[null]},"_verified":true},"options":{}},{"key":"syntax-optional-catch-binding","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-optional-catch-binding","visitor":{"_exploded":{},"_verified":{},"CatchClause":{"enter":[null]}},"options":{}},{"key":"syntax-class-properties","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-class-properties","visitor":{"PrivateName":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{}},{"key":"syntax-async-generators","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-async-generator-functions","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]}},"options":{}},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-object-rest-spread","visitor":{"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"proposal-logical-assignment-operators","visitor":{"_exploded":{},"_verified":{},"AssignmentExpression":{"enter":[null]}},"options":{}},{"key":"transform-literals","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-template-literals","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-parameters","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{}},{"key":"transform-exponentiation-operator","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}}],"presets":[],"generatorOpts":{"filename":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat/app/lib/client/views/customFieldsForm.js","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"app/lib/client/views/customFieldsForm.js"}},"code":"let ReactiveVar;\nmodule.link(\"meteor/reactive-var\", {\n  ReactiveVar(v) {\n    ReactiveVar = v;\n  }\n\n}, 0);\nlet Tracker;\nmodule.link(\"meteor/tracker\", {\n  Tracker(v) {\n    Tracker = v;\n  }\n\n}, 1);\nlet Template;\nmodule.link(\"meteor/templating\", {\n  Template(v) {\n    Template = v;\n  }\n\n}, 2);\nlet settings;\nmodule.link(\"../../../settings\", {\n  settings(v) {\n    settings = v;\n  }\n\n}, 3);\nTemplate.customFieldsForm.helpers({\n  new() {\n    return this.new;\n  },\n\n  customFields() {\n    const customFields = Template.instance().customFields.get();\n\n    if (!customFields) {\n      return [];\n    }\n\n    const customFieldsArray = [];\n    Object.keys(customFields).forEach(key => {\n      const value = customFields[key];\n\n      if (value.hideFromForm === true && Template.instance().hideFromForm === true) {\n        return;\n      }\n\n      customFieldsArray.push({\n        fieldName: key,\n        field: value\n      });\n    });\n    return customFieldsArray;\n  },\n\n  selectedField(current, field) {\n    const {\n      formData\n    } = Template.instance();\n\n    if (typeof formData[field.fieldName] !== 'undefined') {\n      return formData[field.fieldName] === current;\n    }\n\n    if (typeof field.defaultValue !== 'undefined') {\n      return field.defaultValue === current;\n    }\n  },\n\n  fieldValue() {\n    const {\n      formData\n    } = Template.instance();\n    return formData[this.fieldName];\n  }\n\n});\nTemplate.customFieldsForm.onCreated(function () {\n  this.customFields = new ReactiveVar();\n  const currentData = Template.currentData();\n  this.hideFromForm = currentData && currentData.hideFromForm;\n  this.formData = currentData && currentData.formData || {};\n  Tracker.autorun(() => {\n    const Accounts_CustomFields = settings.get('Accounts_CustomFields');\n\n    if (typeof Accounts_CustomFields === 'string' && Accounts_CustomFields.trim() !== '') {\n      try {\n        this.customFields.set(JSON.parse(settings.get('Accounts_CustomFields')));\n      } catch (e) {\n        console.error('Invalid JSON for Accounts_CustomFields');\n      }\n    } else {\n      this.customFields.set(undefined);\n    }\n  });\n});","map":{"version":3,"sources":["app/lib/client/views/customFieldsForm.js"],"names":["ReactiveVar","module","link","v","Tracker","Template","settings","customFieldsForm","helpers","new","customFields","instance","get","customFieldsArray","Object","keys","forEach","key","value","hideFromForm","push","fieldName","field","selectedField","current","formData","defaultValue","fieldValue","onCreated","currentData","autorun","Accounts_CustomFields","trim","set","JSON","parse","e","console","error","undefined"],"mappings":"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","sourcesContent":["import { ReactiveVar } from 'meteor/reactive-var';\nimport { Tracker } from 'meteor/tracker';\nimport { Template } from 'meteor/templating';\n\nimport { settings } from '../../../settings';\n\nTemplate.customFieldsForm.helpers({\n\tnew() {\n\t\treturn this.new;\n\t},\n\tcustomFields() {\n\t\tconst customFields = Template.instance().customFields.get();\n\n\t\tif (!customFields) {\n\t\t\treturn [];\n\t\t}\n\n\t\tconst customFieldsArray = [];\n\n\t\tObject.keys(customFields).forEach((key) => {\n\t\t\tconst value = customFields[key];\n\t\t\tif (value.hideFromForm === true && Template.instance().hideFromForm === true) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tcustomFieldsArray.push({\n\t\t\t\tfieldName: key,\n\t\t\t\tfield: value,\n\t\t\t});\n\t\t});\n\n\t\treturn customFieldsArray;\n\t},\n\tselectedField(current, field) {\n\t\tconst { formData } = Template.instance();\n\n\t\tif (typeof formData[field.fieldName] !== 'undefined') {\n\t\t\treturn formData[field.fieldName] === current;\n\t\t}\n\t\tif (typeof field.defaultValue !== 'undefined') {\n\t\t\treturn field.defaultValue === current;\n\t\t}\n\t},\n\tfieldValue() {\n\t\tconst { formData } = Template.instance();\n\n\t\treturn formData[this.fieldName];\n\t},\n});\n\nTemplate.customFieldsForm.onCreated(function () {\n\tthis.customFields = new ReactiveVar();\n\n\tconst currentData = Template.currentData();\n\tthis.hideFromForm = currentData && currentData.hideFromForm;\n\tthis.formData = (currentData && currentData.formData) || {};\n\n\tTracker.autorun(() => {\n\t\tconst Accounts_CustomFields = settings.get('Accounts_CustomFields');\n\t\tif (typeof Accounts_CustomFields === 'string' && Accounts_CustomFields.trim() !== '') {\n\t\t\ttry {\n\t\t\t\tthis.customFields.set(JSON.parse(settings.get('Accounts_CustomFields')));\n\t\t\t} catch (e) {\n\t\t\t\tconsole.error('Invalid JSON for Accounts_CustomFields');\n\t\t\t}\n\t\t} else {\n\t\t\tthis.customFields.set(undefined);\n\t\t}\n\t});\n});\n"]},"sourceType":"module","hash":"256e94d7276609396e0f99ba9c1e1fa949ed4e87"}
