{"metadata":{},"options":{"assumptions":{},"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat/client/views/omnichannel/analytics/Overview.js","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","classProperties","classPrivateProperties","jsx","nullishCoalescingOperator","nullishCoalescingOperator","optionalChaining","optionalCatchBinding","optionalCatchBinding","classProperties","classPrivateProperties","classPrivateMethods","classProperties","classPrivateProperties","asyncGenerators","asyncGenerators","objectRestSpread","logicalAssignment"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"allowUndeclaredExports":true,"strictMode":false},"caller":{"name":"meteor","arch":"web.browser"},"sourceFileName":"client/views/omnichannel/analytics/Overview.js","filename":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat/client/views/omnichannel/analytics/Overview.js","targets":{"android":"95.0.0","chrome":"95.0.0","edge":"95.0.0","firefox":"78.0.0","ie":"10.0.0","ios":"15.0.0","opera":"81.0.0","safari":"15.1.0","samsung":"14.0.0"},"cloneInputAst":true,"browserslistConfigFile":false,"passPerPreset":false,"envName":"development","cwd":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat","root":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat","rootMode":"root","plugins":[{"key":"base$0","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0","visitor":{"Program":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true},"options":{"avoidModernSyntax":false,"enforceStrictMode":false,"dynamicImport":true,"generateLetDeclarations":true}},{"key":"transform-runtime","visitor":{"MemberExpression":{"enter":[null]},"ObjectPattern":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":{},"_verified":{},"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]}},"options":{"version":"7.16.5","helpers":true,"useESModules":false,"corejs":false}},{"key":"proposal-class-properties","visitor":{"PrivateName":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{"loose":true}},{"key":"transform-react-jsx","visitor":{"_exploded":{},"_verified":{},"JSXNamespacedName":{"enter":[null]},"JSXSpreadChild":{"enter":[null]},"Program":{"enter":[null]},"JSXElement":{"exit":[null]},"JSXFragment":{"exit":[null]},"JSXAttribute":{"enter":[null]}},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","runtime":"classic","throwIfNamespace":true,"useBuiltIns":false}},{"key":"transform-react-display-name","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-react-pure-annotations","visitor":{"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"syntax-nullish-coalescing-operator","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-nullish-coalescing-operator","visitor":{"_exploded":{},"_verified":{},"LogicalExpression":{"enter":[null]}},"options":{}},{"key":"syntax-optional-chaining","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-optional-chaining","visitor":{"_exploded":true,"OptionalCallExpression":{"enter":[null]},"OptionalMemberExpression":{"enter":[null]},"_verified":true},"options":{}},{"key":"syntax-optional-catch-binding","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-optional-catch-binding","visitor":{"_exploded":{},"_verified":{},"CatchClause":{"enter":[null]}},"options":{}},{"key":"syntax-class-properties","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-class-properties","visitor":{"PrivateName":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{}},{"key":"syntax-async-generators","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-async-generator-functions","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]}},"options":{}},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-object-rest-spread","visitor":{"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"proposal-logical-assignment-operators","visitor":{"_exploded":{},"_verified":{},"AssignmentExpression":{"enter":[null]}},"options":{}},{"key":"transform-literals","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-template-literals","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-parameters","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{}},{"key":"transform-exponentiation-operator","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}}],"presets":[],"generatorOpts":{"filename":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat/client/views/omnichannel/analytics/Overview.js","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"client/views/omnichannel/analytics/Overview.js"}},"code":"let _objectSpread;\n\nmodule.link(\"@babel/runtime/helpers/objectSpread2\", {\n  default(v) {\n    _objectSpread = v;\n  }\n\n}, 0);\nlet Box, Skeleton;\nmodule.link(\"@rocket.chat/fuselage\", {\n  Box(v) {\n    Box = v;\n  },\n\n  Skeleton(v) {\n    Skeleton = v;\n  }\n\n}, 0);\nlet React, useEffect, useState, useMemo;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  },\n\n  useEffect(v) {\n    useEffect = v;\n  },\n\n  useState(v) {\n    useState = v;\n  },\n\n  useMemo(v) {\n    useMemo = v;\n  }\n\n}, 1);\nlet useMethod;\nmodule.link(\"../../../contexts/ServerContext\", {\n  useMethod(v) {\n    useMethod = v;\n  }\n\n}, 2);\nlet useTranslation;\nmodule.link(\"../../../contexts/TranslationContext\", {\n  useTranslation(v) {\n    useTranslation = v;\n  }\n\n}, 3);\nlet CounterItem;\nmodule.link(\"../realTimeMonitoring/counter/CounterItem\", {\n  default(v) {\n    CounterItem = v;\n  }\n\n}, 4);\nlet CounterRow;\nmodule.link(\"../realTimeMonitoring/counter/CounterRow\", {\n  default(v) {\n    CounterRow = v;\n  }\n\n}, 5);\nconst initialData = Array.from({\n  length: 3\n}).map(() => ({\n  title: '',\n  value: ''\n}));\nconst conversationsInitialData = [initialData, initialData];\nconst productivityInitialData = [initialData];\n\nconst Overview = _ref => {\n  let {\n    type,\n    dateRange,\n    departmentId\n  } = _ref;\n  const t = useTranslation();\n  const {\n    start,\n    end\n  } = dateRange;\n  const params = useMemo(() => _objectSpread({\n    analyticsOptions: {\n      name: type\n    },\n    daterange: {\n      from: start,\n      to: end\n    }\n  }, departmentId && {\n    departmentId\n  }), [departmentId, end, start, type]);\n  const loadData = useMethod('livechat:getAnalyticsOverviewData');\n  const [displayData, setDisplayData] = useState(conversationsInitialData);\n  useEffect(() => {\n    setDisplayData(type === 'Conversations' ? conversationsInitialData : productivityInitialData);\n  }, [type]);\n  useEffect(() => {\n    async function fetchData() {\n      if (!start || !end) {\n        return;\n      }\n\n      const value = await loadData(params);\n\n      if (!value) {\n        return;\n      }\n\n      if (value.length > 3) {\n        return setDisplayData([value.slice(0, 3), value.slice(3)]);\n      }\n\n      setDisplayData([value]);\n    }\n\n    fetchData();\n  }, [start, end, loadData, params]);\n  return /*#__PURE__*/React.createElement(Box, {\n    pb: \"x28\",\n    flexDirection: \"column\"\n  }, displayData.map(function () {\n    let items = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n    let i = arguments.length > 1 ? arguments[1] : undefined;\n    return /*#__PURE__*/React.createElement(CounterRow, {\n      key: i,\n      border: \"0\",\n      pb: \"none\"\n    }, items.map((_ref2, i) => {\n      let {\n        title,\n        value\n      } = _ref2;\n      return /*#__PURE__*/React.createElement(CounterItem, {\n        flexShrink: 1,\n        pb: \"x8\",\n        flexBasis: \"100%\",\n        key: i,\n        title: title ? t(title) : /*#__PURE__*/React.createElement(Skeleton, {\n          width: \"x60\"\n        }),\n        count: value\n      });\n    }));\n  }));\n};\n\nmodule.exportDefault(Overview);","map":{"version":3,"sources":["client/views/omnichannel/analytics/Overview.js"],"names":["_objectSpread","module","link","default","v","Box","Skeleton","React","useEffect","useState","useMemo","useMethod","useTranslation","CounterItem","CounterRow","initialData","Array","from","length","map","title","value","conversationsInitialData","productivityInitialData","Overview","type","dateRange","departmentId","t","start","end","params","analyticsOptions","name","daterange","to","loadData","displayData","setDisplayData","fetchData","slice","items","i","exportDefault"],"mappings":"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","sourcesContent":["import { Box, Skeleton } from '@rocket.chat/fuselage';\nimport React, { useEffect, useState, useMemo } from 'react';\n\nimport { useMethod } from '../../../contexts/ServerContext';\nimport { useTranslation } from '../../../contexts/TranslationContext';\nimport CounterItem from '../realTimeMonitoring/counter/CounterItem';\nimport CounterRow from '../realTimeMonitoring/counter/CounterRow';\n\nconst initialData = Array.from({ length: 3 }).map(() => ({ title: '', value: '' }));\n\nconst conversationsInitialData = [initialData, initialData];\nconst productivityInitialData = [initialData];\n\nconst Overview = ({ type, dateRange, departmentId }) => {\n\tconst t = useTranslation();\n\n\tconst { start, end } = dateRange;\n\n\tconst params = useMemo(\n\t\t() => ({\n\t\t\tanalyticsOptions: { name: type },\n\t\t\tdaterange: { from: start, to: end },\n\t\t\t...(departmentId && { departmentId }),\n\t\t}),\n\t\t[departmentId, end, start, type],\n\t);\n\n\tconst loadData = useMethod('livechat:getAnalyticsOverviewData');\n\n\tconst [displayData, setDisplayData] = useState(conversationsInitialData);\n\n\tuseEffect(() => {\n\t\tsetDisplayData(type === 'Conversations' ? conversationsInitialData : productivityInitialData);\n\t}, [type]);\n\n\tuseEffect(() => {\n\t\tasync function fetchData() {\n\t\t\tif (!start || !end) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst value = await loadData(params);\n\t\t\tif (!value) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (value.length > 3) {\n\t\t\t\treturn setDisplayData([value.slice(0, 3), value.slice(3)]);\n\t\t\t}\n\n\t\t\tsetDisplayData([value]);\n\t\t}\n\t\tfetchData();\n\t}, [start, end, loadData, params]);\n\n\treturn (\n\t\t<Box pb='x28' flexDirection='column'>\n\t\t\t{displayData.map((items = [], i) => (\n\t\t\t\t<CounterRow key={i} border='0' pb='none'>\n\t\t\t\t\t{items.map(({ title, value }, i) => (\n\t\t\t\t\t\t<CounterItem\n\t\t\t\t\t\t\tflexShrink={1}\n\t\t\t\t\t\t\tpb='x8'\n\t\t\t\t\t\t\tflexBasis='100%'\n\t\t\t\t\t\t\tkey={i}\n\t\t\t\t\t\t\ttitle={title ? t(title) : <Skeleton width='x60' />}\n\t\t\t\t\t\t\tcount={value}\n\t\t\t\t\t\t/>\n\t\t\t\t\t))}\n\t\t\t\t</CounterRow>\n\t\t\t))}\n\t\t</Box>\n\t);\n};\n\nexport default Overview;\n"]},"sourceType":"module","hash":"8d412653ba9876ce96ee6021ca5395539dfbb696"}
