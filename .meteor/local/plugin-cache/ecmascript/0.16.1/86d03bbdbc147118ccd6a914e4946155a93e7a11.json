{"metadata":{},"options":{"assumptions":{},"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat/client/views/room/contextualBar/Info/EditRoomInfo/EditChannel.js","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","classProperties","classPrivateProperties","jsx","nullishCoalescingOperator","nullishCoalescingOperator","optionalChaining","optionalCatchBinding","optionalCatchBinding","classProperties","classPrivateProperties","classPrivateMethods","classProperties","classPrivateProperties","asyncGenerators","asyncGenerators","objectRestSpread","logicalAssignment"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"allowUndeclaredExports":true,"strictMode":false},"caller":{"name":"meteor","arch":"web.browser"},"sourceFileName":"client/views/room/contextualBar/Info/EditRoomInfo/EditChannel.js","filename":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat/client/views/room/contextualBar/Info/EditRoomInfo/EditChannel.js","targets":{"android":"95.0.0","chrome":"95.0.0","edge":"95.0.0","firefox":"78.0.0","ie":"10.0.0","ios":"15.0.0","opera":"81.0.0","safari":"15.1.0","samsung":"14.0.0"},"cloneInputAst":true,"browserslistConfigFile":false,"passPerPreset":false,"envName":"development","cwd":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat","root":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat","rootMode":"root","plugins":[{"key":"base$0","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0","visitor":{"Program":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true},"options":{"avoidModernSyntax":false,"enforceStrictMode":false,"dynamicImport":true,"generateLetDeclarations":true}},{"key":"transform-runtime","visitor":{"MemberExpression":{"enter":[null]},"ObjectPattern":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":{},"_verified":{},"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]}},"options":{"version":"7.16.5","helpers":true,"useESModules":false,"corejs":false}},{"key":"proposal-class-properties","visitor":{"PrivateName":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{"loose":true}},{"key":"transform-react-jsx","visitor":{"_exploded":{},"_verified":{},"JSXNamespacedName":{"enter":[null]},"JSXSpreadChild":{"enter":[null]},"Program":{"enter":[null]},"JSXElement":{"exit":[null]},"JSXFragment":{"exit":[null]},"JSXAttribute":{"enter":[null]}},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","runtime":"classic","throwIfNamespace":true,"useBuiltIns":false}},{"key":"transform-react-display-name","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-react-pure-annotations","visitor":{"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"syntax-nullish-coalescing-operator","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-nullish-coalescing-operator","visitor":{"_exploded":{},"_verified":{},"LogicalExpression":{"enter":[null]}},"options":{}},{"key":"syntax-optional-chaining","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-optional-chaining","visitor":{"_exploded":true,"OptionalCallExpression":{"enter":[null]},"OptionalMemberExpression":{"enter":[null]},"_verified":true},"options":{}},{"key":"syntax-optional-catch-binding","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-optional-catch-binding","visitor":{"_exploded":{},"_verified":{},"CatchClause":{"enter":[null]}},"options":{}},{"key":"syntax-class-properties","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-class-properties","visitor":{"PrivateName":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{}},{"key":"syntax-async-generators","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-async-generator-functions","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]}},"options":{}},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-object-rest-spread","visitor":{"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"proposal-logical-assignment-operators","visitor":{"_exploded":{},"_verified":{},"AssignmentExpression":{"enter":[null]}},"options":{}},{"key":"transform-literals","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-template-literals","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-parameters","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{}},{"key":"transform-exponentiation-operator","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}}],"presets":[],"generatorOpts":{"filename":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat/client/views/room/contextualBar/Info/EditRoomInfo/EditChannel.js","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"client/views/room/contextualBar/Info/EditRoomInfo/EditChannel.js"}},"code":"const _excluded = [\"joinCodeRequired\", \"hideSysMes\"];\n\nlet _objectWithoutProperties;\n\nmodule.link(\"@babel/runtime/helpers/objectWithoutProperties\", {\n  default(v) {\n    _objectWithoutProperties = v;\n  }\n\n}, 0);\n\nlet _objectSpread;\n\nmodule.link(\"@babel/runtime/helpers/objectSpread2\", {\n  default(v) {\n    _objectSpread = v;\n  }\n\n}, 1);\nlet Field, TextInput, PasswordInput, ToggleSwitch, MultiSelect, Accordion, Callout, NumberInput, FieldGroup, Button, ButtonGroup, Box, Icon, TextAreaInput;\nmodule.link(\"@rocket.chat/fuselage\", {\n  Field(v) {\n    Field = v;\n  },\n\n  TextInput(v) {\n    TextInput = v;\n  },\n\n  PasswordInput(v) {\n    PasswordInput = v;\n  },\n\n  ToggleSwitch(v) {\n    ToggleSwitch = v;\n  },\n\n  MultiSelect(v) {\n    MultiSelect = v;\n  },\n\n  Accordion(v) {\n    Accordion = v;\n  },\n\n  Callout(v) {\n    Callout = v;\n  },\n\n  NumberInput(v) {\n    NumberInput = v;\n  },\n\n  FieldGroup(v) {\n    FieldGroup = v;\n  },\n\n  Button(v) {\n    Button = v;\n  },\n\n  ButtonGroup(v) {\n    ButtonGroup = v;\n  },\n\n  Box(v) {\n    Box = v;\n  },\n\n  Icon(v) {\n    Icon = v;\n  },\n\n  TextAreaInput(v) {\n    TextAreaInput = v;\n  }\n\n}, 0);\nlet useMutableCallback;\nmodule.link(\"@rocket.chat/fuselage-hooks\", {\n  useMutableCallback(v) {\n    useMutableCallback = v;\n  }\n\n}, 1);\nlet React, useCallback, useMemo, useRef;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  },\n\n  useCallback(v) {\n    useCallback = v;\n  },\n\n  useMemo(v) {\n    useMemo = v;\n  },\n\n  useRef(v) {\n    useRef = v;\n  }\n\n}, 2);\nlet e2e;\nmodule.link(\"../../../../../../app/e2e/client/rocketchat.e2e\", {\n  e2e(v) {\n    e2e = v;\n  }\n\n}, 3);\nlet MessageTypesValues;\nmodule.link(\"../../../../../../app/lib/lib/MessageTypes\", {\n  MessageTypesValues(v) {\n    MessageTypesValues = v;\n  }\n\n}, 4);\nlet RoomSettingsEnum;\nmodule.link(\"../../../../../../definition/IRoomTypeConfig\", {\n  RoomSettingsEnum(v) {\n    RoomSettingsEnum = v;\n  }\n\n}, 5);\nlet GenericModal;\nmodule.link(\"../../../../../components/GenericModal\", {\n  default(v) {\n    GenericModal = v;\n  }\n\n}, 6);\nlet RawText;\nmodule.link(\"../../../../../components/RawText\", {\n  default(v) {\n    RawText = v;\n  }\n\n}, 7);\nlet VerticalBar;\nmodule.link(\"../../../../../components/VerticalBar\", {\n  default(v) {\n    VerticalBar = v;\n  }\n\n}, 8);\nlet RoomAvatarEditor;\nmodule.link(\"../../../../../components/avatar/RoomAvatarEditor\", {\n  default(v) {\n    RoomAvatarEditor = v;\n  }\n\n}, 9);\nlet usePermission, useAtLeastOnePermission, useRole;\nmodule.link(\"../../../../../contexts/AuthorizationContext\", {\n  usePermission(v) {\n    usePermission = v;\n  },\n\n  useAtLeastOnePermission(v) {\n    useAtLeastOnePermission = v;\n  },\n\n  useRole(v) {\n    useRole = v;\n  }\n\n}, 10);\nlet useSetModal;\nmodule.link(\"../../../../../contexts/ModalContext\", {\n  useSetModal(v) {\n    useSetModal = v;\n  }\n\n}, 11);\nlet useMethod;\nmodule.link(\"../../../../../contexts/ServerContext\", {\n  useMethod(v) {\n    useMethod = v;\n  }\n\n}, 12);\nlet useSetting;\nmodule.link(\"../../../../../contexts/SettingsContext\", {\n  useSetting(v) {\n    useSetting = v;\n  }\n\n}, 13);\nlet useTranslation;\nmodule.link(\"../../../../../contexts/TranslationContext\", {\n  useTranslation(v) {\n    useTranslation = v;\n  }\n\n}, 14);\nlet useEndpointActionExperimental;\nmodule.link(\"../../../../../hooks/useEndpointActionExperimental\", {\n  useEndpointActionExperimental(v) {\n    useEndpointActionExperimental = v;\n  }\n\n}, 15);\nlet useForm;\nmodule.link(\"../../../../../hooks/useForm\", {\n  useForm(v) {\n    useForm = v;\n  }\n\n}, 16);\nlet roomCoordinator;\nmodule.link(\"../../../../../lib/rooms/roomCoordinator\", {\n  roomCoordinator(v) {\n    roomCoordinator = v;\n  }\n\n}, 17);\nconst typeMap = {\n  c: 'Channels',\n  p: 'Groups',\n  d: 'DMs'\n};\n\nconst useInitialValues = (room, settings) => {\n  const {\n    t,\n    ro,\n    archived,\n    topic,\n    description,\n    announcement,\n    joinCodeRequired,\n    sysMes,\n    encrypted,\n    retention = {}\n  } = room;\n  const {\n    retentionPolicyEnabled,\n    maxAgeDefault\n  } = settings;\n  const retentionEnabledDefault = useSetting(\"RetentionPolicy_AppliesTo\".concat(typeMap[room.t]));\n  const excludePinnedDefault = useSetting('RetentionPolicy_DoNotPrunePinned');\n  const filesOnlyDefault = useSetting('RetentionPolicy_FilesOnly');\n  return useMemo(() => {\n    var _retention$enabled, _retention$excludePin, _retention$filesOnly;\n\n    return _objectSpread({\n      roomName: t === 'd' ? room.usernames.join(' x ') : roomCoordinator.getRoomName(t, _objectSpread({\n        type: t\n      }, room)),\n      roomType: t,\n      readOnly: !!ro,\n      reactWhenReadOnly: false,\n      archived: !!archived,\n      roomTopic: topic !== null && topic !== void 0 ? topic : '',\n      roomDescription: description !== null && description !== void 0 ? description : '',\n      roomAnnouncement: announcement !== null && announcement !== void 0 ? announcement : '',\n      roomAvatar: undefined,\n      joinCode: '',\n      joinCodeRequired: !!joinCodeRequired,\n      systemMessages: Array.isArray(sysMes) ? sysMes : [],\n      hideSysMes: !!(sysMes !== null && sysMes !== void 0 && sysMes.length),\n      encrypted\n    }, retentionPolicyEnabled && {\n      retentionEnabled: (_retention$enabled = retention.enabled) !== null && _retention$enabled !== void 0 ? _retention$enabled : retentionEnabledDefault,\n      retentionOverrideGlobal: !!retention.overrideGlobal,\n      retentionMaxAge: Math.min(retention.maxAge, maxAgeDefault) || maxAgeDefault,\n      retentionExcludePinned: (_retention$excludePin = retention.excludePinned) !== null && _retention$excludePin !== void 0 ? _retention$excludePin : excludePinnedDefault,\n      retentionFilesOnly: (_retention$filesOnly = retention.filesOnly) !== null && _retention$filesOnly !== void 0 ? _retention$filesOnly : filesOnlyDefault\n    });\n  }, [announcement, archived, description, excludePinnedDefault, filesOnlyDefault, joinCodeRequired, maxAgeDefault, retention.enabled, retention.excludePinned, retention.filesOnly, retention.maxAge, retention.overrideGlobal, retentionEnabledDefault, retentionPolicyEnabled, ro, room, sysMes, t, topic, encrypted]);\n};\n\nconst getCanChangeType = (room, canCreateChannel, canCreateGroup, isAdmin) => (!room.default || isAdmin) && (room.t === 'p' && canCreateChannel || room.t === 'c' && canCreateGroup);\n\nfunction EditChannel(_ref) {\n  let {\n    room,\n    onClickClose,\n    onClickBack\n  } = _ref;\n  const t = useTranslation();\n  const setModal = useSetModal();\n  const retentionPolicyEnabled = useSetting('RetentionPolicy_Enabled');\n  const maxAgeDefault = useSetting(\"RetentionPolicy_MaxAge_\".concat(typeMap[room.t])) || 30;\n  const saveData = useRef({});\n  const onChange = useCallback(_ref2 => {\n    let {\n      initialValue,\n      value,\n      key\n    } = _ref2;\n    const {\n      current\n    } = saveData;\n\n    if (JSON.stringify(initialValue) !== JSON.stringify(value)) {\n      if (key === 'systemMessages' && (value === null || value === void 0 ? void 0 : value.length) > 0) {\n        current.hideSysMes = true;\n      }\n\n      current[key] = value;\n    } else {\n      delete current[key];\n    }\n  }, []);\n  const {\n    values,\n    handlers,\n    hasUnsavedChanges,\n    reset,\n    commit\n  } = useForm(useInitialValues(room, {\n    retentionPolicyEnabled,\n    maxAgeDefault\n  }), onChange);\n  const sysMesOptions = useMemo(() => MessageTypesValues.map(_ref3 => {\n    let {\n      key,\n      i18nLabel\n    } = _ref3;\n    return [key, t(i18nLabel)];\n  }), [t]);\n  const {\n    roomName,\n    roomType,\n    readOnly,\n    encrypted,\n    roomAvatar,\n    archived,\n    roomTopic,\n    roomDescription,\n    roomAnnouncement,\n    reactWhenReadOnly,\n    joinCode,\n    joinCodeRequired,\n    systemMessages,\n    hideSysMes,\n    retentionEnabled,\n    retentionOverrideGlobal,\n    retentionMaxAge,\n    retentionExcludePinned,\n    retentionFilesOnly\n  } = values;\n  const {\n    handleJoinCode,\n    handleJoinCodeRequired,\n    handleSystemMessages,\n    handleEncrypted,\n    handleHideSysMes,\n    handleRoomName,\n    handleReadOnly,\n    handleArchived,\n    handleRoomAvatar,\n    handleReactWhenReadOnly,\n    handleRoomType,\n    handleRoomTopic,\n    handleRoomDescription,\n    handleRoomAnnouncement,\n    handleRetentionEnabled,\n    handleRetentionOverrideGlobal,\n    handleRetentionMaxAge,\n    handleRetentionExcludePinned,\n    handleRetentionFilesOnly\n  } = handlers;\n  const [canViewName, canViewTopic, canViewAnnouncement, canViewArchived, canViewDescription, canViewType, canViewReadOnly, canViewHideSysMes, canViewJoinCode, canViewReactWhenReadOnly, canViewEncrypted] = useMemo(() => {\n    var _roomCoordinator$getR;\n\n    const isAllowed = ((_roomCoordinator$getR = roomCoordinator.getRoomDirectives(room.t)) === null || _roomCoordinator$getR === void 0 ? void 0 : _roomCoordinator$getR.allowRoomSettingChange) || (() => {});\n\n    return [isAllowed(room, RoomSettingsEnum.NAME), isAllowed(room, RoomSettingsEnum.TOPIC), isAllowed(room, RoomSettingsEnum.ANNOUNCEMENT), isAllowed(room, RoomSettingsEnum.ARCHIVE_OR_UNARCHIVE), isAllowed(room, RoomSettingsEnum.DESCRIPTION), isAllowed(room, RoomSettingsEnum.TYPE), isAllowed(room, RoomSettingsEnum.READ_ONLY), isAllowed(room, RoomSettingsEnum.SYSTEM_MESSAGES), isAllowed(room, RoomSettingsEnum.JOIN_CODE), isAllowed(room, RoomSettingsEnum.REACT_WHEN_READ_ONLY), isAllowed(room, RoomSettingsEnum.E2E)];\n  }, [room]);\n  const isAdmin = useRole('admin');\n  const canCreateChannel = usePermission('create-c');\n  const canCreateGroup = usePermission('create-p');\n  const canChangeType = getCanChangeType(room, canCreateChannel, canCreateGroup, isAdmin);\n  const canSetRo = usePermission('set-readonly', room._id);\n  const canSetReactWhenRo = usePermission('set-react-when-readonly', room._id);\n  const canEditRoomRetentionPolicy = usePermission('edit-room-retention-policy', room._id);\n  const canArchiveOrUnarchive = useAtLeastOnePermission(useMemo(() => ['archive-room', 'unarchive-room'], []), room._id);\n  const canDelete = usePermission(\"delete-\".concat(room.t));\n  const canToggleEncryption = usePermission('toggle-room-e2e-encryption', room._id) && (room.encrypted || e2e.isReady());\n  const changeArchivation = archived !== !!room.archived;\n  const archiveSelector = room.archived ? 'unarchive' : 'archive';\n  const archiveMessage = room.archived ? 'Room_has_been_unarchived' : 'Room_has_been_archived';\n  const saveAction = useEndpointActionExperimental('POST', 'rooms.saveRoomSettings', t('Room_updated_successfully'));\n  const archiveAction = useEndpointActionExperimental('POST', 'rooms.changeArchivationState', t(archiveMessage));\n  const handleSave = useMutableCallback(async () => {\n    const _saveData$current = saveData.current,\n          {\n      joinCodeRequired,\n      hideSysMes\n    } = _saveData$current,\n          data = _objectWithoutProperties(_saveData$current, _excluded);\n\n    delete data.archived;\n\n    const save = () => saveAction(_objectSpread(_objectSpread(_objectSpread({\n      rid: room._id\n    }, data), joinCode && {\n      joinCode: joinCodeRequired ? joinCode : ''\n    }), (data.systemMessages || !hideSysMes) && {\n      systemMessages: hideSysMes && systemMessages\n    }));\n\n    const archive = () => archiveAction({\n      rid: room._id,\n      action: archiveSelector\n    });\n\n    await Promise.all([hasUnsavedChanges && save(), changeArchivation && archive()].filter(Boolean));\n    saveData.current = {};\n    commit();\n  });\n  const deleteRoom = useMethod('eraseRoom');\n  const handleDelete = useMutableCallback(() => {\n    const onCancel = () => setModal(undefined);\n\n    const onConfirm = async () => {\n      await deleteRoom(room._id);\n      onCancel();\n    };\n\n    setModal( /*#__PURE__*/React.createElement(GenericModal, {\n      variant: \"danger\",\n      onConfirm: onConfirm,\n      onCancel: onCancel,\n      confirmText: t('Yes_delete_it')\n    }, t('Delete_Room_Warning')));\n  });\n  const changeRoomType = useMutableCallback(() => {\n    handleRoomType(roomType === 'p' ? 'c' : 'p');\n  });\n  const onChangeMaxAge = useMutableCallback(e => {\n    handleRetentionMaxAge(Math.max(1, Number(e.currentTarget.value)));\n  });\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(VerticalBar.Header, null, onClickBack && /*#__PURE__*/React.createElement(VerticalBar.Back, {\n    onClick: onClickBack\n  }), /*#__PURE__*/React.createElement(VerticalBar.Text, null, t('edit-room')), onClickClose && /*#__PURE__*/React.createElement(VerticalBar.Close, {\n    onClick: onClickClose\n  })), /*#__PURE__*/React.createElement(VerticalBar.ScrollableContent, {\n    p: \"x24\",\n    is: \"form\",\n    onSubmit: useMutableCallback(e => e.preventDefault())\n  }, /*#__PURE__*/React.createElement(Box, {\n    display: \"flex\",\n    justifyContent: \"center\"\n  }, /*#__PURE__*/React.createElement(RoomAvatarEditor, {\n    room: room,\n    roomAvatar: roomAvatar,\n    onChangeAvatar: handleRoomAvatar\n  })), /*#__PURE__*/React.createElement(Field, null, /*#__PURE__*/React.createElement(Field.Label, null, t('Name')), /*#__PURE__*/React.createElement(Field.Row, null, /*#__PURE__*/React.createElement(TextInput, {\n    disabled: !canViewName,\n    value: roomName,\n    onChange: handleRoomName,\n    flexGrow: 1\n  }))), canViewDescription && /*#__PURE__*/React.createElement(Field, null, /*#__PURE__*/React.createElement(Field.Label, null, t('Description')), /*#__PURE__*/React.createElement(Field.Row, null, /*#__PURE__*/React.createElement(TextAreaInput, {\n    rows: 4,\n    value: roomDescription,\n    onChange: handleRoomDescription,\n    flexGrow: 1\n  }))), canViewAnnouncement && /*#__PURE__*/React.createElement(Field, null, /*#__PURE__*/React.createElement(Field.Label, null, t('Announcement')), /*#__PURE__*/React.createElement(Field.Row, null, /*#__PURE__*/React.createElement(TextAreaInput, {\n    rows: 4,\n    value: roomAnnouncement,\n    onChange: handleRoomAnnouncement,\n    flexGrow: 1\n  }))), canViewTopic && /*#__PURE__*/React.createElement(Field, null, /*#__PURE__*/React.createElement(Field.Label, null, t('Topic')), /*#__PURE__*/React.createElement(Field.Row, null, /*#__PURE__*/React.createElement(TextAreaInput, {\n    rows: 4,\n    value: roomTopic,\n    onChange: handleRoomTopic,\n    flexGrow: 1\n  }))), canViewType && /*#__PURE__*/React.createElement(Field, null, /*#__PURE__*/React.createElement(Box, {\n    display: \"flex\",\n    flexDirection: \"row\",\n    justifyContent: \"space-between\",\n    flexGrow: 1\n  }, /*#__PURE__*/React.createElement(Field.Label, null, t('Private')), /*#__PURE__*/React.createElement(Field.Row, null, /*#__PURE__*/React.createElement(ToggleSwitch, {\n    disabled: !canChangeType,\n    checked: roomType === 'p',\n    onChange: changeRoomType\n  }))), /*#__PURE__*/React.createElement(Field.Hint, null, t('Teams_New_Private_Description_Enabled'))), canViewReadOnly && /*#__PURE__*/React.createElement(Field, null, /*#__PURE__*/React.createElement(Box, {\n    display: \"flex\",\n    flexDirection: \"row\",\n    justifyContent: \"space-between\",\n    flexGrow: 1\n  }, /*#__PURE__*/React.createElement(Field.Label, null, t('Read_only')), /*#__PURE__*/React.createElement(Field.Row, null, /*#__PURE__*/React.createElement(ToggleSwitch, {\n    disabled: !canSetRo,\n    checked: readOnly,\n    onChange: handleReadOnly\n  }))), /*#__PURE__*/React.createElement(Field.Hint, null, t('Only_authorized_users_can_write_new_messages'))), canViewReactWhenReadOnly && /*#__PURE__*/React.createElement(Field, null, /*#__PURE__*/React.createElement(Box, {\n    display: \"flex\",\n    flexDirection: \"row\",\n    justifyContent: \"space-between\",\n    flexGrow: 1\n  }, /*#__PURE__*/React.createElement(Field.Label, null, t('React_when_read_only')), /*#__PURE__*/React.createElement(Field.Row, null, /*#__PURE__*/React.createElement(ToggleSwitch, {\n    disabled: !canSetReactWhenRo,\n    checked: reactWhenReadOnly,\n    onChange: handleReactWhenReadOnly\n  }))), /*#__PURE__*/React.createElement(Field.Hint, null, t('Only_authorized_users_can_react_to_messages'))), canViewArchived && /*#__PURE__*/React.createElement(Field, null, /*#__PURE__*/React.createElement(Box, {\n    display: \"flex\",\n    flexDirection: \"row\",\n    justifyContent: \"space-between\",\n    flexGrow: 1\n  }, /*#__PURE__*/React.createElement(Field.Label, null, t('Room_archivation_state_true')), /*#__PURE__*/React.createElement(Field.Row, null, /*#__PURE__*/React.createElement(ToggleSwitch, {\n    disabled: !canArchiveOrUnarchive,\n    checked: archived,\n    onChange: handleArchived\n  })))), canViewJoinCode && /*#__PURE__*/React.createElement(Field, null, /*#__PURE__*/React.createElement(Box, {\n    display: \"flex\",\n    flexDirection: \"row\",\n    justifyContent: \"space-between\",\n    flexGrow: 1\n  }, /*#__PURE__*/React.createElement(Field.Label, null, t('Password_to_access')), /*#__PURE__*/React.createElement(Field.Row, null, /*#__PURE__*/React.createElement(ToggleSwitch, {\n    checked: joinCodeRequired,\n    onChange: handleJoinCodeRequired\n  }))), /*#__PURE__*/React.createElement(Field.Row, null, /*#__PURE__*/React.createElement(PasswordInput, {\n    disabled: !joinCodeRequired,\n    value: joinCode,\n    onChange: handleJoinCode,\n    placeholder: t('Reset_password'),\n    flexGrow: 1\n  }))), canViewHideSysMes && /*#__PURE__*/React.createElement(Field, null, /*#__PURE__*/React.createElement(Box, {\n    display: \"flex\",\n    flexDirection: \"row\",\n    justifyContent: \"space-between\",\n    flexGrow: 1\n  }, /*#__PURE__*/React.createElement(Field.Label, null, t('Hide_System_Messages')), /*#__PURE__*/React.createElement(Field.Row, null, /*#__PURE__*/React.createElement(ToggleSwitch, {\n    checked: hideSysMes,\n    onChange: handleHideSysMes\n  }))), /*#__PURE__*/React.createElement(Field.Row, null, /*#__PURE__*/React.createElement(MultiSelect, {\n    maxWidth: \"100%\",\n    options: sysMesOptions,\n    disabled: !hideSysMes,\n    value: systemMessages,\n    onChange: handleSystemMessages,\n    placeholder: t('Select_an_option'),\n    flexGrow: 1\n  }))), canViewEncrypted && /*#__PURE__*/React.createElement(Field, null, /*#__PURE__*/React.createElement(Box, {\n    display: \"flex\",\n    flexDirection: \"row\",\n    justifyContent: \"space-between\",\n    flexGrow: 1\n  }, /*#__PURE__*/React.createElement(Field.Label, null, t('Encrypted')), /*#__PURE__*/React.createElement(Field.Row, null, /*#__PURE__*/React.createElement(ToggleSwitch, {\n    disabled: !canToggleEncryption,\n    checked: encrypted,\n    onChange: handleEncrypted\n  })))), retentionPolicyEnabled && /*#__PURE__*/React.createElement(Accordion, null, /*#__PURE__*/React.createElement(Accordion.Item, {\n    title: t('Prune')\n  }, /*#__PURE__*/React.createElement(FieldGroup, null, /*#__PURE__*/React.createElement(Field, null, /*#__PURE__*/React.createElement(Box, {\n    display: \"flex\",\n    flexDirection: \"row\",\n    justifyContent: \"space-between\",\n    flexGrow: 1\n  }, /*#__PURE__*/React.createElement(Field.Label, null, t('RetentionPolicyRoom_Enabled')), /*#__PURE__*/React.createElement(Field.Row, null, /*#__PURE__*/React.createElement(ToggleSwitch, {\n    checked: retentionEnabled,\n    onChange: handleRetentionEnabled\n  })))), /*#__PURE__*/React.createElement(Field, null, /*#__PURE__*/React.createElement(Box, {\n    display: \"flex\",\n    flexDirection: \"row\",\n    justifyContent: \"space-between\",\n    flexGrow: 1\n  }, /*#__PURE__*/React.createElement(Field.Label, null, t('RetentionPolicyRoom_OverrideGlobal')), /*#__PURE__*/React.createElement(Field.Row, null, /*#__PURE__*/React.createElement(ToggleSwitch, {\n    disabled: !retentionEnabled || !canEditRoomRetentionPolicy,\n    checked: retentionOverrideGlobal,\n    onChange: handleRetentionOverrideGlobal\n  })))), retentionOverrideGlobal && /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Callout, {\n    type: \"danger\"\n  }, /*#__PURE__*/React.createElement(RawText, null, t('RetentionPolicyRoom_ReadTheDocs'))), /*#__PURE__*/React.createElement(Field, null, /*#__PURE__*/React.createElement(Field.Label, null, t('RetentionPolicyRoom_MaxAge', {\n    max: maxAgeDefault\n  })), /*#__PURE__*/React.createElement(Field.Row, null, /*#__PURE__*/React.createElement(NumberInput, {\n    value: retentionMaxAge,\n    onChange: onChangeMaxAge,\n    flexGrow: 1\n  }))), /*#__PURE__*/React.createElement(Field, null, /*#__PURE__*/React.createElement(Box, {\n    display: \"flex\",\n    flexDirection: \"row\",\n    justifyContent: \"space-between\",\n    flexGrow: 1\n  }, /*#__PURE__*/React.createElement(Field.Label, null, t('RetentionPolicyRoom_ExcludePinned')), /*#__PURE__*/React.createElement(Field.Row, null, /*#__PURE__*/React.createElement(ToggleSwitch, {\n    checked: retentionExcludePinned,\n    onChange: handleRetentionExcludePinned\n  })))), /*#__PURE__*/React.createElement(Field, null, /*#__PURE__*/React.createElement(Box, {\n    display: \"flex\",\n    flexDirection: \"row\",\n    justifyContent: \"space-between\",\n    flexGrow: 1\n  }, /*#__PURE__*/React.createElement(Field.Label, null, t('RetentionPolicyRoom_FilesOnly')), /*#__PURE__*/React.createElement(Field.Row, null, /*#__PURE__*/React.createElement(ToggleSwitch, {\n    checked: retentionFilesOnly,\n    onChange: handleRetentionFilesOnly\n  })))))))), /*#__PURE__*/React.createElement(Field, null, /*#__PURE__*/React.createElement(Field.Row, null, /*#__PURE__*/React.createElement(Box, {\n    display: \"flex\",\n    flexDirection: \"row\",\n    justifyContent: \"space-between\",\n    w: \"full\"\n  }, /*#__PURE__*/React.createElement(ButtonGroup, {\n    stretch: true,\n    flexGrow: 1\n  }, /*#__PURE__*/React.createElement(Button, {\n    type: \"reset\",\n    disabled: !hasUnsavedChanges,\n    onClick: reset\n  }, t('Reset')), /*#__PURE__*/React.createElement(Button, {\n    flexGrow: 1,\n    disabled: !hasUnsavedChanges,\n    onClick: handleSave\n  }, t('Save')))))), /*#__PURE__*/React.createElement(Field, null, /*#__PURE__*/React.createElement(Field.Row, null, /*#__PURE__*/React.createElement(Button, {\n    flexGrow: 1,\n    primary: true,\n    danger: true,\n    disabled: !canDelete,\n    onClick: handleDelete\n  }, /*#__PURE__*/React.createElement(Icon, {\n    name: \"trash\",\n    size: \"x16\"\n  }), t('Delete'))))));\n}\n\nmodule.exportDefault(EditChannel);","map":{"version":3,"sources":["client/views/room/contextualBar/Info/EditRoomInfo/EditChannel.js"],"names":["_objectWithoutProperties","module","link","default","v","_objectSpread","Field","TextInput","PasswordInput","ToggleSwitch","MultiSelect","Accordion","Callout","NumberInput","FieldGroup","Button","ButtonGroup","Box","Icon","TextAreaInput","useMutableCallback","React","useCallback","useMemo","useRef","e2e","MessageTypesValues","RoomSettingsEnum","GenericModal","RawText","VerticalBar","RoomAvatarEditor","usePermission","useAtLeastOnePermission","useRole","useSetModal","useMethod","useSetting","useTranslation","useEndpointActionExperimental","useForm","roomCoordinator","typeMap","c","p","d","useInitialValues","room","settings","t","ro","archived","topic","description","announcement","joinCodeRequired","sysMes","encrypted","retention","retentionPolicyEnabled","maxAgeDefault","retentionEnabledDefault","excludePinnedDefault","filesOnlyDefault","roomName","usernames","join","getRoomName","type","roomType","readOnly","reactWhenReadOnly","roomTopic","roomDescription","roomAnnouncement","roomAvatar","undefined","joinCode","systemMessages","Array","isArray","hideSysMes","length","retentionEnabled","enabled","retentionOverrideGlobal","overrideGlobal","retentionMaxAge","Math","min","maxAge","retentionExcludePinned","excludePinned","retentionFilesOnly","filesOnly","getCanChangeType","canCreateChannel","canCreateGroup","isAdmin","EditChannel","onClickClose","onClickBack","setModal","saveData","onChange","initialValue","value","key","current","JSON","stringify","values","handlers","hasUnsavedChanges","reset","commit","sysMesOptions","map","i18nLabel","handleJoinCode","handleJoinCodeRequired","handleSystemMessages","handleEncrypted","handleHideSysMes","handleRoomName","handleReadOnly","handleArchived","handleRoomAvatar","handleReactWhenReadOnly","handleRoomType","handleRoomTopic","handleRoomDescription","handleRoomAnnouncement","handleRetentionEnabled","handleRetentionOverrideGlobal","handleRetentionMaxAge","handleRetentionExcludePinned","handleRetentionFilesOnly","canViewName","canViewTopic","canViewAnnouncement","canViewArchived","canViewDescription","canViewType","canViewReadOnly","canViewHideSysMes","canViewJoinCode","canViewReactWhenReadOnly","canViewEncrypted","isAllowed","getRoomDirectives","allowRoomSettingChange","NAME","TOPIC","ANNOUNCEMENT","ARCHIVE_OR_UNARCHIVE","DESCRIPTION","TYPE","READ_ONLY","SYSTEM_MESSAGES","JOIN_CODE","REACT_WHEN_READ_ONLY","E2E","canChangeType","canSetRo","_id","canSetReactWhenRo","canEditRoomRetentionPolicy","canArchiveOrUnarchive","canDelete","canToggleEncryption","isReady","changeArchivation","archiveSelector","archiveMessage","saveAction","archiveAction","handleSave","data","save","rid","archive","action","Promise","all","filter","Boolean","deleteRoom","handleDelete","onCancel","onConfirm","changeRoomType","onChangeMaxAge","e","max","Number","currentTarget","preventDefault","exportDefault"],"mappings":"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","sourcesContent":["import {\n\tField,\n\tTextInput,\n\tPasswordInput,\n\tToggleSwitch,\n\tMultiSelect,\n\tAccordion,\n\tCallout,\n\tNumberInput,\n\tFieldGroup,\n\tButton,\n\tButtonGroup,\n\tBox,\n\tIcon,\n\tTextAreaInput,\n} from '@rocket.chat/fuselage';\nimport { useMutableCallback } from '@rocket.chat/fuselage-hooks';\nimport React, { useCallback, useMemo, useRef } from 'react';\n\nimport { e2e } from '../../../../../../app/e2e/client/rocketchat.e2e';\nimport { MessageTypesValues } from '../../../../../../app/lib/lib/MessageTypes';\nimport { RoomSettingsEnum } from '../../../../../../definition/IRoomTypeConfig';\nimport GenericModal from '../../../../../components/GenericModal';\nimport RawText from '../../../../../components/RawText';\nimport VerticalBar from '../../../../../components/VerticalBar';\nimport RoomAvatarEditor from '../../../../../components/avatar/RoomAvatarEditor';\nimport { usePermission, useAtLeastOnePermission, useRole } from '../../../../../contexts/AuthorizationContext';\nimport { useSetModal } from '../../../../../contexts/ModalContext';\nimport { useMethod } from '../../../../../contexts/ServerContext';\nimport { useSetting } from '../../../../../contexts/SettingsContext';\nimport { useTranslation } from '../../../../../contexts/TranslationContext';\nimport { useEndpointActionExperimental } from '../../../../../hooks/useEndpointActionExperimental';\nimport { useForm } from '../../../../../hooks/useForm';\nimport { roomCoordinator } from '../../../../../lib/rooms/roomCoordinator';\n\nconst typeMap = {\n\tc: 'Channels',\n\tp: 'Groups',\n\td: 'DMs',\n};\n\nconst useInitialValues = (room, settings) => {\n\tconst { t, ro, archived, topic, description, announcement, joinCodeRequired, sysMes, encrypted, retention = {} } = room;\n\n\tconst { retentionPolicyEnabled, maxAgeDefault } = settings;\n\n\tconst retentionEnabledDefault = useSetting(`RetentionPolicy_AppliesTo${typeMap[room.t]}`);\n\tconst excludePinnedDefault = useSetting('RetentionPolicy_DoNotPrunePinned');\n\tconst filesOnlyDefault = useSetting('RetentionPolicy_FilesOnly');\n\n\treturn useMemo(\n\t\t() => ({\n\t\t\troomName: t === 'd' ? room.usernames.join(' x ') : roomCoordinator.getRoomName(t, { type: t, ...room }),\n\t\t\troomType: t,\n\t\t\treadOnly: !!ro,\n\t\t\treactWhenReadOnly: false,\n\t\t\tarchived: !!archived,\n\t\t\troomTopic: topic ?? '',\n\t\t\troomDescription: description ?? '',\n\t\t\troomAnnouncement: announcement ?? '',\n\t\t\troomAvatar: undefined,\n\t\t\tjoinCode: '',\n\t\t\tjoinCodeRequired: !!joinCodeRequired,\n\t\t\tsystemMessages: Array.isArray(sysMes) ? sysMes : [],\n\t\t\thideSysMes: !!sysMes?.length,\n\t\t\tencrypted,\n\t\t\t...(retentionPolicyEnabled && {\n\t\t\t\tretentionEnabled: retention.enabled ?? retentionEnabledDefault,\n\t\t\t\tretentionOverrideGlobal: !!retention.overrideGlobal,\n\t\t\t\tretentionMaxAge: Math.min(retention.maxAge, maxAgeDefault) || maxAgeDefault,\n\t\t\t\tretentionExcludePinned: retention.excludePinned ?? excludePinnedDefault,\n\t\t\t\tretentionFilesOnly: retention.filesOnly ?? filesOnlyDefault,\n\t\t\t}),\n\t\t}),\n\t\t[\n\t\t\tannouncement,\n\t\t\tarchived,\n\t\t\tdescription,\n\t\t\texcludePinnedDefault,\n\t\t\tfilesOnlyDefault,\n\t\t\tjoinCodeRequired,\n\t\t\tmaxAgeDefault,\n\t\t\tretention.enabled,\n\t\t\tretention.excludePinned,\n\t\t\tretention.filesOnly,\n\t\t\tretention.maxAge,\n\t\t\tretention.overrideGlobal,\n\t\t\tretentionEnabledDefault,\n\t\t\tretentionPolicyEnabled,\n\t\t\tro,\n\t\t\troom,\n\t\t\tsysMes,\n\t\t\tt,\n\t\t\ttopic,\n\t\t\tencrypted,\n\t\t],\n\t);\n};\n\nconst getCanChangeType = (room, canCreateChannel, canCreateGroup, isAdmin) =>\n\t(!room.default || isAdmin) && ((room.t === 'p' && canCreateChannel) || (room.t === 'c' && canCreateGroup));\n\nfunction EditChannel({ room, onClickClose, onClickBack }) {\n\tconst t = useTranslation();\n\n\tconst setModal = useSetModal();\n\n\tconst retentionPolicyEnabled = useSetting('RetentionPolicy_Enabled');\n\tconst maxAgeDefault = useSetting(`RetentionPolicy_MaxAge_${typeMap[room.t]}`) || 30;\n\n\tconst saveData = useRef({});\n\n\tconst onChange = useCallback(({ initialValue, value, key }) => {\n\t\tconst { current } = saveData;\n\t\tif (JSON.stringify(initialValue) !== JSON.stringify(value)) {\n\t\t\tif (key === 'systemMessages' && value?.length > 0) {\n\t\t\t\tcurrent.hideSysMes = true;\n\t\t\t}\n\t\t\tcurrent[key] = value;\n\t\t} else {\n\t\t\tdelete current[key];\n\t\t}\n\t}, []);\n\n\tconst { values, handlers, hasUnsavedChanges, reset, commit } = useForm(\n\t\tuseInitialValues(room, { retentionPolicyEnabled, maxAgeDefault }),\n\t\tonChange,\n\t);\n\n\tconst sysMesOptions = useMemo(() => MessageTypesValues.map(({ key, i18nLabel }) => [key, t(i18nLabel)]), [t]);\n\n\tconst {\n\t\troomName,\n\t\troomType,\n\t\treadOnly,\n\t\tencrypted,\n\t\troomAvatar,\n\t\tarchived,\n\t\troomTopic,\n\t\troomDescription,\n\t\troomAnnouncement,\n\t\treactWhenReadOnly,\n\t\tjoinCode,\n\t\tjoinCodeRequired,\n\t\tsystemMessages,\n\t\thideSysMes,\n\t\tretentionEnabled,\n\t\tretentionOverrideGlobal,\n\t\tretentionMaxAge,\n\t\tretentionExcludePinned,\n\t\tretentionFilesOnly,\n\t} = values;\n\n\tconst {\n\t\thandleJoinCode,\n\t\thandleJoinCodeRequired,\n\t\thandleSystemMessages,\n\t\thandleEncrypted,\n\t\thandleHideSysMes,\n\t\thandleRoomName,\n\t\thandleReadOnly,\n\t\thandleArchived,\n\t\thandleRoomAvatar,\n\t\thandleReactWhenReadOnly,\n\t\thandleRoomType,\n\t\thandleRoomTopic,\n\t\thandleRoomDescription,\n\t\thandleRoomAnnouncement,\n\t\thandleRetentionEnabled,\n\t\thandleRetentionOverrideGlobal,\n\t\thandleRetentionMaxAge,\n\t\thandleRetentionExcludePinned,\n\t\thandleRetentionFilesOnly,\n\t} = handlers;\n\n\tconst [\n\t\tcanViewName,\n\t\tcanViewTopic,\n\t\tcanViewAnnouncement,\n\t\tcanViewArchived,\n\t\tcanViewDescription,\n\t\tcanViewType,\n\t\tcanViewReadOnly,\n\t\tcanViewHideSysMes,\n\t\tcanViewJoinCode,\n\t\tcanViewReactWhenReadOnly,\n\t\tcanViewEncrypted,\n\t] = useMemo(() => {\n\t\tconst isAllowed = roomCoordinator.getRoomDirectives(room.t)?.allowRoomSettingChange || (() => {});\n\t\treturn [\n\t\t\tisAllowed(room, RoomSettingsEnum.NAME),\n\t\t\tisAllowed(room, RoomSettingsEnum.TOPIC),\n\t\t\tisAllowed(room, RoomSettingsEnum.ANNOUNCEMENT),\n\t\t\tisAllowed(room, RoomSettingsEnum.ARCHIVE_OR_UNARCHIVE),\n\t\t\tisAllowed(room, RoomSettingsEnum.DESCRIPTION),\n\t\t\tisAllowed(room, RoomSettingsEnum.TYPE),\n\t\t\tisAllowed(room, RoomSettingsEnum.READ_ONLY),\n\t\t\tisAllowed(room, RoomSettingsEnum.SYSTEM_MESSAGES),\n\t\t\tisAllowed(room, RoomSettingsEnum.JOIN_CODE),\n\t\t\tisAllowed(room, RoomSettingsEnum.REACT_WHEN_READ_ONLY),\n\t\t\tisAllowed(room, RoomSettingsEnum.E2E),\n\t\t];\n\t}, [room]);\n\n\tconst isAdmin = useRole('admin');\n\n\tconst canCreateChannel = usePermission('create-c');\n\tconst canCreateGroup = usePermission('create-p');\n\tconst canChangeType = getCanChangeType(room, canCreateChannel, canCreateGroup, isAdmin);\n\tconst canSetRo = usePermission('set-readonly', room._id);\n\tconst canSetReactWhenRo = usePermission('set-react-when-readonly', room._id);\n\tconst canEditRoomRetentionPolicy = usePermission('edit-room-retention-policy', room._id);\n\tconst canArchiveOrUnarchive = useAtLeastOnePermission(\n\t\tuseMemo(() => ['archive-room', 'unarchive-room'], []),\n\t\troom._id,\n\t);\n\tconst canDelete = usePermission(`delete-${room.t}`);\n\tconst canToggleEncryption = usePermission('toggle-room-e2e-encryption', room._id) && (room.encrypted || e2e.isReady());\n\n\tconst changeArchivation = archived !== !!room.archived;\n\tconst archiveSelector = room.archived ? 'unarchive' : 'archive';\n\tconst archiveMessage = room.archived ? 'Room_has_been_unarchived' : 'Room_has_been_archived';\n\tconst saveAction = useEndpointActionExperimental('POST', 'rooms.saveRoomSettings', t('Room_updated_successfully'));\n\tconst archiveAction = useEndpointActionExperimental('POST', 'rooms.changeArchivationState', t(archiveMessage));\n\n\tconst handleSave = useMutableCallback(async () => {\n\t\tconst { joinCodeRequired, hideSysMes, ...data } = saveData.current;\n\t\tdelete data.archived;\n\t\tconst save = () =>\n\t\t\tsaveAction({\n\t\t\t\trid: room._id,\n\t\t\t\t...data,\n\t\t\t\t...(joinCode && { joinCode: joinCodeRequired ? joinCode : '' }),\n\t\t\t\t...((data.systemMessages || !hideSysMes) && {\n\t\t\t\t\tsystemMessages: hideSysMes && systemMessages,\n\t\t\t\t}),\n\t\t\t});\n\n\t\tconst archive = () => archiveAction({ rid: room._id, action: archiveSelector });\n\n\t\tawait Promise.all([hasUnsavedChanges && save(), changeArchivation && archive()].filter(Boolean));\n\t\tsaveData.current = {};\n\t\tcommit();\n\t});\n\n\tconst deleteRoom = useMethod('eraseRoom');\n\n\tconst handleDelete = useMutableCallback(() => {\n\t\tconst onCancel = () => setModal(undefined);\n\t\tconst onConfirm = async () => {\n\t\t\tawait deleteRoom(room._id);\n\t\t\tonCancel();\n\t\t};\n\n\t\tsetModal(\n\t\t\t<GenericModal variant='danger' onConfirm={onConfirm} onCancel={onCancel} confirmText={t('Yes_delete_it')}>\n\t\t\t\t{t('Delete_Room_Warning')}\n\t\t\t</GenericModal>,\n\t\t);\n\t});\n\n\tconst changeRoomType = useMutableCallback(() => {\n\t\thandleRoomType(roomType === 'p' ? 'c' : 'p');\n\t});\n\n\tconst onChangeMaxAge = useMutableCallback((e) => {\n\t\thandleRetentionMaxAge(Math.max(1, Number(e.currentTarget.value)));\n\t});\n\n\treturn (\n\t\t<>\n\t\t\t<VerticalBar.Header>\n\t\t\t\t{onClickBack && <VerticalBar.Back onClick={onClickBack} />}\n\t\t\t\t<VerticalBar.Text>{t('edit-room')}</VerticalBar.Text>\n\t\t\t\t{onClickClose && <VerticalBar.Close onClick={onClickClose} />}\n\t\t\t</VerticalBar.Header>\n\n\t\t\t<VerticalBar.ScrollableContent p='x24' is='form' onSubmit={useMutableCallback((e) => e.preventDefault())}>\n\t\t\t\t<Box display='flex' justifyContent='center'>\n\t\t\t\t\t<RoomAvatarEditor room={room} roomAvatar={roomAvatar} onChangeAvatar={handleRoomAvatar} />\n\t\t\t\t</Box>\n\t\t\t\t<Field>\n\t\t\t\t\t<Field.Label>{t('Name')}</Field.Label>\n\t\t\t\t\t<Field.Row>\n\t\t\t\t\t\t<TextInput disabled={!canViewName} value={roomName} onChange={handleRoomName} flexGrow={1} />\n\t\t\t\t\t</Field.Row>\n\t\t\t\t</Field>\n\t\t\t\t{canViewDescription && (\n\t\t\t\t\t<Field>\n\t\t\t\t\t\t<Field.Label>{t('Description')}</Field.Label>\n\t\t\t\t\t\t<Field.Row>\n\t\t\t\t\t\t\t<TextAreaInput rows={4} value={roomDescription} onChange={handleRoomDescription} flexGrow={1} />\n\t\t\t\t\t\t</Field.Row>\n\t\t\t\t\t</Field>\n\t\t\t\t)}\n\t\t\t\t{canViewAnnouncement && (\n\t\t\t\t\t<Field>\n\t\t\t\t\t\t<Field.Label>{t('Announcement')}</Field.Label>\n\t\t\t\t\t\t<Field.Row>\n\t\t\t\t\t\t\t<TextAreaInput rows={4} value={roomAnnouncement} onChange={handleRoomAnnouncement} flexGrow={1} />\n\t\t\t\t\t\t</Field.Row>\n\t\t\t\t\t</Field>\n\t\t\t\t)}\n\t\t\t\t{canViewTopic && (\n\t\t\t\t\t<Field>\n\t\t\t\t\t\t<Field.Label>{t('Topic')}</Field.Label>\n\t\t\t\t\t\t<Field.Row>\n\t\t\t\t\t\t\t<TextAreaInput rows={4} value={roomTopic} onChange={handleRoomTopic} flexGrow={1} />\n\t\t\t\t\t\t</Field.Row>\n\t\t\t\t\t</Field>\n\t\t\t\t)}\n\t\t\t\t{canViewType && (\n\t\t\t\t\t<Field>\n\t\t\t\t\t\t<Box display='flex' flexDirection='row' justifyContent='space-between' flexGrow={1}>\n\t\t\t\t\t\t\t<Field.Label>{t('Private')}</Field.Label>\n\t\t\t\t\t\t\t<Field.Row>\n\t\t\t\t\t\t\t\t<ToggleSwitch disabled={!canChangeType} checked={roomType === 'p'} onChange={changeRoomType} />\n\t\t\t\t\t\t\t</Field.Row>\n\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t<Field.Hint>{t('Teams_New_Private_Description_Enabled')}</Field.Hint>\n\t\t\t\t\t</Field>\n\t\t\t\t)}\n\t\t\t\t{canViewReadOnly && (\n\t\t\t\t\t<Field>\n\t\t\t\t\t\t<Box display='flex' flexDirection='row' justifyContent='space-between' flexGrow={1}>\n\t\t\t\t\t\t\t<Field.Label>{t('Read_only')}</Field.Label>\n\t\t\t\t\t\t\t<Field.Row>\n\t\t\t\t\t\t\t\t<ToggleSwitch disabled={!canSetRo} checked={readOnly} onChange={handleReadOnly} />\n\t\t\t\t\t\t\t</Field.Row>\n\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t<Field.Hint>{t('Only_authorized_users_can_write_new_messages')}</Field.Hint>\n\t\t\t\t\t</Field>\n\t\t\t\t)}\n\t\t\t\t{canViewReactWhenReadOnly && (\n\t\t\t\t\t<Field>\n\t\t\t\t\t\t<Box display='flex' flexDirection='row' justifyContent='space-between' flexGrow={1}>\n\t\t\t\t\t\t\t<Field.Label>{t('React_when_read_only')}</Field.Label>\n\t\t\t\t\t\t\t<Field.Row>\n\t\t\t\t\t\t\t\t<ToggleSwitch disabled={!canSetReactWhenRo} checked={reactWhenReadOnly} onChange={handleReactWhenReadOnly} />\n\t\t\t\t\t\t\t</Field.Row>\n\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t<Field.Hint>{t('Only_authorized_users_can_react_to_messages')}</Field.Hint>\n\t\t\t\t\t</Field>\n\t\t\t\t)}\n\t\t\t\t{canViewArchived && (\n\t\t\t\t\t<Field>\n\t\t\t\t\t\t<Box display='flex' flexDirection='row' justifyContent='space-between' flexGrow={1}>\n\t\t\t\t\t\t\t<Field.Label>{t('Room_archivation_state_true')}</Field.Label>\n\t\t\t\t\t\t\t<Field.Row>\n\t\t\t\t\t\t\t\t<ToggleSwitch disabled={!canArchiveOrUnarchive} checked={archived} onChange={handleArchived} />\n\t\t\t\t\t\t\t</Field.Row>\n\t\t\t\t\t\t</Box>\n\t\t\t\t\t</Field>\n\t\t\t\t)}\n\t\t\t\t{canViewJoinCode && (\n\t\t\t\t\t<Field>\n\t\t\t\t\t\t<Box display='flex' flexDirection='row' justifyContent='space-between' flexGrow={1}>\n\t\t\t\t\t\t\t<Field.Label>{t('Password_to_access')}</Field.Label>\n\t\t\t\t\t\t\t<Field.Row>\n\t\t\t\t\t\t\t\t<ToggleSwitch checked={joinCodeRequired} onChange={handleJoinCodeRequired} />\n\t\t\t\t\t\t\t</Field.Row>\n\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t<Field.Row>\n\t\t\t\t\t\t\t<PasswordInput\n\t\t\t\t\t\t\t\tdisabled={!joinCodeRequired}\n\t\t\t\t\t\t\t\tvalue={joinCode}\n\t\t\t\t\t\t\t\tonChange={handleJoinCode}\n\t\t\t\t\t\t\t\tplaceholder={t('Reset_password')}\n\t\t\t\t\t\t\t\tflexGrow={1}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</Field.Row>\n\t\t\t\t\t</Field>\n\t\t\t\t)}\n\t\t\t\t{canViewHideSysMes && (\n\t\t\t\t\t<Field>\n\t\t\t\t\t\t<Box display='flex' flexDirection='row' justifyContent='space-between' flexGrow={1}>\n\t\t\t\t\t\t\t<Field.Label>{t('Hide_System_Messages')}</Field.Label>\n\t\t\t\t\t\t\t<Field.Row>\n\t\t\t\t\t\t\t\t<ToggleSwitch checked={hideSysMes} onChange={handleHideSysMes} />\n\t\t\t\t\t\t\t</Field.Row>\n\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t<Field.Row>\n\t\t\t\t\t\t\t<MultiSelect\n\t\t\t\t\t\t\t\tmaxWidth='100%'\n\t\t\t\t\t\t\t\toptions={sysMesOptions}\n\t\t\t\t\t\t\t\tdisabled={!hideSysMes}\n\t\t\t\t\t\t\t\tvalue={systemMessages}\n\t\t\t\t\t\t\t\tonChange={handleSystemMessages}\n\t\t\t\t\t\t\t\tplaceholder={t('Select_an_option')}\n\t\t\t\t\t\t\t\tflexGrow={1}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</Field.Row>\n\t\t\t\t\t</Field>\n\t\t\t\t)}\n\t\t\t\t{canViewEncrypted && (\n\t\t\t\t\t<Field>\n\t\t\t\t\t\t<Box display='flex' flexDirection='row' justifyContent='space-between' flexGrow={1}>\n\t\t\t\t\t\t\t<Field.Label>{t('Encrypted')}</Field.Label>\n\t\t\t\t\t\t\t<Field.Row>\n\t\t\t\t\t\t\t\t<ToggleSwitch disabled={!canToggleEncryption} checked={encrypted} onChange={handleEncrypted} />\n\t\t\t\t\t\t\t</Field.Row>\n\t\t\t\t\t\t</Box>\n\t\t\t\t\t</Field>\n\t\t\t\t)}\n\t\t\t\t{retentionPolicyEnabled && (\n\t\t\t\t\t<Accordion>\n\t\t\t\t\t\t<Accordion.Item title={t('Prune')}>\n\t\t\t\t\t\t\t<FieldGroup>\n\t\t\t\t\t\t\t\t<Field>\n\t\t\t\t\t\t\t\t\t<Box display='flex' flexDirection='row' justifyContent='space-between' flexGrow={1}>\n\t\t\t\t\t\t\t\t\t\t<Field.Label>{t('RetentionPolicyRoom_Enabled')}</Field.Label>\n\t\t\t\t\t\t\t\t\t\t<Field.Row>\n\t\t\t\t\t\t\t\t\t\t\t<ToggleSwitch checked={retentionEnabled} onChange={handleRetentionEnabled} />\n\t\t\t\t\t\t\t\t\t\t</Field.Row>\n\t\t\t\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t\t\t</Field>\n\t\t\t\t\t\t\t\t<Field>\n\t\t\t\t\t\t\t\t\t<Box display='flex' flexDirection='row' justifyContent='space-between' flexGrow={1}>\n\t\t\t\t\t\t\t\t\t\t<Field.Label>{t('RetentionPolicyRoom_OverrideGlobal')}</Field.Label>\n\t\t\t\t\t\t\t\t\t\t<Field.Row>\n\t\t\t\t\t\t\t\t\t\t\t<ToggleSwitch\n\t\t\t\t\t\t\t\t\t\t\t\tdisabled={!retentionEnabled || !canEditRoomRetentionPolicy}\n\t\t\t\t\t\t\t\t\t\t\t\tchecked={retentionOverrideGlobal}\n\t\t\t\t\t\t\t\t\t\t\t\tonChange={handleRetentionOverrideGlobal}\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t</Field.Row>\n\t\t\t\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t\t\t</Field>\n\t\t\t\t\t\t\t\t{retentionOverrideGlobal && (\n\t\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t\t<Callout type='danger'>\n\t\t\t\t\t\t\t\t\t\t\t<RawText>{t('RetentionPolicyRoom_ReadTheDocs')}</RawText>\n\t\t\t\t\t\t\t\t\t\t</Callout>\n\t\t\t\t\t\t\t\t\t\t<Field>\n\t\t\t\t\t\t\t\t\t\t\t<Field.Label>{t('RetentionPolicyRoom_MaxAge', { max: maxAgeDefault })}</Field.Label>\n\t\t\t\t\t\t\t\t\t\t\t<Field.Row>\n\t\t\t\t\t\t\t\t\t\t\t\t<NumberInput value={retentionMaxAge} onChange={onChangeMaxAge} flexGrow={1} />\n\t\t\t\t\t\t\t\t\t\t\t</Field.Row>\n\t\t\t\t\t\t\t\t\t\t</Field>\n\t\t\t\t\t\t\t\t\t\t<Field>\n\t\t\t\t\t\t\t\t\t\t\t<Box display='flex' flexDirection='row' justifyContent='space-between' flexGrow={1}>\n\t\t\t\t\t\t\t\t\t\t\t\t<Field.Label>{t('RetentionPolicyRoom_ExcludePinned')}</Field.Label>\n\t\t\t\t\t\t\t\t\t\t\t\t<Field.Row>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<ToggleSwitch checked={retentionExcludePinned} onChange={handleRetentionExcludePinned} />\n\t\t\t\t\t\t\t\t\t\t\t\t</Field.Row>\n\t\t\t\t\t\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t\t\t\t\t</Field>\n\t\t\t\t\t\t\t\t\t\t<Field>\n\t\t\t\t\t\t\t\t\t\t\t<Box display='flex' flexDirection='row' justifyContent='space-between' flexGrow={1}>\n\t\t\t\t\t\t\t\t\t\t\t\t<Field.Label>{t('RetentionPolicyRoom_FilesOnly')}</Field.Label>\n\t\t\t\t\t\t\t\t\t\t\t\t<Field.Row>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<ToggleSwitch checked={retentionFilesOnly} onChange={handleRetentionFilesOnly} />\n\t\t\t\t\t\t\t\t\t\t\t\t</Field.Row>\n\t\t\t\t\t\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t\t\t\t\t</Field>\n\t\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t</FieldGroup>\n\t\t\t\t\t\t</Accordion.Item>\n\t\t\t\t\t</Accordion>\n\t\t\t\t)}\n\t\t\t\t<Field>\n\t\t\t\t\t<Field.Row>\n\t\t\t\t\t\t<Box display='flex' flexDirection='row' justifyContent='space-between' w='full'>\n\t\t\t\t\t\t\t<ButtonGroup stretch flexGrow={1}>\n\t\t\t\t\t\t\t\t<Button type='reset' disabled={!hasUnsavedChanges} onClick={reset}>\n\t\t\t\t\t\t\t\t\t{t('Reset')}\n\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t<Button flexGrow={1} disabled={!hasUnsavedChanges} onClick={handleSave}>\n\t\t\t\t\t\t\t\t\t{t('Save')}\n\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t</ButtonGroup>\n\t\t\t\t\t\t</Box>\n\t\t\t\t\t</Field.Row>\n\t\t\t\t</Field>\n\t\t\t\t<Field>\n\t\t\t\t\t<Field.Row>\n\t\t\t\t\t\t<Button flexGrow={1} primary danger disabled={!canDelete} onClick={handleDelete}>\n\t\t\t\t\t\t\t<Icon name='trash' size='x16' />\n\t\t\t\t\t\t\t{t('Delete')}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</Field.Row>\n\t\t\t\t</Field>\n\t\t\t</VerticalBar.ScrollableContent>\n\t\t</>\n\t);\n}\n\nexport default EditChannel;\n"]},"sourceType":"module","hash":"86d03bbdbc147118ccd6a914e4946155a93e7a11"}
