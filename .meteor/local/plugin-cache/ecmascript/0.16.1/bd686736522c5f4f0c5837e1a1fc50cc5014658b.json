{"metadata":{},"options":{"assumptions":{},"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat/app/apps/lib/misc/Utilities.js","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","classProperties","classPrivateProperties","jsx","nullishCoalescingOperator","nullishCoalescingOperator","optionalChaining","optionalCatchBinding","optionalCatchBinding","classProperties","classPrivateProperties","classPrivateMethods","classProperties","classPrivateProperties","asyncGenerators","asyncGenerators","objectRestSpread","logicalAssignment"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"allowUndeclaredExports":true,"strictMode":false},"caller":{"name":"meteor","arch":"web.browser"},"sourceFileName":"app/apps/lib/misc/Utilities.js","filename":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat/app/apps/lib/misc/Utilities.js","targets":{"android":"95.0.0","chrome":"95.0.0","edge":"95.0.0","firefox":"78.0.0","ie":"10.0.0","ios":"15.0.0","opera":"81.0.0","safari":"15.1.0","samsung":"14.0.0"},"cloneInputAst":true,"browserslistConfigFile":false,"passPerPreset":false,"envName":"development","cwd":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat","root":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat","rootMode":"root","plugins":[{"key":"base$0","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0","visitor":{"Program":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true},"options":{"avoidModernSyntax":false,"enforceStrictMode":false,"dynamicImport":true,"generateLetDeclarations":true}},{"key":"transform-runtime","visitor":{"MemberExpression":{"enter":[null]},"ObjectPattern":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":{},"_verified":{},"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]}},"options":{"version":"7.16.5","helpers":true,"useESModules":false,"corejs":false}},{"key":"proposal-class-properties","visitor":{"PrivateName":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{"loose":true}},{"key":"transform-react-jsx","visitor":{"_exploded":{},"_verified":{},"JSXNamespacedName":{"enter":[null]},"JSXSpreadChild":{"enter":[null]},"Program":{"enter":[null]},"JSXElement":{"exit":[null]},"JSXFragment":{"exit":[null]},"JSXAttribute":{"enter":[null]}},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","runtime":"classic","throwIfNamespace":true,"useBuiltIns":false}},{"key":"transform-react-display-name","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-react-pure-annotations","visitor":{"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"syntax-nullish-coalescing-operator","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-nullish-coalescing-operator","visitor":{"_exploded":{},"_verified":{},"LogicalExpression":{"enter":[null]}},"options":{}},{"key":"syntax-optional-chaining","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-optional-chaining","visitor":{"_exploded":true,"OptionalCallExpression":{"enter":[null]},"OptionalMemberExpression":{"enter":[null]},"_verified":true},"options":{}},{"key":"syntax-optional-catch-binding","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-optional-catch-binding","visitor":{"_exploded":{},"_verified":{},"CatchClause":{"enter":[null]}},"options":{}},{"key":"syntax-class-properties","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-class-properties","visitor":{"PrivateName":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{}},{"key":"syntax-async-generators","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-async-generator-functions","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]}},"options":{}},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-object-rest-spread","visitor":{"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"proposal-logical-assignment-operators","visitor":{"_exploded":{},"_verified":{},"AssignmentExpression":{"enter":[null]}},"options":{}},{"key":"transform-literals","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-template-literals","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-parameters","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{}},{"key":"transform-exponentiation-operator","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}}],"presets":[],"generatorOpts":{"filename":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat/app/apps/lib/misc/Utilities.js","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"app/apps/lib/misc/Utilities.js"}},"code":"module.export({\n  Utilities: () => Utilities\n});\n\nclass Utilities {\n  static getI18nKeyForApp(key, appId) {\n    return key && \"apps-\".concat(appId, \"-\").concat(key);\n  }\n\n  static curl(_ref) {\n    let {\n      method,\n      params,\n      auth,\n      headers = {},\n      url,\n      query,\n      content\n    } = _ref;\n    let opts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    const newLine = '\\\\\\n   ';\n    const cmd = ['curl']; // curl options\n\n    if (opts.verbose) {\n      cmd.push('-v');\n    }\n\n    if (opts.headers) {\n      cmd.push('-i');\n    } // method\n\n\n    cmd.push('-X');\n    cmd.push((method || 'GET').toUpperCase()); // URL\n\n    let u = url;\n\n    if (typeof params === 'object') {\n      Object.entries(params).forEach(_ref2 => {\n        let [key, value] = _ref2;\n        u = u.replace(\":\".concat(key), value);\n      });\n    }\n\n    if (typeof query === 'object') {\n      const queryString = Object.entries(query).map(_ref3 => {\n        let [key, value] = _ref3;\n        return \"\".concat(key, \"=\").concat(value);\n      }).join('&');\n      u += \"?\".concat(queryString);\n    }\n\n    cmd.push(u); // username\n\n    if (auth) {\n      cmd.push(newLine);\n      cmd.push('-u');\n      cmd.push(auth);\n    } // headers\n\n\n    const headerKeys = [];\n    Object.entries(headers).forEach(_ref4 => {\n      let [key, val] = _ref4;\n      key = key.toLowerCase();\n      headerKeys.push(key);\n      cmd.push(newLine);\n      cmd.push('-H');\n      cmd.push(\"\\\"\".concat(key).concat(val ? ': ' : ';').concat(val || '', \"\\\"\"));\n    });\n\n    if (content) {\n      if (typeof content === 'object') {\n        if (!headerKeys.includes('content-type')) {\n          cmd.push(newLine);\n          cmd.push('-H');\n          cmd.push('\"content-type: application/json\"');\n        }\n\n        content = JSON.stringify(content);\n      }\n\n      cmd.push(newLine);\n      cmd.push('--data-binary');\n      cmd.push(\"'\".concat(content, \"'\"));\n    }\n\n    return cmd.join(' ');\n  }\n\n}","map":{"version":3,"sources":["app/apps/lib/misc/Utilities.js"],"names":["module","export","Utilities","getI18nKeyForApp","key","appId","curl","method","params","auth","headers","url","query","content","opts","newLine","cmd","verbose","push","toUpperCase","u","Object","entries","forEach","value","replace","queryString","map","join","headerKeys","val","toLowerCase","includes","JSON","stringify"],"mappings":"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","sourcesContent":["export class Utilities {\n\tstatic getI18nKeyForApp(key, appId) {\n\t\treturn key && `apps-${appId}-${key}`;\n\t}\n\n\tstatic curl({ method, params, auth, headers = {}, url, query, content }, opts = {}) {\n\t\tconst newLine = '\\\\\\n   ';\n\n\t\tconst cmd = ['curl'];\n\n\t\t// curl options\n\t\tif (opts.verbose) {\n\t\t\tcmd.push('-v');\n\t\t}\n\t\tif (opts.headers) {\n\t\t\tcmd.push('-i');\n\t\t}\n\n\t\t// method\n\t\tcmd.push('-X');\n\t\tcmd.push((method || 'GET').toUpperCase());\n\n\t\t// URL\n\t\tlet u = url;\n\n\t\tif (typeof params === 'object') {\n\t\t\tObject.entries(params).forEach(([key, value]) => {\n\t\t\t\tu = u.replace(`:${key}`, value);\n\t\t\t});\n\t\t}\n\n\t\tif (typeof query === 'object') {\n\t\t\tconst queryString = Object.entries(query)\n\t\t\t\t.map(([key, value]) => `${key}=${value}`)\n\t\t\t\t.join('&');\n\t\t\tu += `?${queryString}`;\n\t\t}\n\t\tcmd.push(u);\n\n\t\t// username\n\t\tif (auth) {\n\t\t\tcmd.push(newLine);\n\t\t\tcmd.push('-u');\n\t\t\tcmd.push(auth);\n\t\t}\n\n\t\t// headers\n\t\tconst headerKeys = [];\n\t\tObject.entries(headers).forEach(([key, val]) => {\n\t\t\tkey = key.toLowerCase();\n\t\t\theaderKeys.push(key);\n\t\t\tcmd.push(newLine);\n\t\t\tcmd.push('-H');\n\t\t\tcmd.push(`\"${key}${val ? ': ' : ';'}${val || ''}\"`);\n\t\t});\n\n\t\tif (content) {\n\t\t\tif (typeof content === 'object') {\n\t\t\t\tif (!headerKeys.includes('content-type')) {\n\t\t\t\t\tcmd.push(newLine);\n\t\t\t\t\tcmd.push('-H');\n\t\t\t\t\tcmd.push('\"content-type: application/json\"');\n\t\t\t\t}\n\t\t\t\tcontent = JSON.stringify(content);\n\t\t\t}\n\n\t\t\tcmd.push(newLine);\n\t\t\tcmd.push('--data-binary');\n\t\t\tcmd.push(`'${content}'`);\n\t\t}\n\n\t\treturn cmd.join(' ');\n\t}\n}\n"]},"sourceType":"module","hash":"bd686736522c5f4f0c5837e1a1fc50cc5014658b"}
