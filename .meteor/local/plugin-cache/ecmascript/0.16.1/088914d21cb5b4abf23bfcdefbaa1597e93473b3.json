{"metadata":{},"options":{"assumptions":{},"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat/client/views/account/AccountProfileForm.js","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","classProperties","classPrivateProperties","jsx","nullishCoalescingOperator","nullishCoalescingOperator","optionalChaining","optionalCatchBinding","optionalCatchBinding","classProperties","classPrivateProperties","classPrivateMethods","classProperties","classPrivateProperties","asyncGenerators","asyncGenerators","objectRestSpread","logicalAssignment"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"allowUndeclaredExports":true,"strictMode":false},"caller":{"name":"meteor","arch":"web.browser.legacy"},"sourceFileName":"client/views/account/AccountProfileForm.js","filename":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat/client/views/account/AccountProfileForm.js","targets":{"android":"95.0.0","chrome":"95.0.0","edge":"95.0.0","firefox":"78.0.0","ie":"10.0.0","ios":"15.0.0","opera":"81.0.0","safari":"15.1.0","samsung":"14.0.0"},"cloneInputAst":true,"browserslistConfigFile":false,"passPerPreset":false,"envName":"development","cwd":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat","root":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat","rootMode":"root","plugins":[{"key":"base$0","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0","visitor":{"Program":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true},"options":{"avoidModernSyntax":true,"enforceStrictMode":false,"dynamicImport":true}},{"key":"transform-runtime","visitor":{"MemberExpression":{"enter":[null]},"ObjectPattern":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":{},"_verified":{},"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]}},"options":{"version":"7.16.5","helpers":true,"useESModules":false,"corejs":false}},{"key":"proposal-class-properties","visitor":{"PrivateName":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{"loose":true}},{"key":"base$0$3","visitor":{"FunctionExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$4","visitor":{"ForInStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-react-jsx","visitor":{"_exploded":{},"_verified":{},"JSXNamespacedName":{"enter":[null]},"JSXSpreadChild":{"enter":[null]},"Program":{"enter":[null]},"JSXElement":{"exit":[null]},"JSXFragment":{"exit":[null]},"JSXAttribute":{"enter":[null]}},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","runtime":"classic","throwIfNamespace":true,"useBuiltIns":false}},{"key":"transform-react-display-name","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-react-pure-annotations","visitor":{"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"syntax-nullish-coalescing-operator","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-nullish-coalescing-operator","visitor":{"_exploded":{},"_verified":{},"LogicalExpression":{"enter":[null]}},"options":{}},{"key":"syntax-optional-chaining","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-optional-chaining","visitor":{"_exploded":true,"OptionalCallExpression":{"enter":[null]},"OptionalMemberExpression":{"enter":[null]},"_verified":true},"options":{}},{"key":"syntax-optional-catch-binding","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-optional-catch-binding","visitor":{"_exploded":{},"_verified":{},"CatchClause":{"enter":[null]}},"options":{}},{"key":"syntax-class-properties","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-class-properties","visitor":{"PrivateName":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{}},{"key":"syntax-async-generators","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-async-generator-functions","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]}},"options":{}},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-object-rest-spread","visitor":{"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"proposal-logical-assignment-operators","visitor":{"_exploded":{},"_verified":{},"AssignmentExpression":{"enter":[null]}},"options":{}},{"key":"transform-arrow-functions","visitor":{"ArrowFunctionExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-block-scoped-functions","visitor":{"BlockStatement":{"enter":[null]},"SwitchCase":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-block-scoping","visitor":{"VariableDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"_exploded":true,"BlockStatement":{"enter":[null]},"SwitchStatement":{"enter":[null]},"Program":{"enter":[null]},"_verified":true,"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"transform-classes","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-computed-properties","visitor":{"ObjectExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-destructuring","visitor":{"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"VariableDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"transform-for-of","visitor":{"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-literals","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-object-super","visitor":{"ObjectExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-parameters","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{}},{"key":"transform-shorthand-properties","visitor":{"ObjectMethod":{"enter":[null]},"ObjectProperty":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-spread","visitor":{"ArrayExpression":{"enter":[null]},"CallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-sticky-regex","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-template-literals","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-typeof-symbol","visitor":{"UnaryExpression":{"enter":[null]},"_exploded":true,"_verified":true,"BlockStatement":{"enter":[null]},"CatchClause":{"enter":[null]},"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"Program":{"enter":[null]},"ObjectMethod":{"enter":[null]},"SwitchStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ForOfStatement":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"StaticBlock":{"enter":[null]},"TSModuleBlock":{"enter":[null]},"AssignmentPattern":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectPattern":{"enter":[null]}},"options":{}},{"key":"transform-unicode-regex","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-property-literals","visitor":{"ObjectProperty":{"exit":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-exponentiation-operator","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"regenerator-transform","visitor":{"_exploded":true,"_verified":true,"ObjectMethod":{"enter":[null],"exit":[null]},"ClassMethod":{"enter":[null],"exit":[null]},"ClassPrivateMethod":{"enter":[null],"exit":[null]},"FunctionDeclaration":{"exit":[null]},"FunctionExpression":{"exit":[null]},"ArrowFunctionExpression":{"exit":[null]}},"options":{}}],"presets":[],"generatorOpts":{"filename":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat/client/views/account/AccountProfileForm.js","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"client/views/account/AccountProfileForm.js"}},"code":"var _excluded = [\"values\", \"handlers\", \"user\", \"settings\", \"onSaveStateChange\"];\n\nvar _regeneratorRuntime;\n\nmodule.link(\"@babel/runtime/regenerator\", {\n  default: function (v) {\n    _regeneratorRuntime = v;\n  }\n}, 0);\n\nvar _extends;\n\nmodule.link(\"@babel/runtime/helpers/extends\", {\n  default: function (v) {\n    _extends = v;\n  }\n}, 1);\n\nvar _slicedToArray;\n\nmodule.link(\"@babel/runtime/helpers/slicedToArray\", {\n  default: function (v) {\n    _slicedToArray = v;\n  }\n}, 2);\n\nvar _objectWithoutProperties;\n\nmodule.link(\"@babel/runtime/helpers/objectWithoutProperties\", {\n  default: function (v) {\n    _objectWithoutProperties = v;\n  }\n}, 3);\nvar Field, FieldGroup, TextInput, TextAreaInput, Box, Icon, AnimatedVisibility, PasswordInput, Button, Grid, Margins;\nmodule.link(\"@rocket.chat/fuselage\", {\n  Field: function (v) {\n    Field = v;\n  },\n  FieldGroup: function (v) {\n    FieldGroup = v;\n  },\n  TextInput: function (v) {\n    TextInput = v;\n  },\n  TextAreaInput: function (v) {\n    TextAreaInput = v;\n  },\n  Box: function (v) {\n    Box = v;\n  },\n  Icon: function (v) {\n    Icon = v;\n  },\n  AnimatedVisibility: function (v) {\n    AnimatedVisibility = v;\n  },\n  PasswordInput: function (v) {\n    PasswordInput = v;\n  },\n  Button: function (v) {\n    Button = v;\n  },\n  Grid: function (v) {\n    Grid = v;\n  },\n  Margins: function (v) {\n    Margins = v;\n  }\n}, 0);\nvar useDebouncedCallback, useSafely;\nmodule.link(\"@rocket.chat/fuselage-hooks\", {\n  useDebouncedCallback: function (v) {\n    useDebouncedCallback = v;\n  },\n  useSafely: function (v) {\n    useSafely = v;\n  }\n}, 1);\nvar React, useCallback, useMemo, useEffect, useState;\nmodule.link(\"react\", {\n  \"default\": function (v) {\n    React = v;\n  },\n  useCallback: function (v) {\n    useCallback = v;\n  },\n  useMemo: function (v) {\n    useMemo = v;\n  },\n  useEffect: function (v) {\n    useEffect = v;\n  },\n  useState: function (v) {\n    useState = v;\n  }\n}, 2);\nvar validateEmail;\nmodule.link(\"../../../lib/emailValidator\", {\n  validateEmail: function (v) {\n    validateEmail = v;\n  }\n}, 3);\nvar getUserEmailAddress;\nmodule.link(\"../../../lib/getUserEmailAddress\", {\n  getUserEmailAddress: function (v) {\n    getUserEmailAddress = v;\n  }\n}, 4);\nvar CustomFieldsForm;\nmodule.link(\"../../components/CustomFieldsForm\", {\n  \"default\": function (v) {\n    CustomFieldsForm = v;\n  }\n}, 5);\nvar USER_STATUS_TEXT_MAX_LENGTH;\nmodule.link(\"../../components/UserStatus\", {\n  USER_STATUS_TEXT_MAX_LENGTH: function (v) {\n    USER_STATUS_TEXT_MAX_LENGTH = v;\n  }\n}, 6);\nvar UserStatusMenu;\nmodule.link(\"../../components/UserStatusMenu\", {\n  \"default\": function (v) {\n    UserStatusMenu = v;\n  }\n}, 7);\nvar UserAvatarEditor;\nmodule.link(\"../../components/avatar/UserAvatarEditor\", {\n  \"default\": function (v) {\n    UserAvatarEditor = v;\n  }\n}, 8);\nvar useMethod;\nmodule.link(\"../../contexts/ServerContext\", {\n  useMethod: function (v) {\n    useMethod = v;\n  }\n}, 9);\nvar useToastMessageDispatch;\nmodule.link(\"../../contexts/ToastMessagesContext\", {\n  useToastMessageDispatch: function (v) {\n    useToastMessageDispatch = v;\n  }\n}, 10);\nvar useTranslation;\nmodule.link(\"../../contexts/TranslationContext\", {\n  useTranslation: function (v) {\n    useTranslation = v;\n  }\n}, 11);\n\nfunction AccountProfileForm(_ref) {\n  var values = _ref.values,\n      handlers = _ref.handlers,\n      user = _ref.user,\n      settings = _ref.settings,\n      onSaveStateChange = _ref.onSaveStateChange,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  var t = useTranslation();\n  var dispatchToastMessage = useToastMessageDispatch();\n  var checkUsernameAvailability = useMethod('checkUsernameAvailability');\n  var getAvatarSuggestions = useMethod('getAvatarSuggestion');\n  var sendConfirmationEmail = useMethod('sendConfirmationEmail');\n\n  var _useState = useState(),\n      _useState2 = _slicedToArray(_useState, 2),\n      usernameError = _useState2[0],\n      setUsernameError = _useState2[1];\n\n  var _useSafely = useSafely(useState()),\n      _useSafely2 = _slicedToArray(_useSafely, 2),\n      avatarSuggestions = _useSafely2[0],\n      setAvatarSuggestions = _useSafely2[1];\n\n  var allowRealNameChange = settings.allowRealNameChange,\n      allowUserStatusMessageChange = settings.allowUserStatusMessageChange,\n      allowEmailChange = settings.allowEmailChange,\n      allowPasswordChange = settings.allowPasswordChange,\n      allowUserAvatarChange = settings.allowUserAvatarChange,\n      canChangeUsername = settings.canChangeUsername,\n      namesRegex = settings.namesRegex,\n      requireName = settings.requireName;\n  var realname = values.realname,\n      email = values.email,\n      username = values.username,\n      password = values.password,\n      confirmationPassword = values.confirmationPassword,\n      statusText = values.statusText,\n      bio = values.bio,\n      statusType = values.statusType,\n      customFields = values.customFields,\n      nickname = values.nickname;\n  var handleRealname = handlers.handleRealname,\n      handleEmail = handlers.handleEmail,\n      handleUsername = handlers.handleUsername,\n      handlePassword = handlers.handlePassword,\n      handleConfirmationPassword = handlers.handleConfirmationPassword,\n      handleAvatar = handlers.handleAvatar,\n      handleStatusText = handlers.handleStatusText,\n      handleStatusType = handlers.handleStatusType,\n      handleBio = handlers.handleBio,\n      handleCustomFields = handlers.handleCustomFields,\n      handleNickname = handlers.handleNickname;\n  var previousEmail = getUserEmailAddress(user);\n  var handleSendConfirmationEmail = useCallback(function () {\n    function _callee() {\n      return _regeneratorRuntime.async(function () {\n        function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                if (!(email !== previousEmail)) {\n                  _context.next = 2;\n                  break;\n                }\n\n                return _context.abrupt(\"return\");\n\n              case 2:\n                _context.prev = 2;\n                _context.next = 5;\n                return _regeneratorRuntime.awrap(sendConfirmationEmail(email));\n\n              case 5:\n                dispatchToastMessage({\n                  type: 'success',\n                  message: t('Verification_email_sent')\n                });\n                _context.next = 11;\n                break;\n\n              case 8:\n                _context.prev = 8;\n                _context.t0 = _context[\"catch\"](2);\n                dispatchToastMessage({\n                  type: 'error',\n                  message: _context.t0\n                });\n\n              case 11:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }\n\n        return _callee$;\n      }(), null, null, [[2, 8]], Promise);\n    }\n\n    return _callee;\n  }(), [dispatchToastMessage, email, previousEmail, sendConfirmationEmail, t]);\n  var passwordError = useMemo(function () {\n    return !password || !confirmationPassword || password === confirmationPassword ? undefined : t('Passwords_do_not_match');\n  }, [t, password, confirmationPassword]);\n  var emailError = useMemo(function () {\n    return validateEmail(email) ? undefined : 'error-invalid-email-address';\n  }, [email]);\n  var checkUsername = useDebouncedCallback(function () {\n    function _callee2(username) {\n      var isAvailable;\n      return _regeneratorRuntime.async(function () {\n        function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                if (!(user.username === username)) {\n                  _context2.next = 2;\n                  break;\n                }\n\n                return _context2.abrupt(\"return\", setUsernameError(undefined));\n\n              case 2:\n                if (namesRegex.test(username)) {\n                  _context2.next = 4;\n                  break;\n                }\n\n                return _context2.abrupt(\"return\", setUsernameError(t('error-invalid-username')));\n\n              case 4:\n                _context2.next = 6;\n                return _regeneratorRuntime.awrap(checkUsernameAvailability(username));\n\n              case 6:\n                isAvailable = _context2.sent;\n\n                if (isAvailable) {\n                  _context2.next = 9;\n                  break;\n                }\n\n                return _context2.abrupt(\"return\", setUsernameError(t('Username_already_exist')));\n\n              case 9:\n                setUsernameError(undefined);\n\n              case 10:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }\n\n        return _callee2$;\n      }(), null, null, null, Promise);\n    }\n\n    return _callee2;\n  }(), 400, [namesRegex, t, user.username, checkUsernameAvailability, setUsernameError]);\n  useEffect(function () {\n    var getSuggestions = function () {\n      function _callee3() {\n        var suggestions;\n        return _regeneratorRuntime.async(function () {\n          function _callee3$(_context3) {\n            while (1) {\n              switch (_context3.prev = _context3.next) {\n                case 0:\n                  _context3.next = 2;\n                  return _regeneratorRuntime.awrap(getAvatarSuggestions());\n\n                case 2:\n                  suggestions = _context3.sent;\n                  setAvatarSuggestions(suggestions);\n\n                case 4:\n                case \"end\":\n                  return _context3.stop();\n              }\n            }\n          }\n\n          return _callee3$;\n        }(), null, null, null, Promise);\n      }\n\n      return _callee3;\n    }();\n\n    getSuggestions();\n  }, [getAvatarSuggestions, setAvatarSuggestions]);\n  useEffect(function () {\n    checkUsername(username);\n  }, [checkUsername, username]);\n  useEffect(function () {\n    if (!password) {\n      handleConfirmationPassword('');\n    }\n  }, [password, handleConfirmationPassword]);\n  var nameError = useMemo(function () {\n    if (user.name === realname) {\n      return undefined;\n    }\n\n    if (!realname && requireName) {\n      return t('Field_required');\n    }\n  }, [realname, requireName, t, user.name]);\n  var statusTextError = useMemo(function () {\n    if (statusText && statusText.length > USER_STATUS_TEXT_MAX_LENGTH) {\n      return t('Max_length_is', USER_STATUS_TEXT_MAX_LENGTH);\n    }\n\n    return undefined;\n  }, [statusText, t]);\n\n  var _user$emails = _slicedToArray(user.emails, 1),\n      _user$emails$ = _user$emails[0];\n\n  _user$emails$ = _user$emails$ === void 0 ? {\n    verified: false\n  } : _user$emails$;\n  var _user$emails$$verifie = _user$emails$.verified,\n      verified = _user$emails$$verifie === void 0 ? false : _user$emails$$verifie;\n  var canSave = !![!!passwordError, !!emailError, !!usernameError, !!nameError, !!statusTextError].filter(Boolean);\n  useEffect(function () {\n    onSaveStateChange(canSave);\n  }, [canSave, onSaveStateChange]);\n  var handleSubmit = useCallback(function (e) {\n    e.preventDefault();\n  }, []);\n  return /*#__PURE__*/React.createElement(FieldGroup, _extends({\n    is: \"form\",\n    autoComplete: \"off\",\n    onSubmit: handleSubmit\n  }, props), useMemo(function () {\n    return /*#__PURE__*/React.createElement(Field, null, /*#__PURE__*/React.createElement(UserAvatarEditor, {\n      etag: user.avatarETag,\n      currentUsername: user.username,\n      username: username,\n      setAvatarObj: handleAvatar,\n      disabled: !allowUserAvatarChange,\n      suggestions: avatarSuggestions\n    }));\n  }, [username, user.username, handleAvatar, allowUserAvatarChange, avatarSuggestions, user.avatarETag]), /*#__PURE__*/React.createElement(Box, {\n    display: \"flex\",\n    flexDirection: \"row\",\n    justifyContent: \"space-between\"\n  }, useMemo(function () {\n    return /*#__PURE__*/React.createElement(Field, {\n      mie: \"x8\",\n      flexShrink: 1\n    }, /*#__PURE__*/React.createElement(Field.Label, {\n      flexGrow: 0\n    }, t('Name')), /*#__PURE__*/React.createElement(Field.Row, null, /*#__PURE__*/React.createElement(TextInput, {\n      error: nameError,\n      disabled: !allowRealNameChange,\n      flexGrow: 1,\n      value: realname,\n      onChange: handleRealname\n    })), !allowRealNameChange && /*#__PURE__*/React.createElement(Field.Hint, null, t('RealName_Change_Disabled')), /*#__PURE__*/React.createElement(Field.Error, null, nameError));\n  }, [t, realname, handleRealname, allowRealNameChange, nameError]), useMemo(function () {\n    return /*#__PURE__*/React.createElement(Field, {\n      mis: \"x8\",\n      flexShrink: 1\n    }, /*#__PURE__*/React.createElement(Field.Label, {\n      flexGrow: 0\n    }, t('Username')), /*#__PURE__*/React.createElement(Field.Row, null, /*#__PURE__*/React.createElement(TextInput, {\n      error: usernameError,\n      disabled: !canChangeUsername,\n      flexGrow: 1,\n      value: username,\n      onChange: handleUsername,\n      addon: /*#__PURE__*/React.createElement(Icon, {\n        name: \"at\",\n        size: \"x20\"\n      })\n    })), !canChangeUsername && /*#__PURE__*/React.createElement(Field.Hint, null, t('Username_Change_Disabled')), /*#__PURE__*/React.createElement(Field.Error, null, usernameError));\n  }, [t, username, handleUsername, canChangeUsername, usernameError])), useMemo(function () {\n    return /*#__PURE__*/React.createElement(Field, null, /*#__PURE__*/React.createElement(Field.Label, null, t('StatusMessage')), /*#__PURE__*/React.createElement(Field.Row, null, /*#__PURE__*/React.createElement(TextInput, {\n      error: statusTextError,\n      disabled: !allowUserStatusMessageChange,\n      flexGrow: 1,\n      value: statusText,\n      onChange: handleStatusText,\n      placeholder: t('StatusMessage_Placeholder'),\n      addon: /*#__PURE__*/React.createElement(UserStatusMenu, {\n        margin: \"neg-x2\",\n        onChange: handleStatusType,\n        initialStatus: statusType\n      })\n    })), !allowUserStatusMessageChange && /*#__PURE__*/React.createElement(Field.Hint, null, t('StatusMessage_Change_Disabled')), /*#__PURE__*/React.createElement(Field.Error, null, statusTextError));\n  }, [t, statusTextError, allowUserStatusMessageChange, statusText, handleStatusText, handleStatusType, statusType]), useMemo(function () {\n    return /*#__PURE__*/React.createElement(Field, null, /*#__PURE__*/React.createElement(Field.Label, null, t('Nickname')), /*#__PURE__*/React.createElement(Field.Row, null, /*#__PURE__*/React.createElement(TextInput, {\n      flexGrow: 1,\n      value: nickname,\n      onChange: handleNickname,\n      addon: /*#__PURE__*/React.createElement(Icon, {\n        name: \"edit\",\n        size: \"x20\",\n        alignSelf: \"center\"\n      })\n    })));\n  }, [nickname, handleNickname, t]), useMemo(function () {\n    return /*#__PURE__*/React.createElement(Field, null, /*#__PURE__*/React.createElement(Field.Label, null, t('Bio')), /*#__PURE__*/React.createElement(Field.Row, null, /*#__PURE__*/React.createElement(TextAreaInput, {\n      rows: 3,\n      flexGrow: 1,\n      value: bio,\n      onChange: handleBio,\n      addon: /*#__PURE__*/React.createElement(Icon, {\n        name: \"edit\",\n        size: \"x20\",\n        alignSelf: \"center\"\n      })\n    })));\n  }, [bio, handleBio, t]), /*#__PURE__*/React.createElement(Field, null, /*#__PURE__*/React.createElement(Grid, null, /*#__PURE__*/React.createElement(Grid.Item, null, /*#__PURE__*/React.createElement(FieldGroup, {\n    display: \"flex\",\n    flexDirection: \"column\",\n    flexGrow: 1,\n    flexShrink: 0\n  }, useMemo(function () {\n    return /*#__PURE__*/React.createElement(Field, null, /*#__PURE__*/React.createElement(Field.Label, null, t('Email')), /*#__PURE__*/React.createElement(Field.Row, null, /*#__PURE__*/React.createElement(TextInput, {\n      flexGrow: 1,\n      value: email,\n      error: emailError,\n      onChange: handleEmail,\n      addon: /*#__PURE__*/React.createElement(Icon, {\n        name: verified ? 'circle-check' : 'mail',\n        size: \"x20\"\n      }),\n      disabled: !allowEmailChange\n    })), !allowEmailChange && /*#__PURE__*/React.createElement(Field.Hint, null, t('Email_Change_Disabled')), /*#__PURE__*/React.createElement(Field.Error, null, t(emailError)));\n  }, [t, email, handleEmail, verified, allowEmailChange, emailError]), useMemo(function () {\n    return !verified && /*#__PURE__*/React.createElement(Field, null, /*#__PURE__*/React.createElement(Margins, {\n      blockEnd: \"x28\"\n    }, /*#__PURE__*/React.createElement(Button, {\n      disabled: email !== previousEmail,\n      onClick: handleSendConfirmationEmail\n    }, t('Resend_verification_email'))));\n  }, [verified, t, email, previousEmail, handleSendConfirmationEmail]))), /*#__PURE__*/React.createElement(Grid.Item, null, /*#__PURE__*/React.createElement(FieldGroup, {\n    display: \"flex\",\n    flexDirection: \"column\",\n    flexGrow: 1,\n    flexShrink: 0\n  }, useMemo(function () {\n    return /*#__PURE__*/React.createElement(Field, null, /*#__PURE__*/React.createElement(Field.Label, null, t('Password')), /*#__PURE__*/React.createElement(Field.Row, null, /*#__PURE__*/React.createElement(PasswordInput, {\n      autoComplete: \"off\",\n      disabled: !allowPasswordChange,\n      error: passwordError,\n      flexGrow: 1,\n      value: password,\n      onChange: handlePassword,\n      addon: /*#__PURE__*/React.createElement(Icon, {\n        name: \"key\",\n        size: \"x20\"\n      })\n    })), !allowPasswordChange && /*#__PURE__*/React.createElement(Field.Hint, null, t('Password_Change_Disabled')));\n  }, [t, password, handlePassword, passwordError, allowPasswordChange]), useMemo(function () {\n    return /*#__PURE__*/React.createElement(Field, null, /*#__PURE__*/React.createElement(AnimatedVisibility, {\n      visibility: password ? AnimatedVisibility.VISIBLE : AnimatedVisibility.HIDDEN\n    }, /*#__PURE__*/React.createElement(Field.Label, null, t('Confirm_password')), /*#__PURE__*/React.createElement(Field.Row, null, /*#__PURE__*/React.createElement(PasswordInput, {\n      autoComplete: \"off\",\n      error: passwordError,\n      flexGrow: 1,\n      value: confirmationPassword,\n      onChange: handleConfirmationPassword,\n      addon: /*#__PURE__*/React.createElement(Icon, {\n        name: \"key\",\n        size: \"x20\"\n      })\n    })), passwordError && /*#__PURE__*/React.createElement(Field.Error, null, passwordError)));\n  }, [t, confirmationPassword, handleConfirmationPassword, password, passwordError]))))), /*#__PURE__*/React.createElement(CustomFieldsForm, {\n    customFieldsData: customFields,\n    setCustomFieldsData: handleCustomFields\n  }));\n}\n\nmodule.exportDefault(AccountProfileForm);","map":{"version":3,"sources":["client/views/account/AccountProfileForm.js"],"names":["_regeneratorRuntime","module","link","default","v","_extends","_slicedToArray","_objectWithoutProperties","Field","FieldGroup","TextInput","TextAreaInput","Box","Icon","AnimatedVisibility","PasswordInput","Button","Grid","Margins","useDebouncedCallback","useSafely","React","useCallback","useMemo","useEffect","useState","validateEmail","getUserEmailAddress","CustomFieldsForm","USER_STATUS_TEXT_MAX_LENGTH","UserStatusMenu","UserAvatarEditor","useMethod","useToastMessageDispatch","useTranslation","AccountProfileForm","values","handlers","user","settings","onSaveStateChange","props","t","dispatchToastMessage","checkUsernameAvailability","getAvatarSuggestions","sendConfirmationEmail","usernameError","setUsernameError","avatarSuggestions","setAvatarSuggestions","allowRealNameChange","allowUserStatusMessageChange","allowEmailChange","allowPasswordChange","allowUserAvatarChange","canChangeUsername","namesRegex","requireName","realname","email","username","password","confirmationPassword","statusText","bio","statusType","customFields","nickname","handleRealname","handleEmail","handleUsername","handlePassword","handleConfirmationPassword","handleAvatar","handleStatusText","handleStatusType","handleBio","handleCustomFields","handleNickname","previousEmail","handleSendConfirmationEmail","type","message","passwordError","undefined","emailError","checkUsername","test","isAvailable","getSuggestions","suggestions","nameError","name","statusTextError","length","emails","verified","canSave","filter","Boolean","handleSubmit","e","preventDefault","avatarETag","VISIBLE","HIDDEN","exportDefault"],"mappings":"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","sourcesContent":["import {\n\tField,\n\tFieldGroup,\n\tTextInput,\n\tTextAreaInput,\n\tBox,\n\tIcon,\n\tAnimatedVisibility,\n\tPasswordInput,\n\tButton,\n\tGrid,\n\tMargins,\n} from '@rocket.chat/fuselage';\nimport { useDebouncedCallback, useSafely } from '@rocket.chat/fuselage-hooks';\nimport React, { useCallback, useMemo, useEffect, useState } from 'react';\n\nimport { validateEmail } from '../../../lib/emailValidator';\nimport { getUserEmailAddress } from '../../../lib/getUserEmailAddress';\nimport CustomFieldsForm from '../../components/CustomFieldsForm';\nimport { USER_STATUS_TEXT_MAX_LENGTH } from '../../components/UserStatus';\nimport UserStatusMenu from '../../components/UserStatusMenu';\nimport UserAvatarEditor from '../../components/avatar/UserAvatarEditor';\nimport { useMethod } from '../../contexts/ServerContext';\nimport { useToastMessageDispatch } from '../../contexts/ToastMessagesContext';\nimport { useTranslation } from '../../contexts/TranslationContext';\n\nfunction AccountProfileForm({ values, handlers, user, settings, onSaveStateChange, ...props }) {\n\tconst t = useTranslation();\n\tconst dispatchToastMessage = useToastMessageDispatch();\n\n\tconst checkUsernameAvailability = useMethod('checkUsernameAvailability');\n\tconst getAvatarSuggestions = useMethod('getAvatarSuggestion');\n\tconst sendConfirmationEmail = useMethod('sendConfirmationEmail');\n\n\tconst [usernameError, setUsernameError] = useState();\n\tconst [avatarSuggestions, setAvatarSuggestions] = useSafely(useState());\n\n\tconst {\n\t\tallowRealNameChange,\n\t\tallowUserStatusMessageChange,\n\t\tallowEmailChange,\n\t\tallowPasswordChange,\n\t\tallowUserAvatarChange,\n\t\tcanChangeUsername,\n\t\tnamesRegex,\n\t\trequireName,\n\t} = settings;\n\n\tconst { realname, email, username, password, confirmationPassword, statusText, bio, statusType, customFields, nickname } = values;\n\n\tconst {\n\t\thandleRealname,\n\t\thandleEmail,\n\t\thandleUsername,\n\t\thandlePassword,\n\t\thandleConfirmationPassword,\n\t\thandleAvatar,\n\t\thandleStatusText,\n\t\thandleStatusType,\n\t\thandleBio,\n\t\thandleCustomFields,\n\t\thandleNickname,\n\t} = handlers;\n\n\tconst previousEmail = getUserEmailAddress(user);\n\n\tconst handleSendConfirmationEmail = useCallback(async () => {\n\t\tif (email !== previousEmail) {\n\t\t\treturn;\n\t\t}\n\t\ttry {\n\t\t\tawait sendConfirmationEmail(email);\n\t\t\tdispatchToastMessage({ type: 'success', message: t('Verification_email_sent') });\n\t\t} catch (error) {\n\t\t\tdispatchToastMessage({ type: 'error', message: error });\n\t\t}\n\t}, [dispatchToastMessage, email, previousEmail, sendConfirmationEmail, t]);\n\n\tconst passwordError = useMemo(\n\t\t() => (!password || !confirmationPassword || password === confirmationPassword ? undefined : t('Passwords_do_not_match')),\n\t\t[t, password, confirmationPassword],\n\t);\n\tconst emailError = useMemo(() => (validateEmail(email) ? undefined : 'error-invalid-email-address'), [email]);\n\tconst checkUsername = useDebouncedCallback(\n\t\tasync (username) => {\n\t\t\tif (user.username === username) {\n\t\t\t\treturn setUsernameError(undefined);\n\t\t\t}\n\t\t\tif (!namesRegex.test(username)) {\n\t\t\t\treturn setUsernameError(t('error-invalid-username'));\n\t\t\t}\n\t\t\tconst isAvailable = await checkUsernameAvailability(username);\n\t\t\tif (!isAvailable) {\n\t\t\t\treturn setUsernameError(t('Username_already_exist'));\n\t\t\t}\n\t\t\tsetUsernameError(undefined);\n\t\t},\n\t\t400,\n\t\t[namesRegex, t, user.username, checkUsernameAvailability, setUsernameError],\n\t);\n\n\tuseEffect(() => {\n\t\tconst getSuggestions = async () => {\n\t\t\tconst suggestions = await getAvatarSuggestions();\n\t\t\tsetAvatarSuggestions(suggestions);\n\t\t};\n\t\tgetSuggestions();\n\t}, [getAvatarSuggestions, setAvatarSuggestions]);\n\n\tuseEffect(() => {\n\t\tcheckUsername(username);\n\t}, [checkUsername, username]);\n\n\tuseEffect(() => {\n\t\tif (!password) {\n\t\t\thandleConfirmationPassword('');\n\t\t}\n\t}, [password, handleConfirmationPassword]);\n\n\tconst nameError = useMemo(() => {\n\t\tif (user.name === realname) {\n\t\t\treturn undefined;\n\t\t}\n\t\tif (!realname && requireName) {\n\t\t\treturn t('Field_required');\n\t\t}\n\t}, [realname, requireName, t, user.name]);\n\n\tconst statusTextError = useMemo(() => {\n\t\tif (statusText && statusText.length > USER_STATUS_TEXT_MAX_LENGTH) {\n\t\t\treturn t('Max_length_is', USER_STATUS_TEXT_MAX_LENGTH);\n\t\t}\n\n\t\treturn undefined;\n\t}, [statusText, t]);\n\tconst {\n\t\temails: [{ verified = false } = { verified: false }],\n\t} = user;\n\n\tconst canSave = !![!!passwordError, !!emailError, !!usernameError, !!nameError, !!statusTextError].filter(Boolean);\n\n\tuseEffect(() => {\n\t\tonSaveStateChange(canSave);\n\t}, [canSave, onSaveStateChange]);\n\n\tconst handleSubmit = useCallback((e) => {\n\t\te.preventDefault();\n\t}, []);\n\n\treturn (\n\t\t<FieldGroup is='form' autoComplete='off' onSubmit={handleSubmit} {...props}>\n\t\t\t{useMemo(\n\t\t\t\t() => (\n\t\t\t\t\t<Field>\n\t\t\t\t\t\t<UserAvatarEditor\n\t\t\t\t\t\t\tetag={user.avatarETag}\n\t\t\t\t\t\t\tcurrentUsername={user.username}\n\t\t\t\t\t\t\tusername={username}\n\t\t\t\t\t\t\tsetAvatarObj={handleAvatar}\n\t\t\t\t\t\t\tdisabled={!allowUserAvatarChange}\n\t\t\t\t\t\t\tsuggestions={avatarSuggestions}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</Field>\n\t\t\t\t),\n\t\t\t\t[username, user.username, handleAvatar, allowUserAvatarChange, avatarSuggestions, user.avatarETag],\n\t\t\t)}\n\t\t\t<Box display='flex' flexDirection='row' justifyContent='space-between'>\n\t\t\t\t{useMemo(\n\t\t\t\t\t() => (\n\t\t\t\t\t\t<Field mie='x8' flexShrink={1}>\n\t\t\t\t\t\t\t<Field.Label flexGrow={0}>{t('Name')}</Field.Label>\n\t\t\t\t\t\t\t<Field.Row>\n\t\t\t\t\t\t\t\t<TextInput error={nameError} disabled={!allowRealNameChange} flexGrow={1} value={realname} onChange={handleRealname} />\n\t\t\t\t\t\t\t</Field.Row>\n\t\t\t\t\t\t\t{!allowRealNameChange && <Field.Hint>{t('RealName_Change_Disabled')}</Field.Hint>}\n\t\t\t\t\t\t\t<Field.Error>{nameError}</Field.Error>\n\t\t\t\t\t\t</Field>\n\t\t\t\t\t),\n\t\t\t\t\t[t, realname, handleRealname, allowRealNameChange, nameError],\n\t\t\t\t)}\n\t\t\t\t{useMemo(\n\t\t\t\t\t() => (\n\t\t\t\t\t\t<Field mis='x8' flexShrink={1}>\n\t\t\t\t\t\t\t<Field.Label flexGrow={0}>{t('Username')}</Field.Label>\n\t\t\t\t\t\t\t<Field.Row>\n\t\t\t\t\t\t\t\t<TextInput\n\t\t\t\t\t\t\t\t\terror={usernameError}\n\t\t\t\t\t\t\t\t\tdisabled={!canChangeUsername}\n\t\t\t\t\t\t\t\t\tflexGrow={1}\n\t\t\t\t\t\t\t\t\tvalue={username}\n\t\t\t\t\t\t\t\t\tonChange={handleUsername}\n\t\t\t\t\t\t\t\t\taddon={<Icon name='at' size='x20' />}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</Field.Row>\n\t\t\t\t\t\t\t{!canChangeUsername && <Field.Hint>{t('Username_Change_Disabled')}</Field.Hint>}\n\t\t\t\t\t\t\t<Field.Error>{usernameError}</Field.Error>\n\t\t\t\t\t\t</Field>\n\t\t\t\t\t),\n\t\t\t\t\t[t, username, handleUsername, canChangeUsername, usernameError],\n\t\t\t\t)}\n\t\t\t</Box>\n\t\t\t{useMemo(\n\t\t\t\t() => (\n\t\t\t\t\t<Field>\n\t\t\t\t\t\t<Field.Label>{t('StatusMessage')}</Field.Label>\n\t\t\t\t\t\t<Field.Row>\n\t\t\t\t\t\t\t<TextInput\n\t\t\t\t\t\t\t\terror={statusTextError}\n\t\t\t\t\t\t\t\tdisabled={!allowUserStatusMessageChange}\n\t\t\t\t\t\t\t\tflexGrow={1}\n\t\t\t\t\t\t\t\tvalue={statusText}\n\t\t\t\t\t\t\t\tonChange={handleStatusText}\n\t\t\t\t\t\t\t\tplaceholder={t('StatusMessage_Placeholder')}\n\t\t\t\t\t\t\t\taddon={<UserStatusMenu margin='neg-x2' onChange={handleStatusType} initialStatus={statusType} />}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</Field.Row>\n\t\t\t\t\t\t{!allowUserStatusMessageChange && <Field.Hint>{t('StatusMessage_Change_Disabled')}</Field.Hint>}\n\t\t\t\t\t\t<Field.Error>{statusTextError}</Field.Error>\n\t\t\t\t\t</Field>\n\t\t\t\t),\n\t\t\t\t[t, statusTextError, allowUserStatusMessageChange, statusText, handleStatusText, handleStatusType, statusType],\n\t\t\t)}\n\t\t\t{useMemo(\n\t\t\t\t() => (\n\t\t\t\t\t<Field>\n\t\t\t\t\t\t<Field.Label>{t('Nickname')}</Field.Label>\n\t\t\t\t\t\t<Field.Row>\n\t\t\t\t\t\t\t<TextInput\n\t\t\t\t\t\t\t\tflexGrow={1}\n\t\t\t\t\t\t\t\tvalue={nickname}\n\t\t\t\t\t\t\t\tonChange={handleNickname}\n\t\t\t\t\t\t\t\taddon={<Icon name='edit' size='x20' alignSelf='center' />}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</Field.Row>\n\t\t\t\t\t</Field>\n\t\t\t\t),\n\t\t\t\t[nickname, handleNickname, t],\n\t\t\t)}\n\t\t\t{useMemo(\n\t\t\t\t() => (\n\t\t\t\t\t<Field>\n\t\t\t\t\t\t<Field.Label>{t('Bio')}</Field.Label>\n\t\t\t\t\t\t<Field.Row>\n\t\t\t\t\t\t\t<TextAreaInput\n\t\t\t\t\t\t\t\trows={3}\n\t\t\t\t\t\t\t\tflexGrow={1}\n\t\t\t\t\t\t\t\tvalue={bio}\n\t\t\t\t\t\t\t\tonChange={handleBio}\n\t\t\t\t\t\t\t\taddon={<Icon name='edit' size='x20' alignSelf='center' />}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</Field.Row>\n\t\t\t\t\t</Field>\n\t\t\t\t),\n\t\t\t\t[bio, handleBio, t],\n\t\t\t)}\n\t\t\t<Field>\n\t\t\t\t<Grid>\n\t\t\t\t\t<Grid.Item>\n\t\t\t\t\t\t<FieldGroup display='flex' flexDirection='column' flexGrow={1} flexShrink={0}>\n\t\t\t\t\t\t\t{useMemo(\n\t\t\t\t\t\t\t\t() => (\n\t\t\t\t\t\t\t\t\t<Field>\n\t\t\t\t\t\t\t\t\t\t<Field.Label>{t('Email')}</Field.Label>\n\t\t\t\t\t\t\t\t\t\t<Field.Row>\n\t\t\t\t\t\t\t\t\t\t\t<TextInput\n\t\t\t\t\t\t\t\t\t\t\t\tflexGrow={1}\n\t\t\t\t\t\t\t\t\t\t\t\tvalue={email}\n\t\t\t\t\t\t\t\t\t\t\t\terror={emailError}\n\t\t\t\t\t\t\t\t\t\t\t\tonChange={handleEmail}\n\t\t\t\t\t\t\t\t\t\t\t\taddon={<Icon name={verified ? 'circle-check' : 'mail'} size='x20' />}\n\t\t\t\t\t\t\t\t\t\t\t\tdisabled={!allowEmailChange}\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t</Field.Row>\n\t\t\t\t\t\t\t\t\t\t{!allowEmailChange && <Field.Hint>{t('Email_Change_Disabled')}</Field.Hint>}\n\t\t\t\t\t\t\t\t\t\t<Field.Error>{t(emailError)}</Field.Error>\n\t\t\t\t\t\t\t\t\t</Field>\n\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t[t, email, handleEmail, verified, allowEmailChange, emailError],\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t{useMemo(\n\t\t\t\t\t\t\t\t() =>\n\t\t\t\t\t\t\t\t\t!verified && (\n\t\t\t\t\t\t\t\t\t\t<Field>\n\t\t\t\t\t\t\t\t\t\t\t<Margins blockEnd='x28'>\n\t\t\t\t\t\t\t\t\t\t\t\t<Button disabled={email !== previousEmail} onClick={handleSendConfirmationEmail}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{t('Resend_verification_email')}\n\t\t\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t\t\t</Margins>\n\t\t\t\t\t\t\t\t\t\t</Field>\n\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t[verified, t, email, previousEmail, handleSendConfirmationEmail],\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</FieldGroup>\n\t\t\t\t\t</Grid.Item>\n\t\t\t\t\t<Grid.Item>\n\t\t\t\t\t\t<FieldGroup display='flex' flexDirection='column' flexGrow={1} flexShrink={0}>\n\t\t\t\t\t\t\t{useMemo(\n\t\t\t\t\t\t\t\t() => (\n\t\t\t\t\t\t\t\t\t<Field>\n\t\t\t\t\t\t\t\t\t\t<Field.Label>{t('Password')}</Field.Label>\n\t\t\t\t\t\t\t\t\t\t<Field.Row>\n\t\t\t\t\t\t\t\t\t\t\t<PasswordInput\n\t\t\t\t\t\t\t\t\t\t\t\tautoComplete='off'\n\t\t\t\t\t\t\t\t\t\t\t\tdisabled={!allowPasswordChange}\n\t\t\t\t\t\t\t\t\t\t\t\terror={passwordError}\n\t\t\t\t\t\t\t\t\t\t\t\tflexGrow={1}\n\t\t\t\t\t\t\t\t\t\t\t\tvalue={password}\n\t\t\t\t\t\t\t\t\t\t\t\tonChange={handlePassword}\n\t\t\t\t\t\t\t\t\t\t\t\taddon={<Icon name='key' size='x20' />}\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t</Field.Row>\n\t\t\t\t\t\t\t\t\t\t{!allowPasswordChange && <Field.Hint>{t('Password_Change_Disabled')}</Field.Hint>}\n\t\t\t\t\t\t\t\t\t</Field>\n\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t[t, password, handlePassword, passwordError, allowPasswordChange],\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t{useMemo(\n\t\t\t\t\t\t\t\t() => (\n\t\t\t\t\t\t\t\t\t<Field>\n\t\t\t\t\t\t\t\t\t\t<AnimatedVisibility visibility={password ? AnimatedVisibility.VISIBLE : AnimatedVisibility.HIDDEN}>\n\t\t\t\t\t\t\t\t\t\t\t<Field.Label>{t('Confirm_password')}</Field.Label>\n\t\t\t\t\t\t\t\t\t\t\t<Field.Row>\n\t\t\t\t\t\t\t\t\t\t\t\t<PasswordInput\n\t\t\t\t\t\t\t\t\t\t\t\t\tautoComplete='off'\n\t\t\t\t\t\t\t\t\t\t\t\t\terror={passwordError}\n\t\t\t\t\t\t\t\t\t\t\t\t\tflexGrow={1}\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={confirmationPassword}\n\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={handleConfirmationPassword}\n\t\t\t\t\t\t\t\t\t\t\t\t\taddon={<Icon name='key' size='x20' />}\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t</Field.Row>\n\t\t\t\t\t\t\t\t\t\t\t{passwordError && <Field.Error>{passwordError}</Field.Error>}\n\t\t\t\t\t\t\t\t\t\t</AnimatedVisibility>\n\t\t\t\t\t\t\t\t\t</Field>\n\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t[t, confirmationPassword, handleConfirmationPassword, password, passwordError],\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</FieldGroup>\n\t\t\t\t\t</Grid.Item>\n\t\t\t\t</Grid>\n\t\t\t</Field>\n\t\t\t<CustomFieldsForm customFieldsData={customFields} setCustomFieldsData={handleCustomFields} />\n\t\t</FieldGroup>\n\t);\n}\n\nexport default AccountProfileForm;\n"]},"sourceType":"module","hash":"088914d21cb5b4abf23bfcdefbaa1597e93473b3"}
