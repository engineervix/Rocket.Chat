{"metadata":{},"options":{"assumptions":{},"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat/client/views/room/contextualBar/ExportMessages/MailExportForm.js","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","classProperties","classPrivateProperties","jsx","nullishCoalescingOperator","nullishCoalescingOperator","optionalChaining","optionalCatchBinding","optionalCatchBinding","classProperties","classPrivateProperties","classPrivateMethods","classProperties","classPrivateProperties","asyncGenerators","asyncGenerators","objectRestSpread","logicalAssignment"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"allowUndeclaredExports":true,"strictMode":false},"caller":{"name":"meteor","arch":"web.browser.legacy"},"sourceFileName":"client/views/room/contextualBar/ExportMessages/MailExportForm.js","filename":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat/client/views/room/contextualBar/ExportMessages/MailExportForm.js","targets":{"android":"95.0.0","chrome":"95.0.0","edge":"95.0.0","firefox":"78.0.0","ie":"10.0.0","ios":"15.0.0","opera":"81.0.0","safari":"15.1.0","samsung":"14.0.0"},"cloneInputAst":true,"browserslistConfigFile":false,"passPerPreset":false,"envName":"development","cwd":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat","root":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat","rootMode":"root","plugins":[{"key":"base$0","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0","visitor":{"Program":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true},"options":{"avoidModernSyntax":true,"enforceStrictMode":false,"dynamicImport":true}},{"key":"transform-runtime","visitor":{"MemberExpression":{"enter":[null]},"ObjectPattern":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":{},"_verified":{},"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]}},"options":{"version":"7.16.5","helpers":true,"useESModules":false,"corejs":false}},{"key":"proposal-class-properties","visitor":{"PrivateName":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{"loose":true}},{"key":"base$0$3","visitor":{"FunctionExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$4","visitor":{"ForInStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-react-jsx","visitor":{"_exploded":{},"_verified":{},"JSXNamespacedName":{"enter":[null]},"JSXSpreadChild":{"enter":[null]},"Program":{"enter":[null]},"JSXElement":{"exit":[null]},"JSXFragment":{"exit":[null]},"JSXAttribute":{"enter":[null]}},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","runtime":"classic","throwIfNamespace":true,"useBuiltIns":false}},{"key":"transform-react-display-name","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-react-pure-annotations","visitor":{"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"syntax-nullish-coalescing-operator","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-nullish-coalescing-operator","visitor":{"_exploded":{},"_verified":{},"LogicalExpression":{"enter":[null]}},"options":{}},{"key":"syntax-optional-chaining","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-optional-chaining","visitor":{"_exploded":true,"OptionalCallExpression":{"enter":[null]},"OptionalMemberExpression":{"enter":[null]},"_verified":true},"options":{}},{"key":"syntax-optional-catch-binding","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-optional-catch-binding","visitor":{"_exploded":{},"_verified":{},"CatchClause":{"enter":[null]}},"options":{}},{"key":"syntax-class-properties","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-class-properties","visitor":{"PrivateName":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{}},{"key":"syntax-async-generators","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-async-generator-functions","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]}},"options":{}},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-object-rest-spread","visitor":{"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"proposal-logical-assignment-operators","visitor":{"_exploded":{},"_verified":{},"AssignmentExpression":{"enter":[null]}},"options":{}},{"key":"transform-arrow-functions","visitor":{"ArrowFunctionExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-block-scoped-functions","visitor":{"BlockStatement":{"enter":[null]},"SwitchCase":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-block-scoping","visitor":{"VariableDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"_exploded":true,"BlockStatement":{"enter":[null]},"SwitchStatement":{"enter":[null]},"Program":{"enter":[null]},"_verified":true,"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"transform-classes","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-computed-properties","visitor":{"ObjectExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-destructuring","visitor":{"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"VariableDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"transform-for-of","visitor":{"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-literals","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-object-super","visitor":{"ObjectExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-parameters","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{}},{"key":"transform-shorthand-properties","visitor":{"ObjectMethod":{"enter":[null]},"ObjectProperty":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-spread","visitor":{"ArrayExpression":{"enter":[null]},"CallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-sticky-regex","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-template-literals","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-typeof-symbol","visitor":{"UnaryExpression":{"enter":[null]},"_exploded":true,"_verified":true,"BlockStatement":{"enter":[null]},"CatchClause":{"enter":[null]},"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"Program":{"enter":[null]},"ObjectMethod":{"enter":[null]},"SwitchStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ForOfStatement":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"StaticBlock":{"enter":[null]},"TSModuleBlock":{"enter":[null]},"AssignmentPattern":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectPattern":{"enter":[null]}},"options":{}},{"key":"transform-unicode-regex","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-property-literals","visitor":{"ObjectProperty":{"exit":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-exponentiation-operator","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"regenerator-transform","visitor":{"_exploded":true,"_verified":true,"ObjectMethod":{"enter":[null],"exit":[null]},"ClassMethod":{"enter":[null],"exit":[null]},"ClassPrivateMethod":{"enter":[null],"exit":[null]},"FunctionDeclaration":{"exit":[null]},"FunctionExpression":{"exit":[null]},"ArrowFunctionExpression":{"exit":[null]}},"options":{}}],"presets":[],"generatorOpts":{"filename":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat/client/views/room/contextualBar/ExportMessages/MailExportForm.js","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"client/views/room/contextualBar/ExportMessages/MailExportForm.js"}},"code":"var _templateObject;\n\nvar _regeneratorRuntime;\n\nmodule.link(\"@babel/runtime/regenerator\", {\n  default: function (v) {\n    _regeneratorRuntime = v;\n  }\n}, 0);\n\nvar _toConsumableArray;\n\nmodule.link(\"@babel/runtime/helpers/toConsumableArray\", {\n  default: function (v) {\n    _toConsumableArray = v;\n  }\n}, 1);\n\nvar _slicedToArray;\n\nmodule.link(\"@babel/runtime/helpers/slicedToArray\", {\n  default: function (v) {\n    _slicedToArray = v;\n  }\n}, 2);\n\nvar _taggedTemplateLiteralLoose;\n\nmodule.link(\"@babel/runtime/helpers/taggedTemplateLiteralLoose\", {\n  default: function (v) {\n    _taggedTemplateLiteralLoose = v;\n  }\n}, 3);\nvar css;\nmodule.link(\"@rocket.chat/css-in-js\", {\n  css: function (v) {\n    css = v;\n  }\n}, 0);\nvar Field, TextInput, ButtonGroup, Button, Box, Icon, Callout, FieldGroup;\nmodule.link(\"@rocket.chat/fuselage\", {\n  Field: function (v) {\n    Field = v;\n  },\n  TextInput: function (v) {\n    TextInput = v;\n  },\n  ButtonGroup: function (v) {\n    ButtonGroup = v;\n  },\n  Button: function (v) {\n    Button = v;\n  },\n  Box: function (v) {\n    Box = v;\n  },\n  Icon: function (v) {\n    Icon = v;\n  },\n  Callout: function (v) {\n    Callout = v;\n  },\n  FieldGroup: function (v) {\n    FieldGroup = v;\n  }\n}, 1);\nvar useMutableCallback;\nmodule.link(\"@rocket.chat/fuselage-hooks\", {\n  useMutableCallback: function (v) {\n    useMutableCallback = v;\n  }\n}, 2);\nvar $;\nmodule.link(\"jquery\", {\n  \"default\": function (v) {\n    $ = v;\n  }\n}, 3);\nvar React, useState, useEffect;\nmodule.link(\"react\", {\n  \"default\": function (v) {\n    React = v;\n  },\n  useState: function (v) {\n    useState = v;\n  },\n  useEffect: function (v) {\n    useEffect = v;\n  }\n}, 4);\nvar validateEmail;\nmodule.link(\"../../../../../lib/emailValidator\", {\n  validateEmail: function (v) {\n    validateEmail = v;\n  }\n}, 5);\nvar UserAutoCompleteMultiple;\nmodule.link(\"../../../../components/UserAutoCompleteMultiple\", {\n  \"default\": function (v) {\n    UserAutoCompleteMultiple = v;\n  }\n}, 6);\nvar useEndpoint;\nmodule.link(\"../../../../contexts/ServerContext\", {\n  useEndpoint: function (v) {\n    useEndpoint = v;\n  }\n}, 7);\nvar useToastMessageDispatch;\nmodule.link(\"../../../../contexts/ToastMessagesContext\", {\n  useToastMessageDispatch: function (v) {\n    useToastMessageDispatch = v;\n  }\n}, 8);\nvar useTranslation;\nmodule.link(\"../../../../contexts/TranslationContext\", {\n  useTranslation: function (v) {\n    useTranslation = v;\n  }\n}, 9);\nvar useForm;\nmodule.link(\"../../../../hooks/useForm\", {\n  useForm: function (v) {\n    useForm = v;\n  }\n}, 10);\nvar roomCoordinator;\nmodule.link(\"../../../../lib/rooms/roomCoordinator\", {\n  roomCoordinator: function (v) {\n    roomCoordinator = v;\n  }\n}, 11);\nvar useUserRoom;\nmodule.link(\"../../hooks/useUserRoom\", {\n  useUserRoom: function (v) {\n    useUserRoom = v;\n  }\n}, 12);\nvar clickable = css(_templateObject || (_templateObject = _taggedTemplateLiteralLoose([\"\\n\\tcursor: pointer;\\n\"])));\n\nvar MailExportForm = function (_ref) {\n  var onCancel = _ref.onCancel,\n      rid = _ref.rid;\n  var t = useTranslation();\n  var room = useUserRoom(rid);\n  var roomName = room && room.t && roomCoordinator.getRoomName(room.t, room);\n\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      selectedMessages = _useState2[0],\n      setSelected = _useState2[1];\n\n  var _useState3 = useState(),\n      _useState4 = _slicedToArray(_useState3, 2),\n      errorMessage = _useState4[0],\n      setErrorMessage = _useState4[1];\n\n  var _useForm = useForm({\n    dateFrom: '',\n    dateTo: '',\n    toUsers: [],\n    additionalEmails: '',\n    subject: t('Mail_Messages_Subject', roomName)\n  }),\n      values = _useForm.values,\n      handlers = _useForm.handlers;\n\n  var dispatchToastMessage = useToastMessageDispatch();\n  var toUsers = values.toUsers,\n      additionalEmails = values.additionalEmails,\n      subject = values.subject;\n  var reset = useMutableCallback(function () {\n    setSelected([]);\n    $('.messages-box .message', $(\"#chat-window-\" + rid)).removeClass('selected');\n  });\n  useEffect(function () {\n    var $root = $(\"#chat-window-\" + rid);\n    $('.messages-box', $root).addClass('selectable');\n\n    var handler = function () {\n      var id = this.id;\n\n      if (this.classList.contains('selected')) {\n        this.classList.remove('selected');\n        setSelected(function (selectedMessages) {\n          return selectedMessages.filter(function (message) {\n            return message !== id;\n          });\n        });\n      } else {\n        this.classList.add('selected');\n        setSelected(function (selectedMessages) {\n          return selectedMessages.concat(id);\n        });\n      }\n    };\n\n    $('.messages-box .message', $root).on('click', handler);\n    return function () {\n      $('.messages-box', $root).removeClass('selectable');\n      $('.messages-box .message', $root).off('click', handler).filter('.selected').removeClass('selected');\n    };\n  }, [rid]);\n  var handleToUsers = handlers.handleToUsers,\n      handleAdditionalEmails = handlers.handleAdditionalEmails,\n      handleSubject = handlers.handleSubject;\n  var onChangeUsers = useMutableCallback(function (value, action) {\n    if (!action) {\n      if (toUsers.includes(value)) {\n        return;\n      }\n\n      return handleToUsers([].concat(_toConsumableArray(toUsers), [value]));\n    }\n\n    handleToUsers(toUsers.filter(function (current) {\n      return current !== value;\n    }));\n  });\n  var roomsExport = useEndpoint('POST', 'rooms.export');\n\n  var handleSubmit = function () {\n    function _callee() {\n      return _regeneratorRuntime.async(function () {\n        function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                if (!(toUsers.length === 0 && additionalEmails === '')) {\n                  _context.next = 3;\n                  break;\n                }\n\n                setErrorMessage(t('Mail_Message_Missing_to'));\n                return _context.abrupt(\"return\");\n\n              case 3:\n                if (!(additionalEmails !== '' && !validateEmail(additionalEmails))) {\n                  _context.next = 6;\n                  break;\n                }\n\n                setErrorMessage(t('Mail_Message_Invalid_emails', additionalEmails));\n                return _context.abrupt(\"return\");\n\n              case 6:\n                if (!(selectedMessages.length === 0)) {\n                  _context.next = 9;\n                  break;\n                }\n\n                setErrorMessage(t('Mail_Message_No_messages_selected_select_all'));\n                return _context.abrupt(\"return\");\n\n              case 9:\n                setErrorMessage(null);\n                _context.prev = 10;\n                _context.next = 13;\n                return _regeneratorRuntime.awrap(roomsExport({\n                  rid: rid,\n                  type: 'email',\n                  toUsers: toUsers,\n                  toEmails: additionalEmails.split(','),\n                  subject: subject,\n                  messages: selectedMessages\n                }));\n\n              case 13:\n                dispatchToastMessage({\n                  type: 'success',\n                  message: t('Your_email_has_been_queued_for_sending')\n                });\n                _context.next = 19;\n                break;\n\n              case 16:\n                _context.prev = 16;\n                _context.t0 = _context[\"catch\"](10);\n                dispatchToastMessage({\n                  type: 'error',\n                  message: _context.t0\n                });\n\n              case 19:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }\n\n        return _callee$;\n      }(), null, null, [[10, 16]], Promise);\n    }\n\n    return _callee;\n  }();\n\n  return /*#__PURE__*/React.createElement(FieldGroup, null, /*#__PURE__*/React.createElement(Field, null, /*#__PURE__*/React.createElement(Callout, {\n    onClick: reset,\n    title: t('Messages selected'),\n    type: selectedMessages.length > 0 ? 'success' : 'info'\n  }, /*#__PURE__*/React.createElement(\"p\", null, selectedMessages.length + \" Messages selected\"), selectedMessages.length > 0 && /*#__PURE__*/React.createElement(Box, {\n    is: \"p\",\n    className: clickable\n  }, t('Click here to clear the selection')), selectedMessages.length === 0 && /*#__PURE__*/React.createElement(Box, {\n    is: \"p\"\n  }, t('Click_the_messages_you_would_like_to_send_by_email')))), /*#__PURE__*/React.createElement(Field, null, /*#__PURE__*/React.createElement(Field.Label, null, t('To_users')), /*#__PURE__*/React.createElement(Field.Row, null, /*#__PURE__*/React.createElement(UserAutoCompleteMultiple, {\n    value: toUsers,\n    onChange: onChangeUsers\n  }))), /*#__PURE__*/React.createElement(Field, null, /*#__PURE__*/React.createElement(Field.Label, null, t('To_additional_emails')), /*#__PURE__*/React.createElement(Field.Row, null, /*#__PURE__*/React.createElement(TextInput, {\n    placeholder: t('Email_Placeholder_any'),\n    value: additionalEmails,\n    onChange: handleAdditionalEmails,\n    addon: /*#__PURE__*/React.createElement(Icon, {\n      name: \"mail\",\n      size: \"x20\"\n    })\n  }))), /*#__PURE__*/React.createElement(Field, null, /*#__PURE__*/React.createElement(Field.Label, null, t('Subject')), /*#__PURE__*/React.createElement(Field.Row, null, /*#__PURE__*/React.createElement(TextInput, {\n    value: subject,\n    onChange: handleSubject,\n    addon: /*#__PURE__*/React.createElement(Icon, {\n      name: \"edit\",\n      size: \"x20\"\n    })\n  }))), errorMessage && /*#__PURE__*/React.createElement(Callout, {\n    type: 'danger',\n    title: errorMessage\n  }), /*#__PURE__*/React.createElement(ButtonGroup, {\n    stretch: true,\n    mb: \"x12\"\n  }, /*#__PURE__*/React.createElement(Button, {\n    onClick: onCancel\n  }, t('Cancel')), /*#__PURE__*/React.createElement(Button, {\n    primary: true,\n    onClick: function () {\n      return handleSubmit();\n    }\n  }, t('Send'))));\n};\n\nmodule.exportDefault(MailExportForm);","map":{"version":3,"sources":["client/views/room/contextualBar/ExportMessages/MailExportForm.js"],"names":["_regeneratorRuntime","module","link","default","v","_toConsumableArray","_slicedToArray","_taggedTemplateLiteralLoose","css","Field","TextInput","ButtonGroup","Button","Box","Icon","Callout","FieldGroup","useMutableCallback","$","React","useState","useEffect","validateEmail","UserAutoCompleteMultiple","useEndpoint","useToastMessageDispatch","useTranslation","useForm","roomCoordinator","useUserRoom","clickable","MailExportForm","onCancel","rid","t","room","roomName","getRoomName","selectedMessages","setSelected","errorMessage","setErrorMessage","dateFrom","dateTo","toUsers","additionalEmails","subject","values","handlers","dispatchToastMessage","reset","removeClass","$root","addClass","handler","id","classList","contains","remove","filter","message","add","concat","on","off","handleToUsers","handleAdditionalEmails","handleSubject","onChangeUsers","value","action","includes","current","roomsExport","handleSubmit","length","type","toEmails","split","messages","exportDefault"],"mappings":"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","sourcesContent":["import { css } from '@rocket.chat/css-in-js';\nimport { Field, TextInput, ButtonGroup, Button, Box, Icon, Callout, FieldGroup } from '@rocket.chat/fuselage';\nimport { useMutableCallback } from '@rocket.chat/fuselage-hooks';\nimport $ from 'jquery';\nimport React, { useState, useEffect } from 'react';\n\nimport { validateEmail } from '../../../../../lib/emailValidator';\nimport UserAutoCompleteMultiple from '../../../../components/UserAutoCompleteMultiple';\nimport { useEndpoint } from '../../../../contexts/ServerContext';\nimport { useToastMessageDispatch } from '../../../../contexts/ToastMessagesContext';\nimport { useTranslation } from '../../../../contexts/TranslationContext';\nimport { useForm } from '../../../../hooks/useForm';\nimport { roomCoordinator } from '../../../../lib/rooms/roomCoordinator';\nimport { useUserRoom } from '../../hooks/useUserRoom';\n\nconst clickable = css`\n\tcursor: pointer;\n`;\n\nconst MailExportForm = ({ onCancel, rid }) => {\n\tconst t = useTranslation();\n\n\tconst room = useUserRoom(rid);\n\tconst roomName = room && room.t && roomCoordinator.getRoomName(room.t, room);\n\n\tconst [selectedMessages, setSelected] = useState([]);\n\n\tconst [errorMessage, setErrorMessage] = useState();\n\n\tconst { values, handlers } = useForm({\n\t\tdateFrom: '',\n\t\tdateTo: '',\n\t\ttoUsers: [],\n\t\tadditionalEmails: '',\n\t\tsubject: t('Mail_Messages_Subject', roomName),\n\t});\n\n\tconst dispatchToastMessage = useToastMessageDispatch();\n\n\tconst { toUsers, additionalEmails, subject } = values;\n\n\tconst reset = useMutableCallback(() => {\n\t\tsetSelected([]);\n\t\t$('.messages-box .message', $(`#chat-window-${rid}`)).removeClass('selected');\n\t});\n\n\tuseEffect(() => {\n\t\tconst $root = $(`#chat-window-${rid}`);\n\t\t$('.messages-box', $root).addClass('selectable');\n\n\t\tconst handler = function () {\n\t\t\tconst { id } = this;\n\n\t\t\tif (this.classList.contains('selected')) {\n\t\t\t\tthis.classList.remove('selected');\n\t\t\t\tsetSelected((selectedMessages) => selectedMessages.filter((message) => message !== id));\n\t\t\t} else {\n\t\t\t\tthis.classList.add('selected');\n\t\t\t\tsetSelected((selectedMessages) => selectedMessages.concat(id));\n\t\t\t}\n\t\t};\n\t\t$('.messages-box .message', $root).on('click', handler);\n\n\t\treturn () => {\n\t\t\t$('.messages-box', $root).removeClass('selectable');\n\t\t\t$('.messages-box .message', $root).off('click', handler).filter('.selected').removeClass('selected');\n\t\t};\n\t}, [rid]);\n\n\tconst { handleToUsers, handleAdditionalEmails, handleSubject } = handlers;\n\n\tconst onChangeUsers = useMutableCallback((value, action) => {\n\t\tif (!action) {\n\t\t\tif (toUsers.includes(value)) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\treturn handleToUsers([...toUsers, value]);\n\t\t}\n\t\thandleToUsers(toUsers.filter((current) => current !== value));\n\t});\n\n\tconst roomsExport = useEndpoint('POST', 'rooms.export');\n\n\tconst handleSubmit = async () => {\n\t\tif (toUsers.length === 0 && additionalEmails === '') {\n\t\t\tsetErrorMessage(t('Mail_Message_Missing_to'));\n\t\t\treturn;\n\t\t}\n\t\tif (additionalEmails !== '' && !validateEmail(additionalEmails)) {\n\t\t\tsetErrorMessage(t('Mail_Message_Invalid_emails', additionalEmails));\n\t\t\treturn;\n\t\t}\n\t\tif (selectedMessages.length === 0) {\n\t\t\tsetErrorMessage(t('Mail_Message_No_messages_selected_select_all'));\n\t\t\treturn;\n\t\t}\n\t\tsetErrorMessage(null);\n\n\t\ttry {\n\t\t\tawait roomsExport({\n\t\t\t\trid,\n\t\t\t\ttype: 'email',\n\t\t\t\ttoUsers,\n\t\t\t\ttoEmails: additionalEmails.split(','),\n\t\t\t\tsubject,\n\t\t\t\tmessages: selectedMessages,\n\t\t\t});\n\n\t\t\tdispatchToastMessage({\n\t\t\t\ttype: 'success',\n\t\t\t\tmessage: t('Your_email_has_been_queued_for_sending'),\n\t\t\t});\n\t\t} catch (error) {\n\t\t\tdispatchToastMessage({\n\t\t\t\ttype: 'error',\n\t\t\t\tmessage: error,\n\t\t\t});\n\t\t}\n\t};\n\n\treturn (\n\t\t<FieldGroup>\n\t\t\t<Field>\n\t\t\t\t<Callout onClick={reset} title={t('Messages selected')} type={selectedMessages.length > 0 ? 'success' : 'info'}>\n\t\t\t\t\t<p>{`${selectedMessages.length} Messages selected`}</p>\n\t\t\t\t\t{selectedMessages.length > 0 && (\n\t\t\t\t\t\t<Box is='p' className={clickable}>\n\t\t\t\t\t\t\t{t('Click here to clear the selection')}\n\t\t\t\t\t\t</Box>\n\t\t\t\t\t)}\n\t\t\t\t\t{selectedMessages.length === 0 && <Box is='p'>{t('Click_the_messages_you_would_like_to_send_by_email')}</Box>}\n\t\t\t\t</Callout>\n\t\t\t</Field>\n\t\t\t<Field>\n\t\t\t\t<Field.Label>{t('To_users')}</Field.Label>\n\t\t\t\t<Field.Row>\n\t\t\t\t\t<UserAutoCompleteMultiple value={toUsers} onChange={onChangeUsers} />\n\t\t\t\t</Field.Row>\n\t\t\t</Field>\n\t\t\t<Field>\n\t\t\t\t<Field.Label>{t('To_additional_emails')}</Field.Label>\n\t\t\t\t<Field.Row>\n\t\t\t\t\t<TextInput\n\t\t\t\t\t\tplaceholder={t('Email_Placeholder_any')}\n\t\t\t\t\t\tvalue={additionalEmails}\n\t\t\t\t\t\tonChange={handleAdditionalEmails}\n\t\t\t\t\t\taddon={<Icon name='mail' size='x20' />}\n\t\t\t\t\t/>\n\t\t\t\t</Field.Row>\n\t\t\t</Field>\n\t\t\t<Field>\n\t\t\t\t<Field.Label>{t('Subject')}</Field.Label>\n\t\t\t\t<Field.Row>\n\t\t\t\t\t<TextInput value={subject} onChange={handleSubject} addon={<Icon name='edit' size='x20' />} />\n\t\t\t\t</Field.Row>\n\t\t\t</Field>\n\n\t\t\t{errorMessage && <Callout type={'danger'} title={errorMessage} />}\n\n\t\t\t<ButtonGroup stretch mb='x12'>\n\t\t\t\t<Button onClick={onCancel}>{t('Cancel')}</Button>\n\t\t\t\t<Button primary onClick={() => handleSubmit()}>\n\t\t\t\t\t{t('Send')}\n\t\t\t\t</Button>\n\t\t\t</ButtonGroup>\n\t\t</FieldGroup>\n\t);\n};\n\nexport default MailExportForm;\n"]},"sourceType":"module","hash":"a3258ee046aa083b8502bf37049a4c9dd59d4a4d"}
