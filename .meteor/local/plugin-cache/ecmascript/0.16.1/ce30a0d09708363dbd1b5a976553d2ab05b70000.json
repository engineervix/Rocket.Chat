{"metadata":{},"options":{"assumptions":{},"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat/client/views/room/contextualBar/Info/RoomInfo/RoomInfoWithData.js","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","classProperties","classPrivateProperties","jsx","nullishCoalescingOperator","nullishCoalescingOperator","optionalChaining","optionalCatchBinding","optionalCatchBinding","classProperties","classPrivateProperties","classPrivateMethods","classProperties","classPrivateProperties","asyncGenerators","asyncGenerators","objectRestSpread","logicalAssignment"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"allowUndeclaredExports":true,"strictMode":false},"caller":{"name":"meteor","arch":"web.browser"},"sourceFileName":"client/views/room/contextualBar/Info/RoomInfo/RoomInfoWithData.js","filename":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat/client/views/room/contextualBar/Info/RoomInfo/RoomInfoWithData.js","targets":{"android":"95.0.0","chrome":"95.0.0","edge":"95.0.0","firefox":"78.0.0","ie":"10.0.0","ios":"15.0.0","opera":"81.0.0","safari":"15.1.0","samsung":"14.0.0"},"cloneInputAst":true,"browserslistConfigFile":false,"passPerPreset":false,"envName":"development","cwd":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat","root":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat","rootMode":"root","plugins":[{"key":"base$0","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0","visitor":{"Program":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true},"options":{"avoidModernSyntax":false,"enforceStrictMode":false,"dynamicImport":true,"generateLetDeclarations":true}},{"key":"transform-runtime","visitor":{"MemberExpression":{"enter":[null]},"ObjectPattern":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":{},"_verified":{},"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]}},"options":{"version":"7.16.5","helpers":true,"useESModules":false,"corejs":false}},{"key":"proposal-class-properties","visitor":{"PrivateName":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{"loose":true}},{"key":"transform-react-jsx","visitor":{"_exploded":{},"_verified":{},"JSXNamespacedName":{"enter":[null]},"JSXSpreadChild":{"enter":[null]},"Program":{"enter":[null]},"JSXElement":{"exit":[null]},"JSXFragment":{"exit":[null]},"JSXAttribute":{"enter":[null]}},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","runtime":"classic","throwIfNamespace":true,"useBuiltIns":false}},{"key":"transform-react-display-name","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-react-pure-annotations","visitor":{"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"syntax-nullish-coalescing-operator","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-nullish-coalescing-operator","visitor":{"_exploded":{},"_verified":{},"LogicalExpression":{"enter":[null]}},"options":{}},{"key":"syntax-optional-chaining","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-optional-chaining","visitor":{"_exploded":true,"OptionalCallExpression":{"enter":[null]},"OptionalMemberExpression":{"enter":[null]},"_verified":true},"options":{}},{"key":"syntax-optional-catch-binding","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-optional-catch-binding","visitor":{"_exploded":{},"_verified":{},"CatchClause":{"enter":[null]}},"options":{}},{"key":"syntax-class-properties","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-class-properties","visitor":{"PrivateName":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{}},{"key":"syntax-async-generators","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-async-generator-functions","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]}},"options":{}},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-object-rest-spread","visitor":{"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"proposal-logical-assignment-operators","visitor":{"_exploded":{},"_verified":{},"AssignmentExpression":{"enter":[null]}},"options":{}},{"key":"transform-literals","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-template-literals","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-parameters","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{}},{"key":"transform-exponentiation-operator","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}}],"presets":[],"generatorOpts":{"filename":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat/client/views/room/contextualBar/Info/RoomInfo/RoomInfoWithData.js","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"client/views/room/contextualBar/Info/RoomInfo/RoomInfoWithData.js"}},"code":"let useMutableCallback;\nmodule.link(\"@rocket.chat/fuselage-hooks\", {\n  useMutableCallback(v) {\n    useMutableCallback = v;\n  }\n\n}, 0);\nlet React;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  }\n\n}, 1);\nlet RoomManager;\nmodule.link(\"../../../../../../app/ui-utils/client/lib/RoomManager\", {\n  RoomManager(v) {\n    RoomManager = v;\n  }\n\n}, 2);\nlet UiTextContext;\nmodule.link(\"../../../../../../definition/IRoomTypeConfig\", {\n  UiTextContext(v) {\n    UiTextContext = v;\n  }\n\n}, 3);\nlet GenericModal;\nmodule.link(\"../../../../../components/GenericModal\", {\n  default(v) {\n    GenericModal = v;\n  }\n\n}, 4);\nlet usePermission;\nmodule.link(\"../../../../../contexts/AuthorizationContext\", {\n  usePermission(v) {\n    usePermission = v;\n  }\n\n}, 5);\nlet useSetModal;\nmodule.link(\"../../../../../contexts/ModalContext\", {\n  useSetModal(v) {\n    useSetModal = v;\n  }\n\n}, 6);\nlet useRoute;\nmodule.link(\"../../../../../contexts/RouterContext\", {\n  useRoute(v) {\n    useRoute = v;\n  }\n\n}, 7);\nlet useEndpoint, useMethod;\nmodule.link(\"../../../../../contexts/ServerContext\", {\n  useEndpoint(v) {\n    useEndpoint = v;\n  },\n\n  useMethod(v) {\n    useMethod = v;\n  }\n\n}, 8);\nlet useSetting;\nmodule.link(\"../../../../../contexts/SettingsContext\", {\n  useSetting(v) {\n    useSetting = v;\n  }\n\n}, 9);\nlet useToastMessageDispatch;\nmodule.link(\"../../../../../contexts/ToastMessagesContext\", {\n  useToastMessageDispatch(v) {\n    useToastMessageDispatch = v;\n  }\n\n}, 10);\nlet useTranslation;\nmodule.link(\"../../../../../contexts/TranslationContext\", {\n  useTranslation(v) {\n    useTranslation = v;\n  }\n\n}, 11);\nlet useUserRoom;\nmodule.link(\"../../../../../contexts/UserContext\", {\n  useUserRoom(v) {\n    useUserRoom = v;\n  }\n\n}, 12);\nlet useEndpointActionExperimental;\nmodule.link(\"../../../../../hooks/useEndpointActionExperimental\", {\n  useEndpointActionExperimental(v) {\n    useEndpointActionExperimental = v;\n  }\n\n}, 13);\nlet roomCoordinator;\nmodule.link(\"../../../../../lib/rooms/roomCoordinator\", {\n  roomCoordinator(v) {\n    roomCoordinator = v;\n  }\n\n}, 14);\nlet WarningModal;\nmodule.link(\"../../../../admin/apps/WarningModal\", {\n  default(v) {\n    WarningModal = v;\n  }\n\n}, 15);\nlet useTabBarClose;\nmodule.link(\"../../../providers/ToolboxProvider\", {\n  useTabBarClose(v) {\n    useTabBarClose = v;\n  }\n\n}, 16);\nlet ChannelToTeamModal;\nmodule.link(\"../ChannelToTeamModal/ChannelToTeamModal\", {\n  default(v) {\n    ChannelToTeamModal = v;\n  }\n\n}, 17);\nlet RoomInfo;\nmodule.link(\"./RoomInfo\", {\n  default(v) {\n    RoomInfo = v;\n  }\n\n}, 18);\nconst retentionPolicyMaxAge = {\n  c: 'RetentionPolicy_MaxAge_Channels',\n  p: 'RetentionPolicy_MaxAge_Groups',\n  d: 'RetentionPolicy_MaxAge_DMs'\n};\nconst retentionPolicyAppliesTo = {\n  c: 'RetentionPolicy_AppliesToChannels',\n  p: 'RetentionPolicy_AppliesToGroups',\n  d: 'RetentionPolicy_AppliesToDMs'\n};\n\nconst RoomInfoWithData = _ref => {\n  let {\n    rid,\n    openEditing,\n    onClickBack,\n    onEnterRoom,\n    resetState\n  } = _ref;\n  const onClickClose = useTabBarClose();\n  const t = useTranslation();\n  const room = useUserRoom(rid);\n  room.type = room.t;\n  room.rid = rid;\n  const {\n    type,\n    fname,\n    prid,\n    joined = true\n  } = room; // TODO implement joined\n\n  const retentionPolicyEnabled = useSetting('RetentionPolicy_Enabled');\n  const retentionPolicy = {\n    retentionPolicyEnabled,\n    maxAgeDefault: useSetting(retentionPolicyMaxAge[room.t]) || 30,\n    retentionEnabledDefault: useSetting(retentionPolicyAppliesTo[room.t]),\n    excludePinnedDefault: useSetting('RetentionPolicy_DoNotPrunePinned'),\n    filesOnlyDefault: useSetting('RetentionPolicy_FilesOnly')\n  };\n  const dispatchToastMessage = useToastMessageDispatch();\n  const setModal = useSetModal();\n  const closeModal = useMutableCallback(() => setModal());\n  const deleteRoom = useEndpoint('POST', room.t === 'c' ? 'channels.delete' : 'groups.delete');\n  const hideRoom = useMethod('hideRoom');\n  const leaveRoom = useMethod('leaveRoom');\n  const router = useRoute('home');\n  const moveChannelToTeam = useEndpointActionExperimental('POST', 'teams.addRooms', t('Rooms_added_successfully'));\n  const convertRoomToTeam = useEndpointActionExperimental('POST', type === 'c' ? 'channels.convertToTeam' : 'groups.convertToTeam', t('Success'));\n  const canDelete = usePermission(type === 'c' ? 'delete-c' : 'delete-p', rid);\n  const canEdit = usePermission('edit-room', rid);\n  const canConvertRoomToTeam = usePermission('create-team');\n  const canLeave = usePermission(type === 'c' ? 'leave-c' : 'leave-p') && room.cl !== false && joined;\n  const handleDelete = useMutableCallback(() => {\n    const onConfirm = async () => {\n      try {\n        resetState && resetState({});\n        await deleteRoom({\n          roomId: rid\n        });\n        dispatchToastMessage({\n          type: 'success',\n          message: t('Room_has_been_deleted')\n        });\n        !resetState && router.push({});\n      } catch (error) {\n        dispatchToastMessage({\n          type: 'error',\n          message: error\n        });\n      }\n\n      closeModal();\n    };\n\n    setModal( /*#__PURE__*/React.createElement(GenericModal, {\n      variant: \"danger\",\n      onConfirm: onConfirm,\n      onCancel: closeModal,\n      confirmText: t('Yes_delete_it')\n    }, t('Delete_Room_Warning')));\n  });\n  const handleLeave = useMutableCallback(() => {\n    var _roomCoordinator$getR;\n\n    const leave = async () => {\n      try {\n        await leaveRoom(rid);\n        router.push({});\n        RoomManager.close(rid);\n      } catch (error) {\n        dispatchToastMessage({\n          type: 'error',\n          message: error\n        });\n      }\n\n      closeModal();\n    };\n\n    const warnText = (_roomCoordinator$getR = roomCoordinator.getRoomDirectives(type)) === null || _roomCoordinator$getR === void 0 ? void 0 : _roomCoordinator$getR.getUiText(UiTextContext.LEAVE_WARNING);\n    setModal( /*#__PURE__*/React.createElement(WarningModal, {\n      text: t(warnText, fname),\n      confirmText: t('Leave_room'),\n      close: closeModal,\n      cancel: closeModal,\n      cancelText: t('Cancel'),\n      confirm: leave\n    }));\n  });\n  const handleHide = useMutableCallback(async () => {\n    var _roomCoordinator$getR2;\n\n    const hide = async () => {\n      try {\n        await hideRoom(rid);\n        router.push({});\n      } catch (error) {\n        dispatchToastMessage({\n          type: 'error',\n          message: error\n        });\n      }\n\n      closeModal();\n    };\n\n    const warnText = (_roomCoordinator$getR2 = roomCoordinator.getRoomDirectives(type)) === null || _roomCoordinator$getR2 === void 0 ? void 0 : _roomCoordinator$getR2.getUiText(UiTextContext.HIDE_WARNING);\n    setModal( /*#__PURE__*/React.createElement(WarningModal, {\n      text: t(warnText, fname),\n      confirmText: t('Yes_hide_it'),\n      close: closeModal,\n      cancel: closeModal,\n      cancelText: t('Cancel'),\n      confirm: hide\n    }));\n  });\n  const onMoveToTeam = useMutableCallback(async () => {\n    const onConfirm = async teamId => {\n      try {\n        await moveChannelToTeam({\n          rooms: [rid],\n          teamId\n        });\n      } catch (error) {\n        dispatchToastMessage({\n          type: 'error',\n          message: error\n        });\n      } finally {\n        closeModal();\n      }\n    };\n\n    setModal( /*#__PURE__*/React.createElement(ChannelToTeamModal, {\n      rid: rid,\n      onClose: closeModal,\n      onCancel: closeModal,\n      onConfirm: onConfirm\n    }));\n  });\n  const onConvertToTeam = useMutableCallback(async () => {\n    const data = type === 'c' ? {\n      channelId: rid\n    } : {\n      roomId: rid\n    };\n\n    const onConfirm = async () => {\n      try {\n        await convertRoomToTeam(data);\n      } catch (error) {\n        dispatchToastMessage({\n          type: 'error',\n          message: error\n        });\n      } finally {\n        closeModal();\n      }\n    };\n\n    setModal( /*#__PURE__*/React.createElement(GenericModal, {\n      title: t('Confirmation'),\n      variant: \"warning\",\n      onClose: closeModal,\n      onCancel: closeModal,\n      onConfirm: onConfirm,\n      confirmText: t('Convert')\n    }, t('Converting_channel_to_a_team')));\n  });\n  const onClickEnterRoom = useMutableCallback(() => onEnterRoom(room));\n  const allowConvertToTeam = !room.teamId && !prid && canConvertRoomToTeam && canEdit;\n  return /*#__PURE__*/React.createElement(RoomInfo, {\n    room: room,\n    icon: room.t === 'p' ? 'lock' : 'hashtag',\n    retentionPolicy: retentionPolicyEnabled && retentionPolicy,\n    onClickBack: onClickBack,\n    onClickEdit: canEdit && openEditing,\n    onClickClose: onClickClose,\n    onClickDelete: canDelete && handleDelete,\n    onClickLeave: canLeave && handleLeave,\n    onClickHide: joined && handleHide,\n    onClickMoveToTeam: !room.teamId && !prid && canEdit && onMoveToTeam,\n    onClickConvertToTeam: allowConvertToTeam && onConvertToTeam,\n    onClickEnterRoom: onEnterRoom && onClickEnterRoom\n  });\n};\n\nmodule.exportDefault(RoomInfoWithData);","map":{"version":3,"sources":["client/views/room/contextualBar/Info/RoomInfo/RoomInfoWithData.js"],"names":["useMutableCallback","module","link","v","React","default","RoomManager","UiTextContext","GenericModal","usePermission","useSetModal","useRoute","useEndpoint","useMethod","useSetting","useToastMessageDispatch","useTranslation","useUserRoom","useEndpointActionExperimental","roomCoordinator","WarningModal","useTabBarClose","ChannelToTeamModal","RoomInfo","retentionPolicyMaxAge","c","p","d","retentionPolicyAppliesTo","RoomInfoWithData","rid","openEditing","onClickBack","onEnterRoom","resetState","onClickClose","t","room","type","fname","prid","joined","retentionPolicyEnabled","retentionPolicy","maxAgeDefault","retentionEnabledDefault","excludePinnedDefault","filesOnlyDefault","dispatchToastMessage","setModal","closeModal","deleteRoom","hideRoom","leaveRoom","router","moveChannelToTeam","convertRoomToTeam","canDelete","canEdit","canConvertRoomToTeam","canLeave","cl","handleDelete","onConfirm","roomId","message","push","error","handleLeave","leave","close","warnText","getRoomDirectives","getUiText","LEAVE_WARNING","handleHide","hide","HIDE_WARNING","onMoveToTeam","teamId","rooms","onConvertToTeam","data","channelId","onClickEnterRoom","allowConvertToTeam","exportDefault"],"mappings":"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","sourcesContent":["import { useMutableCallback } from '@rocket.chat/fuselage-hooks';\nimport React from 'react';\n\nimport { RoomManager } from '../../../../../../app/ui-utils/client/lib/RoomManager';\nimport { UiTextContext } from '../../../../../../definition/IRoomTypeConfig';\nimport GenericModal from '../../../../../components/GenericModal';\nimport { usePermission } from '../../../../../contexts/AuthorizationContext';\nimport { useSetModal } from '../../../../../contexts/ModalContext';\nimport { useRoute } from '../../../../../contexts/RouterContext';\nimport { useEndpoint, useMethod } from '../../../../../contexts/ServerContext';\nimport { useSetting } from '../../../../../contexts/SettingsContext';\nimport { useToastMessageDispatch } from '../../../../../contexts/ToastMessagesContext';\nimport { useTranslation } from '../../../../../contexts/TranslationContext';\nimport { useUserRoom } from '../../../../../contexts/UserContext';\nimport { useEndpointActionExperimental } from '../../../../../hooks/useEndpointActionExperimental';\nimport { roomCoordinator } from '../../../../../lib/rooms/roomCoordinator';\nimport WarningModal from '../../../../admin/apps/WarningModal';\nimport { useTabBarClose } from '../../../providers/ToolboxProvider';\nimport ChannelToTeamModal from '../ChannelToTeamModal/ChannelToTeamModal';\nimport RoomInfo from './RoomInfo';\n\nconst retentionPolicyMaxAge = {\n\tc: 'RetentionPolicy_MaxAge_Channels',\n\tp: 'RetentionPolicy_MaxAge_Groups',\n\td: 'RetentionPolicy_MaxAge_DMs',\n};\n\nconst retentionPolicyAppliesTo = {\n\tc: 'RetentionPolicy_AppliesToChannels',\n\tp: 'RetentionPolicy_AppliesToGroups',\n\td: 'RetentionPolicy_AppliesToDMs',\n};\n\nconst RoomInfoWithData = ({ rid, openEditing, onClickBack, onEnterRoom, resetState }) => {\n\tconst onClickClose = useTabBarClose();\n\tconst t = useTranslation();\n\n\tconst room = useUserRoom(rid);\n\troom.type = room.t;\n\troom.rid = rid;\n\n\tconst { type, fname, prid, joined = true } = room; // TODO implement joined\n\n\tconst retentionPolicyEnabled = useSetting('RetentionPolicy_Enabled');\n\tconst retentionPolicy = {\n\t\tretentionPolicyEnabled,\n\t\tmaxAgeDefault: useSetting(retentionPolicyMaxAge[room.t]) || 30,\n\t\tretentionEnabledDefault: useSetting(retentionPolicyAppliesTo[room.t]),\n\t\texcludePinnedDefault: useSetting('RetentionPolicy_DoNotPrunePinned'),\n\t\tfilesOnlyDefault: useSetting('RetentionPolicy_FilesOnly'),\n\t};\n\n\tconst dispatchToastMessage = useToastMessageDispatch();\n\tconst setModal = useSetModal();\n\tconst closeModal = useMutableCallback(() => setModal());\n\tconst deleteRoom = useEndpoint('POST', room.t === 'c' ? 'channels.delete' : 'groups.delete');\n\tconst hideRoom = useMethod('hideRoom');\n\tconst leaveRoom = useMethod('leaveRoom');\n\tconst router = useRoute('home');\n\n\tconst moveChannelToTeam = useEndpointActionExperimental('POST', 'teams.addRooms', t('Rooms_added_successfully'));\n\tconst convertRoomToTeam = useEndpointActionExperimental(\n\t\t'POST',\n\t\ttype === 'c' ? 'channels.convertToTeam' : 'groups.convertToTeam',\n\t\tt('Success'),\n\t);\n\n\tconst canDelete = usePermission(type === 'c' ? 'delete-c' : 'delete-p', rid);\n\tconst canEdit = usePermission('edit-room', rid);\n\tconst canConvertRoomToTeam = usePermission('create-team');\n\tconst canLeave = usePermission(type === 'c' ? 'leave-c' : 'leave-p') && room.cl !== false && joined;\n\n\tconst handleDelete = useMutableCallback(() => {\n\t\tconst onConfirm = async () => {\n\t\t\ttry {\n\t\t\t\tresetState && resetState({});\n\t\t\t\tawait deleteRoom({ roomId: rid });\n\t\t\t\tdispatchToastMessage({ type: 'success', message: t('Room_has_been_deleted') });\n\t\t\t\t!resetState && router.push({});\n\t\t\t} catch (error) {\n\t\t\t\tdispatchToastMessage({ type: 'error', message: error });\n\t\t\t}\n\t\t\tcloseModal();\n\t\t};\n\n\t\tsetModal(\n\t\t\t<GenericModal variant='danger' onConfirm={onConfirm} onCancel={closeModal} confirmText={t('Yes_delete_it')}>\n\t\t\t\t{t('Delete_Room_Warning')}\n\t\t\t</GenericModal>,\n\t\t);\n\t});\n\n\tconst handleLeave = useMutableCallback(() => {\n\t\tconst leave = async () => {\n\t\t\ttry {\n\t\t\t\tawait leaveRoom(rid);\n\t\t\t\trouter.push({});\n\t\t\t\tRoomManager.close(rid);\n\t\t\t} catch (error) {\n\t\t\t\tdispatchToastMessage({ type: 'error', message: error });\n\t\t\t}\n\t\t\tcloseModal();\n\t\t};\n\n\t\tconst warnText = roomCoordinator.getRoomDirectives(type)?.getUiText(UiTextContext.LEAVE_WARNING);\n\n\t\tsetModal(\n\t\t\t<WarningModal\n\t\t\t\ttext={t(warnText, fname)}\n\t\t\t\tconfirmText={t('Leave_room')}\n\t\t\t\tclose={closeModal}\n\t\t\t\tcancel={closeModal}\n\t\t\t\tcancelText={t('Cancel')}\n\t\t\t\tconfirm={leave}\n\t\t\t/>,\n\t\t);\n\t});\n\n\tconst handleHide = useMutableCallback(async () => {\n\t\tconst hide = async () => {\n\t\t\ttry {\n\t\t\t\tawait hideRoom(rid);\n\t\t\t\trouter.push({});\n\t\t\t} catch (error) {\n\t\t\t\tdispatchToastMessage({ type: 'error', message: error });\n\t\t\t}\n\t\t\tcloseModal();\n\t\t};\n\n\t\tconst warnText = roomCoordinator.getRoomDirectives(type)?.getUiText(UiTextContext.HIDE_WARNING);\n\n\t\tsetModal(\n\t\t\t<WarningModal\n\t\t\t\ttext={t(warnText, fname)}\n\t\t\t\tconfirmText={t('Yes_hide_it')}\n\t\t\t\tclose={closeModal}\n\t\t\t\tcancel={closeModal}\n\t\t\t\tcancelText={t('Cancel')}\n\t\t\t\tconfirm={hide}\n\t\t\t/>,\n\t\t);\n\t});\n\n\tconst onMoveToTeam = useMutableCallback(async () => {\n\t\tconst onConfirm = async (teamId) => {\n\t\t\ttry {\n\t\t\t\tawait moveChannelToTeam({ rooms: [rid], teamId });\n\t\t\t} catch (error) {\n\t\t\t\tdispatchToastMessage({ type: 'error', message: error });\n\t\t\t} finally {\n\t\t\t\tcloseModal();\n\t\t\t}\n\t\t};\n\n\t\tsetModal(<ChannelToTeamModal rid={rid} onClose={closeModal} onCancel={closeModal} onConfirm={onConfirm} />);\n\t});\n\n\tconst onConvertToTeam = useMutableCallback(async () => {\n\t\tconst data = type === 'c' ? { channelId: rid } : { roomId: rid };\n\t\tconst onConfirm = async () => {\n\t\t\ttry {\n\t\t\t\tawait convertRoomToTeam(data);\n\t\t\t} catch (error) {\n\t\t\t\tdispatchToastMessage({ type: 'error', message: error });\n\t\t\t} finally {\n\t\t\t\tcloseModal();\n\t\t\t}\n\t\t};\n\n\t\tsetModal(\n\t\t\t<GenericModal\n\t\t\t\ttitle={t('Confirmation')}\n\t\t\t\tvariant='warning'\n\t\t\t\tonClose={closeModal}\n\t\t\t\tonCancel={closeModal}\n\t\t\t\tonConfirm={onConfirm}\n\t\t\t\tconfirmText={t('Convert')}\n\t\t\t>\n\t\t\t\t{t('Converting_channel_to_a_team')}\n\t\t\t</GenericModal>,\n\t\t);\n\t});\n\n\tconst onClickEnterRoom = useMutableCallback(() => onEnterRoom(room));\n\tconst allowConvertToTeam = !room.teamId && !prid && canConvertRoomToTeam && canEdit;\n\n\treturn (\n\t\t<RoomInfo\n\t\t\troom={room}\n\t\t\ticon={room.t === 'p' ? 'lock' : 'hashtag'}\n\t\t\tretentionPolicy={retentionPolicyEnabled && retentionPolicy}\n\t\t\tonClickBack={onClickBack}\n\t\t\tonClickEdit={canEdit && openEditing}\n\t\t\tonClickClose={onClickClose}\n\t\t\tonClickDelete={canDelete && handleDelete}\n\t\t\tonClickLeave={canLeave && handleLeave}\n\t\t\tonClickHide={joined && handleHide}\n\t\t\tonClickMoveToTeam={!room.teamId && !prid && canEdit && onMoveToTeam}\n\t\t\tonClickConvertToTeam={allowConvertToTeam && onConvertToTeam}\n\t\t\tonClickEnterRoom={onEnterRoom && onClickEnterRoom}\n\t\t/>\n\t);\n};\n\nexport default RoomInfoWithData;\n"]},"sourceType":"module","hash":"ce30a0d09708363dbd1b5a976553d2ab05b70000"}
