{"metadata":{},"options":{"assumptions":{},"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat/client/sidebar/RoomList/SideBarItemTemplateWithData.js","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","classProperties","classPrivateProperties","jsx","nullishCoalescingOperator","nullishCoalescingOperator","optionalChaining","optionalCatchBinding","optionalCatchBinding","classProperties","classPrivateProperties","classPrivateMethods","classProperties","classPrivateProperties","asyncGenerators","asyncGenerators","objectRestSpread","logicalAssignment"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"allowUndeclaredExports":true,"strictMode":false},"caller":{"name":"meteor","arch":"web.browser"},"sourceFileName":"client/sidebar/RoomList/SideBarItemTemplateWithData.js","filename":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat/client/sidebar/RoomList/SideBarItemTemplateWithData.js","targets":{"android":"95.0.0","chrome":"95.0.0","edge":"95.0.0","firefox":"78.0.0","ie":"10.0.0","ios":"15.0.0","opera":"81.0.0","safari":"15.1.0","samsung":"14.0.0"},"cloneInputAst":true,"browserslistConfigFile":false,"passPerPreset":false,"envName":"development","cwd":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat","root":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat","rootMode":"root","plugins":[{"key":"base$0","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0","visitor":{"Program":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true},"options":{"avoidModernSyntax":false,"enforceStrictMode":false,"dynamicImport":true,"generateLetDeclarations":true}},{"key":"transform-runtime","visitor":{"MemberExpression":{"enter":[null]},"ObjectPattern":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":{},"_verified":{},"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]}},"options":{"version":"7.16.5","helpers":true,"useESModules":false,"corejs":false}},{"key":"proposal-class-properties","visitor":{"PrivateName":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{"loose":true}},{"key":"transform-react-jsx","visitor":{"_exploded":{},"_verified":{},"JSXNamespacedName":{"enter":[null]},"JSXSpreadChild":{"enter":[null]},"Program":{"enter":[null]},"JSXElement":{"exit":[null]},"JSXFragment":{"exit":[null]},"JSXAttribute":{"enter":[null]}},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","runtime":"classic","throwIfNamespace":true,"useBuiltIns":false}},{"key":"transform-react-display-name","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-react-pure-annotations","visitor":{"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"syntax-nullish-coalescing-operator","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-nullish-coalescing-operator","visitor":{"_exploded":{},"_verified":{},"LogicalExpression":{"enter":[null]}},"options":{}},{"key":"syntax-optional-chaining","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-optional-chaining","visitor":{"_exploded":true,"OptionalCallExpression":{"enter":[null]},"OptionalMemberExpression":{"enter":[null]},"_verified":true},"options":{}},{"key":"syntax-optional-catch-binding","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-optional-catch-binding","visitor":{"_exploded":{},"_verified":{},"CatchClause":{"enter":[null]}},"options":{}},{"key":"syntax-class-properties","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-class-properties","visitor":{"PrivateName":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{}},{"key":"syntax-async-generators","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-async-generator-functions","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]}},"options":{}},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-object-rest-spread","visitor":{"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"proposal-logical-assignment-operators","visitor":{"_exploded":{},"_verified":{},"AssignmentExpression":{"enter":[null]}},"options":{}},{"key":"transform-literals","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-template-literals","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-parameters","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{}},{"key":"transform-exponentiation-operator","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}}],"presets":[],"generatorOpts":{"filename":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat/client/sidebar/RoomList/SideBarItemTemplateWithData.js","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"client/sidebar/RoomList/SideBarItemTemplateWithData.js"}},"code":"let Badge, Sidebar;\nmodule.link(\"@rocket.chat/fuselage\", {\n  Badge(v) {\n    Badge = v;\n  },\n\n  Sidebar(v) {\n    Sidebar = v;\n  }\n\n}, 0);\nlet React, memo;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  },\n\n  memo(v) {\n    memo = v;\n  }\n\n}, 1);\nlet RoomIcon;\nmodule.link(\"../../components/RoomIcon\", {\n  RoomIcon(v) {\n    RoomIcon = v;\n  }\n\n}, 2);\nlet useLayout;\nmodule.link(\"../../contexts/LayoutContext\", {\n  useLayout(v) {\n    useLayout = v;\n  }\n\n}, 3);\nlet roomCoordinator;\nmodule.link(\"../../lib/rooms/roomCoordinator\", {\n  roomCoordinator(v) {\n    roomCoordinator = v;\n  }\n\n}, 4);\nlet RoomMenu;\nmodule.link(\"../RoomMenu\", {\n  default(v) {\n    RoomMenu = v;\n  }\n\n}, 5);\nlet normalizeSidebarMessage;\nmodule.link(\"./normalizeSidebarMessage\", {\n  normalizeSidebarMessage(v) {\n    normalizeSidebarMessage = v;\n  }\n\n}, 6);\n\nconst getMessage = (room, lastMessage, t) => {\n  var _lastMessage$u, _room$u;\n\n  if (!lastMessage) {\n    return t('No_messages_yet');\n  }\n\n  if (!lastMessage.u) {\n    return normalizeSidebarMessage(lastMessage, t);\n  }\n\n  if (((_lastMessage$u = lastMessage.u) === null || _lastMessage$u === void 0 ? void 0 : _lastMessage$u.username) === ((_room$u = room.u) === null || _room$u === void 0 ? void 0 : _room$u.username)) {\n    return \"\".concat(t('You'), \": \").concat(normalizeSidebarMessage(lastMessage, t));\n  }\n\n  if (room.t === 'd' && room.uids && room.uids.length <= 2) {\n    return normalizeSidebarMessage(lastMessage, t);\n  }\n\n  return \"\".concat(lastMessage.u.name || lastMessage.u.username, \": \").concat(normalizeSidebarMessage(lastMessage, t));\n};\n\nfunction SideBarItemTemplateWithData(_ref) {\n  let {\n    room,\n    id,\n    extended,\n    selected,\n    SideBarItemTemplate,\n    AvatarTemplate,\n    t,\n    style,\n    // sidebarViewMode,\n    isAnonymous\n  } = _ref;\n  const {\n    sidebar\n  } = useLayout();\n  const href = roomCoordinator.getRouteLink(room.t, room);\n  const title = roomCoordinator.getRoomName(room.t, room);\n  const {\n    lastMessage,\n    hideUnreadStatus,\n    unread = 0,\n    alert,\n    userMentions,\n    groupMentions,\n    tunread = [],\n    tunreadUser = [],\n    rid,\n    t: type,\n    cl\n  } = room;\n  const highlighted = !hideUnreadStatus && (alert || unread);\n  const icon = /*#__PURE__*/React.createElement(Sidebar.Item.Icon, {\n    highlighted: highlighted\n  }, /*#__PURE__*/React.createElement(RoomIcon, {\n    highlighted: highlighted,\n    room: room,\n    placement: \"sidebar\"\n  }));\n  const isQueued = room.status === 'queued';\n  const threadUnread = tunread.length > 0;\n  const message = extended && getMessage(room, lastMessage, t);\n  const subtitle = message ? /*#__PURE__*/React.createElement(\"span\", {\n    className: \"message-body--unstyled\",\n    dangerouslySetInnerHTML: {\n      __html: message\n    }\n  }) : null;\n  const variant = (userMentions || tunreadUser.length) && 'danger' || threadUnread && 'primary' || groupMentions && 'warning' || 'ghost';\n  const isUnread = unread > 0 || threadUnread;\n  const badges = !hideUnreadStatus && isUnread ? /*#__PURE__*/React.createElement(Badge, {\n    style: {\n      flexShrink: 0\n    },\n    variant: variant\n  }, unread + (tunread === null || tunread === void 0 ? void 0 : tunread.length)) : null;\n  return /*#__PURE__*/React.createElement(SideBarItemTemplate, {\n    is: \"a\",\n    id: id,\n    \"data-qa\": \"sidebar-item\",\n    \"aria-level\": \"2\",\n    unread: highlighted,\n    threadUnread: threadUnread,\n    selected: selected,\n    href: href,\n    onClick: () => !selected && sidebar.toggle(),\n    \"aria-label\": title,\n    title: title,\n    time: lastMessage === null || lastMessage === void 0 ? void 0 : lastMessage.ts,\n    subtitle: subtitle,\n    icon: icon,\n    style: style,\n    badges: badges,\n    avatar: AvatarTemplate && /*#__PURE__*/React.createElement(AvatarTemplate, room),\n    menu: !isAnonymous && !isQueued && (() => /*#__PURE__*/React.createElement(RoomMenu, {\n      alert: alert,\n      threadUnread: threadUnread,\n      rid: rid,\n      unread: !!unread,\n      roomOpen: false,\n      type: type,\n      cl: cl,\n      name: title,\n      status: room.status\n    }))\n  });\n}\n\nconst propsAreEqual = (prevProps, nextProps) => {\n  var _prevProps$room$_upda, _nextProps$room$_upda, _prevProps$room$lastM, _prevProps$room$lastM2, _nextProps$room$lastM, _nextProps$room$lastM2, _prevProps$room$v, _nextProps$room$v;\n\n  if (['id', 'style', 'extended', 'selected', 'SideBarItemTemplate', 'AvatarTemplate', 't', 'sidebarViewMode'].some(key => prevProps[key] !== nextProps[key])) {\n    return false;\n  }\n\n  if (prevProps.room === nextProps.room) {\n    return true;\n  }\n\n  if (prevProps.room._id !== nextProps.room._id) {\n    return false;\n  }\n\n  if (((_prevProps$room$_upda = prevProps.room._updatedAt) === null || _prevProps$room$_upda === void 0 ? void 0 : _prevProps$room$_upda.toISOString()) !== ((_nextProps$room$_upda = nextProps.room._updatedAt) === null || _nextProps$room$_upda === void 0 ? void 0 : _nextProps$room$_upda.toISOString())) {\n    return false;\n  }\n\n  if (((_prevProps$room$lastM = prevProps.room.lastMessage) === null || _prevProps$room$lastM === void 0 ? void 0 : (_prevProps$room$lastM2 = _prevProps$room$lastM._updatedAt) === null || _prevProps$room$lastM2 === void 0 ? void 0 : _prevProps$room$lastM2.toISOString()) !== ((_nextProps$room$lastM = nextProps.room.lastMessage) === null || _nextProps$room$lastM === void 0 ? void 0 : (_nextProps$room$lastM2 = _nextProps$room$lastM._updatedAt) === null || _nextProps$room$lastM2 === void 0 ? void 0 : _nextProps$room$lastM2.toISOString())) {\n    return false;\n  }\n\n  if (prevProps.room.alert !== nextProps.room.alert) {\n    return false;\n  }\n\n  if (((_prevProps$room$v = prevProps.room.v) === null || _prevProps$room$v === void 0 ? void 0 : _prevProps$room$v.status) !== ((_nextProps$room$v = nextProps.room.v) === null || _nextProps$room$v === void 0 ? void 0 : _nextProps$room$v.status)) {\n    return false;\n  }\n\n  if (prevProps.room.teamMain !== nextProps.room.teamMain) {\n    return false;\n  }\n\n  return true;\n};\n\nmodule.exportDefault( /*#__PURE__*/memo(SideBarItemTemplateWithData, propsAreEqual));","map":{"version":3,"sources":["client/sidebar/RoomList/SideBarItemTemplateWithData.js"],"names":["Badge","Sidebar","module","link","v","React","memo","default","RoomIcon","useLayout","roomCoordinator","RoomMenu","normalizeSidebarMessage","getMessage","room","lastMessage","t","u","username","uids","length","name","SideBarItemTemplateWithData","id","extended","selected","SideBarItemTemplate","AvatarTemplate","style","isAnonymous","sidebar","href","getRouteLink","title","getRoomName","hideUnreadStatus","unread","alert","userMentions","groupMentions","tunread","tunreadUser","rid","type","cl","highlighted","icon","isQueued","status","threadUnread","message","subtitle","__html","variant","isUnread","badges","flexShrink","toggle","ts","propsAreEqual","prevProps","nextProps","some","key","_id","_updatedAt","toISOString","teamMain","exportDefault"],"mappings":"AAAA,IAAIA,KAAJ,EAAUC,OAAV;AAAkBC,MAAM,CAACC,IAAP,CAAY,uBAAZ,EAAoC;AAACH,EAAAA,KAAK,CAACI,CAAD,EAAG;AAACJ,IAAAA,KAAK,GAACI,CAAN;AAAQ,GAAlB;;AAAmBH,EAAAA,OAAO,CAACG,CAAD,EAAG;AAACH,IAAAA,OAAO,GAACG,CAAR;AAAU;;AAAxC,CAApC,EAA8E,CAA9E;AAAiF,IAAIC,KAAJ,EAAUC,IAAV;AAAeJ,MAAM,CAACC,IAAP,CAAY,OAAZ,EAAoB;AAACI,EAAAA,OAAO,CAACH,CAAD,EAAG;AAACC,IAAAA,KAAK,GAACD,CAAN;AAAQ,GAApB;;AAAqBE,EAAAA,IAAI,CAACF,CAAD,EAAG;AAACE,IAAAA,IAAI,GAACF,CAAL;AAAO;;AAApC,CAApB,EAA0D,CAA1D;AAA6D,IAAII,QAAJ;AAAaN,MAAM,CAACC,IAAP,CAAY,2BAAZ,EAAwC;AAACK,EAAAA,QAAQ,CAACJ,CAAD,EAAG;AAACI,IAAAA,QAAQ,GAACJ,CAAT;AAAW;;AAAxB,CAAxC,EAAkE,CAAlE;AAAqE,IAAIK,SAAJ;AAAcP,MAAM,CAACC,IAAP,CAAY,8BAAZ,EAA2C;AAACM,EAAAA,SAAS,CAACL,CAAD,EAAG;AAACK,IAAAA,SAAS,GAACL,CAAV;AAAY;;AAA1B,CAA3C,EAAuE,CAAvE;AAA0E,IAAIM,eAAJ;AAAoBR,MAAM,CAACC,IAAP,CAAY,iCAAZ,EAA8C;AAACO,EAAAA,eAAe,CAACN,CAAD,EAAG;AAACM,IAAAA,eAAe,GAACN,CAAhB;AAAkB;;AAAtC,CAA9C,EAAsF,CAAtF;AAAyF,IAAIO,QAAJ;AAAaT,MAAM,CAACC,IAAP,CAAY,aAAZ,EAA0B;AAACI,EAAAA,OAAO,CAACH,CAAD,EAAG;AAACO,IAAAA,QAAQ,GAACP,CAAT;AAAW;;AAAvB,CAA1B,EAAmD,CAAnD;AAAsD,IAAIQ,uBAAJ;AAA4BV,MAAM,CAACC,IAAP,CAAY,2BAAZ,EAAwC;AAACS,EAAAA,uBAAuB,CAACR,CAAD,EAAG;AAACQ,IAAAA,uBAAuB,GAACR,CAAxB;AAA0B;;AAAtD,CAAxC,EAAgG,CAAhG;;AASriB,MAAMS,UAAU,GAAG,CAACC,IAAD,EAAOC,WAAP,EAAoBC,CAApB,KAA0B;AAAA;;AAC5C,MAAI,CAACD,WAAL,EAAkB;AACjB,WAAOC,CAAC,CAAC,iBAAD,CAAR;AACA;;AACD,MAAI,CAACD,WAAW,CAACE,CAAjB,EAAoB;AACnB,WAAOL,uBAAuB,CAACG,WAAD,EAAcC,CAAd,CAA9B;AACA;;AACD,MAAI,mBAAAD,WAAW,CAACE,CAAZ,kEAAeC,QAAf,kBAA4BJ,IAAI,CAACG,CAAjC,4CAA4B,QAAQC,QAApC,CAAJ,EAAkD;AACjD,qBAAUF,CAAC,CAAC,KAAD,CAAX,eAAuBJ,uBAAuB,CAACG,WAAD,EAAcC,CAAd,CAA9C;AACA;;AACD,MAAIF,IAAI,CAACE,CAAL,KAAW,GAAX,IAAkBF,IAAI,CAACK,IAAvB,IAA+BL,IAAI,CAACK,IAAL,CAAUC,MAAV,IAAoB,CAAvD,EAA0D;AACzD,WAAOR,uBAAuB,CAACG,WAAD,EAAcC,CAAd,CAA9B;AACA;;AACD,mBAAUD,WAAW,CAACE,CAAZ,CAAcI,IAAd,IAAsBN,WAAW,CAACE,CAAZ,CAAcC,QAA9C,eAA2DN,uBAAuB,CAACG,WAAD,EAAcC,CAAd,CAAlF;AACA,CAdD;;AAgBA,SAASM,2BAAT,OAWG;AAAA,MAXkC;AACpCR,IAAAA,IADoC;AAEpCS,IAAAA,EAFoC;AAGpCC,IAAAA,QAHoC;AAIpCC,IAAAA,QAJoC;AAKpCC,IAAAA,mBALoC;AAMpCC,IAAAA,cANoC;AAOpCX,IAAAA,CAPoC;AAQpCY,IAAAA,KARoC;AASpC;AACAC,IAAAA;AAVoC,GAWlC;AACF,QAAM;AAAEC,IAAAA;AAAF,MAAcrB,SAAS,EAA7B;AAEA,QAAMsB,IAAI,GAAGrB,eAAe,CAACsB,YAAhB,CAA6BlB,IAAI,CAACE,CAAlC,EAAqCF,IAArC,CAAb;AACA,QAAMmB,KAAK,GAAGvB,eAAe,CAACwB,WAAhB,CAA4BpB,IAAI,CAACE,CAAjC,EAAoCF,IAApC,CAAd;AAEA,QAAM;AACLC,IAAAA,WADK;AAELoB,IAAAA,gBAFK;AAGLC,IAAAA,MAAM,GAAG,CAHJ;AAILC,IAAAA,KAJK;AAKLC,IAAAA,YALK;AAMLC,IAAAA,aANK;AAOLC,IAAAA,OAAO,GAAG,EAPL;AAQLC,IAAAA,WAAW,GAAG,EART;AASLC,IAAAA,GATK;AAUL1B,IAAAA,CAAC,EAAE2B,IAVE;AAWLC,IAAAA;AAXK,MAYF9B,IAZJ;AAcA,QAAM+B,WAAW,GAAG,CAACV,gBAAD,KAAsBE,KAAK,IAAID,MAA/B,CAApB;AACA,QAAMU,IAAI,gBACT,oBAAC,OAAD,CAAS,IAAT,CAAc,IAAd;AAAmB,IAAA,WAAW,EAAED;AAAhC,kBACC,oBAAC,QAAD;AAAU,IAAA,WAAW,EAAEA,WAAvB;AAAoC,IAAA,IAAI,EAAE/B,IAA1C;AAAgD,IAAA,SAAS,EAAC;AAA1D,IADD,CADD;AAMA,QAAMiC,QAAQ,GAAGjC,IAAI,CAACkC,MAAL,KAAgB,QAAjC;AAEA,QAAMC,YAAY,GAAGT,OAAO,CAACpB,MAAR,GAAiB,CAAtC;AACA,QAAM8B,OAAO,GAAG1B,QAAQ,IAAIX,UAAU,CAACC,IAAD,EAAOC,WAAP,EAAoBC,CAApB,CAAtC;AAEA,QAAMmC,QAAQ,GAAGD,OAAO,gBAAG;AAAM,IAAA,SAAS,EAAC,wBAAhB;AAAyC,IAAA,uBAAuB,EAAE;AAAEE,MAAAA,MAAM,EAAEF;AAAV;AAAlE,IAAH,GAA+F,IAAvH;AACA,QAAMG,OAAO,GACX,CAACf,YAAY,IAAIG,WAAW,CAACrB,MAA7B,KAAwC,QAAzC,IAAuD6B,YAAY,IAAI,SAAvE,IAAsFV,aAAa,IAAI,SAAvG,IAAqH,OADtH;AAEA,QAAMe,QAAQ,GAAGlB,MAAM,GAAG,CAAT,IAAca,YAA/B;AACA,QAAMM,MAAM,GACX,CAACpB,gBAAD,IAAqBmB,QAArB,gBACC,oBAAC,KAAD;AAAO,IAAA,KAAK,EAAE;AAAEE,MAAAA,UAAU,EAAE;AAAd,KAAd;AAAiC,IAAA,OAAO,EAAEH;AAA1C,KACEjB,MAAM,IAAGI,OAAH,aAAGA,OAAH,uBAAGA,OAAO,CAAEpB,MAAZ,CADR,CADD,GAII,IALL;AAOA,sBACC,oBAAC,mBAAD;AACC,IAAA,EAAE,EAAC,GADJ;AAEC,IAAA,EAAE,EAAEG,EAFL;AAGC,eAAQ,cAHT;AAIC,kBAAW,GAJZ;AAKC,IAAA,MAAM,EAAEsB,WALT;AAMC,IAAA,YAAY,EAAEI,YANf;AAOC,IAAA,QAAQ,EAAExB,QAPX;AAQC,IAAA,IAAI,EAAEM,IARP;AASC,IAAA,OAAO,EAAE,MAAM,CAACN,QAAD,IAAaK,OAAO,CAAC2B,MAAR,EAT7B;AAUC,kBAAYxB,KAVb;AAWC,IAAA,KAAK,EAAEA,KAXR;AAYC,IAAA,IAAI,EAAElB,WAAF,aAAEA,WAAF,uBAAEA,WAAW,CAAE2C,EAZpB;AAaC,IAAA,QAAQ,EAAEP,QAbX;AAcC,IAAA,IAAI,EAAEL,IAdP;AAeC,IAAA,KAAK,EAAElB,KAfR;AAgBC,IAAA,MAAM,EAAE2B,MAhBT;AAiBC,IAAA,MAAM,EAAE5B,cAAc,iBAAI,oBAAC,cAAD,EAAoBb,IAApB,CAjB3B;AAkBC,IAAA,IAAI,EACH,CAACe,WAAD,IACA,CAACkB,QADD,KAEC,mBACA,oBAAC,QAAD;AACC,MAAA,KAAK,EAAEV,KADR;AAEC,MAAA,YAAY,EAAEY,YAFf;AAGC,MAAA,GAAG,EAAEP,GAHN;AAIC,MAAA,MAAM,EAAE,CAAC,CAACN,MAJX;AAKC,MAAA,QAAQ,EAAE,KALX;AAMC,MAAA,IAAI,EAAEO,IANP;AAOC,MAAA,EAAE,EAAEC,EAPL;AAQC,MAAA,IAAI,EAAEX,KARP;AASC,MAAA,MAAM,EAAEnB,IAAI,CAACkC;AATd,MAHD;AAnBF,IADD;AAsCA;;AAED,MAAMW,aAAa,GAAG,CAACC,SAAD,EAAYC,SAAZ,KAA0B;AAAA;;AAC/C,MACC,CAAC,IAAD,EAAO,OAAP,EAAgB,UAAhB,EAA4B,UAA5B,EAAwC,qBAAxC,EAA+D,gBAA/D,EAAiF,GAAjF,EAAsF,iBAAtF,EAAyGC,IAAzG,CACEC,GAAD,IAASH,SAAS,CAACG,GAAD,CAAT,KAAmBF,SAAS,CAACE,GAAD,CADtC,CADD,EAIE;AACD,WAAO,KAAP;AACA;;AAED,MAAIH,SAAS,CAAC9C,IAAV,KAAmB+C,SAAS,CAAC/C,IAAjC,EAAuC;AACtC,WAAO,IAAP;AACA;;AAED,MAAI8C,SAAS,CAAC9C,IAAV,CAAekD,GAAf,KAAuBH,SAAS,CAAC/C,IAAV,CAAekD,GAA1C,EAA+C;AAC9C,WAAO,KAAP;AACA;;AACD,MAAI,0BAAAJ,SAAS,CAAC9C,IAAV,CAAemD,UAAf,gFAA2BC,WAA3B,kCAA6CL,SAAS,CAAC/C,IAAV,CAAemD,UAA5D,0DAA6C,sBAA2BC,WAA3B,EAA7C,CAAJ,EAA2F;AAC1F,WAAO,KAAP;AACA;;AACD,MAAI,0BAAAN,SAAS,CAAC9C,IAAV,CAAeC,WAAf,0GAA4BkD,UAA5B,kFAAwCC,WAAxC,kCAA0DL,SAAS,CAAC/C,IAAV,CAAeC,WAAzE,oFAA0D,sBAA4BkD,UAAtF,2DAA0D,uBAAwCC,WAAxC,EAA1D,CAAJ,EAAqH;AACpH,WAAO,KAAP;AACA;;AACD,MAAIN,SAAS,CAAC9C,IAAV,CAAeuB,KAAf,KAAyBwB,SAAS,CAAC/C,IAAV,CAAeuB,KAA5C,EAAmD;AAClD,WAAO,KAAP;AACA;;AACD,MAAI,sBAAAuB,SAAS,CAAC9C,IAAV,CAAeV,CAAf,wEAAkB4C,MAAlB,4BAA6Ba,SAAS,CAAC/C,IAAV,CAAeV,CAA5C,sDAA6B,kBAAkB4C,MAA/C,CAAJ,EAA2D;AAC1D,WAAO,KAAP;AACA;;AACD,MAAIY,SAAS,CAAC9C,IAAV,CAAeqD,QAAf,KAA4BN,SAAS,CAAC/C,IAAV,CAAeqD,QAA/C,EAAyD;AACxD,WAAO,KAAP;AACA;;AAED,SAAO,IAAP;AACA,CAjCD;;AAvHAjE,MAAM,CAACkE,aAAP,eA0Je9D,IAAI,CAACgB,2BAAD,EAA8BqC,aAA9B,CA1JnB","sourcesContent":["import { Badge, Sidebar } from '@rocket.chat/fuselage';\nimport React, { memo } from 'react';\n\nimport { RoomIcon } from '../../components/RoomIcon';\nimport { useLayout } from '../../contexts/LayoutContext';\nimport { roomCoordinator } from '../../lib/rooms/roomCoordinator';\nimport RoomMenu from '../RoomMenu';\nimport { normalizeSidebarMessage } from './normalizeSidebarMessage';\n\nconst getMessage = (room, lastMessage, t) => {\n\tif (!lastMessage) {\n\t\treturn t('No_messages_yet');\n\t}\n\tif (!lastMessage.u) {\n\t\treturn normalizeSidebarMessage(lastMessage, t);\n\t}\n\tif (lastMessage.u?.username === room.u?.username) {\n\t\treturn `${t('You')}: ${normalizeSidebarMessage(lastMessage, t)}`;\n\t}\n\tif (room.t === 'd' && room.uids && room.uids.length <= 2) {\n\t\treturn normalizeSidebarMessage(lastMessage, t);\n\t}\n\treturn `${lastMessage.u.name || lastMessage.u.username}: ${normalizeSidebarMessage(lastMessage, t)}`;\n};\n\nfunction SideBarItemTemplateWithData({\n\troom,\n\tid,\n\textended,\n\tselected,\n\tSideBarItemTemplate,\n\tAvatarTemplate,\n\tt,\n\tstyle,\n\t// sidebarViewMode,\n\tisAnonymous,\n}) {\n\tconst { sidebar } = useLayout();\n\n\tconst href = roomCoordinator.getRouteLink(room.t, room);\n\tconst title = roomCoordinator.getRoomName(room.t, room);\n\n\tconst {\n\t\tlastMessage,\n\t\thideUnreadStatus,\n\t\tunread = 0,\n\t\talert,\n\t\tuserMentions,\n\t\tgroupMentions,\n\t\ttunread = [],\n\t\ttunreadUser = [],\n\t\trid,\n\t\tt: type,\n\t\tcl,\n\t} = room;\n\n\tconst highlighted = !hideUnreadStatus && (alert || unread);\n\tconst icon = (\n\t\t<Sidebar.Item.Icon highlighted={highlighted}>\n\t\t\t<RoomIcon highlighted={highlighted} room={room} placement='sidebar' />\n\t\t</Sidebar.Item.Icon>\n\t);\n\n\tconst isQueued = room.status === 'queued';\n\n\tconst threadUnread = tunread.length > 0;\n\tconst message = extended && getMessage(room, lastMessage, t);\n\n\tconst subtitle = message ? <span className='message-body--unstyled' dangerouslySetInnerHTML={{ __html: message }} /> : null;\n\tconst variant =\n\t\t((userMentions || tunreadUser.length) && 'danger') || (threadUnread && 'primary') || (groupMentions && 'warning') || 'ghost';\n\tconst isUnread = unread > 0 || threadUnread;\n\tconst badges =\n\t\t!hideUnreadStatus && isUnread ? (\n\t\t\t<Badge style={{ flexShrink: 0 }} variant={variant}>\n\t\t\t\t{unread + tunread?.length}\n\t\t\t</Badge>\n\t\t) : null;\n\n\treturn (\n\t\t<SideBarItemTemplate\n\t\t\tis='a'\n\t\t\tid={id}\n\t\t\tdata-qa='sidebar-item'\n\t\t\taria-level='2'\n\t\t\tunread={highlighted}\n\t\t\tthreadUnread={threadUnread}\n\t\t\tselected={selected}\n\t\t\thref={href}\n\t\t\tonClick={() => !selected && sidebar.toggle()}\n\t\t\taria-label={title}\n\t\t\ttitle={title}\n\t\t\ttime={lastMessage?.ts}\n\t\t\tsubtitle={subtitle}\n\t\t\ticon={icon}\n\t\t\tstyle={style}\n\t\t\tbadges={badges}\n\t\t\tavatar={AvatarTemplate && <AvatarTemplate {...room} />}\n\t\t\tmenu={\n\t\t\t\t!isAnonymous &&\n\t\t\t\t!isQueued &&\n\t\t\t\t(() => (\n\t\t\t\t\t<RoomMenu\n\t\t\t\t\t\talert={alert}\n\t\t\t\t\t\tthreadUnread={threadUnread}\n\t\t\t\t\t\trid={rid}\n\t\t\t\t\t\tunread={!!unread}\n\t\t\t\t\t\troomOpen={false}\n\t\t\t\t\t\ttype={type}\n\t\t\t\t\t\tcl={cl}\n\t\t\t\t\t\tname={title}\n\t\t\t\t\t\tstatus={room.status}\n\t\t\t\t\t/>\n\t\t\t\t))\n\t\t\t}\n\t\t/>\n\t);\n}\n\nconst propsAreEqual = (prevProps, nextProps) => {\n\tif (\n\t\t['id', 'style', 'extended', 'selected', 'SideBarItemTemplate', 'AvatarTemplate', 't', 'sidebarViewMode'].some(\n\t\t\t(key) => prevProps[key] !== nextProps[key],\n\t\t)\n\t) {\n\t\treturn false;\n\t}\n\n\tif (prevProps.room === nextProps.room) {\n\t\treturn true;\n\t}\n\n\tif (prevProps.room._id !== nextProps.room._id) {\n\t\treturn false;\n\t}\n\tif (prevProps.room._updatedAt?.toISOString() !== nextProps.room._updatedAt?.toISOString()) {\n\t\treturn false;\n\t}\n\tif (prevProps.room.lastMessage?._updatedAt?.toISOString() !== nextProps.room.lastMessage?._updatedAt?.toISOString()) {\n\t\treturn false;\n\t}\n\tif (prevProps.room.alert !== nextProps.room.alert) {\n\t\treturn false;\n\t}\n\tif (prevProps.room.v?.status !== nextProps.room.v?.status) {\n\t\treturn false;\n\t}\n\tif (prevProps.room.teamMain !== nextProps.room.teamMain) {\n\t\treturn false;\n\t}\n\n\treturn true;\n};\n\nexport default memo(SideBarItemTemplateWithData, propsAreEqual);\n"]},"sourceType":"module","hash":"98e86be8d9f425f694ec898f147837f394e03ddd"}
