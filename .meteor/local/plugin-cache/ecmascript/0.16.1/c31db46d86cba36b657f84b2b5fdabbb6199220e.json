{"metadata":{},"options":{"assumptions":{},"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat/client/sidebar/RoomList/SideBarItemTemplateWithData.js","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","classProperties","classPrivateProperties","jsx","nullishCoalescingOperator","nullishCoalescingOperator","optionalChaining","optionalCatchBinding","optionalCatchBinding","classProperties","classPrivateProperties","classPrivateMethods","classProperties","classPrivateProperties","asyncGenerators","asyncGenerators","objectRestSpread","logicalAssignment"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"allowUndeclaredExports":true,"strictMode":false},"caller":{"name":"meteor","arch":"web.browser.legacy"},"sourceFileName":"client/sidebar/RoomList/SideBarItemTemplateWithData.js","filename":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat/client/sidebar/RoomList/SideBarItemTemplateWithData.js","targets":{"android":"95.0.0","chrome":"95.0.0","edge":"95.0.0","firefox":"78.0.0","ie":"10.0.0","ios":"15.0.0","opera":"81.0.0","safari":"15.1.0","samsung":"14.0.0"},"cloneInputAst":true,"browserslistConfigFile":false,"passPerPreset":false,"envName":"development","cwd":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat","root":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat","rootMode":"root","plugins":[{"key":"base$0","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0","visitor":{"Program":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true},"options":{"avoidModernSyntax":true,"enforceStrictMode":false,"dynamicImport":true}},{"key":"transform-runtime","visitor":{"MemberExpression":{"enter":[null]},"ObjectPattern":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":{},"_verified":{},"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]}},"options":{"version":"7.16.5","helpers":true,"useESModules":false,"corejs":false}},{"key":"proposal-class-properties","visitor":{"PrivateName":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{"loose":true}},{"key":"base$0$3","visitor":{"FunctionExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$4","visitor":{"ForInStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-react-jsx","visitor":{"_exploded":{},"_verified":{},"JSXNamespacedName":{"enter":[null]},"JSXSpreadChild":{"enter":[null]},"Program":{"enter":[null]},"JSXElement":{"exit":[null]},"JSXFragment":{"exit":[null]},"JSXAttribute":{"enter":[null]}},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","runtime":"classic","throwIfNamespace":true,"useBuiltIns":false}},{"key":"transform-react-display-name","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-react-pure-annotations","visitor":{"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"syntax-nullish-coalescing-operator","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-nullish-coalescing-operator","visitor":{"_exploded":{},"_verified":{},"LogicalExpression":{"enter":[null]}},"options":{}},{"key":"syntax-optional-chaining","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-optional-chaining","visitor":{"_exploded":true,"OptionalCallExpression":{"enter":[null]},"OptionalMemberExpression":{"enter":[null]},"_verified":true},"options":{}},{"key":"syntax-optional-catch-binding","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-optional-catch-binding","visitor":{"_exploded":{},"_verified":{},"CatchClause":{"enter":[null]}},"options":{}},{"key":"syntax-class-properties","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-class-properties","visitor":{"PrivateName":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{}},{"key":"syntax-async-generators","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-async-generator-functions","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]}},"options":{}},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-object-rest-spread","visitor":{"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"proposal-logical-assignment-operators","visitor":{"_exploded":{},"_verified":{},"AssignmentExpression":{"enter":[null]}},"options":{}},{"key":"transform-arrow-functions","visitor":{"ArrowFunctionExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-block-scoped-functions","visitor":{"BlockStatement":{"enter":[null]},"SwitchCase":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-block-scoping","visitor":{"VariableDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"_exploded":true,"BlockStatement":{"enter":[null]},"SwitchStatement":{"enter":[null]},"Program":{"enter":[null]},"_verified":true,"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"transform-classes","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-computed-properties","visitor":{"ObjectExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-destructuring","visitor":{"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"VariableDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"transform-for-of","visitor":{"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-literals","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-object-super","visitor":{"ObjectExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-parameters","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{}},{"key":"transform-shorthand-properties","visitor":{"ObjectMethod":{"enter":[null]},"ObjectProperty":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-spread","visitor":{"ArrayExpression":{"enter":[null]},"CallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-sticky-regex","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-template-literals","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-typeof-symbol","visitor":{"UnaryExpression":{"enter":[null]},"_exploded":true,"_verified":true,"BlockStatement":{"enter":[null]},"CatchClause":{"enter":[null]},"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"Program":{"enter":[null]},"ObjectMethod":{"enter":[null]},"SwitchStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ForOfStatement":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"StaticBlock":{"enter":[null]},"TSModuleBlock":{"enter":[null]},"AssignmentPattern":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectPattern":{"enter":[null]}},"options":{}},{"key":"transform-unicode-regex","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-property-literals","visitor":{"ObjectProperty":{"exit":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-exponentiation-operator","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"regenerator-transform","visitor":{"_exploded":true,"_verified":true,"ObjectMethod":{"enter":[null],"exit":[null]},"ClassMethod":{"enter":[null],"exit":[null]},"ClassPrivateMethod":{"enter":[null],"exit":[null]},"FunctionDeclaration":{"exit":[null]},"FunctionExpression":{"exit":[null]},"ArrowFunctionExpression":{"exit":[null]}},"options":{}}],"presets":[],"generatorOpts":{"filename":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat/client/sidebar/RoomList/SideBarItemTemplateWithData.js","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"client/sidebar/RoomList/SideBarItemTemplateWithData.js"}},"code":"var Badge, Sidebar;\nmodule.link(\"@rocket.chat/fuselage\", {\n  Badge: function (v) {\n    Badge = v;\n  },\n  Sidebar: function (v) {\n    Sidebar = v;\n  }\n}, 0);\nvar React, memo;\nmodule.link(\"react\", {\n  \"default\": function (v) {\n    React = v;\n  },\n  memo: function (v) {\n    memo = v;\n  }\n}, 1);\nvar RoomIcon;\nmodule.link(\"../../components/RoomIcon\", {\n  RoomIcon: function (v) {\n    RoomIcon = v;\n  }\n}, 2);\nvar useLayout;\nmodule.link(\"../../contexts/LayoutContext\", {\n  useLayout: function (v) {\n    useLayout = v;\n  }\n}, 3);\nvar roomCoordinator;\nmodule.link(\"../../lib/rooms/roomCoordinator\", {\n  roomCoordinator: function (v) {\n    roomCoordinator = v;\n  }\n}, 4);\nvar RoomMenu;\nmodule.link(\"../RoomMenu\", {\n  \"default\": function (v) {\n    RoomMenu = v;\n  }\n}, 5);\nvar normalizeSidebarMessage;\nmodule.link(\"./normalizeSidebarMessage\", {\n  normalizeSidebarMessage: function (v) {\n    normalizeSidebarMessage = v;\n  }\n}, 6);\n\nvar getMessage = function (room, lastMessage, t) {\n  var _lastMessage$u, _room$u;\n\n  if (!lastMessage) {\n    return t('No_messages_yet');\n  }\n\n  if (!lastMessage.u) {\n    return normalizeSidebarMessage(lastMessage, t);\n  }\n\n  if (((_lastMessage$u = lastMessage.u) === null || _lastMessage$u === void 0 ? void 0 : _lastMessage$u.username) === ((_room$u = room.u) === null || _room$u === void 0 ? void 0 : _room$u.username)) {\n    return t('You') + \": \" + normalizeSidebarMessage(lastMessage, t);\n  }\n\n  if (room.t === 'd' && room.uids && room.uids.length <= 2) {\n    return normalizeSidebarMessage(lastMessage, t);\n  }\n\n  return (lastMessage.u.name || lastMessage.u.username) + \": \" + normalizeSidebarMessage(lastMessage, t);\n};\n\nfunction SideBarItemTemplateWithData(_ref) {\n  var room = _ref.room,\n      id = _ref.id,\n      extended = _ref.extended,\n      selected = _ref.selected,\n      SideBarItemTemplate = _ref.SideBarItemTemplate,\n      AvatarTemplate = _ref.AvatarTemplate,\n      t = _ref.t,\n      style = _ref.style,\n      isAnonymous = _ref.isAnonymous;\n\n  var _useLayout = useLayout(),\n      sidebar = _useLayout.sidebar;\n\n  var href = roomCoordinator.getRouteLink(room.t, room);\n  var title = roomCoordinator.getRoomName(room.t, room);\n  var lastMessage = room.lastMessage,\n      hideUnreadStatus = room.hideUnreadStatus,\n      _room$unread = room.unread,\n      unread = _room$unread === void 0 ? 0 : _room$unread,\n      alert = room.alert,\n      userMentions = room.userMentions,\n      groupMentions = room.groupMentions,\n      _room$tunread = room.tunread,\n      tunread = _room$tunread === void 0 ? [] : _room$tunread,\n      _room$tunreadUser = room.tunreadUser,\n      tunreadUser = _room$tunreadUser === void 0 ? [] : _room$tunreadUser,\n      rid = room.rid,\n      type = room.t,\n      cl = room.cl;\n  var highlighted = !hideUnreadStatus && (alert || unread);\n  var icon = /*#__PURE__*/React.createElement(Sidebar.Item.Icon, {\n    highlighted: highlighted\n  }, /*#__PURE__*/React.createElement(RoomIcon, {\n    highlighted: highlighted,\n    room: room,\n    placement: \"sidebar\"\n  }));\n  var isQueued = room.status === 'queued';\n  var threadUnread = tunread.length > 0;\n  var message = extended && getMessage(room, lastMessage, t);\n  var subtitle = message ? /*#__PURE__*/React.createElement(\"span\", {\n    className: \"message-body--unstyled\",\n    dangerouslySetInnerHTML: {\n      __html: message\n    }\n  }) : null;\n  var variant = (userMentions || tunreadUser.length) && 'danger' || threadUnread && 'primary' || groupMentions && 'warning' || 'ghost';\n  var isUnread = unread > 0 || threadUnread;\n  var badges = !hideUnreadStatus && isUnread ? /*#__PURE__*/React.createElement(Badge, {\n    style: {\n      flexShrink: 0\n    },\n    variant: variant\n  }, unread + (tunread === null || tunread === void 0 ? void 0 : tunread.length)) : null;\n  return /*#__PURE__*/React.createElement(SideBarItemTemplate, {\n    is: \"a\",\n    id: id,\n    \"data-qa\": \"sidebar-item\",\n    \"aria-level\": \"2\",\n    unread: highlighted,\n    threadUnread: threadUnread,\n    selected: selected,\n    href: href,\n    onClick: function () {\n      return !selected && sidebar.toggle();\n    },\n    \"aria-label\": title,\n    title: title,\n    time: lastMessage === null || lastMessage === void 0 ? void 0 : lastMessage.ts,\n    subtitle: subtitle,\n    icon: icon,\n    style: style,\n    badges: badges,\n    avatar: AvatarTemplate && /*#__PURE__*/React.createElement(AvatarTemplate, room),\n    menu: !isAnonymous && !isQueued && function () {\n      return /*#__PURE__*/React.createElement(RoomMenu, {\n        alert: alert,\n        threadUnread: threadUnread,\n        rid: rid,\n        unread: !!unread,\n        roomOpen: false,\n        type: type,\n        cl: cl,\n        name: title,\n        status: room.status\n      });\n    }\n  });\n}\n\nvar propsAreEqual = function (prevProps, nextProps) {\n  var _prevProps$room$_upda, _nextProps$room$_upda, _prevProps$room$lastM, _prevProps$room$lastM2, _nextProps$room$lastM, _nextProps$room$lastM2, _prevProps$room$v, _nextProps$room$v;\n\n  if (['id', 'style', 'extended', 'selected', 'SideBarItemTemplate', 'AvatarTemplate', 't', 'sidebarViewMode'].some(function (key) {\n    return prevProps[key] !== nextProps[key];\n  })) {\n    return false;\n  }\n\n  if (prevProps.room === nextProps.room) {\n    return true;\n  }\n\n  if (prevProps.room._id !== nextProps.room._id) {\n    return false;\n  }\n\n  if (((_prevProps$room$_upda = prevProps.room._updatedAt) === null || _prevProps$room$_upda === void 0 ? void 0 : _prevProps$room$_upda.toISOString()) !== ((_nextProps$room$_upda = nextProps.room._updatedAt) === null || _nextProps$room$_upda === void 0 ? void 0 : _nextProps$room$_upda.toISOString())) {\n    return false;\n  }\n\n  if (((_prevProps$room$lastM = prevProps.room.lastMessage) === null || _prevProps$room$lastM === void 0 ? void 0 : (_prevProps$room$lastM2 = _prevProps$room$lastM._updatedAt) === null || _prevProps$room$lastM2 === void 0 ? void 0 : _prevProps$room$lastM2.toISOString()) !== ((_nextProps$room$lastM = nextProps.room.lastMessage) === null || _nextProps$room$lastM === void 0 ? void 0 : (_nextProps$room$lastM2 = _nextProps$room$lastM._updatedAt) === null || _nextProps$room$lastM2 === void 0 ? void 0 : _nextProps$room$lastM2.toISOString())) {\n    return false;\n  }\n\n  if (prevProps.room.alert !== nextProps.room.alert) {\n    return false;\n  }\n\n  if (((_prevProps$room$v = prevProps.room.v) === null || _prevProps$room$v === void 0 ? void 0 : _prevProps$room$v.status) !== ((_nextProps$room$v = nextProps.room.v) === null || _nextProps$room$v === void 0 ? void 0 : _nextProps$room$v.status)) {\n    return false;\n  }\n\n  if (prevProps.room.teamMain !== nextProps.room.teamMain) {\n    return false;\n  }\n\n  return true;\n};\n\nmodule.exportDefault( /*#__PURE__*/memo(SideBarItemTemplateWithData, propsAreEqual));","map":{"version":3,"sources":["client/sidebar/RoomList/SideBarItemTemplateWithData.js"],"names":["Badge","Sidebar","module","link","v","React","memo","RoomIcon","useLayout","roomCoordinator","RoomMenu","normalizeSidebarMessage","getMessage","room","lastMessage","t","u","username","uids","length","name","SideBarItemTemplateWithData","id","extended","selected","SideBarItemTemplate","AvatarTemplate","style","isAnonymous","sidebar","href","getRouteLink","title","getRoomName","hideUnreadStatus","unread","alert","userMentions","groupMentions","tunread","tunreadUser","rid","type","cl","highlighted","icon","isQueued","status","threadUnread","message","subtitle","__html","variant","isUnread","badges","flexShrink","toggle","ts","propsAreEqual","prevProps","nextProps","some","key","_id","_updatedAt","toISOString","teamMain","exportDefault"],"mappings":"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","sourcesContent":["import { Badge, Sidebar } from '@rocket.chat/fuselage';\nimport React, { memo } from 'react';\n\nimport { RoomIcon } from '../../components/RoomIcon';\nimport { useLayout } from '../../contexts/LayoutContext';\nimport { roomCoordinator } from '../../lib/rooms/roomCoordinator';\nimport RoomMenu from '../RoomMenu';\nimport { normalizeSidebarMessage } from './normalizeSidebarMessage';\n\nconst getMessage = (room, lastMessage, t) => {\n\tif (!lastMessage) {\n\t\treturn t('No_messages_yet');\n\t}\n\tif (!lastMessage.u) {\n\t\treturn normalizeSidebarMessage(lastMessage, t);\n\t}\n\tif (lastMessage.u?.username === room.u?.username) {\n\t\treturn `${t('You')}: ${normalizeSidebarMessage(lastMessage, t)}`;\n\t}\n\tif (room.t === 'd' && room.uids && room.uids.length <= 2) {\n\t\treturn normalizeSidebarMessage(lastMessage, t);\n\t}\n\treturn `${lastMessage.u.name || lastMessage.u.username}: ${normalizeSidebarMessage(lastMessage, t)}`;\n};\n\nfunction SideBarItemTemplateWithData({\n\troom,\n\tid,\n\textended,\n\tselected,\n\tSideBarItemTemplate,\n\tAvatarTemplate,\n\tt,\n\tstyle,\n\t// sidebarViewMode,\n\tisAnonymous,\n}) {\n\tconst { sidebar } = useLayout();\n\n\tconst href = roomCoordinator.getRouteLink(room.t, room);\n\tconst title = roomCoordinator.getRoomName(room.t, room);\n\n\tconst {\n\t\tlastMessage,\n\t\thideUnreadStatus,\n\t\tunread = 0,\n\t\talert,\n\t\tuserMentions,\n\t\tgroupMentions,\n\t\ttunread = [],\n\t\ttunreadUser = [],\n\t\trid,\n\t\tt: type,\n\t\tcl,\n\t} = room;\n\n\tconst highlighted = !hideUnreadStatus && (alert || unread);\n\tconst icon = (\n\t\t<Sidebar.Item.Icon highlighted={highlighted}>\n\t\t\t<RoomIcon highlighted={highlighted} room={room} placement='sidebar' />\n\t\t</Sidebar.Item.Icon>\n\t);\n\n\tconst isQueued = room.status === 'queued';\n\n\tconst threadUnread = tunread.length > 0;\n\tconst message = extended && getMessage(room, lastMessage, t);\n\n\tconst subtitle = message ? <span className='message-body--unstyled' dangerouslySetInnerHTML={{ __html: message }} /> : null;\n\tconst variant =\n\t\t((userMentions || tunreadUser.length) && 'danger') || (threadUnread && 'primary') || (groupMentions && 'warning') || 'ghost';\n\tconst isUnread = unread > 0 || threadUnread;\n\tconst badges =\n\t\t!hideUnreadStatus && isUnread ? (\n\t\t\t<Badge style={{ flexShrink: 0 }} variant={variant}>\n\t\t\t\t{unread + tunread?.length}\n\t\t\t</Badge>\n\t\t) : null;\n\n\treturn (\n\t\t<SideBarItemTemplate\n\t\t\tis='a'\n\t\t\tid={id}\n\t\t\tdata-qa='sidebar-item'\n\t\t\taria-level='2'\n\t\t\tunread={highlighted}\n\t\t\tthreadUnread={threadUnread}\n\t\t\tselected={selected}\n\t\t\thref={href}\n\t\t\tonClick={() => !selected && sidebar.toggle()}\n\t\t\taria-label={title}\n\t\t\ttitle={title}\n\t\t\ttime={lastMessage?.ts}\n\t\t\tsubtitle={subtitle}\n\t\t\ticon={icon}\n\t\t\tstyle={style}\n\t\t\tbadges={badges}\n\t\t\tavatar={AvatarTemplate && <AvatarTemplate {...room} />}\n\t\t\tmenu={\n\t\t\t\t!isAnonymous &&\n\t\t\t\t!isQueued &&\n\t\t\t\t(() => (\n\t\t\t\t\t<RoomMenu\n\t\t\t\t\t\talert={alert}\n\t\t\t\t\t\tthreadUnread={threadUnread}\n\t\t\t\t\t\trid={rid}\n\t\t\t\t\t\tunread={!!unread}\n\t\t\t\t\t\troomOpen={false}\n\t\t\t\t\t\ttype={type}\n\t\t\t\t\t\tcl={cl}\n\t\t\t\t\t\tname={title}\n\t\t\t\t\t\tstatus={room.status}\n\t\t\t\t\t/>\n\t\t\t\t))\n\t\t\t}\n\t\t/>\n\t);\n}\n\nconst propsAreEqual = (prevProps, nextProps) => {\n\tif (\n\t\t['id', 'style', 'extended', 'selected', 'SideBarItemTemplate', 'AvatarTemplate', 't', 'sidebarViewMode'].some(\n\t\t\t(key) => prevProps[key] !== nextProps[key],\n\t\t)\n\t) {\n\t\treturn false;\n\t}\n\n\tif (prevProps.room === nextProps.room) {\n\t\treturn true;\n\t}\n\n\tif (prevProps.room._id !== nextProps.room._id) {\n\t\treturn false;\n\t}\n\tif (prevProps.room._updatedAt?.toISOString() !== nextProps.room._updatedAt?.toISOString()) {\n\t\treturn false;\n\t}\n\tif (prevProps.room.lastMessage?._updatedAt?.toISOString() !== nextProps.room.lastMessage?._updatedAt?.toISOString()) {\n\t\treturn false;\n\t}\n\tif (prevProps.room.alert !== nextProps.room.alert) {\n\t\treturn false;\n\t}\n\tif (prevProps.room.v?.status !== nextProps.room.v?.status) {\n\t\treturn false;\n\t}\n\tif (prevProps.room.teamMain !== nextProps.room.teamMain) {\n\t\treturn false;\n\t}\n\n\treturn true;\n};\n\nexport default memo(SideBarItemTemplateWithData, propsAreEqual);\n"]},"sourceType":"module","hash":"c31db46d86cba36b657f84b2b5fdabbb6199220e"}
