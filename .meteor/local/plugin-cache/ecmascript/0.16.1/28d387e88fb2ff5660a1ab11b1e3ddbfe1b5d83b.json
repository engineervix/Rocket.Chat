{"metadata":{},"options":{"assumptions":{},"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat/app/ui-utils/client/lib/menu.js","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","classProperties","classPrivateProperties","jsx","nullishCoalescingOperator","nullishCoalescingOperator","optionalChaining","optionalCatchBinding","optionalCatchBinding","classProperties","classPrivateProperties","classPrivateMethods","classProperties","classPrivateProperties","asyncGenerators","asyncGenerators","objectRestSpread","logicalAssignment"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"allowUndeclaredExports":true,"strictMode":false},"caller":{"name":"meteor","arch":"web.browser.legacy"},"sourceFileName":"app/ui-utils/client/lib/menu.js","filename":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat/app/ui-utils/client/lib/menu.js","targets":{"android":"95.0.0","chrome":"95.0.0","edge":"95.0.0","firefox":"78.0.0","ie":"10.0.0","ios":"15.0.0","opera":"81.0.0","safari":"15.1.0","samsung":"14.0.0"},"cloneInputAst":true,"browserslistConfigFile":false,"passPerPreset":false,"envName":"development","cwd":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat","root":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat","rootMode":"root","plugins":[{"key":"base$0","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0","visitor":{"Program":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true},"options":{"avoidModernSyntax":true,"enforceStrictMode":false,"dynamicImport":true}},{"key":"transform-runtime","visitor":{"MemberExpression":{"enter":[null]},"ObjectPattern":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":{},"_verified":{},"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]}},"options":{"version":"7.16.5","helpers":true,"useESModules":false,"corejs":false}},{"key":"proposal-class-properties","visitor":{"PrivateName":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{"loose":true}},{"key":"base$0$3","visitor":{"FunctionExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$4","visitor":{"ForInStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-react-jsx","visitor":{"_exploded":{},"_verified":{},"JSXNamespacedName":{"enter":[null]},"JSXSpreadChild":{"enter":[null]},"Program":{"enter":[null]},"JSXElement":{"exit":[null]},"JSXFragment":{"exit":[null]},"JSXAttribute":{"enter":[null]}},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","runtime":"classic","throwIfNamespace":true,"useBuiltIns":false}},{"key":"transform-react-display-name","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-react-pure-annotations","visitor":{"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"syntax-nullish-coalescing-operator","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-nullish-coalescing-operator","visitor":{"_exploded":{},"_verified":{},"LogicalExpression":{"enter":[null]}},"options":{}},{"key":"syntax-optional-chaining","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-optional-chaining","visitor":{"_exploded":true,"OptionalCallExpression":{"enter":[null]},"OptionalMemberExpression":{"enter":[null]},"_verified":true},"options":{}},{"key":"syntax-optional-catch-binding","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-optional-catch-binding","visitor":{"_exploded":{},"_verified":{},"CatchClause":{"enter":[null]}},"options":{}},{"key":"syntax-class-properties","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-class-properties","visitor":{"PrivateName":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{}},{"key":"syntax-async-generators","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-async-generator-functions","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]}},"options":{}},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-object-rest-spread","visitor":{"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"proposal-logical-assignment-operators","visitor":{"_exploded":{},"_verified":{},"AssignmentExpression":{"enter":[null]}},"options":{}},{"key":"transform-arrow-functions","visitor":{"ArrowFunctionExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-block-scoped-functions","visitor":{"BlockStatement":{"enter":[null]},"SwitchCase":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-block-scoping","visitor":{"VariableDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"_exploded":true,"BlockStatement":{"enter":[null]},"SwitchStatement":{"enter":[null]},"Program":{"enter":[null]},"_verified":true,"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"transform-classes","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-computed-properties","visitor":{"ObjectExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-destructuring","visitor":{"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"VariableDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"transform-for-of","visitor":{"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-literals","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-object-super","visitor":{"ObjectExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-parameters","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{}},{"key":"transform-shorthand-properties","visitor":{"ObjectMethod":{"enter":[null]},"ObjectProperty":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-spread","visitor":{"ArrayExpression":{"enter":[null]},"CallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-sticky-regex","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-template-literals","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-typeof-symbol","visitor":{"UnaryExpression":{"enter":[null]},"_exploded":true,"_verified":true,"BlockStatement":{"enter":[null]},"CatchClause":{"enter":[null]},"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"Program":{"enter":[null]},"ObjectMethod":{"enter":[null]},"SwitchStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ForOfStatement":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"StaticBlock":{"enter":[null]},"TSModuleBlock":{"enter":[null]},"AssignmentPattern":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectPattern":{"enter":[null]}},"options":{}},{"key":"transform-unicode-regex","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-property-literals","visitor":{"ObjectProperty":{"exit":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-exponentiation-operator","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"regenerator-transform","visitor":{"_exploded":true,"_verified":true,"ObjectMethod":{"enter":[null],"exit":[null]},"ClassMethod":{"enter":[null],"exit":[null]},"ClassPrivateMethod":{"enter":[null],"exit":[null]},"FunctionDeclaration":{"exit":[null]},"FunctionExpression":{"exit":[null]},"ArrowFunctionExpression":{"exit":[null]}},"options":{}}],"presets":[],"generatorOpts":{"filename":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat/app/ui-utils/client/lib/menu.js","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"app/ui-utils/client/lib/menu.js"}},"code":"var _createClass;\n\nmodule.link(\"@babel/runtime/helpers/createClass\", {\n  default: function (v) {\n    _createClass = v;\n  }\n}, 0);\n\nvar _inheritsLoose;\n\nmodule.link(\"@babel/runtime/helpers/inheritsLoose\", {\n  default: function (v) {\n    _inheritsLoose = v;\n  }\n}, 1);\nmodule.export({\n  menu: function () {\n    return menu;\n  }\n});\nvar Session;\nmodule.link(\"meteor/session\", {\n  Session: function (v) {\n    Session = v;\n  }\n}, 0);\nvar Meteor;\nmodule.link(\"meteor/meteor\", {\n  Meteor: function (v) {\n    Meteor = v;\n  }\n}, 1);\nvar Emitter;\nmodule.link(\"@rocket.chat/emitter\", {\n  Emitter: function (v) {\n    Emitter = v;\n  }\n}, 2);\nvar isRtl;\nmodule.link(\"../../../utils\", {\n  isRtl: function (v) {\n    isRtl = v;\n  }\n}, 3);\nvar sideNavW = 280;\n\nvar map = function (x, in_min, in_max, out_min, out_max) {\n  return (x - in_min) * (out_max - out_min) / (in_max - in_min) + out_min;\n};\n\nvar menu = new ( /*#__PURE__*/function (_Emitter) {\n  _inheritsLoose(_class, _Emitter);\n\n  function _class() {\n    var _this;\n\n    _this = _Emitter.call(this) || this;\n    _this._open = false;\n    _this.sideNavW = sideNavW;\n    return _this;\n  }\n\n  var _proto = _class.prototype;\n\n  _proto.translate = function () {\n    function translate(diff) {\n      var width = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : sideNavW;\n\n      if (diff === undefined) {\n        diff = this.isRtl ? -1 * sideNavW : sideNavW;\n      }\n\n      this.sidebarWrap.css('width', '100%');\n      this.wrapper.css('overflow', 'hidden');\n      this.sidebarWrap.css('background-color', '#000');\n      this.sidebarWrap.css('opacity', map(Math.abs(diff) / width, 0, 1, -0.1, 0.8).toFixed(2));\n      this.isRtl ? this.sidebar.css('transform', \"translate3d(\" + (sideNavW + diff).toFixed(3) + \"px, 0 , 0)\") : this.sidebar.css('transform', \"translate3d(\" + (diff - sideNavW).toFixed(3) + \"px, 0 , 0)\");\n    }\n\n    return translate;\n  }();\n\n  _proto.init = function () {\n    function init() {\n      var _this2 = this;\n\n      this.menu = $('.sidebar');\n      this.sidebar = this.menu;\n      this.sidebarWrap = $('.sidebar-wrap');\n      this.wrapper = $('.messages-box > .wrapper');\n\n      var ignore = function (fn) {\n        return function (event) {\n          return document.body.clientWidth <= 780 && fn(event);\n        };\n      };\n\n      this.sidebarWrap.on('click', ignore(function (e) {\n        e.target === _this2.sidebarWrap[0] && _this2.isOpen() && _this2.emit('clickOut', e);\n      }));\n      this.on('close', function () {\n        _this2.sidebarWrap.css('width', ''); // this.sidebarWrap.css('z-index', '');\n\n\n        _this2.sidebarWrap.css('background-color', '');\n\n        _this2.sidebar.css('transform', '');\n\n        _this2.sidebar.css('box-shadow', '');\n\n        _this2.sidebar.css('transition', '');\n\n        _this2.sidebarWrap.css('transition', '');\n\n        _this2.wrapper && _this2.wrapper.css('overflow', '');\n      });\n      this.on('open', ignore(function () {\n        _this2.sidebar.css('box-shadow', '0 0 15px 1px rgba(0,0,0,.3)'); // this.sidebarWrap.css('z-index', '9998');\n\n\n        _this2.translate();\n      }));\n      this.mainContent = $('.main-content');\n      this.list = $('.rooms-list');\n      this._open = false;\n      Session.set('isMenuOpen', this._open);\n    }\n\n    return init;\n  }();\n\n  _proto.closePopover = function () {\n    function closePopover() {\n      return this.menu.find('[data-popover=\"anchor\"]:checked').prop('checked', false).length > 0;\n    }\n\n    return closePopover;\n  }();\n\n  _proto.isOpen = function () {\n    function isOpen() {\n      return Session.get('isMenuOpen');\n    }\n\n    return isOpen;\n  }();\n\n  _proto.open = function () {\n    function open() {\n      this._open = true;\n      Session.set('isMenuOpen', this._open);\n      this.emit('change');\n      this.emit('open');\n    }\n\n    return open;\n  }();\n\n  _proto.close = function () {\n    function close() {\n      this._open = false;\n      Session.set('isMenuOpen', this._open);\n      this.emit('change');\n      this.emit('close');\n    }\n\n    return close;\n  }();\n\n  _proto.toggle = function () {\n    function toggle() {\n      return this.isOpen() ? this.close() : this.open();\n    }\n\n    return toggle;\n  }();\n\n  _createClass(_class, [{\n    key: \"isRtl\",\n    get: function () {\n      return isRtl(Meteor._localStorage.getItem('userLanguage'));\n    }\n  }]);\n\n  return _class;\n}(Emitter))();\nvar passClosePopover = false;\nmenu.on('clickOut', function () {\n  if (!menu.closePopover()) {\n    passClosePopover = true;\n    menu.close();\n  }\n});\nmenu.on('close', function () {\n  if (!menu.sidebar) {\n    return;\n  }\n\n  menu.sidebar.css('transition', '');\n  menu.sidebarWrap.css('transition', '');\n\n  if (passClosePopover) {\n    passClosePopover = false;\n    return;\n  }\n\n  menu.closePopover();\n});","map":{"version":3,"sources":["app/ui-utils/client/lib/menu.js"],"names":["_createClass","module","link","default","v","_inheritsLoose","export","menu","Session","Meteor","Emitter","isRtl","sideNavW","map","x","in_min","in_max","out_min","out_max","_open","translate","diff","width","undefined","sidebarWrap","css","wrapper","Math","abs","toFixed","sidebar","init","$","ignore","fn","event","document","body","clientWidth","on","e","target","isOpen","emit","mainContent","list","set","closePopover","find","prop","length","get","open","close","toggle","_localStorage","getItem","passClosePopover"],"mappings":"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","sourcesContent":["import { Session } from 'meteor/session';\nimport { Meteor } from 'meteor/meteor';\nimport { Emitter } from '@rocket.chat/emitter';\n\nimport { isRtl } from '../../../utils';\n\nconst sideNavW = 280;\nconst map = (x, in_min, in_max, out_min, out_max) => ((x - in_min) * (out_max - out_min)) / (in_max - in_min) + out_min;\n\nexport const menu = new (class extends Emitter {\n\tconstructor() {\n\t\tsuper();\n\t\tthis._open = false;\n\n\t\tthis.sideNavW = sideNavW;\n\t}\n\n\tget isRtl() {\n\t\treturn isRtl(Meteor._localStorage.getItem('userLanguage'));\n\t}\n\n\ttranslate(diff, width = sideNavW) {\n\t\tif (diff === undefined) {\n\t\t\tdiff = this.isRtl ? -1 * sideNavW : sideNavW;\n\t\t}\n\t\tthis.sidebarWrap.css('width', '100%');\n\t\tthis.wrapper.css('overflow', 'hidden');\n\t\tthis.sidebarWrap.css('background-color', '#000');\n\t\tthis.sidebarWrap.css('opacity', map(Math.abs(diff) / width, 0, 1, -0.1, 0.8).toFixed(2));\n\t\tthis.isRtl\n\t\t\t? this.sidebar.css('transform', `translate3d(${(sideNavW + diff).toFixed(3)}px, 0 , 0)`)\n\t\t\t: this.sidebar.css('transform', `translate3d(${(diff - sideNavW).toFixed(3)}px, 0 , 0)`);\n\t}\n\n\tinit() {\n\t\tthis.menu = $('.sidebar');\n\t\tthis.sidebar = this.menu;\n\t\tthis.sidebarWrap = $('.sidebar-wrap');\n\t\tthis.wrapper = $('.messages-box > .wrapper');\n\t\tconst ignore = (fn) => (event) => document.body.clientWidth <= 780 && fn(event);\n\n\t\tthis.sidebarWrap.on(\n\t\t\t'click',\n\t\t\tignore((e) => {\n\t\t\t\te.target === this.sidebarWrap[0] && this.isOpen() && this.emit('clickOut', e);\n\t\t\t}),\n\t\t);\n\t\tthis.on('close', () => {\n\t\t\tthis.sidebarWrap.css('width', '');\n\t\t\t// this.sidebarWrap.css('z-index', '');\n\t\t\tthis.sidebarWrap.css('background-color', '');\n\t\t\tthis.sidebar.css('transform', '');\n\t\t\tthis.sidebar.css('box-shadow', '');\n\t\t\tthis.sidebar.css('transition', '');\n\t\t\tthis.sidebarWrap.css('transition', '');\n\t\t\tthis.wrapper && this.wrapper.css('overflow', '');\n\t\t});\n\t\tthis.on(\n\t\t\t'open',\n\t\t\tignore(() => {\n\t\t\t\tthis.sidebar.css('box-shadow', '0 0 15px 1px rgba(0,0,0,.3)');\n\t\t\t\t// this.sidebarWrap.css('z-index', '9998');\n\t\t\t\tthis.translate();\n\t\t\t}),\n\t\t);\n\t\tthis.mainContent = $('.main-content');\n\n\t\tthis.list = $('.rooms-list');\n\t\tthis._open = false;\n\t\tSession.set('isMenuOpen', this._open);\n\t}\n\n\tclosePopover() {\n\t\treturn this.menu.find('[data-popover=\"anchor\"]:checked').prop('checked', false).length > 0;\n\t}\n\n\tisOpen() {\n\t\treturn Session.get('isMenuOpen');\n\t}\n\n\topen() {\n\t\tthis._open = true;\n\t\tSession.set('isMenuOpen', this._open);\n\t\tthis.emit('change');\n\t\tthis.emit('open');\n\t}\n\n\tclose() {\n\t\tthis._open = false;\n\t\tSession.set('isMenuOpen', this._open);\n\t\tthis.emit('change');\n\t\tthis.emit('close');\n\t}\n\n\ttoggle() {\n\t\treturn this.isOpen() ? this.close() : this.open();\n\t}\n})();\n\nlet passClosePopover = false;\n\nmenu.on('clickOut', function () {\n\tif (!menu.closePopover()) {\n\t\tpassClosePopover = true;\n\t\tmenu.close();\n\t}\n});\n\nmenu.on('close', function () {\n\tif (!menu.sidebar) {\n\t\treturn;\n\t}\n\n\tmenu.sidebar.css('transition', '');\n\tmenu.sidebarWrap.css('transition', '');\n\tif (passClosePopover) {\n\t\tpassClosePopover = false;\n\t\treturn;\n\t}\n\tmenu.closePopover();\n});\n"]},"sourceType":"module","hash":"28d387e88fb2ff5660a1ab11b1e3ddbfe1b5d83b"}
