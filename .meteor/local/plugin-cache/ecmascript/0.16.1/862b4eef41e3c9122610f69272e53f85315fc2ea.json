{"metadata":{},"options":{"assumptions":{},"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat/app/emoji-emojione/lib/rocketchat.js","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","classProperties","classPrivateProperties","jsx","nullishCoalescingOperator","nullishCoalescingOperator","optionalChaining","optionalCatchBinding","optionalCatchBinding","classProperties","classPrivateProperties","classPrivateMethods","classProperties","classPrivateProperties","asyncGenerators","asyncGenerators","objectRestSpread","logicalAssignment"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"allowUndeclaredExports":true,"strictMode":false},"caller":{"name":"meteor","arch":"web.browser"},"sourceFileName":"app/emoji-emojione/lib/rocketchat.js","filename":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat/app/emoji-emojione/lib/rocketchat.js","targets":{"android":"95.0.0","chrome":"95.0.0","edge":"95.0.0","firefox":"78.0.0","ie":"10.0.0","ios":"15.0.0","opera":"81.0.0","safari":"15.1.0","samsung":"14.0.0"},"cloneInputAst":true,"browserslistConfigFile":false,"passPerPreset":false,"envName":"development","cwd":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat","root":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat","rootMode":"root","plugins":[{"key":"base$0","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0","visitor":{"Program":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true},"options":{"avoidModernSyntax":false,"enforceStrictMode":false,"dynamicImport":true,"generateLetDeclarations":true}},{"key":"transform-runtime","visitor":{"MemberExpression":{"enter":[null]},"ObjectPattern":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":{},"_verified":{},"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]}},"options":{"version":"7.16.5","helpers":true,"useESModules":false,"corejs":false}},{"key":"proposal-class-properties","visitor":{"PrivateName":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{"loose":true}},{"key":"transform-react-jsx","visitor":{"_exploded":{},"_verified":{},"JSXNamespacedName":{"enter":[null]},"JSXSpreadChild":{"enter":[null]},"Program":{"enter":[null]},"JSXElement":{"exit":[null]},"JSXFragment":{"exit":[null]},"JSXAttribute":{"enter":[null]}},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","runtime":"classic","throwIfNamespace":true,"useBuiltIns":false}},{"key":"transform-react-display-name","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-react-pure-annotations","visitor":{"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"syntax-nullish-coalescing-operator","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-nullish-coalescing-operator","visitor":{"_exploded":{},"_verified":{},"LogicalExpression":{"enter":[null]}},"options":{}},{"key":"syntax-optional-chaining","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-optional-chaining","visitor":{"_exploded":true,"OptionalCallExpression":{"enter":[null]},"OptionalMemberExpression":{"enter":[null]},"_verified":true},"options":{}},{"key":"syntax-optional-catch-binding","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-optional-catch-binding","visitor":{"_exploded":{},"_verified":{},"CatchClause":{"enter":[null]}},"options":{}},{"key":"syntax-class-properties","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-class-properties","visitor":{"PrivateName":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{}},{"key":"syntax-async-generators","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-async-generator-functions","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]}},"options":{}},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-object-rest-spread","visitor":{"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"proposal-logical-assignment-operators","visitor":{"_exploded":{},"_verified":{},"AssignmentExpression":{"enter":[null]}},"options":{}},{"key":"transform-literals","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-template-literals","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-parameters","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{}},{"key":"transform-exponentiation-operator","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}}],"presets":[],"generatorOpts":{"filename":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat/app/emoji-emojione/lib/rocketchat.js","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"app/emoji-emojione/lib/rocketchat.js"}},"code":"let emojione;\nmodule.link(\"emojione\", {\n  default(v) {\n    emojione = v;\n  }\n\n}, 0);\nlet Meteor;\nmodule.link(\"meteor/meteor\", {\n  Meteor(v) {\n    Meteor = v;\n  }\n\n}, 1);\nlet Tracker;\nmodule.link(\"meteor/tracker\", {\n  Tracker(v) {\n    Tracker = v;\n  }\n\n}, 2);\nlet mem;\nmodule.link(\"mem\", {\n  default(v) {\n    mem = v;\n  }\n\n}, 3);\nlet emojioneRender, emojioneRenderFromShort;\nmodule.link(\"./emojioneRender\", {\n  emojioneRender(v) {\n    emojioneRender = v;\n  },\n\n  emojioneRenderFromShort(v) {\n    emojioneRenderFromShort = v;\n  }\n\n}, 4);\nlet emojisByCategory, emojiCategories, toneList;\nmodule.link(\"./emojiPicker\", {\n  emojisByCategory(v) {\n    emojisByCategory = v;\n  },\n\n  emojiCategories(v) {\n    emojiCategories = v;\n  },\n\n  toneList(v) {\n    toneList = v;\n  }\n\n}, 5);\nlet emoji;\nmodule.link(\"../../emoji\", {\n  emoji(v) {\n    emoji = v;\n  }\n\n}, 6);\nlet getUserPreference;\nmodule.link(\"../../utils\", {\n  getUserPreference(v) {\n    getUserPreference = v;\n  }\n\n}, 7);\n// TODO remove fix below when issue is solved: https://github.com/joypixels/emojione/issues/617\n// add missing emojis not provided by JS object, but included on emoji.json\nemojione.shortnames += '|:tm:|:copyright:|:registered:|:digit_zero:|:digit_one:|:digit_two:|:digit_three:|:digit_four:|:digit_five:|:digit_six:|:digit_seven:|:digit_eight:|:digit_nine:|:pound_symbol:|:asterisk_symbol:';\nemojione.regShortNames = new RegExp(\"<object[^>]*>.*?</object>|<span[^>]*>.*?</span>|<(?:object|embed|svg|img|div|span|p|a)[^>]*>|(\".concat(emojione.shortnames, \")\"), 'gi');\nemojione.emojioneList[':tm:'] = {\n  uc_base: '2122',\n  uc_output: '2122-fe0f',\n  uc_match: '2122-fe0f',\n  uc_greedy: '2122-fe0f',\n  shortnames: [],\n  category: 'symbols',\n  emojiPackage: 'emojione'\n};\nemojione.emojioneList[':copyright:'] = {\n  uc_base: '00a9',\n  uc_output: '00a9-f0ef',\n  uc_match: '00a9-fe0f',\n  uc_greedy: '00a9-fe0f',\n  shortnames: [],\n  category: 'symbols',\n  emojiPackage: 'emojione'\n};\nemojione.emojioneList[':registered:'] = {\n  uc_base: '00ae',\n  uc_output: '00ae-fe0f',\n  uc_match: '00ae-fe0f',\n  uc_greedy: '00ae-fe0f',\n  shortnames: [],\n  category: 'symbols',\n  emojiPackage: 'emojione'\n};\nemojione.emojioneList[':digit_zero:'] = {\n  uc_base: '0030',\n  uc_output: '0030-fe0f',\n  uc_match: '0030-fe0f',\n  uc_greedy: '0030-fe0f',\n  shortnames: [],\n  category: 'symbols',\n  emojiPackage: 'emojione'\n};\nemojione.emojioneList[':digit_one:'] = {\n  uc_base: '0031',\n  uc_output: '0031-fe0f',\n  uc_match: '0031-fe0f',\n  uc_greedy: '0031-fe0f',\n  shortnames: [],\n  category: 'symbols',\n  emojiPackage: 'emojione'\n};\nemojione.emojioneList[':digit_two:'] = {\n  uc_base: '0032',\n  uc_output: '0032-fe0f',\n  uc_match: '0032-fe0f',\n  uc_greedy: '0032-fe0f',\n  shortnames: [],\n  category: 'symbols',\n  emojiPackage: 'emojione'\n};\nemojione.emojioneList[':digit_three:'] = {\n  uc_base: '0033',\n  uc_output: '0033-fe0f',\n  uc_match: '0033-fe0f',\n  uc_greedy: '0033-fe0f',\n  shortnames: [],\n  category: 'symbols',\n  emojiPackage: 'emojione'\n};\nemojione.emojioneList[':digit_four:'] = {\n  uc_base: '0034',\n  uc_output: '0034-fe0f',\n  uc_match: '0034-fe0f',\n  uc_greedy: '0034-fe0f',\n  shortnames: [],\n  category: 'symbols',\n  emojiPackage: 'emojione'\n};\nemojione.emojioneList[':digit_five:'] = {\n  uc_base: '0035',\n  uc_output: '0035-fe0f',\n  uc_match: '0035-fe0f',\n  uc_greedy: '0035-fe0f',\n  shortnames: [],\n  category: 'symbols',\n  emojiPackage: 'emojione'\n};\nemojione.emojioneList[':digit_six:'] = {\n  uc_base: '0036',\n  uc_output: '0036-fe0f',\n  uc_match: '0036-fe0f',\n  uc_greedy: '0036-fe0f',\n  shortnames: [],\n  category: 'symbols',\n  emojiPackage: 'emojione'\n};\nemojione.emojioneList[':digit_seven:'] = {\n  uc_base: '0037',\n  uc_output: '0037-fe0f',\n  uc_match: '0037-fe0f',\n  uc_greedy: '0037-fe0f',\n  shortnames: [],\n  category: 'symbols',\n  emojiPackage: 'emojione'\n};\nemojione.emojioneList[':digit_eight:'] = {\n  uc_base: '0038',\n  uc_output: '0038-fe0f',\n  uc_match: '0038-fe0f',\n  uc_greedy: '0038-fe0f',\n  shortnames: [],\n  category: 'symbols',\n  emojiPackage: 'emojione'\n};\nemojione.emojioneList[':digit_nine:'] = {\n  uc_base: '0039',\n  uc_output: '0039-fe0f',\n  uc_match: '0039-fe0f',\n  uc_greedy: '0039-fe0f',\n  shortnames: [],\n  category: 'symbols',\n  emojiPackage: 'emojione'\n};\nemojione.emojioneList[':pound_symbol:'] = {\n  uc_base: '0023',\n  uc_output: '0023-fe0f',\n  uc_match: '0023-fe0f',\n  uc_greedy: '0023-fe0f',\n  shortnames: [],\n  category: 'symbols',\n  emojiPackage: 'emojione'\n};\nemojione.emojioneList[':asterisk_symbol:'] = {\n  uc_base: '002a',\n  uc_output: '002a-fe0f',\n  uc_match: '002a-fe0f',\n  uc_greedy: '002a-fe0f',\n  shortnames: [],\n  category: 'symbols',\n  emojiPackage: 'emojione'\n}; // end fix\n// fix for :+1: - had to replace all function that does its conversion: https://github.com/joypixels/emojione/blob/4.5.0/lib/js/emojione.js#L249\n\n(function (ns) {\n  ns.shortnameConversionMap = mem(ns.shortnameConversionMap, {\n    maxAge: 1000\n  });\n  ns.unicodeCharRegex = mem(ns.unicodeCharRegex, {\n    maxAge: 1000\n  });\n  const convertShortName = mem(function (shortname) {\n    // the fix is basically adding this .replace(/[+]/g, '\\\\$&')\n    if (typeof shortname === 'undefined' || shortname === '' || ns.shortnames.indexOf(shortname.replace(/[+]/g, '\\\\$&')) === -1) {\n      // if the shortname doesnt exist just return the entire match\n      return shortname;\n    } // map shortname to parent\n\n\n    if (!ns.emojioneList[shortname]) {\n      for (const emoji in ns.emojioneList) {\n        if (!ns.emojioneList.hasOwnProperty(emoji) || emoji === '') {\n          continue;\n        }\n\n        if (ns.emojioneList[emoji].shortnames.indexOf(shortname) === -1) {\n          continue;\n        }\n\n        shortname = emoji;\n        break;\n      }\n    }\n\n    const unicode = ns.emojioneList[shortname].uc_output;\n    const fname = ns.emojioneList[shortname].uc_base;\n    const category = fname.indexOf('-1f3f') >= 0 ? 'diversity' : ns.emojioneList[shortname].category;\n    const title = ns.imageTitleTag ? \"title=\\\"\".concat(shortname, \"\\\"\") : ''; // const size = ns.spriteSize === '32' || ns.spriteSize === '64' ? ns.spriteSize : '32';\n    // if the emoji path has been set, we'll use the provided path, otherwise we'll use the default path\n\n    const ePath = ns.defaultPathPNG !== ns.imagePathPNG ? ns.imagePathPNG : \"\".concat(ns.defaultPathPNG + ns.emojiSize, \"/\"); // depending on the settings, we'll either add the native unicode as the alt tag, otherwise the shortname\n\n    const alt = ns.unicodeAlt ? ns.convert(unicode.toUpperCase()) : shortname;\n\n    if (ns.sprites) {\n      return \"<span class=\\\"emojione emojione-\".concat(category, \" _\").concat(fname, \"\\\" \").concat(title, \">\").concat(alt, \"</span>\");\n    }\n\n    return \"<img class=\\\"emojione\\\" alt=\\\"\".concat(alt, \"\\\" \").concat(title, \" src=\\\"\").concat(ePath).concat(fname).concat(ns.fileExtension, \"\\\"/>\");\n  }, {\n    maxAge: 1000\n  });\n  const convertUnicode = mem(function (entire, m1, m2, m3) {\n    const mappedUnicode = ns.mapUnicodeToShort();\n\n    if (typeof m3 === 'undefined' || m3 === '' || !(ns.unescapeHTML(m3) in ns.asciiList)) {\n      // if the ascii doesnt exist just return the entire match\n      return entire;\n    }\n\n    m3 = ns.unescapeHTML(m3);\n    const unicode = ns.asciiList[m3];\n    const shortname = mappedUnicode[unicode];\n    const category = unicode.indexOf('-1f3f') >= 0 ? 'diversity' : ns.emojioneList[shortname].category;\n    const title = ns.imageTitleTag ? \"title=\\\"\".concat(ns.escapeHTML(m3), \"\\\"\") : ''; // const size = ns.spriteSize === '32' || ns.spriteSize === '64' ? ns.spriteSize : '32';\n    // if the emoji path has been set, we'll use the provided path, otherwise we'll use the default path\n\n    const ePath = ns.defaultPathPNG !== ns.imagePathPNG ? ns.imagePathPNG : \"\".concat(ns.defaultPathPNG + ns.emojiSize, \"/\"); // depending on the settings, we'll either add the native unicode as the alt tag, otherwise the shortname\n\n    const alt = ns.unicodeAlt ? ns.convert(unicode.toUpperCase()) : ns.escapeHTML(m3);\n\n    if (ns.sprites) {\n      return \"\".concat(m2, \"<span class=\\\"emojione emojione-\").concat(category, \" _\").concat(unicode, \"\\\"  \").concat(title, \">\").concat(alt, \"</span>\");\n    }\n\n    return \"\".concat(m2, \"<img class=\\\"emojione\\\" alt=\\\"\").concat(alt, \"\\\" \").concat(title, \" src=\\\"\").concat(ePath).concat(unicode).concat(ns.fileExtension, \"\\\"/>\");\n  }, {\n    maxAge: 1000,\n    cacheKey: JSON.stringify\n  });\n\n  ns.shortnameToImage = function (str) {\n    // replace regular shortnames first\n    str = str.replace(ns.regShortNames, convertShortName); // if ascii smileys are turned on, then we'll replace them!\n\n    if (ns.ascii) {\n      const asciiRX = ns.riskyMatchAscii ? ns.regAsciiRisky : ns.regAscii;\n      return str.replace(asciiRX, convertUnicode);\n    }\n\n    return str;\n  };\n})(emojione);\n\nemoji.packages.emojione = emojione;\nemoji.packages.emojione.sprites = true;\nemoji.packages.emojione.emojisByCategory = emojisByCategory;\nemoji.packages.emojione.emojiCategories = emojiCategories;\nemoji.packages.emojione.toneList = toneList;\nemoji.packages.emojione.render = emojioneRender;\nemoji.packages.emojione.renderPicker = emojioneRenderFromShort; // http://stackoverflow.com/a/26990347 function isSet() from Gajus\n\nfunction isSetNotNull(fn) {\n  let value;\n\n  try {\n    value = fn();\n  } catch (e) {\n    value = null;\n  }\n\n  return value !== null && value !== undefined;\n} // RocketChat.emoji.list is the collection of emojis from all emoji packages\n\n\nfor (const key in emojione.emojioneList) {\n  if (emojione.emojioneList.hasOwnProperty(key)) {\n    const currentEmoji = emojione.emojioneList[key];\n    currentEmoji.emojiPackage = 'emojione';\n    emoji.list[key] = currentEmoji;\n\n    if (currentEmoji.shortnames) {\n      currentEmoji.shortnames.forEach(shortname => {\n        emoji.list[shortname] = currentEmoji;\n      });\n    }\n  }\n} // Additional settings -- ascii emojis\n\n\nMeteor.startup(function () {\n  Tracker.autorun(function () {\n    if (isSetNotNull(() => emoji.packages.emojione)) {\n      if (isSetNotNull(() => getUserPreference(Meteor.userId(), 'convertAsciiEmoji'))) {\n        emoji.packages.emojione.ascii = getUserPreference(Meteor.userId(), 'convertAsciiEmoji');\n      } else {\n        emoji.packages.emojione.ascii = true;\n      }\n    }\n  });\n});","map":{"version":3,"sources":["app/emoji-emojione/lib/rocketchat.js"],"names":["emojione","module","link","default","v","Meteor","Tracker","mem","emojioneRender","emojioneRenderFromShort","emojisByCategory","emojiCategories","toneList","emoji","getUserPreference","shortnames","regShortNames","RegExp","emojioneList","uc_base","uc_output","uc_match","uc_greedy","category","emojiPackage","ns","shortnameConversionMap","maxAge","unicodeCharRegex","convertShortName","shortname","indexOf","replace","hasOwnProperty","unicode","fname","title","imageTitleTag","ePath","defaultPathPNG","imagePathPNG","emojiSize","alt","unicodeAlt","convert","toUpperCase","sprites","fileExtension","convertUnicode","entire","m1","m2","m3","mappedUnicode","mapUnicodeToShort","unescapeHTML","asciiList","escapeHTML","cacheKey","JSON","stringify","shortnameToImage","str","ascii","asciiRX","riskyMatchAscii","regAsciiRisky","regAscii","packages","render","renderPicker","isSetNotNull","fn","value","e","undefined","key","currentEmoji","list","forEach","startup","autorun","userId"],"mappings":"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","sourcesContent":["import emojione from 'emojione';\nimport { Meteor } from 'meteor/meteor';\nimport { Tracker } from 'meteor/tracker';\nimport mem from 'mem';\n\nimport { emojioneRender, emojioneRenderFromShort } from './emojioneRender';\nimport { emojisByCategory, emojiCategories, toneList } from './emojiPicker';\nimport { emoji } from '../../emoji';\nimport { getUserPreference } from '../../utils';\n\n// TODO remove fix below when issue is solved: https://github.com/joypixels/emojione/issues/617\n\n// add missing emojis not provided by JS object, but included on emoji.json\nemojione.shortnames +=\n\t'|:tm:|:copyright:|:registered:|:digit_zero:|:digit_one:|:digit_two:|:digit_three:|:digit_four:|:digit_five:|:digit_six:|:digit_seven:|:digit_eight:|:digit_nine:|:pound_symbol:|:asterisk_symbol:';\nemojione.regShortNames = new RegExp(\n\t`<object[^>]*>.*?<\\/object>|<span[^>]*>.*?<\\/span>|<(?:object|embed|svg|img|div|span|p|a)[^>]*>|(${emojione.shortnames})`,\n\t'gi',\n);\n\nemojione.emojioneList[':tm:'] = {\n\tuc_base: '2122',\n\tuc_output: '2122-fe0f',\n\tuc_match: '2122-fe0f',\n\tuc_greedy: '2122-fe0f',\n\tshortnames: [],\n\tcategory: 'symbols',\n\temojiPackage: 'emojione',\n};\n\nemojione.emojioneList[':copyright:'] = {\n\tuc_base: '00a9',\n\tuc_output: '00a9-f0ef',\n\tuc_match: '00a9-fe0f',\n\tuc_greedy: '00a9-fe0f',\n\tshortnames: [],\n\tcategory: 'symbols',\n\temojiPackage: 'emojione',\n};\n\nemojione.emojioneList[':registered:'] = {\n\tuc_base: '00ae',\n\tuc_output: '00ae-fe0f',\n\tuc_match: '00ae-fe0f',\n\tuc_greedy: '00ae-fe0f',\n\tshortnames: [],\n\tcategory: 'symbols',\n\temojiPackage: 'emojione',\n};\n\nemojione.emojioneList[':digit_zero:'] = {\n\tuc_base: '0030',\n\tuc_output: '0030-fe0f',\n\tuc_match: '0030-fe0f',\n\tuc_greedy: '0030-fe0f',\n\tshortnames: [],\n\tcategory: 'symbols',\n\temojiPackage: 'emojione',\n};\n\nemojione.emojioneList[':digit_one:'] = {\n\tuc_base: '0031',\n\tuc_output: '0031-fe0f',\n\tuc_match: '0031-fe0f',\n\tuc_greedy: '0031-fe0f',\n\tshortnames: [],\n\tcategory: 'symbols',\n\temojiPackage: 'emojione',\n};\n\nemojione.emojioneList[':digit_two:'] = {\n\tuc_base: '0032',\n\tuc_output: '0032-fe0f',\n\tuc_match: '0032-fe0f',\n\tuc_greedy: '0032-fe0f',\n\tshortnames: [],\n\tcategory: 'symbols',\n\temojiPackage: 'emojione',\n};\n\nemojione.emojioneList[':digit_three:'] = {\n\tuc_base: '0033',\n\tuc_output: '0033-fe0f',\n\tuc_match: '0033-fe0f',\n\tuc_greedy: '0033-fe0f',\n\tshortnames: [],\n\tcategory: 'symbols',\n\temojiPackage: 'emojione',\n};\n\nemojione.emojioneList[':digit_four:'] = {\n\tuc_base: '0034',\n\tuc_output: '0034-fe0f',\n\tuc_match: '0034-fe0f',\n\tuc_greedy: '0034-fe0f',\n\tshortnames: [],\n\tcategory: 'symbols',\n\temojiPackage: 'emojione',\n};\n\nemojione.emojioneList[':digit_five:'] = {\n\tuc_base: '0035',\n\tuc_output: '0035-fe0f',\n\tuc_match: '0035-fe0f',\n\tuc_greedy: '0035-fe0f',\n\tshortnames: [],\n\tcategory: 'symbols',\n\temojiPackage: 'emojione',\n};\n\nemojione.emojioneList[':digit_six:'] = {\n\tuc_base: '0036',\n\tuc_output: '0036-fe0f',\n\tuc_match: '0036-fe0f',\n\tuc_greedy: '0036-fe0f',\n\tshortnames: [],\n\tcategory: 'symbols',\n\temojiPackage: 'emojione',\n};\n\nemojione.emojioneList[':digit_seven:'] = {\n\tuc_base: '0037',\n\tuc_output: '0037-fe0f',\n\tuc_match: '0037-fe0f',\n\tuc_greedy: '0037-fe0f',\n\tshortnames: [],\n\tcategory: 'symbols',\n\temojiPackage: 'emojione',\n};\n\nemojione.emojioneList[':digit_eight:'] = {\n\tuc_base: '0038',\n\tuc_output: '0038-fe0f',\n\tuc_match: '0038-fe0f',\n\tuc_greedy: '0038-fe0f',\n\tshortnames: [],\n\tcategory: 'symbols',\n\temojiPackage: 'emojione',\n};\n\nemojione.emojioneList[':digit_nine:'] = {\n\tuc_base: '0039',\n\tuc_output: '0039-fe0f',\n\tuc_match: '0039-fe0f',\n\tuc_greedy: '0039-fe0f',\n\tshortnames: [],\n\tcategory: 'symbols',\n\temojiPackage: 'emojione',\n};\n\nemojione.emojioneList[':pound_symbol:'] = {\n\tuc_base: '0023',\n\tuc_output: '0023-fe0f',\n\tuc_match: '0023-fe0f',\n\tuc_greedy: '0023-fe0f',\n\tshortnames: [],\n\tcategory: 'symbols',\n\temojiPackage: 'emojione',\n};\n\nemojione.emojioneList[':asterisk_symbol:'] = {\n\tuc_base: '002a',\n\tuc_output: '002a-fe0f',\n\tuc_match: '002a-fe0f',\n\tuc_greedy: '002a-fe0f',\n\tshortnames: [],\n\tcategory: 'symbols',\n\temojiPackage: 'emojione',\n};\n// end fix\n\n// fix for :+1: - had to replace all function that does its conversion: https://github.com/joypixels/emojione/blob/4.5.0/lib/js/emojione.js#L249\n(function (ns) {\n\tns.shortnameConversionMap = mem(ns.shortnameConversionMap, { maxAge: 1000 });\n\n\tns.unicodeCharRegex = mem(ns.unicodeCharRegex, { maxAge: 1000 });\n\n\tconst convertShortName = mem(\n\t\tfunction (shortname) {\n\t\t\t// the fix is basically adding this .replace(/[+]/g, '\\\\$&')\n\t\t\tif (typeof shortname === 'undefined' || shortname === '' || ns.shortnames.indexOf(shortname.replace(/[+]/g, '\\\\$&')) === -1) {\n\t\t\t\t// if the shortname doesnt exist just return the entire match\n\t\t\t\treturn shortname;\n\t\t\t}\n\n\t\t\t// map shortname to parent\n\t\t\tif (!ns.emojioneList[shortname]) {\n\t\t\t\tfor (const emoji in ns.emojioneList) {\n\t\t\t\t\tif (!ns.emojioneList.hasOwnProperty(emoji) || emoji === '') {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t\tif (ns.emojioneList[emoji].shortnames.indexOf(shortname) === -1) {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t\tshortname = emoji;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tconst unicode = ns.emojioneList[shortname].uc_output;\n\t\t\tconst fname = ns.emojioneList[shortname].uc_base;\n\t\t\tconst category = fname.indexOf('-1f3f') >= 0 ? 'diversity' : ns.emojioneList[shortname].category;\n\t\t\tconst title = ns.imageTitleTag ? `title=\"${shortname}\"` : '';\n\t\t\t// const size = ns.spriteSize === '32' || ns.spriteSize === '64' ? ns.spriteSize : '32';\n\t\t\t// if the emoji path has been set, we'll use the provided path, otherwise we'll use the default path\n\t\t\tconst ePath = ns.defaultPathPNG !== ns.imagePathPNG ? ns.imagePathPNG : `${ns.defaultPathPNG + ns.emojiSize}/`;\n\n\t\t\t// depending on the settings, we'll either add the native unicode as the alt tag, otherwise the shortname\n\t\t\tconst alt = ns.unicodeAlt ? ns.convert(unicode.toUpperCase()) : shortname;\n\n\t\t\tif (ns.sprites) {\n\t\t\t\treturn `<span class=\"emojione emojione-${category} _${fname}\" ${title}>${alt}</span>`;\n\t\t\t}\n\t\t\treturn `<img class=\"emojione\" alt=\"${alt}\" ${title} src=\"${ePath}${fname}${ns.fileExtension}\"/>`;\n\t\t},\n\t\t{ maxAge: 1000 },\n\t);\n\n\tconst convertUnicode = mem(\n\t\tfunction (entire, m1, m2, m3) {\n\t\t\tconst mappedUnicode = ns.mapUnicodeToShort();\n\n\t\t\tif (typeof m3 === 'undefined' || m3 === '' || !(ns.unescapeHTML(m3) in ns.asciiList)) {\n\t\t\t\t// if the ascii doesnt exist just return the entire match\n\t\t\t\treturn entire;\n\t\t\t}\n\n\t\t\tm3 = ns.unescapeHTML(m3);\n\t\t\tconst unicode = ns.asciiList[m3];\n\t\t\tconst shortname = mappedUnicode[unicode];\n\t\t\tconst category = unicode.indexOf('-1f3f') >= 0 ? 'diversity' : ns.emojioneList[shortname].category;\n\t\t\tconst title = ns.imageTitleTag ? `title=\"${ns.escapeHTML(m3)}\"` : '';\n\t\t\t// const size = ns.spriteSize === '32' || ns.spriteSize === '64' ? ns.spriteSize : '32';\n\t\t\t// if the emoji path has been set, we'll use the provided path, otherwise we'll use the default path\n\t\t\tconst ePath = ns.defaultPathPNG !== ns.imagePathPNG ? ns.imagePathPNG : `${ns.defaultPathPNG + ns.emojiSize}/`;\n\n\t\t\t// depending on the settings, we'll either add the native unicode as the alt tag, otherwise the shortname\n\t\t\tconst alt = ns.unicodeAlt ? ns.convert(unicode.toUpperCase()) : ns.escapeHTML(m3);\n\n\t\t\tif (ns.sprites) {\n\t\t\t\treturn `${m2}<span class=\"emojione emojione-${category} _${unicode}\"  ${title}>${alt}</span>`;\n\t\t\t}\n\t\t\treturn `${m2}<img class=\"emojione\" alt=\"${alt}\" ${title} src=\"${ePath}${unicode}${ns.fileExtension}\"/>`;\n\t\t},\n\t\t{ maxAge: 1000, cacheKey: JSON.stringify },\n\t);\n\n\tns.shortnameToImage = function (str) {\n\t\t// replace regular shortnames first\n\t\tstr = str.replace(ns.regShortNames, convertShortName);\n\n\t\t// if ascii smileys are turned on, then we'll replace them!\n\t\tif (ns.ascii) {\n\t\t\tconst asciiRX = ns.riskyMatchAscii ? ns.regAsciiRisky : ns.regAscii;\n\n\t\t\treturn str.replace(asciiRX, convertUnicode);\n\t\t}\n\n\t\treturn str;\n\t};\n})(emojione);\n\nemoji.packages.emojione = emojione;\nemoji.packages.emojione.sprites = true;\nemoji.packages.emojione.emojisByCategory = emojisByCategory;\nemoji.packages.emojione.emojiCategories = emojiCategories;\nemoji.packages.emojione.toneList = toneList;\n\nemoji.packages.emojione.render = emojioneRender;\nemoji.packages.emojione.renderPicker = emojioneRenderFromShort;\n\n// http://stackoverflow.com/a/26990347 function isSet() from Gajus\nfunction isSetNotNull(fn) {\n\tlet value;\n\ttry {\n\t\tvalue = fn();\n\t} catch (e) {\n\t\tvalue = null;\n\t}\n\treturn value !== null && value !== undefined;\n}\n\n// RocketChat.emoji.list is the collection of emojis from all emoji packages\nfor (const key in emojione.emojioneList) {\n\tif (emojione.emojioneList.hasOwnProperty(key)) {\n\t\tconst currentEmoji = emojione.emojioneList[key];\n\t\tcurrentEmoji.emojiPackage = 'emojione';\n\t\temoji.list[key] = currentEmoji;\n\n\t\tif (currentEmoji.shortnames) {\n\t\t\tcurrentEmoji.shortnames.forEach((shortname) => {\n\t\t\t\temoji.list[shortname] = currentEmoji;\n\t\t\t});\n\t\t}\n\t}\n}\n\n// Additional settings -- ascii emojis\nMeteor.startup(function () {\n\tTracker.autorun(function () {\n\t\tif (isSetNotNull(() => emoji.packages.emojione)) {\n\t\t\tif (isSetNotNull(() => getUserPreference(Meteor.userId(), 'convertAsciiEmoji'))) {\n\t\t\t\temoji.packages.emojione.ascii = getUserPreference(Meteor.userId(), 'convertAsciiEmoji');\n\t\t\t} else {\n\t\t\t\temoji.packages.emojione.ascii = true;\n\t\t\t}\n\t\t}\n\t});\n});\n"]},"sourceType":"module","hash":"862b4eef41e3c9122610f69272e53f85315fc2ea"}
