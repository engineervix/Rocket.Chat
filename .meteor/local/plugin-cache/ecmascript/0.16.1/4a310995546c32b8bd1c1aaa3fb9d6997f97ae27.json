{"metadata":{},"options":{"assumptions":{},"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat/app/ui-utils/client/lib/AccountBox.js","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","classProperties","classPrivateProperties","jsx","nullishCoalescingOperator","nullishCoalescingOperator","optionalChaining","optionalCatchBinding","optionalCatchBinding","classProperties","classPrivateProperties","classPrivateMethods","classProperties","classPrivateProperties","asyncGenerators","asyncGenerators","objectRestSpread","logicalAssignment"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"allowUndeclaredExports":true,"strictMode":false},"caller":{"name":"meteor","arch":"web.browser.legacy"},"sourceFileName":"app/ui-utils/client/lib/AccountBox.js","filename":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat/app/ui-utils/client/lib/AccountBox.js","targets":{"android":"95.0.0","chrome":"95.0.0","edge":"95.0.0","firefox":"78.0.0","ie":"10.0.0","ios":"15.0.0","opera":"81.0.0","safari":"15.1.0","samsung":"14.0.0"},"cloneInputAst":true,"browserslistConfigFile":false,"passPerPreset":false,"envName":"development","cwd":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat","root":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat","rootMode":"root","plugins":[{"key":"base$0","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0","visitor":{"Program":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true},"options":{"avoidModernSyntax":true,"enforceStrictMode":false,"dynamicImport":true}},{"key":"transform-runtime","visitor":{"MemberExpression":{"enter":[null]},"ObjectPattern":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":{},"_verified":{},"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]}},"options":{"version":"7.16.5","helpers":true,"useESModules":false,"corejs":false}},{"key":"proposal-class-properties","visitor":{"PrivateName":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{"loose":true}},{"key":"base$0$3","visitor":{"FunctionExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$4","visitor":{"ForInStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-react-jsx","visitor":{"_exploded":{},"_verified":{},"JSXNamespacedName":{"enter":[null]},"JSXSpreadChild":{"enter":[null]},"Program":{"enter":[null]},"JSXElement":{"exit":[null]},"JSXFragment":{"exit":[null]},"JSXAttribute":{"enter":[null]}},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","runtime":"classic","throwIfNamespace":true,"useBuiltIns":false}},{"key":"transform-react-display-name","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-react-pure-annotations","visitor":{"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"syntax-nullish-coalescing-operator","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-nullish-coalescing-operator","visitor":{"_exploded":{},"_verified":{},"LogicalExpression":{"enter":[null]}},"options":{}},{"key":"syntax-optional-chaining","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-optional-chaining","visitor":{"_exploded":true,"OptionalCallExpression":{"enter":[null]},"OptionalMemberExpression":{"enter":[null]},"_verified":true},"options":{}},{"key":"syntax-optional-catch-binding","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-optional-catch-binding","visitor":{"_exploded":{},"_verified":{},"CatchClause":{"enter":[null]}},"options":{}},{"key":"syntax-class-properties","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-class-properties","visitor":{"PrivateName":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{}},{"key":"syntax-async-generators","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-async-generator-functions","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]}},"options":{}},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-object-rest-spread","visitor":{"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"proposal-logical-assignment-operators","visitor":{"_exploded":{},"_verified":{},"AssignmentExpression":{"enter":[null]}},"options":{}},{"key":"transform-arrow-functions","visitor":{"ArrowFunctionExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-block-scoped-functions","visitor":{"BlockStatement":{"enter":[null]},"SwitchCase":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-block-scoping","visitor":{"VariableDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"_exploded":true,"BlockStatement":{"enter":[null]},"SwitchStatement":{"enter":[null]},"Program":{"enter":[null]},"_verified":true,"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"transform-classes","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-computed-properties","visitor":{"ObjectExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-destructuring","visitor":{"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"VariableDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"transform-for-of","visitor":{"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-literals","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-object-super","visitor":{"ObjectExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-parameters","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{}},{"key":"transform-shorthand-properties","visitor":{"ObjectMethod":{"enter":[null]},"ObjectProperty":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-spread","visitor":{"ArrayExpression":{"enter":[null]},"CallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-sticky-regex","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-template-literals","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-typeof-symbol","visitor":{"UnaryExpression":{"enter":[null]},"_exploded":true,"_verified":true,"BlockStatement":{"enter":[null]},"CatchClause":{"enter":[null]},"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"Program":{"enter":[null]},"ObjectMethod":{"enter":[null]},"SwitchStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ForOfStatement":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"StaticBlock":{"enter":[null]},"TSModuleBlock":{"enter":[null]},"AssignmentPattern":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectPattern":{"enter":[null]}},"options":{}},{"key":"transform-unicode-regex","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-property-literals","visitor":{"ObjectProperty":{"exit":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-exponentiation-operator","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"regenerator-transform","visitor":{"_exploded":true,"_verified":true,"ObjectMethod":{"enter":[null],"exit":[null]},"ClassMethod":{"enter":[null],"exit":[null]},"ClassPrivateMethod":{"enter":[null],"exit":[null]},"FunctionDeclaration":{"exit":[null]},"FunctionExpression":{"exit":[null]},"ArrowFunctionExpression":{"exit":[null]}},"options":{}}],"presets":[],"generatorOpts":{"filename":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat/app/ui-utils/client/lib/AccountBox.js","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"app/ui-utils/client/lib/AccountBox.js"}},"code":"var _regeneratorRuntime;\n\nmodule.link(\"@babel/runtime/regenerator\", {\n  default: function (v) {\n    _regeneratorRuntime = v;\n  }\n}, 0);\nmodule.export({\n  AccountBox: function () {\n    return AccountBox;\n  }\n});\nvar Meteor;\nmodule.link(\"meteor/meteor\", {\n  Meteor: function (v) {\n    Meteor = v;\n  }\n}, 0);\nvar ReactiveVar;\nmodule.link(\"meteor/reactive-var\", {\n  ReactiveVar: function (v) {\n    ReactiveVar = v;\n  }\n}, 1);\nvar Tracker;\nmodule.link(\"meteor/tracker\", {\n  Tracker: function (v) {\n    Tracker = v;\n  }\n}, 2);\nvar FlowRouter;\nmodule.link(\"meteor/kadira:flow-router\", {\n  FlowRouter: function (v) {\n    FlowRouter = v;\n  }\n}, 3);\nvar Session;\nmodule.link(\"meteor/session\", {\n  Session: function (v) {\n    Session = v;\n  }\n}, 4);\n\nvar _;\n\nmodule.link(\"underscore\", {\n  \"default\": function (v) {\n    _ = v;\n  }\n}, 5);\nvar appLayout;\nmodule.link(\"../../../../client/lib/appLayout\", {\n  appLayout: function (v) {\n    appLayout = v;\n  }\n}, 6);\nvar SideNav;\nmodule.link(\"./SideNav\", {\n  SideNav: function (v) {\n    SideNav = v;\n  }\n}, 7);\n\nvar AccountBox = function () {\n  var status = 0;\n  var items = new ReactiveVar([]);\n\n  function setStatus(status, statusText) {\n    return Meteor.call('setUserStatus', status, statusText);\n  }\n\n  function open() {\n    if (SideNav.flexStatus()) {\n      SideNav.closeFlex();\n      return;\n    }\n\n    status = 1;\n  }\n\n  function close() {\n    status = 0;\n  }\n\n  function toggle() {\n    if (status) {\n      return close();\n    }\n\n    return open();\n  }\n\n  function openFlex() {\n    status = 0;\n  }\n  /*\n   * @param newOption:\n   *   name: Button label\n   *   icon: Button icon\n   *   class: Class of the item\n   *   permissions: Which permissions a user should have (all of them) to see this item\n   */\n\n\n  function addItem(newItem) {\n    return Tracker.nonreactive(function () {\n      var actual = items.get();\n      actual.push(newItem);\n      return items.set(actual);\n    });\n  }\n\n  function checkCondition(item) {\n    return item.condition == null || item.condition();\n  }\n\n  function getItems() {\n    return _.filter(items.get(), function (item) {\n      if (checkCondition(item)) {\n        return true;\n      }\n    });\n  }\n\n  function addRoute(newRoute, router) {\n    var wait = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : function () {};\n\n    if (router == null) {\n      router = FlowRouter;\n    }\n\n    var container = newRoute.customContainer ? 'pageCustomContainer' : 'pageContainer';\n    var routeConfig = {\n      center: container,\n      pageTemplate: newRoute.pageTemplate\n    };\n\n    if (newRoute.i18nPageTitle != null) {\n      routeConfig.i18nPageTitle = newRoute.i18nPageTitle;\n    }\n\n    if (newRoute.pageTitle != null) {\n      routeConfig.pageTitle = newRoute.pageTitle;\n    }\n\n    return router.route(newRoute.path, {\n      name: newRoute.name,\n      action: function () {\n        function _callee() {\n          return _regeneratorRuntime.async(function () {\n            function _callee$(_context) {\n              while (1) {\n                switch (_context.prev = _context.next) {\n                  case 0:\n                    _context.next = 2;\n                    return _regeneratorRuntime.awrap(wait());\n\n                  case 2:\n                    Session.set('openedRoom');\n                    appLayout.renderMainLayout(routeConfig);\n\n                  case 4:\n                  case \"end\":\n                    return _context.stop();\n                }\n              }\n            }\n\n            return _callee$;\n          }(), null, null, null, Promise);\n        }\n\n        return _callee;\n      }(),\n      triggersEnter: [function () {\n        if (newRoute.sideNav != null) {\n          SideNav.setFlex(newRoute.sideNav);\n          SideNav.openFlex();\n        }\n      }]\n    });\n  }\n\n  return {\n    setStatus: setStatus,\n    toggle: toggle,\n    open: open,\n    close: close,\n    openFlex: openFlex,\n    addRoute: addRoute,\n    addItem: addItem,\n    getItems: getItems\n  };\n}();","map":{"version":3,"sources":["app/ui-utils/client/lib/AccountBox.js"],"names":["_regeneratorRuntime","module","link","default","v","export","AccountBox","Meteor","ReactiveVar","Tracker","FlowRouter","Session","_","appLayout","SideNav","status","items","setStatus","statusText","call","open","flexStatus","closeFlex","close","toggle","openFlex","addItem","newItem","nonreactive","actual","get","push","set","checkCondition","item","condition","getItems","filter","addRoute","newRoute","router","wait","container","customContainer","routeConfig","center","pageTemplate","i18nPageTitle","pageTitle","route","path","name","action","renderMainLayout","triggersEnter","sideNav","setFlex"],"mappings":"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","sourcesContent":["import { Meteor } from 'meteor/meteor';\nimport { ReactiveVar } from 'meteor/reactive-var';\nimport { Tracker } from 'meteor/tracker';\nimport { FlowRouter } from 'meteor/kadira:flow-router';\nimport { Session } from 'meteor/session';\nimport _ from 'underscore';\n\nimport { appLayout } from '../../../../client/lib/appLayout';\nimport { SideNav } from './SideNav';\n\nexport const AccountBox = (function () {\n\tlet status = 0;\n\tconst items = new ReactiveVar([]);\n\tfunction setStatus(status, statusText) {\n\t\treturn Meteor.call('setUserStatus', status, statusText);\n\t}\n\tfunction open() {\n\t\tif (SideNav.flexStatus()) {\n\t\t\tSideNav.closeFlex();\n\t\t\treturn;\n\t\t}\n\t\tstatus = 1;\n\t}\n\tfunction close() {\n\t\tstatus = 0;\n\t}\n\tfunction toggle() {\n\t\tif (status) {\n\t\t\treturn close();\n\t\t}\n\t\treturn open();\n\t}\n\tfunction openFlex() {\n\t\tstatus = 0;\n\t}\n\n\t/*\n\t * @param newOption:\n\t *   name: Button label\n\t *   icon: Button icon\n\t *   class: Class of the item\n\t *   permissions: Which permissions a user should have (all of them) to see this item\n\t */\n\tfunction addItem(newItem) {\n\t\treturn Tracker.nonreactive(function () {\n\t\t\tconst actual = items.get();\n\t\t\tactual.push(newItem);\n\t\t\treturn items.set(actual);\n\t\t});\n\t}\n\tfunction checkCondition(item) {\n\t\treturn item.condition == null || item.condition();\n\t}\n\tfunction getItems() {\n\t\treturn _.filter(items.get(), function (item) {\n\t\t\tif (checkCondition(item)) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t});\n\t}\n\tfunction addRoute(newRoute, router, wait = () => {}) {\n\t\tif (router == null) {\n\t\t\trouter = FlowRouter;\n\t\t}\n\t\tconst container = newRoute.customContainer ? 'pageCustomContainer' : 'pageContainer';\n\t\tconst routeConfig = {\n\t\t\tcenter: container,\n\t\t\tpageTemplate: newRoute.pageTemplate,\n\t\t};\n\t\tif (newRoute.i18nPageTitle != null) {\n\t\t\trouteConfig.i18nPageTitle = newRoute.i18nPageTitle;\n\t\t}\n\t\tif (newRoute.pageTitle != null) {\n\t\t\trouteConfig.pageTitle = newRoute.pageTitle;\n\t\t}\n\t\treturn router.route(newRoute.path, {\n\t\t\tname: newRoute.name,\n\t\t\tasync action() {\n\t\t\t\tawait wait();\n\t\t\t\tSession.set('openedRoom');\n\t\t\t\tappLayout.renderMainLayout(routeConfig);\n\t\t\t},\n\t\t\ttriggersEnter: [\n\t\t\t\tfunction () {\n\t\t\t\t\tif (newRoute.sideNav != null) {\n\t\t\t\t\t\tSideNav.setFlex(newRoute.sideNav);\n\t\t\t\t\t\tSideNav.openFlex();\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t],\n\t\t});\n\t}\n\treturn {\n\t\tsetStatus,\n\t\ttoggle,\n\t\topen,\n\t\tclose,\n\t\topenFlex,\n\t\taddRoute,\n\t\taddItem,\n\t\tgetItems,\n\t};\n})();\n"]},"sourceType":"module","hash":"4a310995546c32b8bd1c1aaa3fb9d6997f97ae27"}
