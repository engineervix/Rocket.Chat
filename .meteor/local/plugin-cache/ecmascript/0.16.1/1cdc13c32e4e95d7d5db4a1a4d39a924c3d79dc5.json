{"metadata":{},"options":{"assumptions":{},"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat/client/views/room/contextualBar/Info/RoomInfo/RoomInfoWithData.js","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","classProperties","classPrivateProperties","jsx","nullishCoalescingOperator","nullishCoalescingOperator","optionalChaining","optionalCatchBinding","optionalCatchBinding","classProperties","classPrivateProperties","classPrivateMethods","classProperties","classPrivateProperties","asyncGenerators","asyncGenerators","objectRestSpread","logicalAssignment"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"allowUndeclaredExports":true,"strictMode":false},"caller":{"name":"meteor","arch":"web.browser.legacy"},"sourceFileName":"client/views/room/contextualBar/Info/RoomInfo/RoomInfoWithData.js","filename":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat/client/views/room/contextualBar/Info/RoomInfo/RoomInfoWithData.js","targets":{"android":"95.0.0","chrome":"95.0.0","edge":"95.0.0","firefox":"78.0.0","ie":"10.0.0","ios":"15.0.0","opera":"81.0.0","safari":"15.1.0","samsung":"14.0.0"},"cloneInputAst":true,"browserslistConfigFile":false,"passPerPreset":false,"envName":"development","cwd":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat","root":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat","rootMode":"root","plugins":[{"key":"base$0","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0","visitor":{"Program":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true},"options":{"avoidModernSyntax":true,"enforceStrictMode":false,"dynamicImport":true}},{"key":"transform-runtime","visitor":{"MemberExpression":{"enter":[null]},"ObjectPattern":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":{},"_verified":{},"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]}},"options":{"version":"7.16.5","helpers":true,"useESModules":false,"corejs":false}},{"key":"proposal-class-properties","visitor":{"PrivateName":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{"loose":true}},{"key":"base$0$3","visitor":{"FunctionExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$4","visitor":{"ForInStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-react-jsx","visitor":{"_exploded":{},"_verified":{},"JSXNamespacedName":{"enter":[null]},"JSXSpreadChild":{"enter":[null]},"Program":{"enter":[null]},"JSXElement":{"exit":[null]},"JSXFragment":{"exit":[null]},"JSXAttribute":{"enter":[null]}},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","runtime":"classic","throwIfNamespace":true,"useBuiltIns":false}},{"key":"transform-react-display-name","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-react-pure-annotations","visitor":{"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"syntax-nullish-coalescing-operator","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-nullish-coalescing-operator","visitor":{"_exploded":{},"_verified":{},"LogicalExpression":{"enter":[null]}},"options":{}},{"key":"syntax-optional-chaining","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-optional-chaining","visitor":{"_exploded":true,"OptionalCallExpression":{"enter":[null]},"OptionalMemberExpression":{"enter":[null]},"_verified":true},"options":{}},{"key":"syntax-optional-catch-binding","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-optional-catch-binding","visitor":{"_exploded":{},"_verified":{},"CatchClause":{"enter":[null]}},"options":{}},{"key":"syntax-class-properties","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-class-properties","visitor":{"PrivateName":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{}},{"key":"syntax-async-generators","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-async-generator-functions","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]}},"options":{}},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-object-rest-spread","visitor":{"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"proposal-logical-assignment-operators","visitor":{"_exploded":{},"_verified":{},"AssignmentExpression":{"enter":[null]}},"options":{}},{"key":"transform-arrow-functions","visitor":{"ArrowFunctionExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-block-scoped-functions","visitor":{"BlockStatement":{"enter":[null]},"SwitchCase":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-block-scoping","visitor":{"VariableDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"_exploded":true,"BlockStatement":{"enter":[null]},"SwitchStatement":{"enter":[null]},"Program":{"enter":[null]},"_verified":true,"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"transform-classes","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-computed-properties","visitor":{"ObjectExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-destructuring","visitor":{"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"VariableDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"transform-for-of","visitor":{"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-literals","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-object-super","visitor":{"ObjectExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-parameters","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{}},{"key":"transform-shorthand-properties","visitor":{"ObjectMethod":{"enter":[null]},"ObjectProperty":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-spread","visitor":{"ArrayExpression":{"enter":[null]},"CallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-sticky-regex","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-template-literals","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-typeof-symbol","visitor":{"UnaryExpression":{"enter":[null]},"_exploded":true,"_verified":true,"BlockStatement":{"enter":[null]},"CatchClause":{"enter":[null]},"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"Program":{"enter":[null]},"ObjectMethod":{"enter":[null]},"SwitchStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ForOfStatement":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"StaticBlock":{"enter":[null]},"TSModuleBlock":{"enter":[null]},"AssignmentPattern":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectPattern":{"enter":[null]}},"options":{}},{"key":"transform-unicode-regex","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-property-literals","visitor":{"ObjectProperty":{"exit":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-exponentiation-operator","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"regenerator-transform","visitor":{"_exploded":true,"_verified":true,"ObjectMethod":{"enter":[null],"exit":[null]},"ClassMethod":{"enter":[null],"exit":[null]},"ClassPrivateMethod":{"enter":[null],"exit":[null]},"FunctionDeclaration":{"exit":[null]},"FunctionExpression":{"exit":[null]},"ArrowFunctionExpression":{"exit":[null]}},"options":{}}],"presets":[],"generatorOpts":{"filename":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat/client/views/room/contextualBar/Info/RoomInfo/RoomInfoWithData.js","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"client/views/room/contextualBar/Info/RoomInfo/RoomInfoWithData.js"}},"code":"var _regeneratorRuntime;\n\nmodule.link(\"@babel/runtime/regenerator\", {\n  default: function (v) {\n    _regeneratorRuntime = v;\n  }\n}, 0);\nvar useMutableCallback;\nmodule.link(\"@rocket.chat/fuselage-hooks\", {\n  useMutableCallback: function (v) {\n    useMutableCallback = v;\n  }\n}, 0);\nvar React;\nmodule.link(\"react\", {\n  \"default\": function (v) {\n    React = v;\n  }\n}, 1);\nvar RoomManager;\nmodule.link(\"../../../../../../app/ui-utils/client/lib/RoomManager\", {\n  RoomManager: function (v) {\n    RoomManager = v;\n  }\n}, 2);\nvar UiTextContext;\nmodule.link(\"../../../../../../definition/IRoomTypeConfig\", {\n  UiTextContext: function (v) {\n    UiTextContext = v;\n  }\n}, 3);\nvar GenericModal;\nmodule.link(\"../../../../../components/GenericModal\", {\n  \"default\": function (v) {\n    GenericModal = v;\n  }\n}, 4);\nvar usePermission;\nmodule.link(\"../../../../../contexts/AuthorizationContext\", {\n  usePermission: function (v) {\n    usePermission = v;\n  }\n}, 5);\nvar useSetModal;\nmodule.link(\"../../../../../contexts/ModalContext\", {\n  useSetModal: function (v) {\n    useSetModal = v;\n  }\n}, 6);\nvar useRoute;\nmodule.link(\"../../../../../contexts/RouterContext\", {\n  useRoute: function (v) {\n    useRoute = v;\n  }\n}, 7);\nvar useEndpoint, useMethod;\nmodule.link(\"../../../../../contexts/ServerContext\", {\n  useEndpoint: function (v) {\n    useEndpoint = v;\n  },\n  useMethod: function (v) {\n    useMethod = v;\n  }\n}, 8);\nvar useSetting;\nmodule.link(\"../../../../../contexts/SettingsContext\", {\n  useSetting: function (v) {\n    useSetting = v;\n  }\n}, 9);\nvar useToastMessageDispatch;\nmodule.link(\"../../../../../contexts/ToastMessagesContext\", {\n  useToastMessageDispatch: function (v) {\n    useToastMessageDispatch = v;\n  }\n}, 10);\nvar useTranslation;\nmodule.link(\"../../../../../contexts/TranslationContext\", {\n  useTranslation: function (v) {\n    useTranslation = v;\n  }\n}, 11);\nvar useUserRoom;\nmodule.link(\"../../../../../contexts/UserContext\", {\n  useUserRoom: function (v) {\n    useUserRoom = v;\n  }\n}, 12);\nvar useEndpointActionExperimental;\nmodule.link(\"../../../../../hooks/useEndpointActionExperimental\", {\n  useEndpointActionExperimental: function (v) {\n    useEndpointActionExperimental = v;\n  }\n}, 13);\nvar roomCoordinator;\nmodule.link(\"../../../../../lib/rooms/roomCoordinator\", {\n  roomCoordinator: function (v) {\n    roomCoordinator = v;\n  }\n}, 14);\nvar WarningModal;\nmodule.link(\"../../../../admin/apps/WarningModal\", {\n  \"default\": function (v) {\n    WarningModal = v;\n  }\n}, 15);\nvar useTabBarClose;\nmodule.link(\"../../../providers/ToolboxProvider\", {\n  useTabBarClose: function (v) {\n    useTabBarClose = v;\n  }\n}, 16);\nvar ChannelToTeamModal;\nmodule.link(\"../ChannelToTeamModal/ChannelToTeamModal\", {\n  \"default\": function (v) {\n    ChannelToTeamModal = v;\n  }\n}, 17);\nvar RoomInfo;\nmodule.link(\"./RoomInfo\", {\n  \"default\": function (v) {\n    RoomInfo = v;\n  }\n}, 18);\nvar retentionPolicyMaxAge = {\n  c: 'RetentionPolicy_MaxAge_Channels',\n  p: 'RetentionPolicy_MaxAge_Groups',\n  d: 'RetentionPolicy_MaxAge_DMs'\n};\nvar retentionPolicyAppliesTo = {\n  c: 'RetentionPolicy_AppliesToChannels',\n  p: 'RetentionPolicy_AppliesToGroups',\n  d: 'RetentionPolicy_AppliesToDMs'\n};\n\nvar RoomInfoWithData = function (_ref) {\n  var rid = _ref.rid,\n      openEditing = _ref.openEditing,\n      onClickBack = _ref.onClickBack,\n      onEnterRoom = _ref.onEnterRoom,\n      resetState = _ref.resetState;\n  var onClickClose = useTabBarClose();\n  var t = useTranslation();\n  var room = useUserRoom(rid);\n  room.type = room.t;\n  room.rid = rid;\n  var type = room.type,\n      fname = room.fname,\n      prid = room.prid,\n      _room$joined = room.joined,\n      joined = _room$joined === void 0 ? true : _room$joined; // TODO implement joined\n\n  var retentionPolicyEnabled = useSetting('RetentionPolicy_Enabled');\n  var retentionPolicy = {\n    retentionPolicyEnabled: retentionPolicyEnabled,\n    maxAgeDefault: useSetting(retentionPolicyMaxAge[room.t]) || 30,\n    retentionEnabledDefault: useSetting(retentionPolicyAppliesTo[room.t]),\n    excludePinnedDefault: useSetting('RetentionPolicy_DoNotPrunePinned'),\n    filesOnlyDefault: useSetting('RetentionPolicy_FilesOnly')\n  };\n  var dispatchToastMessage = useToastMessageDispatch();\n  var setModal = useSetModal();\n  var closeModal = useMutableCallback(function () {\n    return setModal();\n  });\n  var deleteRoom = useEndpoint('POST', room.t === 'c' ? 'channels.delete' : 'groups.delete');\n  var hideRoom = useMethod('hideRoom');\n  var leaveRoom = useMethod('leaveRoom');\n  var router = useRoute('home');\n  var moveChannelToTeam = useEndpointActionExperimental('POST', 'teams.addRooms', t('Rooms_added_successfully'));\n  var convertRoomToTeam = useEndpointActionExperimental('POST', type === 'c' ? 'channels.convertToTeam' : 'groups.convertToTeam', t('Success'));\n  var canDelete = usePermission(type === 'c' ? 'delete-c' : 'delete-p', rid);\n  var canEdit = usePermission('edit-room', rid);\n  var canConvertRoomToTeam = usePermission('create-team');\n  var canLeave = usePermission(type === 'c' ? 'leave-c' : 'leave-p') && room.cl !== false && joined;\n  var handleDelete = useMutableCallback(function () {\n    var onConfirm = function () {\n      function _callee() {\n        return _regeneratorRuntime.async(function () {\n          function _callee$(_context) {\n            while (1) {\n              switch (_context.prev = _context.next) {\n                case 0:\n                  _context.prev = 0;\n                  resetState && resetState({});\n                  _context.next = 4;\n                  return _regeneratorRuntime.awrap(deleteRoom({\n                    roomId: rid\n                  }));\n\n                case 4:\n                  dispatchToastMessage({\n                    type: 'success',\n                    message: t('Room_has_been_deleted')\n                  });\n                  !resetState && router.push({});\n                  _context.next = 11;\n                  break;\n\n                case 8:\n                  _context.prev = 8;\n                  _context.t0 = _context[\"catch\"](0);\n                  dispatchToastMessage({\n                    type: 'error',\n                    message: _context.t0\n                  });\n\n                case 11:\n                  closeModal();\n\n                case 12:\n                case \"end\":\n                  return _context.stop();\n              }\n            }\n          }\n\n          return _callee$;\n        }(), null, null, [[0, 8]], Promise);\n      }\n\n      return _callee;\n    }();\n\n    setModal( /*#__PURE__*/React.createElement(GenericModal, {\n      variant: \"danger\",\n      onConfirm: onConfirm,\n      onCancel: closeModal,\n      confirmText: t('Yes_delete_it')\n    }, t('Delete_Room_Warning')));\n  });\n  var handleLeave = useMutableCallback(function () {\n    var _roomCoordinator$getR;\n\n    var leave = function () {\n      function _callee2() {\n        return _regeneratorRuntime.async(function () {\n          function _callee2$(_context2) {\n            while (1) {\n              switch (_context2.prev = _context2.next) {\n                case 0:\n                  _context2.prev = 0;\n                  _context2.next = 3;\n                  return _regeneratorRuntime.awrap(leaveRoom(rid));\n\n                case 3:\n                  router.push({});\n                  RoomManager.close(rid);\n                  _context2.next = 10;\n                  break;\n\n                case 7:\n                  _context2.prev = 7;\n                  _context2.t0 = _context2[\"catch\"](0);\n                  dispatchToastMessage({\n                    type: 'error',\n                    message: _context2.t0\n                  });\n\n                case 10:\n                  closeModal();\n\n                case 11:\n                case \"end\":\n                  return _context2.stop();\n              }\n            }\n          }\n\n          return _callee2$;\n        }(), null, null, [[0, 7]], Promise);\n      }\n\n      return _callee2;\n    }();\n\n    var warnText = (_roomCoordinator$getR = roomCoordinator.getRoomDirectives(type)) === null || _roomCoordinator$getR === void 0 ? void 0 : _roomCoordinator$getR.getUiText(UiTextContext.LEAVE_WARNING);\n    setModal( /*#__PURE__*/React.createElement(WarningModal, {\n      text: t(warnText, fname),\n      confirmText: t('Leave_room'),\n      close: closeModal,\n      cancel: closeModal,\n      cancelText: t('Cancel'),\n      confirm: leave\n    }));\n  });\n  var handleHide = useMutableCallback(function () {\n    function _callee4() {\n      var _roomCoordinator$getR2;\n\n      var hide, warnText;\n      return _regeneratorRuntime.async(function () {\n        function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                hide = function () {\n                  function _callee3() {\n                    return _regeneratorRuntime.async(function () {\n                      function _callee3$(_context3) {\n                        while (1) {\n                          switch (_context3.prev = _context3.next) {\n                            case 0:\n                              _context3.prev = 0;\n                              _context3.next = 3;\n                              return _regeneratorRuntime.awrap(hideRoom(rid));\n\n                            case 3:\n                              router.push({});\n                              _context3.next = 9;\n                              break;\n\n                            case 6:\n                              _context3.prev = 6;\n                              _context3.t0 = _context3[\"catch\"](0);\n                              dispatchToastMessage({\n                                type: 'error',\n                                message: _context3.t0\n                              });\n\n                            case 9:\n                              closeModal();\n\n                            case 10:\n                            case \"end\":\n                              return _context3.stop();\n                          }\n                        }\n                      }\n\n                      return _callee3$;\n                    }(), null, null, [[0, 6]], Promise);\n                  }\n\n                  return _callee3;\n                }();\n\n                warnText = (_roomCoordinator$getR2 = roomCoordinator.getRoomDirectives(type)) === null || _roomCoordinator$getR2 === void 0 ? void 0 : _roomCoordinator$getR2.getUiText(UiTextContext.HIDE_WARNING);\n                setModal( /*#__PURE__*/React.createElement(WarningModal, {\n                  text: t(warnText, fname),\n                  confirmText: t('Yes_hide_it'),\n                  close: closeModal,\n                  cancel: closeModal,\n                  cancelText: t('Cancel'),\n                  confirm: hide\n                }));\n\n              case 3:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }\n\n        return _callee4$;\n      }(), null, null, null, Promise);\n    }\n\n    return _callee4;\n  }());\n  var onMoveToTeam = useMutableCallback(function () {\n    function _callee6() {\n      var onConfirm;\n      return _regeneratorRuntime.async(function () {\n        function _callee6$(_context6) {\n          while (1) {\n            switch (_context6.prev = _context6.next) {\n              case 0:\n                onConfirm = function () {\n                  function _callee5(teamId) {\n                    return _regeneratorRuntime.async(function () {\n                      function _callee5$(_context5) {\n                        while (1) {\n                          switch (_context5.prev = _context5.next) {\n                            case 0:\n                              _context5.prev = 0;\n                              _context5.next = 3;\n                              return _regeneratorRuntime.awrap(moveChannelToTeam({\n                                rooms: [rid],\n                                teamId: teamId\n                              }));\n\n                            case 3:\n                              _context5.next = 8;\n                              break;\n\n                            case 5:\n                              _context5.prev = 5;\n                              _context5.t0 = _context5[\"catch\"](0);\n                              dispatchToastMessage({\n                                type: 'error',\n                                message: _context5.t0\n                              });\n\n                            case 8:\n                              _context5.prev = 8;\n                              closeModal();\n                              return _context5.finish(8);\n\n                            case 11:\n                            case \"end\":\n                              return _context5.stop();\n                          }\n                        }\n                      }\n\n                      return _callee5$;\n                    }(), null, null, [[0, 5, 8, 11]], Promise);\n                  }\n\n                  return _callee5;\n                }();\n\n                setModal( /*#__PURE__*/React.createElement(ChannelToTeamModal, {\n                  rid: rid,\n                  onClose: closeModal,\n                  onCancel: closeModal,\n                  onConfirm: onConfirm\n                }));\n\n              case 2:\n              case \"end\":\n                return _context6.stop();\n            }\n          }\n        }\n\n        return _callee6$;\n      }(), null, null, null, Promise);\n    }\n\n    return _callee6;\n  }());\n  var onConvertToTeam = useMutableCallback(function () {\n    function _callee8() {\n      var data, onConfirm;\n      return _regeneratorRuntime.async(function () {\n        function _callee8$(_context8) {\n          while (1) {\n            switch (_context8.prev = _context8.next) {\n              case 0:\n                data = type === 'c' ? {\n                  channelId: rid\n                } : {\n                  roomId: rid\n                };\n\n                onConfirm = function () {\n                  function _callee7() {\n                    return _regeneratorRuntime.async(function () {\n                      function _callee7$(_context7) {\n                        while (1) {\n                          switch (_context7.prev = _context7.next) {\n                            case 0:\n                              _context7.prev = 0;\n                              _context7.next = 3;\n                              return _regeneratorRuntime.awrap(convertRoomToTeam(data));\n\n                            case 3:\n                              _context7.next = 8;\n                              break;\n\n                            case 5:\n                              _context7.prev = 5;\n                              _context7.t0 = _context7[\"catch\"](0);\n                              dispatchToastMessage({\n                                type: 'error',\n                                message: _context7.t0\n                              });\n\n                            case 8:\n                              _context7.prev = 8;\n                              closeModal();\n                              return _context7.finish(8);\n\n                            case 11:\n                            case \"end\":\n                              return _context7.stop();\n                          }\n                        }\n                      }\n\n                      return _callee7$;\n                    }(), null, null, [[0, 5, 8, 11]], Promise);\n                  }\n\n                  return _callee7;\n                }();\n\n                setModal( /*#__PURE__*/React.createElement(GenericModal, {\n                  title: t('Confirmation'),\n                  variant: \"warning\",\n                  onClose: closeModal,\n                  onCancel: closeModal,\n                  onConfirm: onConfirm,\n                  confirmText: t('Convert')\n                }, t('Converting_channel_to_a_team')));\n\n              case 3:\n              case \"end\":\n                return _context8.stop();\n            }\n          }\n        }\n\n        return _callee8$;\n      }(), null, null, null, Promise);\n    }\n\n    return _callee8;\n  }());\n  var onClickEnterRoom = useMutableCallback(function () {\n    return onEnterRoom(room);\n  });\n  var allowConvertToTeam = !room.teamId && !prid && canConvertRoomToTeam && canEdit;\n  return /*#__PURE__*/React.createElement(RoomInfo, {\n    room: room,\n    icon: room.t === 'p' ? 'lock' : 'hashtag',\n    retentionPolicy: retentionPolicyEnabled && retentionPolicy,\n    onClickBack: onClickBack,\n    onClickEdit: canEdit && openEditing,\n    onClickClose: onClickClose,\n    onClickDelete: canDelete && handleDelete,\n    onClickLeave: canLeave && handleLeave,\n    onClickHide: joined && handleHide,\n    onClickMoveToTeam: !room.teamId && !prid && canEdit && onMoveToTeam,\n    onClickConvertToTeam: allowConvertToTeam && onConvertToTeam,\n    onClickEnterRoom: onEnterRoom && onClickEnterRoom\n  });\n};\n\nmodule.exportDefault(RoomInfoWithData);","map":{"version":3,"sources":["client/views/room/contextualBar/Info/RoomInfo/RoomInfoWithData.js"],"names":["_regeneratorRuntime","module","link","default","v","useMutableCallback","React","RoomManager","UiTextContext","GenericModal","usePermission","useSetModal","useRoute","useEndpoint","useMethod","useSetting","useToastMessageDispatch","useTranslation","useUserRoom","useEndpointActionExperimental","roomCoordinator","WarningModal","useTabBarClose","ChannelToTeamModal","RoomInfo","retentionPolicyMaxAge","c","p","d","retentionPolicyAppliesTo","RoomInfoWithData","rid","openEditing","onClickBack","onEnterRoom","resetState","onClickClose","t","room","type","fname","prid","joined","retentionPolicyEnabled","retentionPolicy","maxAgeDefault","retentionEnabledDefault","excludePinnedDefault","filesOnlyDefault","dispatchToastMessage","setModal","closeModal","deleteRoom","hideRoom","leaveRoom","router","moveChannelToTeam","convertRoomToTeam","canDelete","canEdit","canConvertRoomToTeam","canLeave","cl","handleDelete","onConfirm","roomId","message","push","handleLeave","leave","close","warnText","getRoomDirectives","getUiText","LEAVE_WARNING","handleHide","hide","HIDE_WARNING","onMoveToTeam","teamId","rooms","onConvertToTeam","data","channelId","onClickEnterRoom","allowConvertToTeam","exportDefault"],"mappings":"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","sourcesContent":["import { useMutableCallback } from '@rocket.chat/fuselage-hooks';\nimport React from 'react';\n\nimport { RoomManager } from '../../../../../../app/ui-utils/client/lib/RoomManager';\nimport { UiTextContext } from '../../../../../../definition/IRoomTypeConfig';\nimport GenericModal from '../../../../../components/GenericModal';\nimport { usePermission } from '../../../../../contexts/AuthorizationContext';\nimport { useSetModal } from '../../../../../contexts/ModalContext';\nimport { useRoute } from '../../../../../contexts/RouterContext';\nimport { useEndpoint, useMethod } from '../../../../../contexts/ServerContext';\nimport { useSetting } from '../../../../../contexts/SettingsContext';\nimport { useToastMessageDispatch } from '../../../../../contexts/ToastMessagesContext';\nimport { useTranslation } from '../../../../../contexts/TranslationContext';\nimport { useUserRoom } from '../../../../../contexts/UserContext';\nimport { useEndpointActionExperimental } from '../../../../../hooks/useEndpointActionExperimental';\nimport { roomCoordinator } from '../../../../../lib/rooms/roomCoordinator';\nimport WarningModal from '../../../../admin/apps/WarningModal';\nimport { useTabBarClose } from '../../../providers/ToolboxProvider';\nimport ChannelToTeamModal from '../ChannelToTeamModal/ChannelToTeamModal';\nimport RoomInfo from './RoomInfo';\n\nconst retentionPolicyMaxAge = {\n\tc: 'RetentionPolicy_MaxAge_Channels',\n\tp: 'RetentionPolicy_MaxAge_Groups',\n\td: 'RetentionPolicy_MaxAge_DMs',\n};\n\nconst retentionPolicyAppliesTo = {\n\tc: 'RetentionPolicy_AppliesToChannels',\n\tp: 'RetentionPolicy_AppliesToGroups',\n\td: 'RetentionPolicy_AppliesToDMs',\n};\n\nconst RoomInfoWithData = ({ rid, openEditing, onClickBack, onEnterRoom, resetState }) => {\n\tconst onClickClose = useTabBarClose();\n\tconst t = useTranslation();\n\n\tconst room = useUserRoom(rid);\n\troom.type = room.t;\n\troom.rid = rid;\n\n\tconst { type, fname, prid, joined = true } = room; // TODO implement joined\n\n\tconst retentionPolicyEnabled = useSetting('RetentionPolicy_Enabled');\n\tconst retentionPolicy = {\n\t\tretentionPolicyEnabled,\n\t\tmaxAgeDefault: useSetting(retentionPolicyMaxAge[room.t]) || 30,\n\t\tretentionEnabledDefault: useSetting(retentionPolicyAppliesTo[room.t]),\n\t\texcludePinnedDefault: useSetting('RetentionPolicy_DoNotPrunePinned'),\n\t\tfilesOnlyDefault: useSetting('RetentionPolicy_FilesOnly'),\n\t};\n\n\tconst dispatchToastMessage = useToastMessageDispatch();\n\tconst setModal = useSetModal();\n\tconst closeModal = useMutableCallback(() => setModal());\n\tconst deleteRoom = useEndpoint('POST', room.t === 'c' ? 'channels.delete' : 'groups.delete');\n\tconst hideRoom = useMethod('hideRoom');\n\tconst leaveRoom = useMethod('leaveRoom');\n\tconst router = useRoute('home');\n\n\tconst moveChannelToTeam = useEndpointActionExperimental('POST', 'teams.addRooms', t('Rooms_added_successfully'));\n\tconst convertRoomToTeam = useEndpointActionExperimental(\n\t\t'POST',\n\t\ttype === 'c' ? 'channels.convertToTeam' : 'groups.convertToTeam',\n\t\tt('Success'),\n\t);\n\n\tconst canDelete = usePermission(type === 'c' ? 'delete-c' : 'delete-p', rid);\n\tconst canEdit = usePermission('edit-room', rid);\n\tconst canConvertRoomToTeam = usePermission('create-team');\n\tconst canLeave = usePermission(type === 'c' ? 'leave-c' : 'leave-p') && room.cl !== false && joined;\n\n\tconst handleDelete = useMutableCallback(() => {\n\t\tconst onConfirm = async () => {\n\t\t\ttry {\n\t\t\t\tresetState && resetState({});\n\t\t\t\tawait deleteRoom({ roomId: rid });\n\t\t\t\tdispatchToastMessage({ type: 'success', message: t('Room_has_been_deleted') });\n\t\t\t\t!resetState && router.push({});\n\t\t\t} catch (error) {\n\t\t\t\tdispatchToastMessage({ type: 'error', message: error });\n\t\t\t}\n\t\t\tcloseModal();\n\t\t};\n\n\t\tsetModal(\n\t\t\t<GenericModal variant='danger' onConfirm={onConfirm} onCancel={closeModal} confirmText={t('Yes_delete_it')}>\n\t\t\t\t{t('Delete_Room_Warning')}\n\t\t\t</GenericModal>,\n\t\t);\n\t});\n\n\tconst handleLeave = useMutableCallback(() => {\n\t\tconst leave = async () => {\n\t\t\ttry {\n\t\t\t\tawait leaveRoom(rid);\n\t\t\t\trouter.push({});\n\t\t\t\tRoomManager.close(rid);\n\t\t\t} catch (error) {\n\t\t\t\tdispatchToastMessage({ type: 'error', message: error });\n\t\t\t}\n\t\t\tcloseModal();\n\t\t};\n\n\t\tconst warnText = roomCoordinator.getRoomDirectives(type)?.getUiText(UiTextContext.LEAVE_WARNING);\n\n\t\tsetModal(\n\t\t\t<WarningModal\n\t\t\t\ttext={t(warnText, fname)}\n\t\t\t\tconfirmText={t('Leave_room')}\n\t\t\t\tclose={closeModal}\n\t\t\t\tcancel={closeModal}\n\t\t\t\tcancelText={t('Cancel')}\n\t\t\t\tconfirm={leave}\n\t\t\t/>,\n\t\t);\n\t});\n\n\tconst handleHide = useMutableCallback(async () => {\n\t\tconst hide = async () => {\n\t\t\ttry {\n\t\t\t\tawait hideRoom(rid);\n\t\t\t\trouter.push({});\n\t\t\t} catch (error) {\n\t\t\t\tdispatchToastMessage({ type: 'error', message: error });\n\t\t\t}\n\t\t\tcloseModal();\n\t\t};\n\n\t\tconst warnText = roomCoordinator.getRoomDirectives(type)?.getUiText(UiTextContext.HIDE_WARNING);\n\n\t\tsetModal(\n\t\t\t<WarningModal\n\t\t\t\ttext={t(warnText, fname)}\n\t\t\t\tconfirmText={t('Yes_hide_it')}\n\t\t\t\tclose={closeModal}\n\t\t\t\tcancel={closeModal}\n\t\t\t\tcancelText={t('Cancel')}\n\t\t\t\tconfirm={hide}\n\t\t\t/>,\n\t\t);\n\t});\n\n\tconst onMoveToTeam = useMutableCallback(async () => {\n\t\tconst onConfirm = async (teamId) => {\n\t\t\ttry {\n\t\t\t\tawait moveChannelToTeam({ rooms: [rid], teamId });\n\t\t\t} catch (error) {\n\t\t\t\tdispatchToastMessage({ type: 'error', message: error });\n\t\t\t} finally {\n\t\t\t\tcloseModal();\n\t\t\t}\n\t\t};\n\n\t\tsetModal(<ChannelToTeamModal rid={rid} onClose={closeModal} onCancel={closeModal} onConfirm={onConfirm} />);\n\t});\n\n\tconst onConvertToTeam = useMutableCallback(async () => {\n\t\tconst data = type === 'c' ? { channelId: rid } : { roomId: rid };\n\t\tconst onConfirm = async () => {\n\t\t\ttry {\n\t\t\t\tawait convertRoomToTeam(data);\n\t\t\t} catch (error) {\n\t\t\t\tdispatchToastMessage({ type: 'error', message: error });\n\t\t\t} finally {\n\t\t\t\tcloseModal();\n\t\t\t}\n\t\t};\n\n\t\tsetModal(\n\t\t\t<GenericModal\n\t\t\t\ttitle={t('Confirmation')}\n\t\t\t\tvariant='warning'\n\t\t\t\tonClose={closeModal}\n\t\t\t\tonCancel={closeModal}\n\t\t\t\tonConfirm={onConfirm}\n\t\t\t\tconfirmText={t('Convert')}\n\t\t\t>\n\t\t\t\t{t('Converting_channel_to_a_team')}\n\t\t\t</GenericModal>,\n\t\t);\n\t});\n\n\tconst onClickEnterRoom = useMutableCallback(() => onEnterRoom(room));\n\tconst allowConvertToTeam = !room.teamId && !prid && canConvertRoomToTeam && canEdit;\n\n\treturn (\n\t\t<RoomInfo\n\t\t\troom={room}\n\t\t\ticon={room.t === 'p' ? 'lock' : 'hashtag'}\n\t\t\tretentionPolicy={retentionPolicyEnabled && retentionPolicy}\n\t\t\tonClickBack={onClickBack}\n\t\t\tonClickEdit={canEdit && openEditing}\n\t\t\tonClickClose={onClickClose}\n\t\t\tonClickDelete={canDelete && handleDelete}\n\t\t\tonClickLeave={canLeave && handleLeave}\n\t\t\tonClickHide={joined && handleHide}\n\t\t\tonClickMoveToTeam={!room.teamId && !prid && canEdit && onMoveToTeam}\n\t\t\tonClickConvertToTeam={allowConvertToTeam && onConvertToTeam}\n\t\t\tonClickEnterRoom={onEnterRoom && onClickEnterRoom}\n\t\t/>\n\t);\n};\n\nexport default RoomInfoWithData;\n"]},"sourceType":"module","hash":"1cdc13c32e4e95d7d5db4a1a4d39a924c3d79dc5"}
