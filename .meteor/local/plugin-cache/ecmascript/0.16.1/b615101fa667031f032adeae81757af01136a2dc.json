{"metadata":{},"options":{"assumptions":{},"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat/client/views/admin/rooms/EditRoom.js","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","classProperties","classPrivateProperties","jsx","nullishCoalescingOperator","nullishCoalescingOperator","optionalChaining","optionalCatchBinding","optionalCatchBinding","classProperties","classPrivateProperties","classPrivateMethods","classProperties","classPrivateProperties","asyncGenerators","asyncGenerators","objectRestSpread","logicalAssignment"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"allowUndeclaredExports":true,"strictMode":false},"caller":{"name":"meteor","arch":"web.browser.legacy"},"sourceFileName":"client/views/admin/rooms/EditRoom.js","filename":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat/client/views/admin/rooms/EditRoom.js","targets":{"android":"95.0.0","chrome":"95.0.0","edge":"95.0.0","firefox":"78.0.0","ie":"10.0.0","ios":"15.0.0","opera":"81.0.0","safari":"15.1.0","samsung":"14.0.0"},"cloneInputAst":true,"browserslistConfigFile":false,"passPerPreset":false,"envName":"development","cwd":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat","root":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat","rootMode":"root","plugins":[{"key":"base$0","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0","visitor":{"Program":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true},"options":{"avoidModernSyntax":true,"enforceStrictMode":false,"dynamicImport":true}},{"key":"transform-runtime","visitor":{"MemberExpression":{"enter":[null]},"ObjectPattern":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":{},"_verified":{},"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]}},"options":{"version":"7.16.5","helpers":true,"useESModules":false,"corejs":false}},{"key":"proposal-class-properties","visitor":{"PrivateName":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{"loose":true}},{"key":"base$0$3","visitor":{"FunctionExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$4","visitor":{"ForInStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-react-jsx","visitor":{"_exploded":{},"_verified":{},"JSXNamespacedName":{"enter":[null]},"JSXSpreadChild":{"enter":[null]},"Program":{"enter":[null]},"JSXElement":{"exit":[null]},"JSXFragment":{"exit":[null]},"JSXAttribute":{"enter":[null]}},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","runtime":"classic","throwIfNamespace":true,"useBuiltIns":false}},{"key":"transform-react-display-name","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-react-pure-annotations","visitor":{"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"syntax-nullish-coalescing-operator","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-nullish-coalescing-operator","visitor":{"_exploded":{},"_verified":{},"LogicalExpression":{"enter":[null]}},"options":{}},{"key":"syntax-optional-chaining","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-optional-chaining","visitor":{"_exploded":true,"OptionalCallExpression":{"enter":[null]},"OptionalMemberExpression":{"enter":[null]},"_verified":true},"options":{}},{"key":"syntax-optional-catch-binding","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-optional-catch-binding","visitor":{"_exploded":{},"_verified":{},"CatchClause":{"enter":[null]}},"options":{}},{"key":"syntax-class-properties","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-class-properties","visitor":{"PrivateName":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{}},{"key":"syntax-async-generators","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-async-generator-functions","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]}},"options":{}},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-object-rest-spread","visitor":{"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"proposal-logical-assignment-operators","visitor":{"_exploded":{},"_verified":{},"AssignmentExpression":{"enter":[null]}},"options":{}},{"key":"transform-arrow-functions","visitor":{"ArrowFunctionExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-block-scoped-functions","visitor":{"BlockStatement":{"enter":[null]},"SwitchCase":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-block-scoping","visitor":{"VariableDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"_exploded":true,"BlockStatement":{"enter":[null]},"SwitchStatement":{"enter":[null]},"Program":{"enter":[null]},"_verified":true,"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"transform-classes","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-computed-properties","visitor":{"ObjectExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-destructuring","visitor":{"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"VariableDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"transform-for-of","visitor":{"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-literals","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-object-super","visitor":{"ObjectExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-parameters","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{}},{"key":"transform-shorthand-properties","visitor":{"ObjectMethod":{"enter":[null]},"ObjectProperty":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-spread","visitor":{"ArrayExpression":{"enter":[null]},"CallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-sticky-regex","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-template-literals","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-typeof-symbol","visitor":{"UnaryExpression":{"enter":[null]},"_exploded":true,"_verified":true,"BlockStatement":{"enter":[null]},"CatchClause":{"enter":[null]},"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"Program":{"enter":[null]},"ObjectMethod":{"enter":[null]},"SwitchStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ForOfStatement":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"StaticBlock":{"enter":[null]},"TSModuleBlock":{"enter":[null]},"AssignmentPattern":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectPattern":{"enter":[null]}},"options":{}},{"key":"transform-unicode-regex","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-property-literals","visitor":{"ObjectProperty":{"exit":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-exponentiation-operator","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"regenerator-transform","visitor":{"_exploded":true,"_verified":true,"ObjectMethod":{"enter":[null],"exit":[null]},"ClassMethod":{"enter":[null],"exit":[null]},"ClassPrivateMethod":{"enter":[null],"exit":[null]},"FunctionDeclaration":{"exit":[null]},"FunctionExpression":{"exit":[null]},"ArrowFunctionExpression":{"exit":[null]}},"options":{}}],"presets":[],"generatorOpts":{"filename":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat/client/views/admin/rooms/EditRoom.js","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"client/views/admin/rooms/EditRoom.js"}},"code":"var _regeneratorRuntime;\n\nmodule.link(\"@babel/runtime/regenerator\", {\n  default: function (v) {\n    _regeneratorRuntime = v;\n  }\n}, 0);\n\nvar _slicedToArray;\n\nmodule.link(\"@babel/runtime/helpers/slicedToArray\", {\n  default: function (v) {\n    _slicedToArray = v;\n  }\n}, 1);\n\nvar _objectSpread;\n\nmodule.link(\"@babel/runtime/helpers/objectSpread2\", {\n  default: function (v) {\n    _objectSpread = v;\n  }\n}, 2);\nvar Box, Button, ButtonGroup, TextInput, Field, ToggleSwitch, Icon, TextAreaInput;\nmodule.link(\"@rocket.chat/fuselage\", {\n  Box: function (v) {\n    Box = v;\n  },\n  Button: function (v) {\n    Button = v;\n  },\n  ButtonGroup: function (v) {\n    ButtonGroup = v;\n  },\n  TextInput: function (v) {\n    TextInput = v;\n  },\n  Field: function (v) {\n    Field = v;\n  },\n  ToggleSwitch: function (v) {\n    ToggleSwitch = v;\n  },\n  Icon: function (v) {\n    Icon = v;\n  },\n  TextAreaInput: function (v) {\n    TextAreaInput = v;\n  }\n}, 0);\nvar useMutableCallback;\nmodule.link(\"@rocket.chat/fuselage-hooks\", {\n  useMutableCallback: function (v) {\n    useMutableCallback = v;\n  }\n}, 1);\nvar React, useState, useMemo;\nmodule.link(\"react\", {\n  \"default\": function (v) {\n    React = v;\n  },\n  useState: function (v) {\n    useState = v;\n  },\n  useMemo: function (v) {\n    useMemo = v;\n  }\n}, 2);\nvar RoomSettingsEnum;\nmodule.link(\"../../../../definition/IRoomTypeConfig\", {\n  RoomSettingsEnum: function (v) {\n    RoomSettingsEnum = v;\n  }\n}, 3);\nvar GenericModal;\nmodule.link(\"../../../components/GenericModal\", {\n  \"default\": function (v) {\n    GenericModal = v;\n  }\n}, 4);\nvar VerticalBar;\nmodule.link(\"../../../components/VerticalBar\", {\n  \"default\": function (v) {\n    VerticalBar = v;\n  }\n}, 5);\nvar RoomAvatarEditor;\nmodule.link(\"../../../components/avatar/RoomAvatarEditor\", {\n  \"default\": function (v) {\n    RoomAvatarEditor = v;\n  }\n}, 6);\nvar usePermission;\nmodule.link(\"../../../contexts/AuthorizationContext\", {\n  usePermission: function (v) {\n    usePermission = v;\n  }\n}, 7);\nvar useSetModal;\nmodule.link(\"../../../contexts/ModalContext\", {\n  useSetModal: function (v) {\n    useSetModal = v;\n  }\n}, 8);\nvar useRoute;\nmodule.link(\"../../../contexts/RouterContext\", {\n  useRoute: function (v) {\n    useRoute = v;\n  }\n}, 9);\nvar useEndpoint, useMethod;\nmodule.link(\"../../../contexts/ServerContext\", {\n  useEndpoint: function (v) {\n    useEndpoint = v;\n  },\n  useMethod: function (v) {\n    useMethod = v;\n  }\n}, 10);\nvar useToastMessageDispatch;\nmodule.link(\"../../../contexts/ToastMessagesContext\", {\n  useToastMessageDispatch: function (v) {\n    useToastMessageDispatch = v;\n  }\n}, 11);\nvar useTranslation;\nmodule.link(\"../../../contexts/TranslationContext\", {\n  useTranslation: function (v) {\n    useTranslation = v;\n  }\n}, 12);\nvar useEndpointActionExperimental;\nmodule.link(\"../../../hooks/useEndpointActionExperimental\", {\n  useEndpointActionExperimental: function (v) {\n    useEndpointActionExperimental = v;\n  }\n}, 13);\nvar useForm;\nmodule.link(\"../../../hooks/useForm\", {\n  useForm: function (v) {\n    useForm = v;\n  }\n}, 14);\nvar roomCoordinator;\nmodule.link(\"../../../lib/rooms/roomCoordinator\", {\n  roomCoordinator: function (v) {\n    roomCoordinator = v;\n  }\n}, 15);\nvar DeleteTeamModal;\nmodule.link(\"../../teams/contextualBar/info/Delete/DeleteTeamModal\", {\n  \"default\": function (v) {\n    DeleteTeamModal = v;\n  }\n}, 16);\n\nvar getInitialValues = function (room) {\n  var _room$topic, _room$description, _room$announcement;\n\n  return {\n    roomName: room.t === 'd' ? room.usernames.join(' x ') : roomCoordinator.getRoomName(room.t, _objectSpread({\n      type: room.t\n    }, room)),\n    roomType: room.t,\n    readOnly: !!room.ro,\n    archived: !!room.archived,\n    isDefault: !!room.default,\n    favorite: !!room.favorite,\n    featured: !!room.featured,\n    roomTopic: (_room$topic = room.topic) !== null && _room$topic !== void 0 ? _room$topic : '',\n    roomDescription: (_room$description = room.description) !== null && _room$description !== void 0 ? _room$description : '',\n    roomAnnouncement: (_room$announcement = room.announcement) !== null && _room$announcement !== void 0 ? _room$announcement : '',\n    roomAvatar: undefined\n  };\n};\n\nfunction EditRoom(_ref) {\n  var _room$u;\n\n  var room = _ref.room,\n      onChange = _ref.onChange,\n      onDelete = _ref.onDelete;\n  var t = useTranslation();\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      deleting = _useState2[0],\n      setDeleting = _useState2[1];\n\n  var setModal = useSetModal();\n  var dispatchToastMessage = useToastMessageDispatch();\n\n  var _useForm = useForm(getInitialValues(room)),\n      values = _useForm.values,\n      handlers = _useForm.handlers,\n      hasUnsavedChanges = _useForm.hasUnsavedChanges,\n      reset = _useForm.reset;\n\n  var _useMemo = useMemo(function () {\n    var _roomCoordinator$getR;\n\n    var isAllowed = (_roomCoordinator$getR = roomCoordinator.getRoomDirectives(room.t)) === null || _roomCoordinator$getR === void 0 ? void 0 : _roomCoordinator$getR.allowRoomSettingChange;\n    return [isAllowed(room, RoomSettingsEnum.NAME), isAllowed(room, RoomSettingsEnum.TOPIC), isAllowed(room, RoomSettingsEnum.ANNOUNCEMENT), isAllowed(room, RoomSettingsEnum.ARCHIVE_OR_UNARCHIVE), isAllowed(room, RoomSettingsEnum.DESCRIPTION), isAllowed(room, RoomSettingsEnum.TYPE), isAllowed(room, RoomSettingsEnum.READ_ONLY)];\n  }, [room]),\n      _useMemo2 = _slicedToArray(_useMemo, 7),\n      canViewName = _useMemo2[0],\n      canViewTopic = _useMemo2[1],\n      canViewAnnouncement = _useMemo2[2],\n      canViewArchived = _useMemo2[3],\n      canViewDescription = _useMemo2[4],\n      canViewType = _useMemo2[5],\n      canViewReadOnly = _useMemo2[6];\n\n  var roomName = values.roomName,\n      roomType = values.roomType,\n      readOnly = values.readOnly,\n      archived = values.archived,\n      isDefault = values.isDefault,\n      favorite = values.favorite,\n      featured = values.featured,\n      roomTopic = values.roomTopic,\n      roomAvatar = values.roomAvatar,\n      roomDescription = values.roomDescription,\n      roomAnnouncement = values.roomAnnouncement;\n  var handleIsDefault = handlers.handleIsDefault,\n      handleFavorite = handlers.handleFavorite,\n      handleFeatured = handlers.handleFeatured,\n      handleRoomName = handlers.handleRoomName,\n      handleRoomType = handlers.handleRoomType,\n      handleReadOnly = handlers.handleReadOnly,\n      handleArchived = handlers.handleArchived,\n      handleRoomAvatar = handlers.handleRoomAvatar,\n      handleRoomTopic = handlers.handleRoomTopic,\n      handleRoomDescription = handlers.handleRoomDescription,\n      handleRoomAnnouncement = handlers.handleRoomAnnouncement;\n  var changeArchivation = archived !== !!room.archived;\n  var roomsRoute = useRoute('admin-rooms');\n  var canDelete = usePermission(\"delete-\" + room.t);\n  var archiveSelector = room.archived ? 'unarchive' : 'archive';\n  var archiveMessage = room.archived ? 'Room_has_been_unarchived' : 'Room_has_been_archived';\n  var saveAction = useEndpointActionExperimental('POST', 'rooms.saveRoomSettings', t('Room_updated_successfully'));\n  var archiveAction = useEndpointActionExperimental('POST', 'rooms.changeArchivationState', t(archiveMessage));\n  var handleSave = useMutableCallback(function () {\n    function _callee() {\n      var save, archive;\n      return _regeneratorRuntime.async(function () {\n        function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                save = function () {\n                  return saveAction({\n                    rid: room._id,\n                    roomName: roomType === 'd' ? undefined : roomName,\n                    roomTopic: roomTopic,\n                    roomType: roomType,\n                    readOnly: readOnly,\n                    \"default\": isDefault,\n                    favorite: {\n                      defaultValue: isDefault,\n                      favorite: favorite\n                    },\n                    featured: featured,\n                    roomDescription: roomDescription,\n                    roomAnnouncement: roomAnnouncement,\n                    roomAvatar: roomAvatar\n                  });\n                };\n\n                archive = function () {\n                  return archiveAction({\n                    rid: room._id,\n                    action: archiveSelector\n                  });\n                };\n\n                _context.next = 4;\n                return _regeneratorRuntime.awrap(Promise.all([hasUnsavedChanges && save(), changeArchivation && archive()].filter(Boolean)));\n\n              case 4:\n                onChange();\n\n              case 5:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }\n\n        return _callee$;\n      }(), null, null, null, Promise);\n    }\n\n    return _callee;\n  }());\n  var changeRoomType = useMutableCallback(function () {\n    handleRoomType(roomType === 'p' ? 'c' : 'p');\n  });\n  var eraseRoom = useMethod('eraseRoom');\n  var deleteTeam = useEndpoint('POST', 'teams.delete');\n  var handleDelete = useMutableCallback(function () {\n    if (room.teamMain) {\n      setModal( /*#__PURE__*/React.createElement(DeleteTeamModal, {\n        onConfirm: function () {\n          function _callee2(deletedRooms) {\n            var roomsToRemove;\n            return _regeneratorRuntime.async(function () {\n              function _callee2$(_context2) {\n                while (1) {\n                  switch (_context2.prev = _context2.next) {\n                    case 0:\n                      roomsToRemove = Array.isArray(deletedRooms) && deletedRooms.length > 0 ? deletedRooms : [];\n                      _context2.prev = 1;\n                      setDeleting(true);\n                      setModal(null);\n                      _context2.next = 6;\n                      return _regeneratorRuntime.awrap(deleteTeam(_objectSpread({\n                        teamId: room.teamId\n                      }, roomsToRemove.length && {\n                        roomsToRemove: roomsToRemove\n                      })));\n\n                    case 6:\n                      dispatchToastMessage({\n                        type: 'success',\n                        message: t('Team_has_been_deleted')\n                      });\n                      roomsRoute.push({});\n                      _context2.next = 14;\n                      break;\n\n                    case 10:\n                      _context2.prev = 10;\n                      _context2.t0 = _context2[\"catch\"](1);\n                      dispatchToastMessage({\n                        type: 'error',\n                        message: _context2.t0\n                      });\n                      setDeleting(false);\n\n                    case 14:\n                      _context2.prev = 14;\n                      onDelete();\n                      return _context2.finish(14);\n\n                    case 17:\n                    case \"end\":\n                      return _context2.stop();\n                  }\n                }\n              }\n\n              return _callee2$;\n            }(), null, null, [[1, 10, 14, 17]], Promise);\n          }\n\n          return _callee2;\n        }(),\n        onCancel: function () {\n          return setModal(null);\n        },\n        teamId: room.teamId\n      }));\n      return;\n    }\n\n    setModal( /*#__PURE__*/React.createElement(GenericModal, {\n      variant: \"danger\",\n      onConfirm: function () {\n        function _callee3() {\n          return _regeneratorRuntime.async(function () {\n            function _callee3$(_context3) {\n              while (1) {\n                switch (_context3.prev = _context3.next) {\n                  case 0:\n                    _context3.prev = 0;\n                    setDeleting(true);\n                    setModal(null);\n                    _context3.next = 5;\n                    return _regeneratorRuntime.awrap(eraseRoom(room._id));\n\n                  case 5:\n                    dispatchToastMessage({\n                      type: 'success',\n                      message: t('Room_has_been_deleted')\n                    });\n                    roomsRoute.push({});\n                    _context3.next = 13;\n                    break;\n\n                  case 9:\n                    _context3.prev = 9;\n                    _context3.t0 = _context3[\"catch\"](0);\n                    dispatchToastMessage({\n                      type: 'error',\n                      message: _context3.t0\n                    });\n                    setDeleting(false);\n\n                  case 13:\n                    _context3.prev = 13;\n                    onDelete();\n                    return _context3.finish(13);\n\n                  case 16:\n                  case \"end\":\n                    return _context3.stop();\n                }\n              }\n            }\n\n            return _callee3$;\n          }(), null, null, [[0, 9, 13, 16]], Promise);\n        }\n\n        return _callee3;\n      }(),\n      onCancel: function () {\n        return setModal(null);\n      },\n      confirmText: t('Yes_delete_it')\n    }, t('Delete_Room_Warning')));\n  });\n  return /*#__PURE__*/React.createElement(VerticalBar.ScrollableContent, {\n    is: \"form\",\n    onSubmit: useMutableCallback(function (e) {\n      return e.preventDefault();\n    })\n  }, room.t !== 'd' && /*#__PURE__*/React.createElement(Box, {\n    pbe: \"x24\",\n    display: \"flex\",\n    justifyContent: \"center\"\n  }, /*#__PURE__*/React.createElement(RoomAvatarEditor, {\n    roomAvatar: roomAvatar,\n    room: room,\n    onChangeAvatar: handleRoomAvatar\n  })), /*#__PURE__*/React.createElement(Field, null, /*#__PURE__*/React.createElement(Field.Label, null, t('Name')), /*#__PURE__*/React.createElement(Field.Row, null, /*#__PURE__*/React.createElement(TextInput, {\n    disabled: deleting || !canViewName,\n    value: roomName,\n    onChange: handleRoomName,\n    flexGrow: 1\n  }))), room.t !== 'd' && /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Field, null, /*#__PURE__*/React.createElement(Field.Label, null, t('Owner')), /*#__PURE__*/React.createElement(Field.Row, null, /*#__PURE__*/React.createElement(Box, {\n    fontScale: \"p2\"\n  }, (_room$u = room.u) === null || _room$u === void 0 ? void 0 : _room$u.username))), canViewDescription && /*#__PURE__*/React.createElement(Field, null, /*#__PURE__*/React.createElement(Field.Label, null, t('Description')), /*#__PURE__*/React.createElement(Field.Row, null, /*#__PURE__*/React.createElement(TextAreaInput, {\n    rows: 4,\n    disabled: deleting,\n    value: roomDescription,\n    onChange: handleRoomDescription,\n    flexGrow: 1\n  }))), canViewAnnouncement && /*#__PURE__*/React.createElement(Field, null, /*#__PURE__*/React.createElement(Field.Label, null, t('Announcement')), /*#__PURE__*/React.createElement(Field.Row, null, /*#__PURE__*/React.createElement(TextAreaInput, {\n    rows: 4,\n    disabled: deleting,\n    value: roomAnnouncement,\n    onChange: handleRoomAnnouncement,\n    flexGrow: 1\n  }))), canViewTopic && /*#__PURE__*/React.createElement(Field, null, /*#__PURE__*/React.createElement(Field.Label, null, t('Topic')), /*#__PURE__*/React.createElement(Field.Row, null, /*#__PURE__*/React.createElement(TextAreaInput, {\n    rows: 4,\n    disabled: deleting,\n    value: roomTopic,\n    onChange: handleRoomTopic,\n    flexGrow: 1\n  }))), canViewType && /*#__PURE__*/React.createElement(Field, null, /*#__PURE__*/React.createElement(Field.Row, null, /*#__PURE__*/React.createElement(Field.Label, null, t('Private')), /*#__PURE__*/React.createElement(ToggleSwitch, {\n    disabled: deleting,\n    checked: roomType === 'p',\n    onChange: changeRoomType\n  })), /*#__PURE__*/React.createElement(Field.Hint, null, t('Just_invited_people_can_access_this_channel'))), canViewReadOnly && /*#__PURE__*/React.createElement(Field, null, /*#__PURE__*/React.createElement(Field.Row, null, /*#__PURE__*/React.createElement(Box, {\n    display: \"flex\",\n    flexDirection: \"row\",\n    justifyContent: \"space-between\",\n    flexGrow: 1\n  }, /*#__PURE__*/React.createElement(Field.Label, null, t('Read_only')), /*#__PURE__*/React.createElement(ToggleSwitch, {\n    disabled: deleting,\n    checked: readOnly,\n    onChange: handleReadOnly\n  }))), /*#__PURE__*/React.createElement(Field.Hint, null, t('Only_authorized_users_can_write_new_messages'))), canViewArchived && /*#__PURE__*/React.createElement(Field, null, /*#__PURE__*/React.createElement(Field.Row, null, /*#__PURE__*/React.createElement(Box, {\n    display: \"flex\",\n    flexDirection: \"row\",\n    justifyContent: \"space-between\",\n    flexGrow: 1\n  }, /*#__PURE__*/React.createElement(Field.Label, null, t('Room_archivation_state_true')), /*#__PURE__*/React.createElement(ToggleSwitch, {\n    disabled: deleting,\n    checked: archived,\n    onChange: handleArchived\n  }))))), /*#__PURE__*/React.createElement(Field, null, /*#__PURE__*/React.createElement(Field.Row, null, /*#__PURE__*/React.createElement(Box, {\n    display: \"flex\",\n    flexDirection: \"row\",\n    justifyContent: \"space-between\",\n    flexGrow: 1\n  }, /*#__PURE__*/React.createElement(Field.Label, null, t('Default')), /*#__PURE__*/React.createElement(ToggleSwitch, {\n    disabled: deleting,\n    checked: isDefault,\n    onChange: handleIsDefault\n  })))), /*#__PURE__*/React.createElement(Field, null, /*#__PURE__*/React.createElement(Field.Row, null, /*#__PURE__*/React.createElement(Box, {\n    display: \"flex\",\n    flexDirection: \"row\",\n    justifyContent: \"space-between\",\n    flexGrow: 1\n  }, /*#__PURE__*/React.createElement(Field.Label, null, t('Favorite')), /*#__PURE__*/React.createElement(ToggleSwitch, {\n    disabled: deleting,\n    checked: favorite,\n    onChange: handleFavorite\n  })))), /*#__PURE__*/React.createElement(Field, null, /*#__PURE__*/React.createElement(Field.Row, null, /*#__PURE__*/React.createElement(Box, {\n    display: \"flex\",\n    flexDirection: \"row\",\n    justifyContent: \"space-between\",\n    flexGrow: 1\n  }, /*#__PURE__*/React.createElement(Field.Label, null, t('Featured')), /*#__PURE__*/React.createElement(ToggleSwitch, {\n    disabled: deleting,\n    checked: featured,\n    onChange: handleFeatured\n  })))), /*#__PURE__*/React.createElement(Field, null, /*#__PURE__*/React.createElement(Field.Row, null, /*#__PURE__*/React.createElement(Box, {\n    display: \"flex\",\n    flexDirection: \"row\",\n    justifyContent: \"space-between\",\n    w: \"full\"\n  }, /*#__PURE__*/React.createElement(ButtonGroup, {\n    stretch: true,\n    flexGrow: 1\n  }, /*#__PURE__*/React.createElement(Button, {\n    type: \"reset\",\n    disabled: !hasUnsavedChanges || deleting,\n    onClick: reset\n  }, t('Reset')), /*#__PURE__*/React.createElement(Button, {\n    flexGrow: 1,\n    disabled: !hasUnsavedChanges || deleting,\n    onClick: handleSave\n  }, t('Save')))))), /*#__PURE__*/React.createElement(Field, null, /*#__PURE__*/React.createElement(Field.Row, null, /*#__PURE__*/React.createElement(Button, {\n    primary: true,\n    flexGrow: 1,\n    danger: true,\n    disabled: deleting || !canDelete,\n    onClick: handleDelete\n  }, /*#__PURE__*/React.createElement(Icon, {\n    name: \"trash\",\n    size: \"x16\"\n  }), t('Delete')))));\n}\n\nmodule.exportDefault(EditRoom);","map":{"version":3,"sources":["client/views/admin/rooms/EditRoom.js"],"names":["_regeneratorRuntime","module","link","default","v","_slicedToArray","_objectSpread","Box","Button","ButtonGroup","TextInput","Field","ToggleSwitch","Icon","TextAreaInput","useMutableCallback","React","useState","useMemo","RoomSettingsEnum","GenericModal","VerticalBar","RoomAvatarEditor","usePermission","useSetModal","useRoute","useEndpoint","useMethod","useToastMessageDispatch","useTranslation","useEndpointActionExperimental","useForm","roomCoordinator","DeleteTeamModal","getInitialValues","room","roomName","t","usernames","join","getRoomName","type","roomType","readOnly","ro","archived","isDefault","favorite","featured","roomTopic","topic","roomDescription","description","roomAnnouncement","announcement","roomAvatar","undefined","EditRoom","onChange","onDelete","deleting","setDeleting","setModal","dispatchToastMessage","values","handlers","hasUnsavedChanges","reset","isAllowed","getRoomDirectives","allowRoomSettingChange","NAME","TOPIC","ANNOUNCEMENT","ARCHIVE_OR_UNARCHIVE","DESCRIPTION","TYPE","READ_ONLY","canViewName","canViewTopic","canViewAnnouncement","canViewArchived","canViewDescription","canViewType","canViewReadOnly","handleIsDefault","handleFavorite","handleFeatured","handleRoomName","handleRoomType","handleReadOnly","handleArchived","handleRoomAvatar","handleRoomTopic","handleRoomDescription","handleRoomAnnouncement","changeArchivation","roomsRoute","canDelete","archiveSelector","archiveMessage","saveAction","archiveAction","handleSave","save","rid","_id","defaultValue","archive","action","Promise","all","filter","Boolean","changeRoomType","eraseRoom","deleteTeam","handleDelete","teamMain","deletedRooms","roomsToRemove","Array","isArray","length","teamId","message","push","e","preventDefault","u","username","exportDefault"],"mappings":"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","sourcesContent":["import { Box, Button, ButtonGroup, TextInput, Field, ToggleSwitch, Icon, TextAreaInput } from '@rocket.chat/fuselage';\nimport { useMutableCallback } from '@rocket.chat/fuselage-hooks';\nimport React, { useState, useMemo } from 'react';\n\nimport { RoomSettingsEnum } from '../../../../definition/IRoomTypeConfig';\nimport GenericModal from '../../../components/GenericModal';\nimport VerticalBar from '../../../components/VerticalBar';\nimport RoomAvatarEditor from '../../../components/avatar/RoomAvatarEditor';\nimport { usePermission } from '../../../contexts/AuthorizationContext';\nimport { useSetModal } from '../../../contexts/ModalContext';\nimport { useRoute } from '../../../contexts/RouterContext';\nimport { useEndpoint, useMethod } from '../../../contexts/ServerContext';\nimport { useToastMessageDispatch } from '../../../contexts/ToastMessagesContext';\nimport { useTranslation } from '../../../contexts/TranslationContext';\nimport { useEndpointActionExperimental } from '../../../hooks/useEndpointActionExperimental';\nimport { useForm } from '../../../hooks/useForm';\nimport { roomCoordinator } from '../../../lib/rooms/roomCoordinator';\nimport DeleteTeamModal from '../../teams/contextualBar/info/Delete/DeleteTeamModal';\n\nconst getInitialValues = (room) => ({\n\troomName: room.t === 'd' ? room.usernames.join(' x ') : roomCoordinator.getRoomName(room.t, { type: room.t, ...room }),\n\troomType: room.t,\n\treadOnly: !!room.ro,\n\tarchived: !!room.archived,\n\tisDefault: !!room.default,\n\tfavorite: !!room.favorite,\n\tfeatured: !!room.featured,\n\troomTopic: room.topic ?? '',\n\troomDescription: room.description ?? '',\n\troomAnnouncement: room.announcement ?? '',\n\troomAvatar: undefined,\n});\n\nfunction EditRoom({ room, onChange, onDelete }) {\n\tconst t = useTranslation();\n\n\tconst [deleting, setDeleting] = useState(false);\n\n\tconst setModal = useSetModal();\n\tconst dispatchToastMessage = useToastMessageDispatch();\n\tconst { values, handlers, hasUnsavedChanges, reset } = useForm(getInitialValues(room));\n\n\tconst [canViewName, canViewTopic, canViewAnnouncement, canViewArchived, canViewDescription, canViewType, canViewReadOnly] =\n\t\tuseMemo(() => {\n\t\t\tconst isAllowed = roomCoordinator.getRoomDirectives(room.t)?.allowRoomSettingChange;\n\t\t\treturn [\n\t\t\t\tisAllowed(room, RoomSettingsEnum.NAME),\n\t\t\t\tisAllowed(room, RoomSettingsEnum.TOPIC),\n\t\t\t\tisAllowed(room, RoomSettingsEnum.ANNOUNCEMENT),\n\t\t\t\tisAllowed(room, RoomSettingsEnum.ARCHIVE_OR_UNARCHIVE),\n\t\t\t\tisAllowed(room, RoomSettingsEnum.DESCRIPTION),\n\t\t\t\tisAllowed(room, RoomSettingsEnum.TYPE),\n\t\t\t\tisAllowed(room, RoomSettingsEnum.READ_ONLY),\n\t\t\t];\n\t\t}, [room]);\n\n\tconst {\n\t\troomName,\n\t\troomType,\n\t\treadOnly,\n\t\tarchived,\n\t\tisDefault,\n\t\tfavorite,\n\t\tfeatured,\n\t\troomTopic,\n\t\troomAvatar,\n\t\troomDescription,\n\t\troomAnnouncement,\n\t} = values;\n\n\tconst {\n\t\thandleIsDefault,\n\t\thandleFavorite,\n\t\thandleFeatured,\n\t\thandleRoomName,\n\t\thandleRoomType,\n\t\thandleReadOnly,\n\t\thandleArchived,\n\t\thandleRoomAvatar,\n\t\thandleRoomTopic,\n\t\thandleRoomDescription,\n\t\thandleRoomAnnouncement,\n\t} = handlers;\n\n\tconst changeArchivation = archived !== !!room.archived;\n\n\tconst roomsRoute = useRoute('admin-rooms');\n\n\tconst canDelete = usePermission(`delete-${room.t}`);\n\n\tconst archiveSelector = room.archived ? 'unarchive' : 'archive';\n\tconst archiveMessage = room.archived ? 'Room_has_been_unarchived' : 'Room_has_been_archived';\n\n\tconst saveAction = useEndpointActionExperimental('POST', 'rooms.saveRoomSettings', t('Room_updated_successfully'));\n\tconst archiveAction = useEndpointActionExperimental('POST', 'rooms.changeArchivationState', t(archiveMessage));\n\n\tconst handleSave = useMutableCallback(async () => {\n\t\tconst save = () =>\n\t\t\tsaveAction({\n\t\t\t\trid: room._id,\n\t\t\t\troomName: roomType === 'd' ? undefined : roomName,\n\t\t\t\troomTopic,\n\t\t\t\troomType,\n\t\t\t\treadOnly,\n\t\t\t\tdefault: isDefault,\n\t\t\t\tfavorite: { defaultValue: isDefault, favorite },\n\t\t\t\tfeatured,\n\t\t\t\troomDescription,\n\t\t\t\troomAnnouncement,\n\t\t\t\troomAvatar,\n\t\t\t});\n\n\t\tconst archive = () => archiveAction({ rid: room._id, action: archiveSelector });\n\n\t\tawait Promise.all([hasUnsavedChanges && save(), changeArchivation && archive()].filter(Boolean));\n\t\tonChange();\n\t});\n\n\tconst changeRoomType = useMutableCallback(() => {\n\t\thandleRoomType(roomType === 'p' ? 'c' : 'p');\n\t});\n\n\tconst eraseRoom = useMethod('eraseRoom');\n\tconst deleteTeam = useEndpoint('POST', 'teams.delete');\n\n\tconst handleDelete = useMutableCallback(() => {\n\t\tif (room.teamMain) {\n\t\t\tsetModal(\n\t\t\t\t<DeleteTeamModal\n\t\t\t\t\tonConfirm={async (deletedRooms) => {\n\t\t\t\t\t\tconst roomsToRemove = Array.isArray(deletedRooms) && deletedRooms.length > 0 ? deletedRooms : [];\n\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tsetDeleting(true);\n\t\t\t\t\t\t\tsetModal(null);\n\t\t\t\t\t\t\tawait deleteTeam({ teamId: room.teamId, ...(roomsToRemove.length && { roomsToRemove }) });\n\t\t\t\t\t\t\tdispatchToastMessage({ type: 'success', message: t('Team_has_been_deleted') });\n\t\t\t\t\t\t\troomsRoute.push({});\n\t\t\t\t\t\t} catch (error) {\n\t\t\t\t\t\t\tdispatchToastMessage({ type: 'error', message: error });\n\t\t\t\t\t\t\tsetDeleting(false);\n\t\t\t\t\t\t} finally {\n\t\t\t\t\t\t\tonDelete();\n\t\t\t\t\t\t}\n\t\t\t\t\t}}\n\t\t\t\t\tonCancel={() => setModal(null)}\n\t\t\t\t\tteamId={room.teamId}\n\t\t\t\t/>,\n\t\t\t);\n\n\t\t\treturn;\n\t\t}\n\n\t\tsetModal(\n\t\t\t<GenericModal\n\t\t\t\tvariant='danger'\n\t\t\t\tonConfirm={async () => {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tsetDeleting(true);\n\t\t\t\t\t\tsetModal(null);\n\t\t\t\t\t\tawait eraseRoom(room._id);\n\t\t\t\t\t\tdispatchToastMessage({ type: 'success', message: t('Room_has_been_deleted') });\n\t\t\t\t\t\troomsRoute.push({});\n\t\t\t\t\t} catch (error) {\n\t\t\t\t\t\tdispatchToastMessage({ type: 'error', message: error });\n\t\t\t\t\t\tsetDeleting(false);\n\t\t\t\t\t} finally {\n\t\t\t\t\t\tonDelete();\n\t\t\t\t\t}\n\t\t\t\t}}\n\t\t\t\tonCancel={() => setModal(null)}\n\t\t\t\tconfirmText={t('Yes_delete_it')}\n\t\t\t>\n\t\t\t\t{t('Delete_Room_Warning')}\n\t\t\t</GenericModal>,\n\t\t);\n\t});\n\n\treturn (\n\t\t<VerticalBar.ScrollableContent is='form' onSubmit={useMutableCallback((e) => e.preventDefault())}>\n\t\t\t{room.t !== 'd' && (\n\t\t\t\t<Box pbe='x24' display='flex' justifyContent='center'>\n\t\t\t\t\t<RoomAvatarEditor roomAvatar={roomAvatar} room={room} onChangeAvatar={handleRoomAvatar} />\n\t\t\t\t</Box>\n\t\t\t)}\n\t\t\t<Field>\n\t\t\t\t<Field.Label>{t('Name')}</Field.Label>\n\t\t\t\t<Field.Row>\n\t\t\t\t\t<TextInput disabled={deleting || !canViewName} value={roomName} onChange={handleRoomName} flexGrow={1} />\n\t\t\t\t</Field.Row>\n\t\t\t</Field>\n\t\t\t{room.t !== 'd' && (\n\t\t\t\t<>\n\t\t\t\t\t<Field>\n\t\t\t\t\t\t<Field.Label>{t('Owner')}</Field.Label>\n\t\t\t\t\t\t<Field.Row>\n\t\t\t\t\t\t\t<Box fontScale='p2'>{room.u?.username}</Box>\n\t\t\t\t\t\t</Field.Row>\n\t\t\t\t\t</Field>\n\t\t\t\t\t{canViewDescription && (\n\t\t\t\t\t\t<Field>\n\t\t\t\t\t\t\t<Field.Label>{t('Description')}</Field.Label>\n\t\t\t\t\t\t\t<Field.Row>\n\t\t\t\t\t\t\t\t<TextAreaInput rows={4} disabled={deleting} value={roomDescription} onChange={handleRoomDescription} flexGrow={1} />\n\t\t\t\t\t\t\t</Field.Row>\n\t\t\t\t\t\t</Field>\n\t\t\t\t\t)}\n\t\t\t\t\t{canViewAnnouncement && (\n\t\t\t\t\t\t<Field>\n\t\t\t\t\t\t\t<Field.Label>{t('Announcement')}</Field.Label>\n\t\t\t\t\t\t\t<Field.Row>\n\t\t\t\t\t\t\t\t<TextAreaInput rows={4} disabled={deleting} value={roomAnnouncement} onChange={handleRoomAnnouncement} flexGrow={1} />\n\t\t\t\t\t\t\t</Field.Row>\n\t\t\t\t\t\t</Field>\n\t\t\t\t\t)}\n\t\t\t\t\t{canViewTopic && (\n\t\t\t\t\t\t<Field>\n\t\t\t\t\t\t\t<Field.Label>{t('Topic')}</Field.Label>\n\t\t\t\t\t\t\t<Field.Row>\n\t\t\t\t\t\t\t\t<TextAreaInput rows={4} disabled={deleting} value={roomTopic} onChange={handleRoomTopic} flexGrow={1} />\n\t\t\t\t\t\t\t</Field.Row>\n\t\t\t\t\t\t</Field>\n\t\t\t\t\t)}\n\t\t\t\t\t{canViewType && (\n\t\t\t\t\t\t<Field>\n\t\t\t\t\t\t\t<Field.Row>\n\t\t\t\t\t\t\t\t<Field.Label>{t('Private')}</Field.Label>\n\t\t\t\t\t\t\t\t<ToggleSwitch disabled={deleting} checked={roomType === 'p'} onChange={changeRoomType} />\n\t\t\t\t\t\t\t</Field.Row>\n\t\t\t\t\t\t\t<Field.Hint>{t('Just_invited_people_can_access_this_channel')}</Field.Hint>\n\t\t\t\t\t\t</Field>\n\t\t\t\t\t)}\n\t\t\t\t\t{canViewReadOnly && (\n\t\t\t\t\t\t<Field>\n\t\t\t\t\t\t\t<Field.Row>\n\t\t\t\t\t\t\t\t<Box display='flex' flexDirection='row' justifyContent='space-between' flexGrow={1}>\n\t\t\t\t\t\t\t\t\t<Field.Label>{t('Read_only')}</Field.Label>\n\t\t\t\t\t\t\t\t\t<ToggleSwitch disabled={deleting} checked={readOnly} onChange={handleReadOnly} />\n\t\t\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t\t</Field.Row>\n\t\t\t\t\t\t\t<Field.Hint>{t('Only_authorized_users_can_write_new_messages')}</Field.Hint>\n\t\t\t\t\t\t</Field>\n\t\t\t\t\t)}\n\t\t\t\t\t{canViewArchived && (\n\t\t\t\t\t\t<Field>\n\t\t\t\t\t\t\t<Field.Row>\n\t\t\t\t\t\t\t\t<Box display='flex' flexDirection='row' justifyContent='space-between' flexGrow={1}>\n\t\t\t\t\t\t\t\t\t<Field.Label>{t('Room_archivation_state_true')}</Field.Label>\n\t\t\t\t\t\t\t\t\t<ToggleSwitch disabled={deleting} checked={archived} onChange={handleArchived} />\n\t\t\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t\t</Field.Row>\n\t\t\t\t\t\t</Field>\n\t\t\t\t\t)}\n\t\t\t\t</>\n\t\t\t)}\n\t\t\t<Field>\n\t\t\t\t<Field.Row>\n\t\t\t\t\t<Box display='flex' flexDirection='row' justifyContent='space-between' flexGrow={1}>\n\t\t\t\t\t\t<Field.Label>{t('Default')}</Field.Label>\n\t\t\t\t\t\t<ToggleSwitch disabled={deleting} checked={isDefault} onChange={handleIsDefault} />\n\t\t\t\t\t</Box>\n\t\t\t\t</Field.Row>\n\t\t\t</Field>\n\t\t\t<Field>\n\t\t\t\t<Field.Row>\n\t\t\t\t\t<Box display='flex' flexDirection='row' justifyContent='space-between' flexGrow={1}>\n\t\t\t\t\t\t<Field.Label>{t('Favorite')}</Field.Label>\n\t\t\t\t\t\t<ToggleSwitch disabled={deleting} checked={favorite} onChange={handleFavorite} />\n\t\t\t\t\t</Box>\n\t\t\t\t</Field.Row>\n\t\t\t</Field>\n\t\t\t<Field>\n\t\t\t\t<Field.Row>\n\t\t\t\t\t<Box display='flex' flexDirection='row' justifyContent='space-between' flexGrow={1}>\n\t\t\t\t\t\t<Field.Label>{t('Featured')}</Field.Label>\n\t\t\t\t\t\t<ToggleSwitch disabled={deleting} checked={featured} onChange={handleFeatured} />\n\t\t\t\t\t</Box>\n\t\t\t\t</Field.Row>\n\t\t\t</Field>\n\t\t\t<Field>\n\t\t\t\t<Field.Row>\n\t\t\t\t\t<Box display='flex' flexDirection='row' justifyContent='space-between' w='full'>\n\t\t\t\t\t\t<ButtonGroup stretch flexGrow={1}>\n\t\t\t\t\t\t\t<Button type='reset' disabled={!hasUnsavedChanges || deleting} onClick={reset}>\n\t\t\t\t\t\t\t\t{t('Reset')}\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t<Button flexGrow={1} disabled={!hasUnsavedChanges || deleting} onClick={handleSave}>\n\t\t\t\t\t\t\t\t{t('Save')}\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t</ButtonGroup>\n\t\t\t\t\t</Box>\n\t\t\t\t</Field.Row>\n\t\t\t</Field>\n\t\t\t<Field>\n\t\t\t\t<Field.Row>\n\t\t\t\t\t<Button primary flexGrow={1} danger disabled={deleting || !canDelete} onClick={handleDelete}>\n\t\t\t\t\t\t<Icon name='trash' size='x16' />\n\t\t\t\t\t\t{t('Delete')}\n\t\t\t\t\t</Button>\n\t\t\t\t</Field.Row>\n\t\t\t</Field>\n\t\t</VerticalBar.ScrollableContent>\n\t);\n}\n\nexport default EditRoom;\n"]},"sourceType":"module","hash":"b615101fa667031f032adeae81757af01136a2dc"}
