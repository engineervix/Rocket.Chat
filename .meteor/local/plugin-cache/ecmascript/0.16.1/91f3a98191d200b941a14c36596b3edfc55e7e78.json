{"metadata":{},"options":{"assumptions":{},"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat/client/views/admin/settings/inputs/RoomPickSettingInput.js","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","classProperties","classPrivateProperties","jsx","nullishCoalescingOperator","nullishCoalescingOperator","optionalChaining","optionalCatchBinding","optionalCatchBinding","classProperties","classPrivateProperties","classPrivateMethods","classProperties","classPrivateProperties","asyncGenerators","asyncGenerators","objectRestSpread","logicalAssignment"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"allowUndeclaredExports":true,"strictMode":false},"caller":{"name":"meteor","arch":"web.browser.legacy"},"sourceFileName":"client/views/admin/settings/inputs/RoomPickSettingInput.js","filename":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat/client/views/admin/settings/inputs/RoomPickSettingInput.js","targets":{"android":"95.0.0","chrome":"95.0.0","edge":"95.0.0","firefox":"78.0.0","ie":"10.0.0","ios":"15.0.0","opera":"81.0.0","safari":"15.1.0","samsung":"14.0.0"},"cloneInputAst":true,"browserslistConfigFile":false,"passPerPreset":false,"envName":"development","cwd":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat","root":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat","rootMode":"root","plugins":[{"key":"base$0","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0","visitor":{"Program":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true},"options":{"avoidModernSyntax":true,"enforceStrictMode":false,"dynamicImport":true}},{"key":"transform-runtime","visitor":{"MemberExpression":{"enter":[null]},"ObjectPattern":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":{},"_verified":{},"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]}},"options":{"version":"7.16.5","helpers":true,"useESModules":false,"corejs":false}},{"key":"proposal-class-properties","visitor":{"PrivateName":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{"loose":true}},{"key":"base$0$3","visitor":{"FunctionExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$4","visitor":{"ForInStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-react-jsx","visitor":{"_exploded":{},"_verified":{},"JSXNamespacedName":{"enter":[null]},"JSXSpreadChild":{"enter":[null]},"Program":{"enter":[null]},"JSXElement":{"exit":[null]},"JSXFragment":{"exit":[null]},"JSXAttribute":{"enter":[null]}},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","runtime":"classic","throwIfNamespace":true,"useBuiltIns":false}},{"key":"transform-react-display-name","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-react-pure-annotations","visitor":{"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"syntax-nullish-coalescing-operator","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-nullish-coalescing-operator","visitor":{"_exploded":{},"_verified":{},"LogicalExpression":{"enter":[null]}},"options":{}},{"key":"syntax-optional-chaining","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-optional-chaining","visitor":{"_exploded":true,"OptionalCallExpression":{"enter":[null]},"OptionalMemberExpression":{"enter":[null]},"_verified":true},"options":{}},{"key":"syntax-optional-catch-binding","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-optional-catch-binding","visitor":{"_exploded":{},"_verified":{},"CatchClause":{"enter":[null]}},"options":{}},{"key":"syntax-class-properties","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-class-properties","visitor":{"PrivateName":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{}},{"key":"syntax-async-generators","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-async-generator-functions","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]}},"options":{}},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-object-rest-spread","visitor":{"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"proposal-logical-assignment-operators","visitor":{"_exploded":{},"_verified":{},"AssignmentExpression":{"enter":[null]}},"options":{}},{"key":"transform-arrow-functions","visitor":{"ArrowFunctionExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-block-scoped-functions","visitor":{"BlockStatement":{"enter":[null]},"SwitchCase":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-block-scoping","visitor":{"VariableDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"_exploded":true,"BlockStatement":{"enter":[null]},"SwitchStatement":{"enter":[null]},"Program":{"enter":[null]},"_verified":true,"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"transform-classes","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-computed-properties","visitor":{"ObjectExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-destructuring","visitor":{"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"VariableDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"transform-for-of","visitor":{"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-literals","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-object-super","visitor":{"ObjectExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-parameters","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{}},{"key":"transform-shorthand-properties","visitor":{"ObjectMethod":{"enter":[null]},"ObjectProperty":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-spread","visitor":{"ArrayExpression":{"enter":[null]},"CallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-sticky-regex","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-template-literals","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-typeof-symbol","visitor":{"UnaryExpression":{"enter":[null]},"_exploded":true,"_verified":true,"BlockStatement":{"enter":[null]},"CatchClause":{"enter":[null]},"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"Program":{"enter":[null]},"ObjectMethod":{"enter":[null]},"SwitchStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ForOfStatement":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"StaticBlock":{"enter":[null]},"TSModuleBlock":{"enter":[null]},"AssignmentPattern":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectPattern":{"enter":[null]}},"options":{}},{"key":"transform-unicode-regex","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-property-literals","visitor":{"ObjectProperty":{"exit":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-exponentiation-operator","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"regenerator-transform","visitor":{"_exploded":true,"_verified":true,"ObjectMethod":{"enter":[null],"exit":[null]},"ClassMethod":{"enter":[null],"exit":[null]},"ClassPrivateMethod":{"enter":[null],"exit":[null]},"FunctionDeclaration":{"exit":[null]},"FunctionExpression":{"exit":[null]},"ArrowFunctionExpression":{"exit":[null]}},"options":{}}],"presets":[],"generatorOpts":{"filename":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat/client/views/admin/settings/inputs/RoomPickSettingInput.js","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"client/views/admin/settings/inputs/RoomPickSettingInput.js"}},"code":"var _toConsumableArray;\n\nmodule.link(\"@babel/runtime/helpers/toConsumableArray\", {\n  default: function (v) {\n    _toConsumableArray = v;\n  }\n}, 0);\nvar Box, Field, Flex, Icon;\nmodule.link(\"@rocket.chat/fuselage\", {\n  Box: function (v) {\n    Box = v;\n  },\n  Field: function (v) {\n    Field = v;\n  },\n  Flex: function (v) {\n    Flex = v;\n  },\n  Icon: function (v) {\n    Icon = v;\n  }\n}, 0);\nvar Blaze;\nmodule.link(\"meteor/blaze\", {\n  Blaze: function (v) {\n    Blaze = v;\n  }\n}, 1);\nvar Template;\nmodule.link(\"meteor/templating\", {\n  Template: function (v) {\n    Template = v;\n  }\n}, 2);\nvar React, useRef, useEffect, useLayoutEffect;\nmodule.link(\"react\", {\n  \"default\": function (v) {\n    React = v;\n  },\n  useRef: function (v) {\n    useRef = v;\n  },\n  useEffect: function (v) {\n    useEffect = v;\n  },\n  useLayoutEffect: function (v) {\n    useLayoutEffect = v;\n  }\n}, 3);\nvar ResetSettingButton;\nmodule.link(\"../ResetSettingButton\", {\n  \"default\": function (v) {\n    ResetSettingButton = v;\n  }\n}, 4);\n\nfunction RoomPickSettingInput(_ref) {\n  var _id = _ref._id,\n      label = _ref.label,\n      value = _ref.value,\n      placeholder = _ref.placeholder,\n      readonly = _ref.readonly,\n      autocomplete = _ref.autocomplete,\n      disabled = _ref.disabled,\n      hasResetButton = _ref.hasResetButton,\n      onChangeValue = _ref.onChangeValue,\n      onResetButtonClick = _ref.onResetButtonClick;\n  value = value || [];\n  var wrapperRef = useRef();\n  var valueRef = useRef(value);\n\n  var handleRemoveRoomButtonClick = function (rid) {\n    return function () {\n      onChangeValue(value.filter(function (_ref2) {\n        var _id = _ref2._id;\n        return _id !== rid;\n      }));\n    };\n  };\n\n  useLayoutEffect(function () {\n    valueRef.current = value;\n  });\n  useEffect(function () {\n    var view = Blaze.renderWithData(Template.inputAutocomplete, {\n      id: _id,\n      name: _id,\n      \"class\": 'search autocomplete rc-input__element',\n      autocomplete: autocomplete === false ? 'off' : undefined,\n      readOnly: readonly,\n      placeholder: placeholder,\n      disabled: disabled,\n      settings: {\n        limit: 10,\n        // inputDelay: 300\n        rules: [{\n          // @TODO maybe change this 'collection' and/or template\n          collection: 'CachedChannelList',\n          endpoint: 'rooms.autocomplete.channelAndPrivate',\n          field: 'name',\n          template: Template.roomSearch,\n          noMatchTemplate: Template.roomSearchEmpty,\n          matchAll: true,\n          selector: function (match) {\n            return {\n              name: match\n            };\n          },\n          sort: 'name'\n        }]\n      }\n    }, wrapperRef.current);\n    $('.autocomplete', wrapperRef.current).on('autocompleteselect', function (event, doc) {\n      var value = valueRef.current;\n      onChangeValue([].concat(_toConsumableArray(value.filter(function (_ref3) {\n        var _id = _ref3._id;\n        return _id !== doc._id;\n      })), [doc]));\n      event.currentTarget.value = '';\n      event.currentTarget.focus();\n    });\n    return function () {\n      Blaze.remove(view);\n    };\n  }, [_id, autocomplete, disabled, onChangeValue, placeholder, readonly, valueRef]);\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Flex.Container, null, /*#__PURE__*/React.createElement(Box, null, /*#__PURE__*/React.createElement(Field.Label, {\n    htmlFor: _id,\n    title: _id\n  }, label), hasResetButton && /*#__PURE__*/React.createElement(ResetSettingButton, {\n    \"data-qa-reset-setting-id\": _id,\n    onClick: onResetButtonClick\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      position: 'relative'\n    },\n    ref: wrapperRef\n  }), /*#__PURE__*/React.createElement(\"ul\", {\n    className: \"selected-rooms\"\n  }, value.map(function (_ref4) {\n    var _id = _ref4._id,\n        name = _ref4.name;\n    return /*#__PURE__*/React.createElement(\"li\", {\n      key: _id,\n      className: \"remove-room\",\n      onClick: handleRemoveRoomButtonClick(_id)\n    }, name, \" \", /*#__PURE__*/React.createElement(Icon, {\n      name: \"cross\"\n    }));\n  })));\n}\n\nmodule.exportDefault(RoomPickSettingInput);","map":{"version":3,"sources":["client/views/admin/settings/inputs/RoomPickSettingInput.js"],"names":["_toConsumableArray","module","link","default","v","Box","Field","Flex","Icon","Blaze","Template","React","useRef","useEffect","useLayoutEffect","ResetSettingButton","RoomPickSettingInput","_id","label","value","placeholder","readonly","autocomplete","disabled","hasResetButton","onChangeValue","onResetButtonClick","wrapperRef","valueRef","handleRemoveRoomButtonClick","rid","filter","current","view","renderWithData","inputAutocomplete","id","name","undefined","readOnly","settings","limit","rules","collection","endpoint","field","template","roomSearch","noMatchTemplate","roomSearchEmpty","matchAll","selector","match","sort","$","on","event","doc","currentTarget","focus","remove","position","map","exportDefault"],"mappings":"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","sourcesContent":["import { Box, Field, Flex, Icon } from '@rocket.chat/fuselage';\nimport { Blaze } from 'meteor/blaze';\nimport { Template } from 'meteor/templating';\nimport React, { useRef, useEffect, useLayoutEffect } from 'react';\n\nimport ResetSettingButton from '../ResetSettingButton';\n\nfunction RoomPickSettingInput({\n\t_id,\n\tlabel,\n\tvalue,\n\tplaceholder,\n\treadonly,\n\tautocomplete,\n\tdisabled,\n\thasResetButton,\n\tonChangeValue,\n\tonResetButtonClick,\n}) {\n\tvalue = value || [];\n\n\tconst wrapperRef = useRef();\n\tconst valueRef = useRef(value);\n\n\tconst handleRemoveRoomButtonClick = (rid) => () => {\n\t\tonChangeValue(value.filter(({ _id }) => _id !== rid));\n\t};\n\n\tuseLayoutEffect(() => {\n\t\tvalueRef.current = value;\n\t});\n\n\tuseEffect(() => {\n\t\tconst view = Blaze.renderWithData(\n\t\t\tTemplate.inputAutocomplete,\n\t\t\t{\n\t\t\t\tid: _id,\n\t\t\t\tname: _id,\n\t\t\t\tclass: 'search autocomplete rc-input__element',\n\t\t\t\tautocomplete: autocomplete === false ? 'off' : undefined,\n\t\t\t\treadOnly: readonly,\n\t\t\t\tplaceholder,\n\t\t\t\tdisabled,\n\t\t\t\tsettings: {\n\t\t\t\t\tlimit: 10,\n\t\t\t\t\t// inputDelay: 300\n\t\t\t\t\trules: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t// @TODO maybe change this 'collection' and/or template\n\t\t\t\t\t\t\tcollection: 'CachedChannelList',\n\t\t\t\t\t\t\tendpoint: 'rooms.autocomplete.channelAndPrivate',\n\t\t\t\t\t\t\tfield: 'name',\n\t\t\t\t\t\t\ttemplate: Template.roomSearch,\n\t\t\t\t\t\t\tnoMatchTemplate: Template.roomSearchEmpty,\n\t\t\t\t\t\t\tmatchAll: true,\n\t\t\t\t\t\t\tselector: (match) => ({ name: match }),\n\t\t\t\t\t\t\tsort: 'name',\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t},\n\t\t\t},\n\t\t\twrapperRef.current,\n\t\t);\n\n\t\t$('.autocomplete', wrapperRef.current).on('autocompleteselect', (event, doc) => {\n\t\t\tconst { current: value } = valueRef;\n\t\t\tonChangeValue([...value.filter(({ _id }) => _id !== doc._id), doc]);\n\t\t\tevent.currentTarget.value = '';\n\t\t\tevent.currentTarget.focus();\n\t\t});\n\n\t\treturn () => {\n\t\t\tBlaze.remove(view);\n\t\t};\n\t}, [_id, autocomplete, disabled, onChangeValue, placeholder, readonly, valueRef]);\n\n\treturn (\n\t\t<>\n\t\t\t<Flex.Container>\n\t\t\t\t<Box>\n\t\t\t\t\t<Field.Label htmlFor={_id} title={_id}>\n\t\t\t\t\t\t{label}\n\t\t\t\t\t</Field.Label>\n\t\t\t\t\t{hasResetButton && <ResetSettingButton data-qa-reset-setting-id={_id} onClick={onResetButtonClick} />}\n\t\t\t\t</Box>\n\t\t\t</Flex.Container>\n\t\t\t<div style={{ position: 'relative' }} ref={wrapperRef} />\n\t\t\t<ul className='selected-rooms'>\n\t\t\t\t{value.map(({ _id, name }) => (\n\t\t\t\t\t<li key={_id} className='remove-room' onClick={handleRemoveRoomButtonClick(_id)}>\n\t\t\t\t\t\t{name} <Icon name='cross' />\n\t\t\t\t\t</li>\n\t\t\t\t))}\n\t\t\t</ul>\n\t\t</>\n\t);\n}\n\nexport default RoomPickSettingInput;\n"]},"sourceType":"module","hash":"91f3a98191d200b941a14c36596b3edfc55e7e78"}
