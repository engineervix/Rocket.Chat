{"metadata":{},"options":{"assumptions":{},"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat/client/views/room/contextualBar/NotificationPreferences/NotificationPreferencesWithData.js","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","classProperties","classPrivateProperties","jsx","nullishCoalescingOperator","nullishCoalescingOperator","optionalChaining","optionalCatchBinding","optionalCatchBinding","classProperties","classPrivateProperties","classPrivateMethods","classProperties","classPrivateProperties","asyncGenerators","asyncGenerators","objectRestSpread","logicalAssignment"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"allowUndeclaredExports":true,"strictMode":false},"caller":{"name":"meteor","arch":"web.browser.legacy"},"sourceFileName":"client/views/room/contextualBar/NotificationPreferences/NotificationPreferencesWithData.js","filename":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat/client/views/room/contextualBar/NotificationPreferences/NotificationPreferencesWithData.js","targets":{"android":"95.0.0","chrome":"95.0.0","edge":"95.0.0","firefox":"78.0.0","ie":"10.0.0","ios":"15.0.0","opera":"81.0.0","safari":"15.1.0","samsung":"14.0.0"},"cloneInputAst":true,"browserslistConfigFile":false,"passPerPreset":false,"envName":"development","cwd":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat","root":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat","rootMode":"root","plugins":[{"key":"base$0","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0","visitor":{"Program":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true},"options":{"avoidModernSyntax":true,"enforceStrictMode":false,"dynamicImport":true}},{"key":"transform-runtime","visitor":{"MemberExpression":{"enter":[null]},"ObjectPattern":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":{},"_verified":{},"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]}},"options":{"version":"7.16.5","helpers":true,"useESModules":false,"corejs":false}},{"key":"proposal-class-properties","visitor":{"PrivateName":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{"loose":true}},{"key":"base$0$3","visitor":{"FunctionExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$4","visitor":{"ForInStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-react-jsx","visitor":{"_exploded":{},"_verified":{},"JSXNamespacedName":{"enter":[null]},"JSXSpreadChild":{"enter":[null]},"Program":{"enter":[null]},"JSXElement":{"exit":[null]},"JSXFragment":{"exit":[null]},"JSXAttribute":{"enter":[null]}},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","runtime":"classic","throwIfNamespace":true,"useBuiltIns":false}},{"key":"transform-react-display-name","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-react-pure-annotations","visitor":{"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"syntax-nullish-coalescing-operator","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-nullish-coalescing-operator","visitor":{"_exploded":{},"_verified":{},"LogicalExpression":{"enter":[null]}},"options":{}},{"key":"syntax-optional-chaining","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-optional-chaining","visitor":{"_exploded":true,"OptionalCallExpression":{"enter":[null]},"OptionalMemberExpression":{"enter":[null]},"_verified":true},"options":{}},{"key":"syntax-optional-catch-binding","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-optional-catch-binding","visitor":{"_exploded":{},"_verified":{},"CatchClause":{"enter":[null]}},"options":{}},{"key":"syntax-class-properties","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-class-properties","visitor":{"PrivateName":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{}},{"key":"syntax-async-generators","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-async-generator-functions","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]}},"options":{}},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-object-rest-spread","visitor":{"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"proposal-logical-assignment-operators","visitor":{"_exploded":{},"_verified":{},"AssignmentExpression":{"enter":[null]}},"options":{}},{"key":"transform-arrow-functions","visitor":{"ArrowFunctionExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-block-scoped-functions","visitor":{"BlockStatement":{"enter":[null]},"SwitchCase":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-block-scoping","visitor":{"VariableDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"_exploded":true,"BlockStatement":{"enter":[null]},"SwitchStatement":{"enter":[null]},"Program":{"enter":[null]},"_verified":true,"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"transform-classes","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-computed-properties","visitor":{"ObjectExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-destructuring","visitor":{"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"VariableDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"transform-for-of","visitor":{"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-literals","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-object-super","visitor":{"ObjectExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-parameters","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{}},{"key":"transform-shorthand-properties","visitor":{"ObjectMethod":{"enter":[null]},"ObjectProperty":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-spread","visitor":{"ArrayExpression":{"enter":[null]},"CallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-sticky-regex","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-template-literals","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-typeof-symbol","visitor":{"UnaryExpression":{"enter":[null]},"_exploded":true,"_verified":true,"BlockStatement":{"enter":[null]},"CatchClause":{"enter":[null]},"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"Program":{"enter":[null]},"ObjectMethod":{"enter":[null]},"SwitchStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ForOfStatement":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"StaticBlock":{"enter":[null]},"TSModuleBlock":{"enter":[null]},"AssignmentPattern":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectPattern":{"enter":[null]}},"options":{}},{"key":"transform-unicode-regex","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-property-literals","visitor":{"ObjectProperty":{"exit":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-exponentiation-operator","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"regenerator-transform","visitor":{"_exploded":true,"_verified":true,"ObjectMethod":{"enter":[null],"exit":[null]},"ClassMethod":{"enter":[null],"exit":[null]},"ClassPrivateMethod":{"enter":[null],"exit":[null]},"FunctionDeclaration":{"exit":[null]},"FunctionExpression":{"exit":[null]},"ArrowFunctionExpression":{"exit":[null]}},"options":{}}],"presets":[],"generatorOpts":{"filename":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat/client/views/room/contextualBar/NotificationPreferences/NotificationPreferencesWithData.js","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"client/views/room/contextualBar/NotificationPreferences/NotificationPreferencesWithData.js"}},"code":"var _toConsumableArray;\n\nmodule.link(\"@babel/runtime/helpers/toConsumableArray\", {\n  default: function (v) {\n    _toConsumableArray = v;\n  }\n}, 0);\nvar useMutableCallback;\nmodule.link(\"@rocket.chat/fuselage-hooks\", {\n  useMutableCallback: function (v) {\n    useMutableCallback = v;\n  }\n}, 0);\nvar React, memo;\nmodule.link(\"react\", {\n  \"default\": function (v) {\n    React = v;\n  },\n  memo: function (v) {\n    memo = v;\n  }\n}, 1);\nvar useCustomSound;\nmodule.link(\"../../../../contexts/CustomSoundContext\", {\n  useCustomSound: function (v) {\n    useCustomSound = v;\n  }\n}, 2);\nvar useTranslation;\nmodule.link(\"../../../../contexts/TranslationContext\", {\n  useTranslation: function (v) {\n    useTranslation = v;\n  }\n}, 3);\nvar useUserSubscription;\nmodule.link(\"../../../../contexts/UserContext\", {\n  useUserSubscription: function (v) {\n    useUserSubscription = v;\n  }\n}, 4);\nvar useEndpointActionExperimental;\nmodule.link(\"../../../../hooks/useEndpointActionExperimental\", {\n  useEndpointActionExperimental: function (v) {\n    useEndpointActionExperimental = v;\n  }\n}, 5);\nvar useForm;\nmodule.link(\"../../../../hooks/useForm\", {\n  useForm: function (v) {\n    useForm = v;\n  }\n}, 6);\nvar useTabBarClose;\nmodule.link(\"../../providers/ToolboxProvider\", {\n  useTabBarClose: function (v) {\n    useTabBarClose = v;\n  }\n}, 7);\nvar NotificationPreferences;\nmodule.link(\"./NotificationPreferences\", {\n  \"default\": function (v) {\n    NotificationPreferences = v;\n  }\n}, 8);\n\nvar NotificationPreferencesWithData = function (_ref) {\n  var rid = _ref.rid;\n  var t = useTranslation();\n  var subscription = useUserSubscription(rid);\n  var customSound = useCustomSound();\n  var handleClose = useTabBarClose();\n  var saveSettings = useEndpointActionExperimental('POST', 'rooms.saveNotification', t('Room_updated_successfully'));\n\n  var _useForm = useForm({\n    turnOn: !(subscription !== null && subscription !== void 0 && subscription.disableNotifications),\n    muteGroupMentions: subscription === null || subscription === void 0 ? void 0 : subscription.muteGroupMentions,\n    showCounter: !(subscription !== null && subscription !== void 0 && subscription.hideUnreadStatus),\n    desktopAlert: (subscription === null || subscription === void 0 ? void 0 : subscription.desktopPrefOrigin) === 'subscription' && subscription.desktopNotifications || 'default',\n    desktopSound: (subscription === null || subscription === void 0 ? void 0 : subscription.audioNotificationValue) || 'default',\n    mobileAlert: (subscription === null || subscription === void 0 ? void 0 : subscription.mobilePrefOrigin) === 'subscription' && subscription.mobilePushNotifications || 'default',\n    emailAlert: (subscription === null || subscription === void 0 ? void 0 : subscription.emailPrefOrigin) === 'subscription' && subscription.emailNotifications || 'default'\n  }),\n      values = _useForm.values,\n      handlers = _useForm.handlers,\n      hasUnsavedChanges = _useForm.hasUnsavedChanges,\n      commit = _useForm.commit;\n\n  var defaultOption = [['default', t('Default')], ['all', t('All_messages')], ['mentions', t('Mentions')], ['nothing', t('Nothing')]];\n  var customSoundAsset = Object.entries(customSound.list.get()).map(function (value) {\n    return [value[0], value[1].name];\n  });\n  var handleOptions = {\n    alerts: defaultOption,\n    audio: defaultOption,\n    sound: [['none None', t('None')], ['default', t('Default')]].concat(_toConsumableArray(customSoundAsset))\n  };\n\n  var handlePlaySound = function () {\n    return customSound.play(values.desktopSound);\n  };\n\n  var handleSaveButton = useMutableCallback(function () {\n    var notifications = {};\n    notifications.disableNotifications = values.turnOn ? '0' : '1';\n    notifications.muteGroupMentions = values.muteGroupMentions ? '1' : '0';\n    notifications.hideUnreadStatus = values.showCounter ? '0' : '1';\n    notifications.desktopNotifications = values.desktopAlert;\n    notifications.audioNotificationValue = values.desktopSound;\n    notifications.mobilePushNotifications = values.mobileAlert;\n    notifications.emailNotifications = values.emailAlert;\n    saveSettings({\n      roomId: rid,\n      notifications: notifications\n    });\n    commit();\n  });\n  return /*#__PURE__*/React.createElement(NotificationPreferences, {\n    handleClose: handleClose,\n    formValues: values,\n    formHandlers: handlers,\n    formHasUnsavedChanges: hasUnsavedChanges,\n    handlePlaySound: handlePlaySound,\n    handleOptions: handleOptions,\n    handleSaveButton: handleSaveButton\n  });\n};\n\nmodule.exportDefault( /*#__PURE__*/memo(NotificationPreferencesWithData));","map":{"version":3,"sources":["client/views/room/contextualBar/NotificationPreferences/NotificationPreferencesWithData.js"],"names":["_toConsumableArray","module","link","default","v","useMutableCallback","React","memo","useCustomSound","useTranslation","useUserSubscription","useEndpointActionExperimental","useForm","useTabBarClose","NotificationPreferences","NotificationPreferencesWithData","rid","t","subscription","customSound","handleClose","saveSettings","turnOn","disableNotifications","muteGroupMentions","showCounter","hideUnreadStatus","desktopAlert","desktopPrefOrigin","desktopNotifications","desktopSound","audioNotificationValue","mobileAlert","mobilePrefOrigin","mobilePushNotifications","emailAlert","emailPrefOrigin","emailNotifications","values","handlers","hasUnsavedChanges","commit","defaultOption","customSoundAsset","Object","entries","list","get","map","value","name","handleOptions","alerts","audio","sound","handlePlaySound","play","handleSaveButton","notifications","roomId","exportDefault"],"mappings":"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","sourcesContent":["import { useMutableCallback } from '@rocket.chat/fuselage-hooks';\nimport React, { memo } from 'react';\n\nimport { useCustomSound } from '../../../../contexts/CustomSoundContext';\nimport { useTranslation } from '../../../../contexts/TranslationContext';\nimport { useUserSubscription } from '../../../../contexts/UserContext';\nimport { useEndpointActionExperimental } from '../../../../hooks/useEndpointActionExperimental';\nimport { useForm } from '../../../../hooks/useForm';\nimport { useTabBarClose } from '../../providers/ToolboxProvider';\nimport NotificationPreferences from './NotificationPreferences';\n\nconst NotificationPreferencesWithData = ({ rid }) => {\n\tconst t = useTranslation();\n\n\tconst subscription = useUserSubscription(rid);\n\n\tconst customSound = useCustomSound();\n\tconst handleClose = useTabBarClose();\n\tconst saveSettings = useEndpointActionExperimental('POST', 'rooms.saveNotification', t('Room_updated_successfully'));\n\n\tconst { values, handlers, hasUnsavedChanges, commit } = useForm({\n\t\tturnOn: !subscription?.disableNotifications,\n\t\tmuteGroupMentions: subscription?.muteGroupMentions,\n\t\tshowCounter: !subscription?.hideUnreadStatus,\n\t\tdesktopAlert: (subscription?.desktopPrefOrigin === 'subscription' && subscription.desktopNotifications) || 'default',\n\t\tdesktopSound: subscription?.audioNotificationValue || 'default',\n\t\tmobileAlert: (subscription?.mobilePrefOrigin === 'subscription' && subscription.mobilePushNotifications) || 'default',\n\t\temailAlert: (subscription?.emailPrefOrigin === 'subscription' && subscription.emailNotifications) || 'default',\n\t});\n\n\tconst defaultOption = [\n\t\t['default', t('Default')],\n\t\t['all', t('All_messages')],\n\t\t['mentions', t('Mentions')],\n\t\t['nothing', t('Nothing')],\n\t];\n\n\tconst customSoundAsset = Object.entries(customSound.list.get()).map((value) => [value[0], value[1].name]);\n\n\tconst handleOptions = {\n\t\talerts: defaultOption,\n\t\taudio: defaultOption,\n\t\tsound: [['none None', t('None')], ['default', t('Default')], ...customSoundAsset],\n\t};\n\n\tconst handlePlaySound = () => customSound.play(values.desktopSound);\n\n\tconst handleSaveButton = useMutableCallback(() => {\n\t\tconst notifications = {};\n\n\t\tnotifications.disableNotifications = values.turnOn ? '0' : '1';\n\t\tnotifications.muteGroupMentions = values.muteGroupMentions ? '1' : '0';\n\t\tnotifications.hideUnreadStatus = values.showCounter ? '0' : '1';\n\t\tnotifications.desktopNotifications = values.desktopAlert;\n\t\tnotifications.audioNotificationValue = values.desktopSound;\n\t\tnotifications.mobilePushNotifications = values.mobileAlert;\n\t\tnotifications.emailNotifications = values.emailAlert;\n\n\t\tsaveSettings({\n\t\t\troomId: rid,\n\t\t\tnotifications,\n\t\t});\n\n\t\tcommit();\n\t});\n\n\treturn (\n\t\t<NotificationPreferences\n\t\t\thandleClose={handleClose}\n\t\t\tformValues={values}\n\t\t\tformHandlers={handlers}\n\t\t\tformHasUnsavedChanges={hasUnsavedChanges}\n\t\t\thandlePlaySound={handlePlaySound}\n\t\t\thandleOptions={handleOptions}\n\t\t\thandleSaveButton={handleSaveButton}\n\t\t/>\n\t);\n};\n\nexport default memo(NotificationPreferencesWithData);\n"]},"sourceType":"module","hash":"2261970c2751e08b437ddc590149c239332c84da"}
