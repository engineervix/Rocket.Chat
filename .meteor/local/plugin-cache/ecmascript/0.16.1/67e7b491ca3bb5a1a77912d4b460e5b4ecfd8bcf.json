{"metadata":{},"options":{"assumptions":{},"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat/client/views/account/tokens/AddToken.js","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","classProperties","classPrivateProperties","jsx","nullishCoalescingOperator","nullishCoalescingOperator","optionalChaining","optionalCatchBinding","optionalCatchBinding","classProperties","classPrivateProperties","classPrivateMethods","classProperties","classPrivateProperties","asyncGenerators","asyncGenerators","objectRestSpread","logicalAssignment"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"allowUndeclaredExports":true,"strictMode":false},"caller":{"name":"meteor","arch":"web.browser.legacy"},"sourceFileName":"client/views/account/tokens/AddToken.js","filename":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat/client/views/account/tokens/AddToken.js","targets":{"android":"95.0.0","chrome":"95.0.0","edge":"95.0.0","firefox":"78.0.0","ie":"10.0.0","ios":"15.0.0","opera":"81.0.0","safari":"15.1.0","samsung":"14.0.0"},"cloneInputAst":true,"browserslistConfigFile":false,"passPerPreset":false,"envName":"development","cwd":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat","root":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat","rootMode":"root","plugins":[{"key":"base$0","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0","visitor":{"Program":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true},"options":{"avoidModernSyntax":true,"enforceStrictMode":false,"dynamicImport":true}},{"key":"transform-runtime","visitor":{"MemberExpression":{"enter":[null]},"ObjectPattern":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":{},"_verified":{},"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]}},"options":{"version":"7.16.5","helpers":true,"useESModules":false,"corejs":false}},{"key":"proposal-class-properties","visitor":{"PrivateName":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{"loose":true}},{"key":"base$0$3","visitor":{"FunctionExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$4","visitor":{"ForInStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-react-jsx","visitor":{"_exploded":{},"_verified":{},"JSXNamespacedName":{"enter":[null]},"JSXSpreadChild":{"enter":[null]},"Program":{"enter":[null]},"JSXElement":{"exit":[null]},"JSXFragment":{"exit":[null]},"JSXAttribute":{"enter":[null]}},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","runtime":"classic","throwIfNamespace":true,"useBuiltIns":false}},{"key":"transform-react-display-name","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-react-pure-annotations","visitor":{"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"syntax-nullish-coalescing-operator","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-nullish-coalescing-operator","visitor":{"_exploded":{},"_verified":{},"LogicalExpression":{"enter":[null]}},"options":{}},{"key":"syntax-optional-chaining","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-optional-chaining","visitor":{"_exploded":true,"OptionalCallExpression":{"enter":[null]},"OptionalMemberExpression":{"enter":[null]},"_verified":true},"options":{}},{"key":"syntax-optional-catch-binding","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-optional-catch-binding","visitor":{"_exploded":{},"_verified":{},"CatchClause":{"enter":[null]}},"options":{}},{"key":"syntax-class-properties","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-class-properties","visitor":{"PrivateName":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{}},{"key":"syntax-async-generators","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-async-generator-functions","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]}},"options":{}},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-object-rest-spread","visitor":{"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"proposal-logical-assignment-operators","visitor":{"_exploded":{},"_verified":{},"AssignmentExpression":{"enter":[null]}},"options":{}},{"key":"transform-arrow-functions","visitor":{"ArrowFunctionExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-block-scoped-functions","visitor":{"BlockStatement":{"enter":[null]},"SwitchCase":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-block-scoping","visitor":{"VariableDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"_exploded":true,"BlockStatement":{"enter":[null]},"SwitchStatement":{"enter":[null]},"Program":{"enter":[null]},"_verified":true,"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"transform-classes","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-computed-properties","visitor":{"ObjectExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-destructuring","visitor":{"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"VariableDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"transform-for-of","visitor":{"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-literals","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-object-super","visitor":{"ObjectExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-parameters","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{}},{"key":"transform-shorthand-properties","visitor":{"ObjectMethod":{"enter":[null]},"ObjectProperty":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-spread","visitor":{"ArrayExpression":{"enter":[null]},"CallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-sticky-regex","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-template-literals","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-typeof-symbol","visitor":{"UnaryExpression":{"enter":[null]},"_exploded":true,"_verified":true,"BlockStatement":{"enter":[null]},"CatchClause":{"enter":[null]},"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"Program":{"enter":[null]},"ObjectMethod":{"enter":[null]},"SwitchStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ForOfStatement":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"StaticBlock":{"enter":[null]},"TSModuleBlock":{"enter":[null]},"AssignmentPattern":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectPattern":{"enter":[null]}},"options":{}},{"key":"transform-unicode-regex","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-property-literals","visitor":{"ObjectProperty":{"exit":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-exponentiation-operator","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"regenerator-transform","visitor":{"_exploded":true,"_verified":true,"ObjectMethod":{"enter":[null],"exit":[null]},"ClassMethod":{"enter":[null],"exit":[null]},"ClassPrivateMethod":{"enter":[null],"exit":[null]},"FunctionDeclaration":{"exit":[null]},"FunctionExpression":{"exit":[null]},"ArrowFunctionExpression":{"exit":[null]}},"options":{}}],"presets":[],"generatorOpts":{"filename":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat/client/views/account/tokens/AddToken.js","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"client/views/account/tokens/AddToken.js"}},"code":"var _excluded = [\"onDidAddToken\"];\n\nvar _regeneratorRuntime;\n\nmodule.link(\"@babel/runtime/regenerator\", {\n  default: function (v) {\n    _regeneratorRuntime = v;\n  }\n}, 0);\n\nvar _extends;\n\nmodule.link(\"@babel/runtime/helpers/extends\", {\n  default: function (v) {\n    _extends = v;\n  }\n}, 1);\n\nvar _objectWithoutProperties;\n\nmodule.link(\"@babel/runtime/helpers/objectWithoutProperties\", {\n  default: function (v) {\n    _objectWithoutProperties = v;\n  }\n}, 2);\nvar Box, TextInput, Button, Field, FieldGroup, Margins, CheckBox;\nmodule.link(\"@rocket.chat/fuselage\", {\n  Box: function (v) {\n    Box = v;\n  },\n  TextInput: function (v) {\n    TextInput = v;\n  },\n  Button: function (v) {\n    Button = v;\n  },\n  Field: function (v) {\n    Field = v;\n  },\n  FieldGroup: function (v) {\n    FieldGroup = v;\n  },\n  Margins: function (v) {\n    Margins = v;\n  },\n  CheckBox: function (v) {\n    CheckBox = v;\n  }\n}, 0);\nvar useUniqueId;\nmodule.link(\"@rocket.chat/fuselage-hooks\", {\n  useUniqueId: function (v) {\n    useUniqueId = v;\n  }\n}, 1);\nvar React, useCallback;\nmodule.link(\"react\", {\n  \"default\": function (v) {\n    React = v;\n  },\n  useCallback: function (v) {\n    useCallback = v;\n  }\n}, 2);\nvar useSetModal;\nmodule.link(\"../../../contexts/ModalContext\", {\n  useSetModal: function (v) {\n    useSetModal = v;\n  }\n}, 3);\nvar useMethod;\nmodule.link(\"../../../contexts/ServerContext\", {\n  useMethod: function (v) {\n    useMethod = v;\n  }\n}, 4);\nvar useToastMessageDispatch;\nmodule.link(\"../../../contexts/ToastMessagesContext\", {\n  useToastMessageDispatch: function (v) {\n    useToastMessageDispatch = v;\n  }\n}, 5);\nvar useTranslation;\nmodule.link(\"../../../contexts/TranslationContext\", {\n  useTranslation: function (v) {\n    useTranslation = v;\n  }\n}, 6);\nvar useUserId;\nmodule.link(\"../../../contexts/UserContext\", {\n  useUserId: function (v) {\n    useUserId = v;\n  }\n}, 7);\nvar useForm;\nmodule.link(\"../../../hooks/useForm\", {\n  useForm: function (v) {\n    useForm = v;\n  }\n}, 8);\nvar InfoModal;\nmodule.link(\"./InfoModal\", {\n  \"default\": function (v) {\n    InfoModal = v;\n  }\n}, 9);\nvar initialValues = {\n  name: '',\n  bypassTwoFactor: false\n};\n\nvar AddToken = function (_ref) {\n  var onDidAddToken = _ref.onDidAddToken,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  var t = useTranslation();\n  var createTokenFn = useMethod('personalAccessTokens:generateToken');\n  var dispatchToastMessage = useToastMessageDispatch();\n  var setModal = useSetModal();\n  var userId = useUserId();\n\n  var _useForm = useForm(initialValues),\n      values = _useForm.values,\n      handlers = _useForm.handlers,\n      reset = _useForm.reset;\n\n  var name = values.name,\n      bypassTwoFactor = values.bypassTwoFactor;\n  var handleName = handlers.handleName,\n      handleBypassTwoFactor = handlers.handleBypassTwoFactor;\n  var closeModal = useCallback(function () {\n    return setModal(null);\n  }, [setModal]);\n  var handleAdd = useCallback(function () {\n    function _callee() {\n      var token;\n      return _regeneratorRuntime.async(function () {\n        function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.prev = 0;\n                _context.next = 3;\n                return _regeneratorRuntime.awrap(createTokenFn({\n                  tokenName: name,\n                  bypassTwoFactor: bypassTwoFactor\n                }));\n\n              case 3:\n                token = _context.sent;\n                setModal( /*#__PURE__*/React.createElement(InfoModal, {\n                  title: t('API_Personal_Access_Token_Generated'),\n                  content: /*#__PURE__*/React.createElement(Box, {\n                    dangerouslySetInnerHTML: {\n                      __html: t('API_Personal_Access_Token_Generated_Text_Token_s_UserId_s', {\n                        token: token,\n                        userId: userId\n                      })\n                    }\n                  }),\n                  confirmText: t('ok'),\n                  onConfirm: closeModal\n                }));\n                reset();\n                onDidAddToken();\n                _context.next = 12;\n                break;\n\n              case 9:\n                _context.prev = 9;\n                _context.t0 = _context[\"catch\"](0);\n                dispatchToastMessage({\n                  type: 'error',\n                  message: _context.t0\n                });\n\n              case 12:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }\n\n        return _callee$;\n      }(), null, null, [[0, 9]], Promise);\n    }\n\n    return _callee;\n  }(), [bypassTwoFactor, closeModal, createTokenFn, dispatchToastMessage, name, onDidAddToken, reset, setModal, t, userId]);\n  var bypassTwoFactorCheckboxId = useUniqueId();\n  return /*#__PURE__*/React.createElement(FieldGroup, _extends({\n    is: \"form\",\n    marginBlock: \"x8\"\n  }, props), /*#__PURE__*/React.createElement(Field, null, /*#__PURE__*/React.createElement(Field.Row, null, /*#__PURE__*/React.createElement(Margins, {\n    inlineEnd: \"x4\"\n  }, /*#__PURE__*/React.createElement(TextInput, {\n    value: name,\n    onChange: handleName,\n    placeholder: t('API_Add_Personal_Access_Token')\n  })), /*#__PURE__*/React.createElement(Button, {\n    primary: true,\n    disabled: name.length === 0,\n    onClick: handleAdd\n  }, t('Add'))), /*#__PURE__*/React.createElement(Field.Row, null, /*#__PURE__*/React.createElement(CheckBox, {\n    id: bypassTwoFactorCheckboxId,\n    checked: bypassTwoFactor,\n    onChange: handleBypassTwoFactor\n  }), /*#__PURE__*/React.createElement(Field.Label, {\n    htmlFor: bypassTwoFactorCheckboxId\n  }, t('Ignore'), \" \", t('Two Factor Authentication')))));\n};\n\nmodule.exportDefault(AddToken);","map":{"version":3,"sources":["client/views/account/tokens/AddToken.js"],"names":["_regeneratorRuntime","module","link","default","v","_extends","_objectWithoutProperties","Box","TextInput","Button","Field","FieldGroup","Margins","CheckBox","useUniqueId","React","useCallback","useSetModal","useMethod","useToastMessageDispatch","useTranslation","useUserId","useForm","InfoModal","initialValues","name","bypassTwoFactor","AddToken","onDidAddToken","props","t","createTokenFn","dispatchToastMessage","setModal","userId","values","handlers","reset","handleName","handleBypassTwoFactor","closeModal","handleAdd","tokenName","token","__html","type","message","bypassTwoFactorCheckboxId","length","exportDefault"],"mappings":"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","sourcesContent":["import { Box, TextInput, Button, Field, FieldGroup, Margins, CheckBox } from '@rocket.chat/fuselage';\nimport { useUniqueId } from '@rocket.chat/fuselage-hooks';\nimport React, { useCallback } from 'react';\n\nimport { useSetModal } from '../../../contexts/ModalContext';\nimport { useMethod } from '../../../contexts/ServerContext';\nimport { useToastMessageDispatch } from '../../../contexts/ToastMessagesContext';\nimport { useTranslation } from '../../../contexts/TranslationContext';\nimport { useUserId } from '../../../contexts/UserContext';\nimport { useForm } from '../../../hooks/useForm';\nimport InfoModal from './InfoModal';\n\nconst initialValues = {\n\tname: '',\n\tbypassTwoFactor: false,\n};\n\nconst AddToken = ({ onDidAddToken, ...props }) => {\n\tconst t = useTranslation();\n\tconst createTokenFn = useMethod('personalAccessTokens:generateToken');\n\tconst dispatchToastMessage = useToastMessageDispatch();\n\tconst setModal = useSetModal();\n\n\tconst userId = useUserId();\n\n\tconst { values, handlers, reset } = useForm(initialValues);\n\n\tconst { name, bypassTwoFactor } = values;\n\tconst { handleName, handleBypassTwoFactor } = handlers;\n\n\tconst closeModal = useCallback(() => setModal(null), [setModal]);\n\n\tconst handleAdd = useCallback(async () => {\n\t\ttry {\n\t\t\tconst token = await createTokenFn({ tokenName: name, bypassTwoFactor });\n\n\t\t\tsetModal(\n\t\t\t\t<InfoModal\n\t\t\t\t\ttitle={t('API_Personal_Access_Token_Generated')}\n\t\t\t\t\tcontent={\n\t\t\t\t\t\t<Box\n\t\t\t\t\t\t\tdangerouslySetInnerHTML={{\n\t\t\t\t\t\t\t\t__html: t('API_Personal_Access_Token_Generated_Text_Token_s_UserId_s', {\n\t\t\t\t\t\t\t\t\ttoken,\n\t\t\t\t\t\t\t\t\tuserId,\n\t\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t/>\n\t\t\t\t\t}\n\t\t\t\t\tconfirmText={t('ok')}\n\t\t\t\t\tonConfirm={closeModal}\n\t\t\t\t/>,\n\t\t\t);\n\t\t\treset();\n\t\t\tonDidAddToken();\n\t\t} catch (error) {\n\t\t\tdispatchToastMessage({ type: 'error', message: error });\n\t\t}\n\t}, [bypassTwoFactor, closeModal, createTokenFn, dispatchToastMessage, name, onDidAddToken, reset, setModal, t, userId]);\n\n\tconst bypassTwoFactorCheckboxId = useUniqueId();\n\n\treturn (\n\t\t<FieldGroup is='form' marginBlock='x8' {...props}>\n\t\t\t<Field>\n\t\t\t\t<Field.Row>\n\t\t\t\t\t<Margins inlineEnd='x4'>\n\t\t\t\t\t\t<TextInput value={name} onChange={handleName} placeholder={t('API_Add_Personal_Access_Token')} />\n\t\t\t\t\t</Margins>\n\t\t\t\t\t<Button primary disabled={name.length === 0} onClick={handleAdd}>\n\t\t\t\t\t\t{t('Add')}\n\t\t\t\t\t</Button>\n\t\t\t\t</Field.Row>\n\t\t\t\t<Field.Row>\n\t\t\t\t\t<CheckBox id={bypassTwoFactorCheckboxId} checked={bypassTwoFactor} onChange={handleBypassTwoFactor} />\n\t\t\t\t\t<Field.Label htmlFor={bypassTwoFactorCheckboxId}>\n\t\t\t\t\t\t{t('Ignore')} {t('Two Factor Authentication')}\n\t\t\t\t\t</Field.Label>\n\t\t\t\t</Field.Row>\n\t\t\t</Field>\n\t\t</FieldGroup>\n\t);\n};\n\nexport default AddToken;\n"]},"sourceType":"module","hash":"67e7b491ca3bb5a1a77912d4b460e5b4ecfd8bcf"}
