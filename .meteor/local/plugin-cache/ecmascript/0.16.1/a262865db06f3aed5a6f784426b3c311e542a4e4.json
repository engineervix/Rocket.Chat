{"metadata":{},"options":{"assumptions":{},"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat/app/livechat/client/lib/chartHandler.js","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","classProperties","classPrivateProperties","jsx","nullishCoalescingOperator","nullishCoalescingOperator","optionalChaining","optionalCatchBinding","optionalCatchBinding","classProperties","classPrivateProperties","classPrivateMethods","classProperties","classPrivateProperties","asyncGenerators","asyncGenerators","objectRestSpread","logicalAssignment"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"allowUndeclaredExports":true,"strictMode":false},"caller":{"name":"meteor","arch":"web.browser"},"sourceFileName":"app/livechat/client/lib/chartHandler.js","filename":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat/app/livechat/client/lib/chartHandler.js","targets":{"android":"95.0.0","chrome":"95.0.0","edge":"95.0.0","firefox":"78.0.0","ie":"10.0.0","ios":"15.0.0","opera":"81.0.0","safari":"15.1.0","samsung":"14.0.0"},"cloneInputAst":true,"browserslistConfigFile":false,"passPerPreset":false,"envName":"development","cwd":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat","root":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat","rootMode":"root","plugins":[{"key":"base$0","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0","visitor":{"Program":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true},"options":{"avoidModernSyntax":false,"enforceStrictMode":false,"dynamicImport":true,"generateLetDeclarations":true}},{"key":"transform-runtime","visitor":{"MemberExpression":{"enter":[null]},"ObjectPattern":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":{},"_verified":{},"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]}},"options":{"version":"7.16.5","helpers":true,"useESModules":false,"corejs":false}},{"key":"proposal-class-properties","visitor":{"PrivateName":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{"loose":true}},{"key":"transform-react-jsx","visitor":{"_exploded":{},"_verified":{},"JSXNamespacedName":{"enter":[null]},"JSXSpreadChild":{"enter":[null]},"Program":{"enter":[null]},"JSXElement":{"exit":[null]},"JSXFragment":{"exit":[null]},"JSXAttribute":{"enter":[null]}},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","runtime":"classic","throwIfNamespace":true,"useBuiltIns":false}},{"key":"transform-react-display-name","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-react-pure-annotations","visitor":{"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"syntax-nullish-coalescing-operator","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-nullish-coalescing-operator","visitor":{"_exploded":{},"_verified":{},"LogicalExpression":{"enter":[null]}},"options":{}},{"key":"syntax-optional-chaining","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-optional-chaining","visitor":{"_exploded":true,"OptionalCallExpression":{"enter":[null]},"OptionalMemberExpression":{"enter":[null]},"_verified":true},"options":{}},{"key":"syntax-optional-catch-binding","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-optional-catch-binding","visitor":{"_exploded":{},"_verified":{},"CatchClause":{"enter":[null]}},"options":{}},{"key":"syntax-class-properties","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-class-properties","visitor":{"PrivateName":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{}},{"key":"syntax-async-generators","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-async-generator-functions","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]}},"options":{}},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-object-rest-spread","visitor":{"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"proposal-logical-assignment-operators","visitor":{"_exploded":{},"_verified":{},"AssignmentExpression":{"enter":[null]}},"options":{}},{"key":"transform-literals","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-template-literals","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-parameters","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{}},{"key":"transform-exponentiation-operator","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}}],"presets":[],"generatorOpts":{"filename":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat/app/livechat/client/lib/chartHandler.js","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"app/livechat/client/lib/chartHandler.js"}},"code":"let _objectSpread;\n\nmodule.link(\"@babel/runtime/helpers/objectSpread2\", {\n  default(v) {\n    _objectSpread = v;\n  }\n\n}, 0);\nmodule.export({\n  drawLineChart: () => drawLineChart,\n  drawDoughnutChart: () => drawDoughnutChart,\n  updateChart: () => updateChart\n});\nlet TAPi18n;\nmodule.link(\"meteor/rocketchat:tap-i18n\", {\n  TAPi18n(v) {\n    TAPi18n = v;\n  }\n\n}, 0);\n\nconst lineChartConfiguration = _ref => {\n  let {\n    legends = false,\n    anim = false,\n    smallTicks = false,\n    displayColors = false,\n    tooltipCallbacks = {}\n  } = _ref;\n  const config = {\n    layout: {\n      padding: {\n        top: 10,\n        bottom: 0\n      }\n    },\n    legend: {\n      display: false\n    },\n    title: {\n      display: false\n    },\n    tooltips: _objectSpread({\n      enabled: true,\n      mode: 'point',\n      displayColors\n    }, tooltipCallbacks),\n    scales: {\n      xAxes: [{\n        scaleLabel: {\n          display: false\n        },\n        gridLines: {\n          display: true,\n          color: 'rgba(0, 0, 0, 0.03)'\n        }\n      }],\n      yAxes: [{\n        scaleLabel: {\n          display: false\n        },\n        gridLines: {\n          display: true,\n          color: 'rgba(0, 0, 0, 0.03)'\n        },\n        ticks: {\n          beginAtZero: true\n        }\n      }]\n    },\n    hover: {\n      animationDuration: 0 // duration of animations when hovering an item\n\n    },\n    responsive: true,\n    maintainAspectRatio: false,\n    responsiveAnimationDuration: 0 // animation duration after a resize\n\n  };\n\n  if (!anim) {\n    config.animation = {\n      duration: 0 // general animation time\n\n    };\n  }\n\n  if (legends) {\n    config.legend = {\n      display: true,\n      labels: {\n        boxWidth: 20,\n        fontSize: 8\n      }\n    };\n  }\n\n  if (smallTicks) {\n    config.scales.xAxes[0].ticks = {\n      fontSize: 8\n    };\n    config.scales.yAxes[0].ticks = {\n      beginAtZero: true,\n      fontSize: 8\n    };\n  }\n\n  return config;\n};\n\nconst doughnutChartConfiguration = function (title) {\n  let tooltipCallbacks = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  return {\n    layout: {\n      padding: {\n        top: 0,\n        bottom: 0\n      }\n    },\n    legend: {\n      display: true,\n      position: 'right',\n      labels: {\n        boxWidth: 20,\n        fontSize: 8\n      }\n    },\n    title: {\n      display: 'true',\n      text: title\n    },\n    tooltips: _objectSpread({\n      enabled: true,\n      mode: 'point',\n      displayColors: false\n    }, tooltipCallbacks),\n    // animation: {\n    // \tduration: 0 // general animation time\n    // },\n    hover: {\n      animationDuration: 0 // duration of animations when hovering an item\n\n    },\n    responsive: true,\n    maintainAspectRatio: false,\n    responsiveAnimationDuration: 0 // animation duration after a resize\n\n  };\n};\n/**\n *\n * @param {Object} chart - chart element\n * @param {Object} chartContext - Context of chart\n * @param {Array(String)} chartLabel\n * @param {Array(String)} dataLabels\n * @param {Array(Array(Double))} dataPoints\n */\n\n\nconst drawLineChart = async function (chart, chartContext, chartLabels, dataLabels, dataSets) {\n  let options = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : {};\n\n  if (!chart) {\n    console.log('No chart element');\n    return;\n  }\n\n  if (chartContext) {\n    chartContext.destroy();\n  }\n\n  const colors = ['#2de0a5', '#ffd21f', '#f5455c', '#cbced1'];\n  const datasets = [];\n  chartLabels.forEach(function (chartLabel, index) {\n    datasets.push({\n      label: TAPi18n.__(chartLabel),\n      // chart label\n      data: dataSets[index],\n      // data points corresponding to data labels, x-axis points\n      backgroundColor: [colors[index]],\n      borderColor: [colors[index]],\n      borderWidth: 3,\n      fill: false\n    });\n  });\n  const chartImport = await module.dynamicImport('chart.js');\n  const Chart = chartImport.default;\n  return new Chart(chart, {\n    type: 'line',\n    data: {\n      labels: dataLabels,\n      // data labels, y-axis points\n      datasets\n    },\n    options: lineChartConfiguration(options)\n  });\n};\n\nconst drawDoughnutChart = async (chart, title, chartContext, dataLabels, dataPoints) => {\n  if (!chart) {\n    return;\n  }\n\n  if (chartContext) {\n    chartContext.destroy();\n  }\n\n  const chartImport = await module.dynamicImport('chart.js');\n  const Chart = chartImport.default;\n  return new Chart(chart, {\n    type: 'doughnut',\n    data: {\n      labels: dataLabels,\n      // data labels, y-axis points\n      datasets: [{\n        data: dataPoints,\n        // data points corresponding to data labels, x-axis points\n        backgroundColor: ['#2de0a5', '#cbced1', '#f5455c', '#ffd21f'],\n        borderWidth: 0\n      }]\n    },\n    options: doughnutChartConfiguration(title)\n  });\n};\n\nconst updateChart = async (c, label, data) => {\n  const chart = await c;\n\n  if (chart.data.labels.indexOf(label) === -1) {\n    // insert data\n    chart.data.labels.push(label);\n    chart.data.datasets.forEach((dataset, idx) => {\n      dataset.data.push(data[idx]);\n    });\n  } else {\n    // update data\n    const index = chart.data.labels.indexOf(label);\n    chart.data.datasets.forEach((dataset, idx) => {\n      dataset.data[index] = data[idx];\n    });\n  }\n\n  chart.update();\n};","map":{"version":3,"sources":["app/livechat/client/lib/chartHandler.js"],"names":["_objectSpread","module","link","default","v","export","drawLineChart","drawDoughnutChart","updateChart","TAPi18n","lineChartConfiguration","legends","anim","smallTicks","displayColors","tooltipCallbacks","config","layout","padding","top","bottom","legend","display","title","tooltips","enabled","mode","scales","xAxes","scaleLabel","gridLines","color","yAxes","ticks","beginAtZero","hover","animationDuration","responsive","maintainAspectRatio","responsiveAnimationDuration","animation","duration","labels","boxWidth","fontSize","doughnutChartConfiguration","position","text","chart","chartContext","chartLabels","dataLabels","dataSets","options","console","log","destroy","colors","datasets","forEach","chartLabel","index","push","label","__","data","backgroundColor","borderColor","borderWidth","fill","chartImport","Chart","type","dataPoints","c","indexOf","dataset","idx","update"],"mappings":"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","sourcesContent":["import { TAPi18n } from 'meteor/rocketchat:tap-i18n';\n\nconst lineChartConfiguration = ({ legends = false, anim = false, smallTicks = false, displayColors = false, tooltipCallbacks = {} }) => {\n\tconst config = {\n\t\tlayout: {\n\t\t\tpadding: {\n\t\t\t\ttop: 10,\n\t\t\t\tbottom: 0,\n\t\t\t},\n\t\t},\n\t\tlegend: {\n\t\t\tdisplay: false,\n\t\t},\n\t\ttitle: {\n\t\t\tdisplay: false,\n\t\t},\n\t\ttooltips: {\n\t\t\tenabled: true,\n\t\t\tmode: 'point',\n\t\t\tdisplayColors,\n\t\t\t...tooltipCallbacks,\n\t\t},\n\t\tscales: {\n\t\t\txAxes: [\n\t\t\t\t{\n\t\t\t\t\tscaleLabel: {\n\t\t\t\t\t\tdisplay: false,\n\t\t\t\t\t},\n\t\t\t\t\tgridLines: {\n\t\t\t\t\t\tdisplay: true,\n\t\t\t\t\t\tcolor: 'rgba(0, 0, 0, 0.03)',\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t],\n\t\t\tyAxes: [\n\t\t\t\t{\n\t\t\t\t\tscaleLabel: {\n\t\t\t\t\t\tdisplay: false,\n\t\t\t\t\t},\n\t\t\t\t\tgridLines: {\n\t\t\t\t\t\tdisplay: true,\n\t\t\t\t\t\tcolor: 'rgba(0, 0, 0, 0.03)',\n\t\t\t\t\t},\n\t\t\t\t\tticks: {\n\t\t\t\t\t\tbeginAtZero: true,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t],\n\t\t},\n\t\thover: {\n\t\t\tanimationDuration: 0, // duration of animations when hovering an item\n\t\t},\n\t\tresponsive: true,\n\t\tmaintainAspectRatio: false,\n\t\tresponsiveAnimationDuration: 0, // animation duration after a resize\n\t};\n\n\tif (!anim) {\n\t\tconfig.animation = {\n\t\t\tduration: 0, // general animation time\n\t\t};\n\t}\n\n\tif (legends) {\n\t\tconfig.legend = {\n\t\t\tdisplay: true,\n\t\t\tlabels: {\n\t\t\t\tboxWidth: 20,\n\t\t\t\tfontSize: 8,\n\t\t\t},\n\t\t};\n\t}\n\n\tif (smallTicks) {\n\t\tconfig.scales.xAxes[0].ticks = {\n\t\t\tfontSize: 8,\n\t\t};\n\n\t\tconfig.scales.yAxes[0].ticks = {\n\t\t\tbeginAtZero: true,\n\t\t\tfontSize: 8,\n\t\t};\n\t}\n\n\treturn config;\n};\n\nconst doughnutChartConfiguration = (title, tooltipCallbacks = {}) => ({\n\tlayout: {\n\t\tpadding: {\n\t\t\ttop: 0,\n\t\t\tbottom: 0,\n\t\t},\n\t},\n\tlegend: {\n\t\tdisplay: true,\n\t\tposition: 'right',\n\t\tlabels: {\n\t\t\tboxWidth: 20,\n\t\t\tfontSize: 8,\n\t\t},\n\t},\n\ttitle: {\n\t\tdisplay: 'true',\n\t\ttext: title,\n\t},\n\ttooltips: {\n\t\tenabled: true,\n\t\tmode: 'point',\n\t\tdisplayColors: false, // hide color box\n\t\t...tooltipCallbacks,\n\t},\n\t// animation: {\n\t// \tduration: 0 // general animation time\n\t// },\n\thover: {\n\t\tanimationDuration: 0, // duration of animations when hovering an item\n\t},\n\tresponsive: true,\n\tmaintainAspectRatio: false,\n\tresponsiveAnimationDuration: 0, // animation duration after a resize\n});\n\n/**\n *\n * @param {Object} chart - chart element\n * @param {Object} chartContext - Context of chart\n * @param {Array(String)} chartLabel\n * @param {Array(String)} dataLabels\n * @param {Array(Array(Double))} dataPoints\n */\nexport const drawLineChart = async (chart, chartContext, chartLabels, dataLabels, dataSets, options = {}) => {\n\tif (!chart) {\n\t\tconsole.log('No chart element');\n\t\treturn;\n\t}\n\tif (chartContext) {\n\t\tchartContext.destroy();\n\t}\n\tconst colors = ['#2de0a5', '#ffd21f', '#f5455c', '#cbced1'];\n\n\tconst datasets = [];\n\n\tchartLabels.forEach(function (chartLabel, index) {\n\t\tdatasets.push({\n\t\t\tlabel: TAPi18n.__(chartLabel), // chart label\n\t\t\tdata: dataSets[index], // data points corresponding to data labels, x-axis points\n\t\t\tbackgroundColor: [colors[index]],\n\t\t\tborderColor: [colors[index]],\n\t\t\tborderWidth: 3,\n\t\t\tfill: false,\n\t\t});\n\t});\n\tconst chartImport = await import('chart.js');\n\tconst Chart = chartImport.default;\n\treturn new Chart(chart, {\n\t\ttype: 'line',\n\t\tdata: {\n\t\t\tlabels: dataLabels, // data labels, y-axis points\n\t\t\tdatasets,\n\t\t},\n\t\toptions: lineChartConfiguration(options),\n\t});\n};\n\n/**\n *\n * @param {Object} chart - chart element\n * @param {Object} chartContext - Context of chart\n * @param {Array(String)} dataLabels\n * @param {Array(Double)} dataPoints\n */\nexport const drawDoughnutChart = async (chart, title, chartContext, dataLabels, dataPoints) => {\n\tif (!chart) {\n\t\treturn;\n\t}\n\tif (chartContext) {\n\t\tchartContext.destroy();\n\t}\n\tconst chartImport = await import('chart.js');\n\tconst Chart = chartImport.default;\n\treturn new Chart(chart, {\n\t\ttype: 'doughnut',\n\t\tdata: {\n\t\t\tlabels: dataLabels, // data labels, y-axis points\n\t\t\tdatasets: [\n\t\t\t\t{\n\t\t\t\t\tdata: dataPoints, // data points corresponding to data labels, x-axis points\n\t\t\t\t\tbackgroundColor: ['#2de0a5', '#cbced1', '#f5455c', '#ffd21f'],\n\t\t\t\t\tborderWidth: 0,\n\t\t\t\t},\n\t\t\t],\n\t\t},\n\t\toptions: doughnutChartConfiguration(title),\n\t});\n};\n\n/**\n * Update chart\n * @param  {Object} chart [Chart context]\n * @param  {String} label [chart label]\n * @param  {Array(Double)} data  [updated data]\n */\nexport const updateChart = async (c, label, data) => {\n\tconst chart = await c;\n\tif (chart.data.labels.indexOf(label) === -1) {\n\t\t// insert data\n\t\tchart.data.labels.push(label);\n\t\tchart.data.datasets.forEach((dataset, idx) => {\n\t\t\tdataset.data.push(data[idx]);\n\t\t});\n\t} else {\n\t\t// update data\n\t\tconst index = chart.data.labels.indexOf(label);\n\t\tchart.data.datasets.forEach((dataset, idx) => {\n\t\t\tdataset.data[index] = data[idx];\n\t\t});\n\t}\n\n\tchart.update();\n};\n"]},"sourceType":"module","hash":"a262865db06f3aed5a6f784426b3c311e542a4e4"}
