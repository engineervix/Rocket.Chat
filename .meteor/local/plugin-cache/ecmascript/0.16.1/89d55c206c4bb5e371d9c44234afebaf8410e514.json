{"metadata":{},"options":{"assumptions":{},"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat/client/views/teams/contextualBar/channels/TeamsChannels.js","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","classProperties","classPrivateProperties","jsx","nullishCoalescingOperator","nullishCoalescingOperator","optionalChaining","optionalCatchBinding","optionalCatchBinding","classProperties","classPrivateProperties","classPrivateMethods","classProperties","classPrivateProperties","asyncGenerators","asyncGenerators","objectRestSpread","logicalAssignment"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"allowUndeclaredExports":true,"strictMode":false},"caller":{"name":"meteor","arch":"web.browser"},"sourceFileName":"client/views/teams/contextualBar/channels/TeamsChannels.js","filename":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat/client/views/teams/contextualBar/channels/TeamsChannels.js","targets":{"android":"95.0.0","chrome":"95.0.0","edge":"95.0.0","firefox":"78.0.0","ie":"10.0.0","ios":"15.0.0","opera":"81.0.0","safari":"15.1.0","samsung":"14.0.0"},"cloneInputAst":true,"browserslistConfigFile":false,"passPerPreset":false,"envName":"development","cwd":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat","root":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat","rootMode":"root","plugins":[{"key":"base$0","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0","visitor":{"Program":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true},"options":{"avoidModernSyntax":false,"enforceStrictMode":false,"dynamicImport":true,"generateLetDeclarations":true}},{"key":"transform-runtime","visitor":{"MemberExpression":{"enter":[null]},"ObjectPattern":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":{},"_verified":{},"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]}},"options":{"version":"7.16.5","helpers":true,"useESModules":false,"corejs":false}},{"key":"proposal-class-properties","visitor":{"PrivateName":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{"loose":true}},{"key":"transform-react-jsx","visitor":{"_exploded":{},"_verified":{},"JSXNamespacedName":{"enter":[null]},"JSXSpreadChild":{"enter":[null]},"Program":{"enter":[null]},"JSXElement":{"exit":[null]},"JSXFragment":{"exit":[null]},"JSXAttribute":{"enter":[null]}},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","runtime":"classic","throwIfNamespace":true,"useBuiltIns":false}},{"key":"transform-react-display-name","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-react-pure-annotations","visitor":{"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"syntax-nullish-coalescing-operator","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-nullish-coalescing-operator","visitor":{"_exploded":{},"_verified":{},"LogicalExpression":{"enter":[null]}},"options":{}},{"key":"syntax-optional-chaining","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-optional-chaining","visitor":{"_exploded":true,"OptionalCallExpression":{"enter":[null]},"OptionalMemberExpression":{"enter":[null]},"_verified":true},"options":{}},{"key":"syntax-optional-catch-binding","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-optional-catch-binding","visitor":{"_exploded":{},"_verified":{},"CatchClause":{"enter":[null]}},"options":{}},{"key":"syntax-class-properties","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-class-properties","visitor":{"PrivateName":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{}},{"key":"syntax-async-generators","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-async-generator-functions","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]}},"options":{}},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-object-rest-spread","visitor":{"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"proposal-logical-assignment-operators","visitor":{"_exploded":{},"_verified":{},"AssignmentExpression":{"enter":[null]}},"options":{}},{"key":"transform-literals","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-template-literals","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-parameters","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{}},{"key":"transform-exponentiation-operator","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}}],"presets":[],"generatorOpts":{"filename":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat/client/views/teams/contextualBar/channels/TeamsChannels.js","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"client/views/teams/contextualBar/channels/TeamsChannels.js"}},"code":"let _extends;\n\nmodule.link(\"@babel/runtime/helpers/extends\", {\n  default(v) {\n    _extends = v;\n  }\n\n}, 0);\nlet useMutableCallback, useLocalStorage, useDebouncedValue;\nmodule.link(\"@rocket.chat/fuselage-hooks\", {\n  useMutableCallback(v) {\n    useMutableCallback = v;\n  },\n\n  useLocalStorage(v) {\n    useLocalStorage = v;\n  },\n\n  useDebouncedValue(v) {\n    useDebouncedValue = v;\n  }\n\n}, 0);\nlet React, useCallback, useMemo, useState;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  },\n\n  useCallback(v) {\n    useCallback = v;\n  },\n\n  useMemo(v) {\n    useMemo = v;\n  },\n\n  useState(v) {\n    useState = v;\n  }\n\n}, 1);\nlet usePermission;\nmodule.link(\"../../../../contexts/AuthorizationContext\", {\n  usePermission(v) {\n    usePermission = v;\n  }\n\n}, 2);\nlet useSetModal;\nmodule.link(\"../../../../contexts/ModalContext\", {\n  useSetModal(v) {\n    useSetModal = v;\n  }\n\n}, 3);\nlet useRecordList;\nmodule.link(\"../../../../hooks/lists/useRecordList\", {\n  useRecordList(v) {\n    useRecordList = v;\n  }\n\n}, 4);\nlet AsyncStatePhase;\nmodule.link(\"../../../../lib/asyncState\", {\n  AsyncStatePhase(v) {\n    AsyncStatePhase = v;\n  }\n\n}, 5);\nlet roomCoordinator;\nmodule.link(\"../../../../lib/rooms/roomCoordinator\", {\n  roomCoordinator(v) {\n    roomCoordinator = v;\n  }\n\n}, 6);\nlet CreateChannelWithData;\nmodule.link(\"../../../../sidebar/header/CreateChannelWithData\", {\n  default(v) {\n    CreateChannelWithData = v;\n  }\n\n}, 7);\nlet RoomInfo;\nmodule.link(\"../../../room/contextualBar/Info\", {\n  default(v) {\n    RoomInfo = v;\n  }\n\n}, 8);\nlet useTabBarClose;\nmodule.link(\"../../../room/providers/ToolboxProvider\", {\n  useTabBarClose(v) {\n    useTabBarClose = v;\n  }\n\n}, 9);\nlet AddExistingModal;\nmodule.link(\"./AddExistingModal\", {\n  default(v) {\n    AddExistingModal = v;\n  }\n\n}, 10);\nlet BaseTeamsChannels;\nmodule.link(\"./BaseTeamsChannels\", {\n  default(v) {\n    BaseTeamsChannels = v;\n  }\n\n}, 11);\nlet useTeamsChannelList;\nmodule.link(\"./hooks/useTeamsChannelList\", {\n  useTeamsChannelList(v) {\n    useTeamsChannelList = v;\n  }\n\n}, 12);\n\nconst useReactModal = (Component, props) => {\n  const setModal = useSetModal();\n  return useMutableCallback(e => {\n    e.preventDefault();\n\n    const handleClose = () => {\n      setModal(null);\n    };\n\n    setModal(() => /*#__PURE__*/React.createElement(Component, _extends({\n      onClose: handleClose\n    }, props)));\n  });\n};\n\nconst TeamsChannels = _ref => {\n  let {\n    teamId,\n    rid\n  } = _ref;\n  const [state, setState] = useState({});\n  const onClickClose = useTabBarClose();\n  const [type, setType] = useLocalStorage('channels-list-type', 'all');\n  const [text, setText] = useState('');\n  const debouncedText = useDebouncedValue(text, 800);\n  const {\n    teamsChannelList,\n    loadMoreItems,\n    reload\n  } = useTeamsChannelList(useMemo(() => ({\n    teamId,\n    text: debouncedText,\n    type\n  }), [teamId, debouncedText, type]));\n  const {\n    phase,\n    items,\n    itemCount: total\n  } = useRecordList(teamsChannelList);\n  const handleTextChange = useCallback(event => {\n    setText(event.currentTarget.value);\n  }, []);\n  const canAddExistingTeam = usePermission('add-team-channel', rid);\n  const addExisting = useReactModal(AddExistingModal, {\n    teamId,\n    reload\n  });\n  const createNew = useReactModal(CreateChannelWithData, {\n    teamId,\n    reload\n  });\n  const goToRoom = useCallback(room => roomCoordinator.openRouteLink(room.t, room), []);\n  const handleBack = useCallback(() => setState({}), [setState]);\n  const viewRoom = useMutableCallback(room => {\n    goToRoom(room);\n  });\n\n  if (state.tab === 'RoomInfo') {\n    return /*#__PURE__*/React.createElement(RoomInfo, {\n      rid: state.rid,\n      onClickClose: onClickClose,\n      onClickBack: handleBack,\n      onEnterRoom: goToRoom,\n      resetState: setState\n    });\n  }\n\n  return /*#__PURE__*/React.createElement(BaseTeamsChannels, {\n    loading: phase === AsyncStatePhase.LOADING,\n    type: type,\n    text: text,\n    setType: setType,\n    setText: handleTextChange,\n    channels: items,\n    total: total,\n    onClickClose: onClickClose,\n    onClickAddExisting: canAddExistingTeam && addExisting,\n    onClickCreateNew: canAddExistingTeam && createNew,\n    onClickView: viewRoom,\n    loadMoreItems: loadMoreItems,\n    reload: reload\n  });\n};\n\nmodule.exportDefault(TeamsChannels);","map":{"version":3,"sources":["client/views/teams/contextualBar/channels/TeamsChannels.js"],"names":["_extends","module","link","default","v","useMutableCallback","useLocalStorage","useDebouncedValue","React","useCallback","useMemo","useState","usePermission","useSetModal","useRecordList","AsyncStatePhase","roomCoordinator","CreateChannelWithData","RoomInfo","useTabBarClose","AddExistingModal","BaseTeamsChannels","useTeamsChannelList","useReactModal","Component","props","setModal","e","preventDefault","handleClose","TeamsChannels","teamId","rid","state","setState","onClickClose","type","setType","text","setText","debouncedText","teamsChannelList","loadMoreItems","reload","phase","items","itemCount","total","handleTextChange","event","currentTarget","value","canAddExistingTeam","addExisting","createNew","goToRoom","room","openRouteLink","t","handleBack","viewRoom","tab","LOADING","exportDefault"],"mappings":"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","sourcesContent":["import { useMutableCallback, useLocalStorage, useDebouncedValue } from '@rocket.chat/fuselage-hooks';\nimport React, { useCallback, useMemo, useState } from 'react';\n\nimport { usePermission } from '../../../../contexts/AuthorizationContext';\nimport { useSetModal } from '../../../../contexts/ModalContext';\nimport { useRecordList } from '../../../../hooks/lists/useRecordList';\nimport { AsyncStatePhase } from '../../../../lib/asyncState';\nimport { roomCoordinator } from '../../../../lib/rooms/roomCoordinator';\nimport CreateChannelWithData from '../../../../sidebar/header/CreateChannelWithData';\nimport RoomInfo from '../../../room/contextualBar/Info';\nimport { useTabBarClose } from '../../../room/providers/ToolboxProvider';\nimport AddExistingModal from './AddExistingModal';\nimport BaseTeamsChannels from './BaseTeamsChannels';\nimport { useTeamsChannelList } from './hooks/useTeamsChannelList';\n\nconst useReactModal = (Component, props) => {\n\tconst setModal = useSetModal();\n\n\treturn useMutableCallback((e) => {\n\t\te.preventDefault();\n\n\t\tconst handleClose = () => {\n\t\t\tsetModal(null);\n\t\t};\n\n\t\tsetModal(() => <Component onClose={handleClose} {...props} />);\n\t});\n};\n\nconst TeamsChannels = ({ teamId, rid }) => {\n\tconst [state, setState] = useState({});\n\tconst onClickClose = useTabBarClose();\n\n\tconst [type, setType] = useLocalStorage('channels-list-type', 'all');\n\tconst [text, setText] = useState('');\n\n\tconst debouncedText = useDebouncedValue(text, 800);\n\n\tconst { teamsChannelList, loadMoreItems, reload } = useTeamsChannelList(\n\t\tuseMemo(() => ({ teamId, text: debouncedText, type }), [teamId, debouncedText, type]),\n\t);\n\n\tconst { phase, items, itemCount: total } = useRecordList(teamsChannelList);\n\n\tconst handleTextChange = useCallback((event) => {\n\t\tsetText(event.currentTarget.value);\n\t}, []);\n\n\tconst canAddExistingTeam = usePermission('add-team-channel', rid);\n\tconst addExisting = useReactModal(AddExistingModal, { teamId, reload });\n\tconst createNew = useReactModal(CreateChannelWithData, { teamId, reload });\n\n\tconst goToRoom = useCallback((room) => roomCoordinator.openRouteLink(room.t, room), []);\n\tconst handleBack = useCallback(() => setState({}), [setState]);\n\tconst viewRoom = useMutableCallback((room) => {\n\t\tgoToRoom(room);\n\t});\n\n\tif (state.tab === 'RoomInfo') {\n\t\treturn <RoomInfo rid={state.rid} onClickClose={onClickClose} onClickBack={handleBack} onEnterRoom={goToRoom} resetState={setState} />;\n\t}\n\n\treturn (\n\t\t<BaseTeamsChannels\n\t\t\tloading={phase === AsyncStatePhase.LOADING}\n\t\t\ttype={type}\n\t\t\ttext={text}\n\t\t\tsetType={setType}\n\t\t\tsetText={handleTextChange}\n\t\t\tchannels={items}\n\t\t\ttotal={total}\n\t\t\tonClickClose={onClickClose}\n\t\t\tonClickAddExisting={canAddExistingTeam && addExisting}\n\t\t\tonClickCreateNew={canAddExistingTeam && createNew}\n\t\t\tonClickView={viewRoom}\n\t\t\tloadMoreItems={loadMoreItems}\n\t\t\treload={reload}\n\t\t/>\n\t);\n};\n\nexport default TeamsChannels;\n"]},"sourceType":"module","hash":"89d55c206c4bb5e371d9c44234afebaf8410e514"}
