{"metadata":{},"options":{"assumptions":{},"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat/client/sidebar/header/CreateChannel.js","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","classProperties","classPrivateProperties","jsx","nullishCoalescingOperator","nullishCoalescingOperator","optionalChaining","optionalCatchBinding","optionalCatchBinding","classProperties","classPrivateProperties","classPrivateMethods","classProperties","classPrivateProperties","asyncGenerators","asyncGenerators","objectRestSpread","logicalAssignment"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"allowUndeclaredExports":true,"strictMode":false},"caller":{"name":"meteor","arch":"web.browser"},"sourceFileName":"client/sidebar/header/CreateChannel.js","filename":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat/client/sidebar/header/CreateChannel.js","targets":{"android":"95.0.0","chrome":"95.0.0","edge":"95.0.0","firefox":"78.0.0","ie":"10.0.0","ios":"15.0.0","opera":"81.0.0","safari":"15.1.0","samsung":"14.0.0"},"cloneInputAst":true,"browserslistConfigFile":false,"passPerPreset":false,"envName":"development","cwd":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat","root":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat","rootMode":"root","plugins":[{"key":"base$0","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0","visitor":{"Program":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true},"options":{"avoidModernSyntax":false,"enforceStrictMode":false,"dynamicImport":true,"generateLetDeclarations":true}},{"key":"transform-runtime","visitor":{"MemberExpression":{"enter":[null]},"ObjectPattern":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":{},"_verified":{},"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]}},"options":{"version":"7.16.5","helpers":true,"useESModules":false,"corejs":false}},{"key":"proposal-class-properties","visitor":{"PrivateName":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{"loose":true}},{"key":"transform-react-jsx","visitor":{"_exploded":{},"_verified":{},"JSXNamespacedName":{"enter":[null]},"JSXSpreadChild":{"enter":[null]},"Program":{"enter":[null]},"JSXElement":{"exit":[null]},"JSXFragment":{"exit":[null]},"JSXAttribute":{"enter":[null]}},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","runtime":"classic","throwIfNamespace":true,"useBuiltIns":false}},{"key":"transform-react-display-name","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-react-pure-annotations","visitor":{"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"syntax-nullish-coalescing-operator","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-nullish-coalescing-operator","visitor":{"_exploded":{},"_verified":{},"LogicalExpression":{"enter":[null]}},"options":{}},{"key":"syntax-optional-chaining","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-optional-chaining","visitor":{"_exploded":true,"OptionalCallExpression":{"enter":[null]},"OptionalMemberExpression":{"enter":[null]},"_verified":true},"options":{}},{"key":"syntax-optional-catch-binding","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-optional-catch-binding","visitor":{"_exploded":{},"_verified":{},"CatchClause":{"enter":[null]}},"options":{}},{"key":"syntax-class-properties","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-class-properties","visitor":{"PrivateName":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{}},{"key":"syntax-async-generators","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-async-generator-functions","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]}},"options":{}},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-object-rest-spread","visitor":{"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"proposal-logical-assignment-operators","visitor":{"_exploded":{},"_verified":{},"AssignmentExpression":{"enter":[null]}},"options":{}},{"key":"transform-literals","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-template-literals","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-parameters","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{}},{"key":"transform-exponentiation-operator","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}}],"presets":[],"generatorOpts":{"filename":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat/client/sidebar/header/CreateChannel.js","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"client/sidebar/header/CreateChannel.js"}},"code":"let Box, Modal, ButtonGroup, Button, TextInput, Icon, Field, ToggleSwitch, FieldGroup;\nmodule.link(\"@rocket.chat/fuselage\", {\n  Box(v) {\n    Box = v;\n  },\n\n  Modal(v) {\n    Modal = v;\n  },\n\n  ButtonGroup(v) {\n    ButtonGroup = v;\n  },\n\n  Button(v) {\n    Button = v;\n  },\n\n  TextInput(v) {\n    TextInput = v;\n  },\n\n  Icon(v) {\n    Icon = v;\n  },\n\n  Field(v) {\n    Field = v;\n  },\n\n  ToggleSwitch(v) {\n    ToggleSwitch = v;\n  },\n\n  FieldGroup(v) {\n    FieldGroup = v;\n  }\n\n}, 0);\nlet useDebouncedCallback;\nmodule.link(\"@rocket.chat/fuselage-hooks\", {\n  useDebouncedCallback(v) {\n    useDebouncedCallback = v;\n  }\n\n}, 1);\nlet React, useEffect, useMemo, useState;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  },\n\n  useEffect(v) {\n    useEffect = v;\n  },\n\n  useMemo(v) {\n    useMemo = v;\n  },\n\n  useState(v) {\n    useState = v;\n  }\n\n}, 2);\nlet UserAutoCompleteMultiple;\nmodule.link(\"../../components/UserAutoCompleteMultiple\", {\n  default(v) {\n    UserAutoCompleteMultiple = v;\n  }\n\n}, 3);\nlet useMethod;\nmodule.link(\"../../contexts/ServerContext\", {\n  useMethod(v) {\n    useMethod = v;\n  }\n\n}, 4);\nlet useSetting;\nmodule.link(\"../../contexts/SettingsContext\", {\n  useSetting(v) {\n    useSetting = v;\n  }\n\n}, 5);\nlet useTranslation;\nmodule.link(\"../../contexts/TranslationContext\", {\n  useTranslation(v) {\n    useTranslation = v;\n  }\n\n}, 6);\n\nconst CreateChannel = _ref => {\n  let {\n    values,\n    handlers,\n    hasUnsavedChanges,\n    onChangeUsers,\n    onChangeType,\n    onChangeBroadcast,\n    canOnlyCreateOneType,\n    e2eEnabledForPrivateByDefault,\n    onCreate,\n    onClose\n  } = _ref;\n  const t = useTranslation();\n  const e2eEnabled = useSetting('E2E_Enable');\n  const namesValidation = useSetting('UTF8_Channel_Names_Validation');\n  const allowSpecialNames = useSetting('UI_Allow_room_names_with_special_chars');\n  const channelNameExists = useMethod('roomNameExists');\n  const channelNameRegex = useMemo(() => new RegExp(\"^\".concat(namesValidation, \"$\")), [namesValidation]);\n  const [nameError, setNameError] = useState();\n  const checkName = useDebouncedCallback(async name => {\n    setNameError(false);\n\n    if (hasUnsavedChanges) {\n      return;\n    }\n\n    if (!name || name.length === 0) {\n      return setNameError(t('Field_required'));\n    }\n\n    if (!allowSpecialNames && !channelNameRegex.test(name)) {\n      return setNameError(t('error-invalid-name'));\n    }\n\n    const isNotAvailable = await channelNameExists(name);\n\n    if (isNotAvailable) {\n      return setNameError(t('Channel_already_exist', name));\n    }\n  }, 100, [channelNameRegex]);\n  useEffect(() => {\n    checkName(values.name);\n  }, [checkName, values.name]);\n  const e2edisabled = useMemo(() => !values.type || values.broadcast || !e2eEnabled || e2eEnabledForPrivateByDefault, [e2eEnabled, e2eEnabledForPrivateByDefault, values.broadcast, values.type]);\n  const canSave = useMemo(() => hasUnsavedChanges && !nameError, [hasUnsavedChanges, nameError]);\n  return /*#__PURE__*/React.createElement(Modal, null, /*#__PURE__*/React.createElement(Modal.Header, null, /*#__PURE__*/React.createElement(Modal.Title, null, t('Create_channel')), /*#__PURE__*/React.createElement(Modal.Close, {\n    onClick: onClose\n  })), /*#__PURE__*/React.createElement(Modal.Content, null, /*#__PURE__*/React.createElement(FieldGroup, null, /*#__PURE__*/React.createElement(Field, null, /*#__PURE__*/React.createElement(Field.Label, null, t('Name')), /*#__PURE__*/React.createElement(Field.Row, null, /*#__PURE__*/React.createElement(TextInput, {\n    error: hasUnsavedChanges ? nameError : undefined,\n    addon: /*#__PURE__*/React.createElement(Icon, {\n      name: values.type ? 'lock' : 'hash',\n      size: \"x20\"\n    }),\n    placeholder: t('Channel_name'),\n    onChange: handlers.handleName\n  })), hasUnsavedChanges && nameError && /*#__PURE__*/React.createElement(Field.Error, null, nameError)), /*#__PURE__*/React.createElement(Field, null, /*#__PURE__*/React.createElement(Field.Label, null, t('Topic'), ' ', /*#__PURE__*/React.createElement(Box, {\n    is: \"span\",\n    color: \"neutral-600\"\n  }, \"(\", t('optional'), \")\")), /*#__PURE__*/React.createElement(Field.Row, null, /*#__PURE__*/React.createElement(TextInput, {\n    placeholder: t('Channel_what_is_this_channel_about'),\n    onChange: handlers.handleDescription\n  }))), /*#__PURE__*/React.createElement(Field, null, /*#__PURE__*/React.createElement(Box, {\n    display: \"flex\",\n    justifyContent: \"space-between\",\n    alignItems: \"start\"\n  }, /*#__PURE__*/React.createElement(Box, {\n    display: \"flex\",\n    flexDirection: \"column\",\n    width: \"full\"\n  }, /*#__PURE__*/React.createElement(Field.Label, null, t('Private')), /*#__PURE__*/React.createElement(Field.Description, null, values.type ? t('Only_invited_users_can_acess_this_channel') : t('Everyone_can_access_this_channel'))), /*#__PURE__*/React.createElement(ToggleSwitch, {\n    checked: values.type,\n    disabled: !!canOnlyCreateOneType,\n    onChange: onChangeType\n  }))), /*#__PURE__*/React.createElement(Field, null, /*#__PURE__*/React.createElement(Box, {\n    display: \"flex\",\n    justifyContent: \"space-between\",\n    alignItems: \"start\"\n  }, /*#__PURE__*/React.createElement(Box, {\n    display: \"flex\",\n    flexDirection: \"column\",\n    width: \"full\"\n  }, /*#__PURE__*/React.createElement(Field.Label, null, t('Read_only')), /*#__PURE__*/React.createElement(Field.Description, null, values.readOnly ? t('Only_authorized_users_can_write_new_messages') : t('All_users_in_the_channel_can_write_new_messages'))), /*#__PURE__*/React.createElement(ToggleSwitch, {\n    checked: values.readOnly,\n    disabled: values.broadcast,\n    onChange: handlers.handleReadOnly\n  }))), /*#__PURE__*/React.createElement(Field, null, /*#__PURE__*/React.createElement(Box, {\n    display: \"flex\",\n    justifyContent: \"space-between\",\n    alignItems: \"start\"\n  }, /*#__PURE__*/React.createElement(Box, {\n    display: \"flex\",\n    flexDirection: \"column\",\n    width: \"full\"\n  }, /*#__PURE__*/React.createElement(Field.Label, null, t('Encrypted')), /*#__PURE__*/React.createElement(Field.Description, null, values.type ? t('Encrypted_channel_Description') : t('Encrypted_not_available'))), /*#__PURE__*/React.createElement(ToggleSwitch, {\n    checked: values.encrypted,\n    disabled: e2edisabled,\n    onChange: handlers.handleEncrypted\n  }))), /*#__PURE__*/React.createElement(Field, null, /*#__PURE__*/React.createElement(Box, {\n    display: \"flex\",\n    justifyContent: \"space-between\",\n    alignItems: \"start\"\n  }, /*#__PURE__*/React.createElement(Box, {\n    display: \"flex\",\n    flexDirection: \"column\",\n    width: \"full\"\n  }, /*#__PURE__*/React.createElement(Field.Label, null, t('Broadcast')), /*#__PURE__*/React.createElement(Field.Description, null, t('Broadcast_channel_Description'))), /*#__PURE__*/React.createElement(ToggleSwitch, {\n    checked: values.broadcast,\n    onChange: onChangeBroadcast\n  }))), /*#__PURE__*/React.createElement(Field, null, /*#__PURE__*/React.createElement(Field.Label, null, \"\".concat(t('Add_members'), \" (\").concat(t('optional'), \")\")), /*#__PURE__*/React.createElement(UserAutoCompleteMultiple, {\n    value: values.users,\n    onChange: onChangeUsers\n  })))), /*#__PURE__*/React.createElement(Modal.Footer, null, /*#__PURE__*/React.createElement(ButtonGroup, {\n    align: \"end\"\n  }, /*#__PURE__*/React.createElement(Button, {\n    onClick: onClose\n  }, t('Cancel')), /*#__PURE__*/React.createElement(Button, {\n    disabled: !canSave,\n    onClick: onCreate,\n    primary: true\n  }, t('Create')))));\n};\n\nmodule.exportDefault(CreateChannel);","map":{"version":3,"sources":["client/sidebar/header/CreateChannel.js"],"names":["Box","Modal","ButtonGroup","Button","TextInput","Icon","Field","ToggleSwitch","FieldGroup","module","link","v","useDebouncedCallback","React","useEffect","useMemo","useState","default","UserAutoCompleteMultiple","useMethod","useSetting","useTranslation","CreateChannel","values","handlers","hasUnsavedChanges","onChangeUsers","onChangeType","onChangeBroadcast","canOnlyCreateOneType","e2eEnabledForPrivateByDefault","onCreate","onClose","t","e2eEnabled","namesValidation","allowSpecialNames","channelNameExists","channelNameRegex","RegExp","nameError","setNameError","checkName","name","length","test","isNotAvailable","e2edisabled","type","broadcast","canSave","undefined","handleName","handleDescription","readOnly","handleReadOnly","encrypted","handleEncrypted","users","exportDefault"],"mappings":"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","sourcesContent":["import { Box, Modal, ButtonGroup, Button, TextInput, Icon, Field, ToggleSwitch, FieldGroup } from '@rocket.chat/fuselage';\nimport { useDebouncedCallback } from '@rocket.chat/fuselage-hooks';\nimport React, { useEffect, useMemo, useState } from 'react';\n\nimport UserAutoCompleteMultiple from '../../components/UserAutoCompleteMultiple';\nimport { useMethod } from '../../contexts/ServerContext';\nimport { useSetting } from '../../contexts/SettingsContext';\nimport { useTranslation } from '../../contexts/TranslationContext';\n\nconst CreateChannel = ({\n\tvalues,\n\thandlers,\n\thasUnsavedChanges,\n\tonChangeUsers,\n\tonChangeType,\n\tonChangeBroadcast,\n\tcanOnlyCreateOneType,\n\te2eEnabledForPrivateByDefault,\n\tonCreate,\n\tonClose,\n}) => {\n\tconst t = useTranslation();\n\tconst e2eEnabled = useSetting('E2E_Enable');\n\tconst namesValidation = useSetting('UTF8_Channel_Names_Validation');\n\tconst allowSpecialNames = useSetting('UI_Allow_room_names_with_special_chars');\n\tconst channelNameExists = useMethod('roomNameExists');\n\n\tconst channelNameRegex = useMemo(() => new RegExp(`^${namesValidation}$`), [namesValidation]);\n\n\tconst [nameError, setNameError] = useState();\n\n\tconst checkName = useDebouncedCallback(\n\t\tasync (name) => {\n\t\t\tsetNameError(false);\n\t\t\tif (hasUnsavedChanges) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (!name || name.length === 0) {\n\t\t\t\treturn setNameError(t('Field_required'));\n\t\t\t}\n\t\t\tif (!allowSpecialNames && !channelNameRegex.test(name)) {\n\t\t\t\treturn setNameError(t('error-invalid-name'));\n\t\t\t}\n\t\t\tconst isNotAvailable = await channelNameExists(name);\n\t\t\tif (isNotAvailable) {\n\t\t\t\treturn setNameError(t('Channel_already_exist', name));\n\t\t\t}\n\t\t},\n\t\t100,\n\t\t[channelNameRegex],\n\t);\n\n\tuseEffect(() => {\n\t\tcheckName(values.name);\n\t}, [checkName, values.name]);\n\n\tconst e2edisabled = useMemo(\n\t\t() => !values.type || values.broadcast || !e2eEnabled || e2eEnabledForPrivateByDefault,\n\t\t[e2eEnabled, e2eEnabledForPrivateByDefault, values.broadcast, values.type],\n\t);\n\n\tconst canSave = useMemo(() => hasUnsavedChanges && !nameError, [hasUnsavedChanges, nameError]);\n\n\treturn (\n\t\t<Modal>\n\t\t\t<Modal.Header>\n\t\t\t\t<Modal.Title>{t('Create_channel')}</Modal.Title>\n\t\t\t\t<Modal.Close onClick={onClose} />\n\t\t\t</Modal.Header>\n\t\t\t<Modal.Content>\n\t\t\t\t<FieldGroup>\n\t\t\t\t\t<Field>\n\t\t\t\t\t\t<Field.Label>{t('Name')}</Field.Label>\n\t\t\t\t\t\t<Field.Row>\n\t\t\t\t\t\t\t<TextInput\n\t\t\t\t\t\t\t\terror={hasUnsavedChanges ? nameError : undefined}\n\t\t\t\t\t\t\t\taddon={<Icon name={values.type ? 'lock' : 'hash'} size='x20' />}\n\t\t\t\t\t\t\t\tplaceholder={t('Channel_name')}\n\t\t\t\t\t\t\t\tonChange={handlers.handleName}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</Field.Row>\n\t\t\t\t\t\t{hasUnsavedChanges && nameError && <Field.Error>{nameError}</Field.Error>}\n\t\t\t\t\t</Field>\n\t\t\t\t\t<Field>\n\t\t\t\t\t\t<Field.Label>\n\t\t\t\t\t\t\t{t('Topic')}{' '}\n\t\t\t\t\t\t\t<Box is='span' color='neutral-600'>\n\t\t\t\t\t\t\t\t({t('optional')})\n\t\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t</Field.Label>\n\t\t\t\t\t\t<Field.Row>\n\t\t\t\t\t\t\t<TextInput placeholder={t('Channel_what_is_this_channel_about')} onChange={handlers.handleDescription} />\n\t\t\t\t\t\t</Field.Row>\n\t\t\t\t\t</Field>\n\t\t\t\t\t<Field>\n\t\t\t\t\t\t<Box display='flex' justifyContent='space-between' alignItems='start'>\n\t\t\t\t\t\t\t<Box display='flex' flexDirection='column' width='full'>\n\t\t\t\t\t\t\t\t<Field.Label>{t('Private')}</Field.Label>\n\t\t\t\t\t\t\t\t<Field.Description>\n\t\t\t\t\t\t\t\t\t{values.type ? t('Only_invited_users_can_acess_this_channel') : t('Everyone_can_access_this_channel')}\n\t\t\t\t\t\t\t\t</Field.Description>\n\t\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t\t<ToggleSwitch checked={values.type} disabled={!!canOnlyCreateOneType} onChange={onChangeType} />\n\t\t\t\t\t\t</Box>\n\t\t\t\t\t</Field>\n\t\t\t\t\t<Field>\n\t\t\t\t\t\t<Box display='flex' justifyContent='space-between' alignItems='start'>\n\t\t\t\t\t\t\t<Box display='flex' flexDirection='column' width='full'>\n\t\t\t\t\t\t\t\t<Field.Label>{t('Read_only')}</Field.Label>\n\t\t\t\t\t\t\t\t<Field.Description>\n\t\t\t\t\t\t\t\t\t{values.readOnly\n\t\t\t\t\t\t\t\t\t\t? t('Only_authorized_users_can_write_new_messages')\n\t\t\t\t\t\t\t\t\t\t: t('All_users_in_the_channel_can_write_new_messages')}\n\t\t\t\t\t\t\t\t</Field.Description>\n\t\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t\t<ToggleSwitch checked={values.readOnly} disabled={values.broadcast} onChange={handlers.handleReadOnly} />\n\t\t\t\t\t\t</Box>\n\t\t\t\t\t</Field>\n\t\t\t\t\t<Field>\n\t\t\t\t\t\t<Box display='flex' justifyContent='space-between' alignItems='start'>\n\t\t\t\t\t\t\t<Box display='flex' flexDirection='column' width='full'>\n\t\t\t\t\t\t\t\t<Field.Label>{t('Encrypted')}</Field.Label>\n\t\t\t\t\t\t\t\t<Field.Description>{values.type ? t('Encrypted_channel_Description') : t('Encrypted_not_available')}</Field.Description>\n\t\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t\t<ToggleSwitch checked={values.encrypted} disabled={e2edisabled} onChange={handlers.handleEncrypted} />\n\t\t\t\t\t\t</Box>\n\t\t\t\t\t</Field>\n\t\t\t\t\t<Field>\n\t\t\t\t\t\t<Box display='flex' justifyContent='space-between' alignItems='start'>\n\t\t\t\t\t\t\t<Box display='flex' flexDirection='column' width='full'>\n\t\t\t\t\t\t\t\t<Field.Label>{t('Broadcast')}</Field.Label>\n\t\t\t\t\t\t\t\t<Field.Description>{t('Broadcast_channel_Description')}</Field.Description>\n\t\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t\t<ToggleSwitch checked={values.broadcast} onChange={onChangeBroadcast} />\n\t\t\t\t\t\t</Box>\n\t\t\t\t\t</Field>\n\t\t\t\t\t<Field>\n\t\t\t\t\t\t<Field.Label>{`${t('Add_members')} (${t('optional')})`}</Field.Label>\n\t\t\t\t\t\t<UserAutoCompleteMultiple value={values.users} onChange={onChangeUsers} />\n\t\t\t\t\t</Field>\n\t\t\t\t</FieldGroup>\n\t\t\t</Modal.Content>\n\t\t\t<Modal.Footer>\n\t\t\t\t<ButtonGroup align='end'>\n\t\t\t\t\t<Button onClick={onClose}>{t('Cancel')}</Button>\n\t\t\t\t\t<Button disabled={!canSave} onClick={onCreate} primary>\n\t\t\t\t\t\t{t('Create')}\n\t\t\t\t\t</Button>\n\t\t\t\t</ButtonGroup>\n\t\t\t</Modal.Footer>\n\t\t</Modal>\n\t);\n};\n\nexport default CreateChannel;\n"]},"sourceType":"module","hash":"d95ce3616207f11ba1626ca03be76db4337b71d6"}
