{"metadata":{},"options":{"assumptions":{},"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat/client/components/UserStatusMenu.js","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","classProperties","classPrivateProperties","jsx","nullishCoalescingOperator","nullishCoalescingOperator","optionalChaining","optionalCatchBinding","optionalCatchBinding","classProperties","classPrivateProperties","classPrivateMethods","classProperties","classPrivateProperties","asyncGenerators","asyncGenerators","objectRestSpread","logicalAssignment"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"allowUndeclaredExports":true,"strictMode":false},"caller":{"name":"meteor","arch":"web.browser.legacy"},"sourceFileName":"client/components/UserStatusMenu.js","filename":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat/client/components/UserStatusMenu.js","targets":{"android":"95.0.0","chrome":"95.0.0","edge":"95.0.0","firefox":"78.0.0","ie":"10.0.0","ios":"15.0.0","opera":"81.0.0","safari":"15.1.0","samsung":"14.0.0"},"cloneInputAst":true,"browserslistConfigFile":false,"passPerPreset":false,"envName":"development","cwd":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat","root":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat","rootMode":"root","plugins":[{"key":"base$0","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0","visitor":{"Program":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true},"options":{"avoidModernSyntax":true,"enforceStrictMode":false,"dynamicImport":true}},{"key":"transform-runtime","visitor":{"MemberExpression":{"enter":[null]},"ObjectPattern":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":{},"_verified":{},"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]}},"options":{"version":"7.16.5","helpers":true,"useESModules":false,"corejs":false}},{"key":"proposal-class-properties","visitor":{"PrivateName":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{"loose":true}},{"key":"base$0$3","visitor":{"FunctionExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$4","visitor":{"ForInStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-react-jsx","visitor":{"_exploded":{},"_verified":{},"JSXNamespacedName":{"enter":[null]},"JSXSpreadChild":{"enter":[null]},"Program":{"enter":[null]},"JSXElement":{"exit":[null]},"JSXFragment":{"exit":[null]},"JSXAttribute":{"enter":[null]}},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","runtime":"classic","throwIfNamespace":true,"useBuiltIns":false}},{"key":"transform-react-display-name","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-react-pure-annotations","visitor":{"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"syntax-nullish-coalescing-operator","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-nullish-coalescing-operator","visitor":{"_exploded":{},"_verified":{},"LogicalExpression":{"enter":[null]}},"options":{}},{"key":"syntax-optional-chaining","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-optional-chaining","visitor":{"_exploded":true,"OptionalCallExpression":{"enter":[null]},"OptionalMemberExpression":{"enter":[null]},"_verified":true},"options":{}},{"key":"syntax-optional-catch-binding","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-optional-catch-binding","visitor":{"_exploded":{},"_verified":{},"CatchClause":{"enter":[null]}},"options":{}},{"key":"syntax-class-properties","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-class-properties","visitor":{"PrivateName":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{}},{"key":"syntax-async-generators","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-async-generator-functions","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]}},"options":{}},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-object-rest-spread","visitor":{"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"proposal-logical-assignment-operators","visitor":{"_exploded":{},"_verified":{},"AssignmentExpression":{"enter":[null]}},"options":{}},{"key":"transform-arrow-functions","visitor":{"ArrowFunctionExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-block-scoped-functions","visitor":{"BlockStatement":{"enter":[null]},"SwitchCase":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-block-scoping","visitor":{"VariableDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"_exploded":true,"BlockStatement":{"enter":[null]},"SwitchStatement":{"enter":[null]},"Program":{"enter":[null]},"_verified":true,"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"transform-classes","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-computed-properties","visitor":{"ObjectExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-destructuring","visitor":{"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"VariableDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"transform-for-of","visitor":{"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-literals","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-object-super","visitor":{"ObjectExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-parameters","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{}},{"key":"transform-shorthand-properties","visitor":{"ObjectMethod":{"enter":[null]},"ObjectProperty":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-spread","visitor":{"ArrayExpression":{"enter":[null]},"CallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-sticky-regex","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-template-literals","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-typeof-symbol","visitor":{"UnaryExpression":{"enter":[null]},"_exploded":true,"_verified":true,"BlockStatement":{"enter":[null]},"CatchClause":{"enter":[null]},"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"Program":{"enter":[null]},"ObjectMethod":{"enter":[null]},"SwitchStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ForOfStatement":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"StaticBlock":{"enter":[null]},"TSModuleBlock":{"enter":[null]},"AssignmentPattern":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectPattern":{"enter":[null]}},"options":{}},{"key":"transform-unicode-regex","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-property-literals","visitor":{"ObjectProperty":{"exit":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-exponentiation-operator","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"regenerator-transform","visitor":{"_exploded":true,"_verified":true,"ObjectMethod":{"enter":[null],"exit":[null]},"ClassMethod":{"enter":[null],"exit":[null]},"ClassPrivateMethod":{"enter":[null],"exit":[null]},"FunctionDeclaration":{"exit":[null]},"FunctionExpression":{"exit":[null]},"ArrowFunctionExpression":{"exit":[null]}},"options":{}}],"presets":[],"generatorOpts":{"filename":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat/client/components/UserStatusMenu.js","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"client/components/UserStatusMenu.js"}},"code":"var _excluded = [\"onChange\", \"optionWidth\", \"initialStatus\", \"placement\"];\n\nvar _extends;\n\nmodule.link(\"@babel/runtime/helpers/extends\", {\n  default: function (v) {\n    _extends = v;\n  }\n}, 0);\n\nvar _slicedToArray;\n\nmodule.link(\"@babel/runtime/helpers/slicedToArray\", {\n  default: function (v) {\n    _slicedToArray = v;\n  }\n}, 1);\n\nvar _objectWithoutProperties;\n\nmodule.link(\"@babel/runtime/helpers/objectWithoutProperties\", {\n  default: function (v) {\n    _objectWithoutProperties = v;\n  }\n}, 2);\nvar Button, PositionAnimated, Options, useCursor, Box;\nmodule.link(\"@rocket.chat/fuselage\", {\n  Button: function (v) {\n    Button = v;\n  },\n  PositionAnimated: function (v) {\n    PositionAnimated = v;\n  },\n  Options: function (v) {\n    Options = v;\n  },\n  useCursor: function (v) {\n    useCursor = v;\n  },\n  Box: function (v) {\n    Box = v;\n  }\n}, 0);\nvar React, useRef, useCallback, useState, useMemo, useEffect;\nmodule.link(\"react\", {\n  \"default\": function (v) {\n    React = v;\n  },\n  useRef: function (v) {\n    useRef = v;\n  },\n  useCallback: function (v) {\n    useCallback = v;\n  },\n  useState: function (v) {\n    useState = v;\n  },\n  useMemo: function (v) {\n    useMemo = v;\n  },\n  useEffect: function (v) {\n    useEffect = v;\n  }\n}, 1);\nvar useSetting;\nmodule.link(\"../contexts/SettingsContext\", {\n  useSetting: function (v) {\n    useSetting = v;\n  }\n}, 2);\nvar useTranslation;\nmodule.link(\"../contexts/TranslationContext\", {\n  useTranslation: function (v) {\n    useTranslation = v;\n  }\n}, 3);\nvar UserStatus;\nmodule.link(\"./UserStatus\", {\n  UserStatus: function (v) {\n    UserStatus = v;\n  }\n}, 4);\n\nvar UserStatusMenu = function (_ref) {\n  var onChange = _ref.onChange,\n      _ref$optionWidth = _ref.optionWidth,\n      optionWidth = _ref$optionWidth === void 0 ? undefined : _ref$optionWidth,\n      _ref$initialStatus = _ref.initialStatus,\n      initialStatus = _ref$initialStatus === void 0 ? 'offline' : _ref$initialStatus,\n      _ref$placement = _ref.placement,\n      placement = _ref$placement === void 0 ? 'bottom-end' : _ref$placement,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  var t = useTranslation();\n\n  var _useState = useState(initialStatus),\n      _useState2 = _slicedToArray(_useState, 2),\n      status = _useState2[0],\n      setStatus = _useState2[1];\n\n  var allowInvisibleStatus = useSetting('Accounts_AllowInvisibleStatusOption');\n  var options = useMemo(function () {\n    var renderOption = function (status, label) {\n      return /*#__PURE__*/React.createElement(Box, {\n        display: \"flex\",\n        flexDirection: \"row\",\n        alignItems: \"center\"\n      }, /*#__PURE__*/React.createElement(Box, {\n        marginInlineEnd: \"x8\"\n      }, /*#__PURE__*/React.createElement(UserStatus, {\n        status: status\n      })), label);\n    };\n\n    var statuses = [['online', renderOption('online', t('Online'))], ['away', renderOption('away', t('Away'))], ['busy', renderOption('busy', t('Busy'))]];\n\n    if (allowInvisibleStatus) {\n      statuses.push(['offline', renderOption('offline', t('Invisible'))]);\n    }\n\n    return statuses;\n  }, [t, allowInvisibleStatus]);\n\n  var _useCursor = useCursor(-1, options, function (_ref2, _ref3) {\n    var _ref4 = _slicedToArray(_ref2, 1),\n        selected = _ref4[0];\n\n    var _ref5 = _slicedToArray(_ref3, 2),\n        hide = _ref5[1];\n\n    setStatus(selected);\n    reset();\n    hide();\n  }),\n      _useCursor2 = _slicedToArray(_useCursor, 5),\n      cursor = _useCursor2[0],\n      handleKeyDown = _useCursor2[1],\n      handleKeyUp = _useCursor2[2],\n      reset = _useCursor2[3],\n      _useCursor2$ = _slicedToArray(_useCursor2[4], 3),\n      visible = _useCursor2$[0],\n      hide = _useCursor2$[1],\n      show = _useCursor2$[2];\n\n  var ref = useRef();\n  var onClick = useCallback(function () {\n    ref.current.focus() & show();\n    ref.current.classList.add('focus-visible');\n  }, [show]);\n  var handleSelection = useCallback(function (_ref6) {\n    var _ref7 = _slicedToArray(_ref6, 1),\n        selected = _ref7[0];\n\n    setStatus(selected);\n    reset();\n    hide();\n  }, [hide, reset]);\n  useEffect(function () {\n    return onChange(status);\n  }, [status, onChange]);\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Button, _extends({\n    ref: ref,\n    small: true,\n    square: true,\n    ghost: true,\n    onClick: onClick,\n    onBlur: hide,\n    onKeyUp: handleKeyUp,\n    onKeyDown: handleKeyDown\n  }, props), /*#__PURE__*/React.createElement(UserStatus, {\n    status: status\n  })), /*#__PURE__*/React.createElement(PositionAnimated, {\n    width: \"auto\",\n    visible: visible,\n    anchor: ref,\n    placement: placement\n  }, /*#__PURE__*/React.createElement(Options, {\n    width: optionWidth,\n    onSelect: handleSelection,\n    options: options,\n    cursor: cursor\n  })));\n};\n\nmodule.exportDefault(UserStatusMenu);","map":{"version":3,"sources":["client/components/UserStatusMenu.js"],"names":["_extends","module","link","default","v","_slicedToArray","_objectWithoutProperties","Button","PositionAnimated","Options","useCursor","Box","React","useRef","useCallback","useState","useMemo","useEffect","useSetting","useTranslation","UserStatus","UserStatusMenu","onChange","optionWidth","undefined","initialStatus","placement","props","t","status","setStatus","allowInvisibleStatus","options","renderOption","label","statuses","push","selected","hide","reset","cursor","handleKeyDown","handleKeyUp","visible","show","ref","onClick","current","focus","classList","add","handleSelection","exportDefault"],"mappings":"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","sourcesContent":["import { Button, PositionAnimated, Options, useCursor, Box } from '@rocket.chat/fuselage';\nimport React, { useRef, useCallback, useState, useMemo, useEffect } from 'react';\n\nimport { useSetting } from '../contexts/SettingsContext';\nimport { useTranslation } from '../contexts/TranslationContext';\nimport { UserStatus } from './UserStatus';\n\nconst UserStatusMenu = ({ onChange, optionWidth = undefined, initialStatus = 'offline', placement = 'bottom-end', ...props }) => {\n\tconst t = useTranslation();\n\tconst [status, setStatus] = useState(initialStatus);\n\tconst allowInvisibleStatus = useSetting('Accounts_AllowInvisibleStatusOption');\n\n\tconst options = useMemo(() => {\n\t\tconst renderOption = (status, label) => (\n\t\t\t<Box display='flex' flexDirection='row' alignItems='center'>\n\t\t\t\t<Box marginInlineEnd='x8'>\n\t\t\t\t\t<UserStatus status={status} />\n\t\t\t\t</Box>\n\t\t\t\t{label}\n\t\t\t</Box>\n\t\t);\n\n\t\tconst statuses = [\n\t\t\t['online', renderOption('online', t('Online'))],\n\t\t\t['away', renderOption('away', t('Away'))],\n\t\t\t['busy', renderOption('busy', t('Busy'))],\n\t\t];\n\n\t\tif (allowInvisibleStatus) {\n\t\t\tstatuses.push(['offline', renderOption('offline', t('Invisible'))]);\n\t\t}\n\n\t\treturn statuses;\n\t}, [t, allowInvisibleStatus]);\n\n\tconst [cursor, handleKeyDown, handleKeyUp, reset, [visible, hide, show]] = useCursor(-1, options, ([selected], [, hide]) => {\n\t\tsetStatus(selected);\n\t\treset();\n\t\thide();\n\t});\n\n\tconst ref = useRef();\n\tconst onClick = useCallback(() => {\n\t\tref.current.focus() & show();\n\t\tref.current.classList.add('focus-visible');\n\t}, [show]);\n\n\tconst handleSelection = useCallback(\n\t\t([selected]) => {\n\t\t\tsetStatus(selected);\n\t\t\treset();\n\t\t\thide();\n\t\t},\n\t\t[hide, reset],\n\t);\n\n\tuseEffect(() => onChange(status), [status, onChange]);\n\n\treturn (\n\t\t<>\n\t\t\t<Button ref={ref} small square ghost onClick={onClick} onBlur={hide} onKeyUp={handleKeyUp} onKeyDown={handleKeyDown} {...props}>\n\t\t\t\t<UserStatus status={status} />\n\t\t\t</Button>\n\t\t\t<PositionAnimated width='auto' visible={visible} anchor={ref} placement={placement}>\n\t\t\t\t<Options width={optionWidth} onSelect={handleSelection} options={options} cursor={cursor} />\n\t\t\t</PositionAnimated>\n\t\t</>\n\t);\n};\n\nexport default UserStatusMenu;\n"]},"sourceType":"module","hash":"b5715e2f210d2d5392861b78e9e3faf35602e92d"}
