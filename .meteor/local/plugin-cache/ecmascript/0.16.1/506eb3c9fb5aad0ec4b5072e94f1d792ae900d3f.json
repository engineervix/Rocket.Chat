{"metadata":{},"options":{"assumptions":{},"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat/client/views/room/contextualBar/RoomMembers/InviteUsers/WrappedInviteUsers.js","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","classProperties","classPrivateProperties","jsx","nullishCoalescingOperator","nullishCoalescingOperator","optionalChaining","optionalCatchBinding","optionalCatchBinding","classProperties","classPrivateProperties","classPrivateMethods","classProperties","classPrivateProperties","asyncGenerators","asyncGenerators","objectRestSpread","logicalAssignment"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"allowUndeclaredExports":true,"strictMode":false},"caller":{"name":"meteor","arch":"web.browser.legacy"},"sourceFileName":"client/views/room/contextualBar/RoomMembers/InviteUsers/WrappedInviteUsers.js","filename":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat/client/views/room/contextualBar/RoomMembers/InviteUsers/WrappedInviteUsers.js","targets":{"android":"95.0.0","chrome":"95.0.0","edge":"95.0.0","firefox":"78.0.0","ie":"10.0.0","ios":"15.0.0","opera":"81.0.0","safari":"15.1.0","samsung":"14.0.0"},"cloneInputAst":true,"browserslistConfigFile":false,"passPerPreset":false,"envName":"development","cwd":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat","root":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat","rootMode":"root","plugins":[{"key":"base$0","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0","visitor":{"Program":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true},"options":{"avoidModernSyntax":true,"enforceStrictMode":false,"dynamicImport":true}},{"key":"transform-runtime","visitor":{"MemberExpression":{"enter":[null]},"ObjectPattern":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":{},"_verified":{},"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]}},"options":{"version":"7.16.5","helpers":true,"useESModules":false,"corejs":false}},{"key":"proposal-class-properties","visitor":{"PrivateName":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{"loose":true}},{"key":"base$0$3","visitor":{"FunctionExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$4","visitor":{"ForInStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-react-jsx","visitor":{"_exploded":{},"_verified":{},"JSXNamespacedName":{"enter":[null]},"JSXSpreadChild":{"enter":[null]},"Program":{"enter":[null]},"JSXElement":{"exit":[null]},"JSXFragment":{"exit":[null]},"JSXAttribute":{"enter":[null]}},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","runtime":"classic","throwIfNamespace":true,"useBuiltIns":false}},{"key":"transform-react-display-name","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-react-pure-annotations","visitor":{"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"syntax-nullish-coalescing-operator","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-nullish-coalescing-operator","visitor":{"_exploded":{},"_verified":{},"LogicalExpression":{"enter":[null]}},"options":{}},{"key":"syntax-optional-chaining","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-optional-chaining","visitor":{"_exploded":true,"OptionalCallExpression":{"enter":[null]},"OptionalMemberExpression":{"enter":[null]},"_verified":true},"options":{}},{"key":"syntax-optional-catch-binding","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-optional-catch-binding","visitor":{"_exploded":{},"_verified":{},"CatchClause":{"enter":[null]}},"options":{}},{"key":"syntax-class-properties","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-class-properties","visitor":{"PrivateName":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{}},{"key":"syntax-async-generators","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-async-generator-functions","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]}},"options":{}},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-object-rest-spread","visitor":{"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"proposal-logical-assignment-operators","visitor":{"_exploded":{},"_verified":{},"AssignmentExpression":{"enter":[null]}},"options":{}},{"key":"transform-arrow-functions","visitor":{"ArrowFunctionExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-block-scoped-functions","visitor":{"BlockStatement":{"enter":[null]},"SwitchCase":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-block-scoping","visitor":{"VariableDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"_exploded":true,"BlockStatement":{"enter":[null]},"SwitchStatement":{"enter":[null]},"Program":{"enter":[null]},"_verified":true,"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"transform-classes","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-computed-properties","visitor":{"ObjectExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-destructuring","visitor":{"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"VariableDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"transform-for-of","visitor":{"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-literals","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-object-super","visitor":{"ObjectExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-parameters","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{}},{"key":"transform-shorthand-properties","visitor":{"ObjectMethod":{"enter":[null]},"ObjectProperty":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-spread","visitor":{"ArrayExpression":{"enter":[null]},"CallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-sticky-regex","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-template-literals","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-typeof-symbol","visitor":{"UnaryExpression":{"enter":[null]},"_exploded":true,"_verified":true,"BlockStatement":{"enter":[null]},"CatchClause":{"enter":[null]},"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"Program":{"enter":[null]},"ObjectMethod":{"enter":[null]},"SwitchStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ForOfStatement":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"StaticBlock":{"enter":[null]},"TSModuleBlock":{"enter":[null]},"AssignmentPattern":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectPattern":{"enter":[null]}},"options":{}},{"key":"transform-unicode-regex","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-property-literals","visitor":{"ObjectProperty":{"exit":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-exponentiation-operator","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"regenerator-transform","visitor":{"_exploded":true,"_verified":true,"ObjectMethod":{"enter":[null],"exit":[null]},"ClassMethod":{"enter":[null],"exit":[null]},"ClassPrivateMethod":{"enter":[null],"exit":[null]},"FunctionDeclaration":{"exit":[null]},"FunctionExpression":{"exit":[null]},"ArrowFunctionExpression":{"exit":[null]}},"options":{}}],"presets":[],"generatorOpts":{"filename":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat/client/views/room/contextualBar/RoomMembers/InviteUsers/WrappedInviteUsers.js","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"client/views/room/contextualBar/RoomMembers/InviteUsers/WrappedInviteUsers.js"}},"code":"var _regeneratorRuntime;\n\nmodule.link(\"@babel/runtime/regenerator\", {\n  default: function (v) {\n    _regeneratorRuntime = v;\n  }\n}, 0);\n\nvar _slicedToArray;\n\nmodule.link(\"@babel/runtime/helpers/slicedToArray\", {\n  default: function (v) {\n    _slicedToArray = v;\n  }\n}, 1);\nvar useMutableCallback;\nmodule.link(\"@rocket.chat/fuselage-hooks\", {\n  useMutableCallback: function (v) {\n    useMutableCallback = v;\n  }\n}, 0);\nvar React, useState, useEffect;\nmodule.link(\"react\", {\n  \"default\": function (v) {\n    React = v;\n  },\n  useState: function (v) {\n    useState = v;\n  },\n  useEffect: function (v) {\n    useEffect = v;\n  }\n}, 1);\nvar useEndpoint;\nmodule.link(\"../../../../../contexts/ServerContext\", {\n  useEndpoint: function (v) {\n    useEndpoint = v;\n  }\n}, 2);\nvar useTranslation;\nmodule.link(\"../../../../../contexts/TranslationContext\", {\n  useTranslation: function (v) {\n    useTranslation = v;\n  }\n}, 3);\nvar useFormatDateAndTime;\nmodule.link(\"../../../../../hooks/useFormatDateAndTime\", {\n  useFormatDateAndTime: function (v) {\n    useFormatDateAndTime = v;\n  }\n}, 4);\nvar useTabBarClose;\nmodule.link(\"../../../providers/ToolboxProvider\", {\n  useTabBarClose: function (v) {\n    useTabBarClose = v;\n  }\n}, 5);\nvar EditInvite;\nmodule.link(\"../EditInvite\", {\n  \"default\": function (v) {\n    EditInvite = v;\n  }\n}, 6);\nvar InviteUsers;\nmodule.link(\"./InviteUsers\", {\n  \"default\": function (v) {\n    InviteUsers = v;\n  }\n}, 7);\n\nvar WrappedInviteUsers = function (_ref) {\n  var rid = _ref.rid,\n      tabBar = _ref.tabBar,\n      onClickBack = _ref.onClickBack;\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      editing = _useState2[0],\n      setEditing = _useState2[1];\n\n  var format = useFormatDateAndTime();\n  var t = useTranslation();\n  var onClickClose = useTabBarClose();\n  var handleEdit = useMutableCallback(function () {\n    return setEditing(true);\n  });\n  var onClickBackEditing = useMutableCallback(function () {\n    return setEditing(false);\n  });\n  var findOrCreateInvite = useEndpoint('POST', 'findOrCreateInvite');\n\n  var _useState3 = useState({}),\n      _useState4 = _slicedToArray(_useState3, 2),\n      _useState4$ = _useState4[0],\n      _useState4$$days = _useState4$.days,\n      days = _useState4$$days === void 0 ? 1 : _useState4$$days,\n      _useState4$$maxUses = _useState4$.maxUses,\n      maxUses = _useState4$$maxUses === void 0 ? 0 : _useState4$$maxUses,\n      setDayAndMaxUses = _useState4[1];\n\n  var setParams = useMutableCallback(function (args) {\n    setDayAndMaxUses(args);\n    setEditing(false);\n  });\n\n  var _useState5 = useState(),\n      _useState6 = _slicedToArray(_useState5, 2),\n      state = _useState6[0],\n      setState = _useState6[1];\n\n  var linkExpirationText = useMutableCallback(function (data) {\n    if (!data) {\n      return '';\n    }\n\n    if (data.expires) {\n      var expiration = new Date(data.expires);\n\n      if (data.maxUses) {\n        var usesLeft = data.maxUses - data.uses;\n        return t('Your_invite_link_will_expire_on__date__or_after__usesLeft__uses', {\n          date: format(expiration),\n          usesLeft: usesLeft\n        });\n      }\n\n      return t('Your_invite_link_will_expire_on__date__', {\n        date: format(expiration)\n      });\n    }\n\n    if (data.maxUses) {\n      var _usesLeft = data.maxUses - data.uses;\n\n      return t('Your_invite_link_will_expire_after__usesLeft__uses', {\n        usesLeft: _usesLeft\n      });\n    }\n\n    return t('Your_invite_link_will_never_expire');\n  });\n  useEffect(function () {\n    if (editing) {\n      return;\n    }\n\n    (function () {\n      function _callee() {\n        var data;\n        return _regeneratorRuntime.async(function () {\n          function _callee$(_context) {\n            while (1) {\n              switch (_context.prev = _context.next) {\n                case 0:\n                  _context.prev = 0;\n                  _context.next = 3;\n                  return _regeneratorRuntime.awrap(findOrCreateInvite({\n                    rid: rid,\n                    days: days,\n                    maxUses: maxUses\n                  }));\n\n                case 3:\n                  data = _context.sent;\n                  setState({\n                    url: data.url,\n                    caption: linkExpirationText(data)\n                  });\n                  _context.next = 10;\n                  break;\n\n                case 7:\n                  _context.prev = 7;\n                  _context.t0 = _context[\"catch\"](0);\n                  setState({\n                    error: _context.t0\n                  });\n\n                case 10:\n                case \"end\":\n                  return _context.stop();\n              }\n            }\n          }\n\n          return _callee$;\n        }(), null, null, [[0, 7]], Promise);\n      }\n\n      return _callee;\n    })()();\n  }, [findOrCreateInvite, editing, linkExpirationText, rid, days, maxUses]);\n\n  if (editing) {\n    return /*#__PURE__*/React.createElement(EditInvite, {\n      onClickBack: onClickBackEditing,\n      linkText: state === null || state === void 0 ? void 0 : state.url,\n      captionText: state === null || state === void 0 ? void 0 : state.caption,\n      rid: rid,\n      tabBar: tabBar,\n      error: state === null || state === void 0 ? void 0 : state.error,\n      setParams: setParams,\n      days: days,\n      maxUses: maxUses\n    });\n  }\n\n  return /*#__PURE__*/React.createElement(InviteUsers, {\n    error: state === null || state === void 0 ? void 0 : state.error,\n    onClickClose: onClickClose,\n    onClickBack: onClickBack,\n    onClickEdit: handleEdit,\n    linkText: state === null || state === void 0 ? void 0 : state.url,\n    captionText: state === null || state === void 0 ? void 0 : state.caption\n  });\n};\n\nmodule.exportDefault(WrappedInviteUsers);","map":{"version":3,"sources":["client/views/room/contextualBar/RoomMembers/InviteUsers/WrappedInviteUsers.js"],"names":["_regeneratorRuntime","module","link","default","v","_slicedToArray","useMutableCallback","React","useState","useEffect","useEndpoint","useTranslation","useFormatDateAndTime","useTabBarClose","EditInvite","InviteUsers","WrappedInviteUsers","rid","tabBar","onClickBack","editing","setEditing","format","t","onClickClose","handleEdit","onClickBackEditing","findOrCreateInvite","days","maxUses","setDayAndMaxUses","setParams","args","state","setState","linkExpirationText","data","expires","expiration","Date","usesLeft","uses","date","url","caption","error","exportDefault"],"mappings":"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","sourcesContent":["import { useMutableCallback } from '@rocket.chat/fuselage-hooks';\nimport React, { useState, useEffect } from 'react';\n\nimport { useEndpoint } from '../../../../../contexts/ServerContext';\nimport { useTranslation } from '../../../../../contexts/TranslationContext';\nimport { useFormatDateAndTime } from '../../../../../hooks/useFormatDateAndTime';\nimport { useTabBarClose } from '../../../providers/ToolboxProvider';\nimport EditInvite from '../EditInvite';\nimport InviteUsers from './InviteUsers';\n\nconst WrappedInviteUsers = ({ rid, tabBar, onClickBack }) => {\n\tconst [editing, setEditing] = useState(false);\n\tconst format = useFormatDateAndTime();\n\tconst t = useTranslation();\n\n\tconst onClickClose = useTabBarClose();\n\n\tconst handleEdit = useMutableCallback(() => setEditing(true));\n\tconst onClickBackEditing = useMutableCallback(() => setEditing(false));\n\n\tconst findOrCreateInvite = useEndpoint('POST', 'findOrCreateInvite');\n\n\tconst [{ days = 1, maxUses = 0 }, setDayAndMaxUses] = useState({});\n\n\tconst setParams = useMutableCallback((args) => {\n\t\tsetDayAndMaxUses(args);\n\t\tsetEditing(false);\n\t});\n\n\tconst [state, setState] = useState();\n\n\tconst linkExpirationText = useMutableCallback((data) => {\n\t\tif (!data) {\n\t\t\treturn '';\n\t\t}\n\n\t\tif (data.expires) {\n\t\t\tconst expiration = new Date(data.expires);\n\t\t\tif (data.maxUses) {\n\t\t\t\tconst usesLeft = data.maxUses - data.uses;\n\t\t\t\treturn t('Your_invite_link_will_expire_on__date__or_after__usesLeft__uses', {\n\t\t\t\t\tdate: format(expiration),\n\t\t\t\t\tusesLeft,\n\t\t\t\t});\n\t\t\t}\n\n\t\t\treturn t('Your_invite_link_will_expire_on__date__', { date: format(expiration) });\n\t\t}\n\n\t\tif (data.maxUses) {\n\t\t\tconst usesLeft = data.maxUses - data.uses;\n\t\t\treturn t('Your_invite_link_will_expire_after__usesLeft__uses', { usesLeft });\n\t\t}\n\n\t\treturn t('Your_invite_link_will_never_expire');\n\t});\n\n\tuseEffect(() => {\n\t\tif (editing) {\n\t\t\treturn;\n\t\t}\n\t\t(async () => {\n\t\t\ttry {\n\t\t\t\tconst data = await findOrCreateInvite({ rid, days, maxUses });\n\t\t\t\tsetState({\n\t\t\t\t\turl: data.url,\n\t\t\t\t\tcaption: linkExpirationText(data),\n\t\t\t\t});\n\t\t\t} catch (error) {\n\t\t\t\tsetState({ error });\n\t\t\t}\n\t\t})();\n\t}, [findOrCreateInvite, editing, linkExpirationText, rid, days, maxUses]);\n\n\tif (editing) {\n\t\treturn (\n\t\t\t<EditInvite\n\t\t\t\tonClickBack={onClickBackEditing}\n\t\t\t\tlinkText={state?.url}\n\t\t\t\tcaptionText={state?.caption}\n\t\t\t\t{...{ rid, tabBar, error: state?.error, setParams, days, maxUses }}\n\t\t\t/>\n\t\t);\n\t}\n\n\treturn (\n\t\t<InviteUsers\n\t\t\terror={state?.error}\n\t\t\tonClickClose={onClickClose}\n\t\t\tonClickBack={onClickBack}\n\t\t\tonClickEdit={handleEdit}\n\t\t\tlinkText={state?.url}\n\t\t\tcaptionText={state?.caption}\n\t\t/>\n\t);\n};\n\nexport default WrappedInviteUsers;\n"]},"sourceType":"module","hash":"506eb3c9fb5aad0ec4b5072e94f1d792ae900d3f"}
