{"metadata":{},"options":{"assumptions":{},"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat/ee/client/audit/AuditPage.js","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","classProperties","classPrivateProperties","jsx","nullishCoalescingOperator","nullishCoalescingOperator","optionalChaining","optionalCatchBinding","optionalCatchBinding","classProperties","classPrivateProperties","classPrivateMethods","classProperties","classPrivateProperties","asyncGenerators","asyncGenerators","objectRestSpread","logicalAssignment"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"allowUndeclaredExports":true,"strictMode":false},"caller":{"name":"meteor","arch":"web.browser.legacy"},"sourceFileName":"ee/client/audit/AuditPage.js","filename":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat/ee/client/audit/AuditPage.js","targets":{"android":"95.0.0","chrome":"95.0.0","edge":"95.0.0","firefox":"78.0.0","ie":"10.0.0","ios":"15.0.0","opera":"81.0.0","safari":"15.1.0","samsung":"14.0.0"},"cloneInputAst":true,"browserslistConfigFile":false,"passPerPreset":false,"envName":"development","cwd":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat","root":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat","rootMode":"root","plugins":[{"key":"base$0","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0","visitor":{"Program":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true},"options":{"avoidModernSyntax":true,"enforceStrictMode":false,"dynamicImport":true}},{"key":"transform-runtime","visitor":{"MemberExpression":{"enter":[null]},"ObjectPattern":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":{},"_verified":{},"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]}},"options":{"version":"7.16.5","helpers":true,"useESModules":false,"corejs":false}},{"key":"proposal-class-properties","visitor":{"PrivateName":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{"loose":true}},{"key":"base$0$3","visitor":{"FunctionExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$4","visitor":{"ForInStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-react-jsx","visitor":{"_exploded":{},"_verified":{},"JSXNamespacedName":{"enter":[null]},"JSXSpreadChild":{"enter":[null]},"Program":{"enter":[null]},"JSXElement":{"exit":[null]},"JSXFragment":{"exit":[null]},"JSXAttribute":{"enter":[null]}},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","runtime":"classic","throwIfNamespace":true,"useBuiltIns":false}},{"key":"transform-react-display-name","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-react-pure-annotations","visitor":{"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"syntax-nullish-coalescing-operator","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-nullish-coalescing-operator","visitor":{"_exploded":{},"_verified":{},"LogicalExpression":{"enter":[null]}},"options":{}},{"key":"syntax-optional-chaining","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-optional-chaining","visitor":{"_exploded":true,"OptionalCallExpression":{"enter":[null]},"OptionalMemberExpression":{"enter":[null]},"_verified":true},"options":{}},{"key":"syntax-optional-catch-binding","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-optional-catch-binding","visitor":{"_exploded":{},"_verified":{},"CatchClause":{"enter":[null]}},"options":{}},{"key":"syntax-class-properties","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-class-properties","visitor":{"PrivateName":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{}},{"key":"syntax-async-generators","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-async-generator-functions","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]}},"options":{}},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-object-rest-spread","visitor":{"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"proposal-logical-assignment-operators","visitor":{"_exploded":{},"_verified":{},"AssignmentExpression":{"enter":[null]}},"options":{}},{"key":"transform-arrow-functions","visitor":{"ArrowFunctionExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-block-scoped-functions","visitor":{"BlockStatement":{"enter":[null]},"SwitchCase":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-block-scoping","visitor":{"VariableDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"_exploded":true,"BlockStatement":{"enter":[null]},"SwitchStatement":{"enter":[null]},"Program":{"enter":[null]},"_verified":true,"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"transform-classes","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-computed-properties","visitor":{"ObjectExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-destructuring","visitor":{"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"VariableDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"transform-for-of","visitor":{"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-literals","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-object-super","visitor":{"ObjectExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-parameters","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{}},{"key":"transform-shorthand-properties","visitor":{"ObjectMethod":{"enter":[null]},"ObjectProperty":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-spread","visitor":{"ArrayExpression":{"enter":[null]},"CallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-sticky-regex","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-template-literals","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-typeof-symbol","visitor":{"UnaryExpression":{"enter":[null]},"_exploded":true,"_verified":true,"BlockStatement":{"enter":[null]},"CatchClause":{"enter":[null]},"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"Program":{"enter":[null]},"ObjectMethod":{"enter":[null]},"SwitchStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ForOfStatement":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"StaticBlock":{"enter":[null]},"TSModuleBlock":{"enter":[null]},"AssignmentPattern":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectPattern":{"enter":[null]}},"options":{}},{"key":"transform-unicode-regex","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-property-literals","visitor":{"ObjectProperty":{"exit":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-exponentiation-operator","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"regenerator-transform","visitor":{"_exploded":true,"_verified":true,"ObjectMethod":{"enter":[null],"exit":[null]},"ClassMethod":{"enter":[null],"exit":[null]},"ClassPrivateMethod":{"enter":[null],"exit":[null]},"FunctionDeclaration":{"exit":[null]},"FunctionExpression":{"exit":[null]},"ArrowFunctionExpression":{"exit":[null]}},"options":{}}],"presets":[],"generatorOpts":{"filename":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat/ee/client/audit/AuditPage.js","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"ee/client/audit/AuditPage.js"}},"code":"var _toConsumableArray;\n\nmodule.link(\"@babel/runtime/helpers/toConsumableArray\", {\n  default: function (v) {\n    _toConsumableArray = v;\n  }\n}, 0);\n\nvar _slicedToArray;\n\nmodule.link(\"@babel/runtime/helpers/slicedToArray\", {\n  default: function (v) {\n    _slicedToArray = v;\n  }\n}, 1);\nvar useMutableCallback;\nmodule.link(\"@rocket.chat/fuselage-hooks\", {\n  useMutableCallback: function (v) {\n    useMutableCallback = v;\n  }\n}, 0);\nvar React, useRef, useState;\nmodule.link(\"react\", {\n  \"default\": function (v) {\n    React = v;\n  },\n  useRef: function (v) {\n    useRef = v;\n  },\n  useState: function (v) {\n    useState = v;\n  }\n}, 1);\nvar useTranslation;\nmodule.link(\"../../../client/contexts/TranslationContext\", {\n  useTranslation: function (v) {\n    useTranslation = v;\n  }\n}, 2);\nvar useForm;\nmodule.link(\"../../../client/hooks/useForm\", {\n  useForm: function (v) {\n    useForm = v;\n  }\n}, 3);\nvar AuditPageBase;\nmodule.link(\"./AuditPageBase\", {\n  AuditPageBase: function (v) {\n    AuditPageBase = v;\n  }\n}, 4);\nvar initialValues = {\n  msg: '',\n  type: '',\n  dateRange: {\n    start: '',\n    end: ''\n  },\n  visitor: '',\n  agent: 'all',\n  rid: '',\n  users: []\n};\n\nvar AuditPage = function () {\n  var t = useTranslation();\n\n  var _useForm = useForm(initialValues),\n      values = _useForm.values,\n      handlers = _useForm.handlers;\n\n  var setData = useRef(function () {});\n\n  var _useState = useState({}),\n      _useState2 = _slicedToArray(_useState, 2),\n      errors = _useState2[0],\n      setErrors = _useState2[1];\n\n  var msg = values.msg,\n      type = values.type,\n      _values$dateRange = values.dateRange,\n      startDate = _values$dateRange.start,\n      endDate = _values$dateRange.end,\n      visitor = values.visitor,\n      agent = values.agent,\n      users = values.users,\n      rid = values.rid;\n  var handleMsg = handlers.handleMsg,\n      handleType = handlers.handleType,\n      handleVisitor = handlers.handleVisitor,\n      handleAgent = handlers.handleAgent,\n      handleUsers = handlers.handleUsers,\n      handleRid = handlers.handleRid,\n      handleDateRange = handlers.handleDateRange;\n  var onChangeUsers = useMutableCallback(function (value, action) {\n    if (!action) {\n      if (users.includes(value)) {\n        return;\n      }\n\n      return handleUsers([].concat(_toConsumableArray(users), [value]));\n    }\n\n    handleUsers(users.filter(function (current) {\n      return current !== value;\n    }));\n  });\n  var apply = useMutableCallback(function (eventStats) {\n    if (!rid && type === '') {\n      return setErrors({\n        rid: t('The_field_is_required', t('Channel_name'))\n      });\n    }\n\n    if (users.length < 2 && type === 'd') {\n      return setErrors({\n        users: t('Select_at_least_two_users')\n      });\n    }\n\n    if (type === 'l') {\n      var _errors = {};\n\n      if (agent === '') {\n        _errors.agent = t('The_field_is_required', t('Agent'));\n      }\n\n      if (visitor === '') {\n        _errors.visitor = t('The_field_is_required', t('Visitor'));\n      }\n\n      if (_errors.visitor || _errors.agent) {\n        return setErrors(_errors);\n      }\n    }\n\n    setErrors({});\n    eventStats();\n    setData.current({\n      msg: msg,\n      type: type,\n      startDate: new Date(startDate),\n      endDate: new Date(endDate + \"T23:59:00\"),\n      visitor: visitor,\n      agent: agent,\n      users: users,\n      rid: rid\n    });\n  });\n  return /*#__PURE__*/React.createElement(AuditPageBase, {\n    type: type,\n    handleType: handleType,\n    msg: msg,\n    handleMsg: handleMsg,\n    handleDateRange: handleDateRange,\n    errors: errors,\n    rid: rid,\n    handleRid: handleRid,\n    users: users,\n    handleUsers: handleUsers,\n    onChangeUsers: onChangeUsers,\n    visitor: visitor,\n    handleVisitor: handleVisitor,\n    agent: agent,\n    handleAgent: handleAgent,\n    apply: apply,\n    setData: setData\n  });\n};\n\nmodule.exportDefault(AuditPage);","map":{"version":3,"sources":["ee/client/audit/AuditPage.js"],"names":["_toConsumableArray","module","link","default","v","_slicedToArray","useMutableCallback","React","useRef","useState","useTranslation","useForm","AuditPageBase","initialValues","msg","type","dateRange","start","end","visitor","agent","rid","users","AuditPage","t","values","handlers","setData","errors","setErrors","startDate","endDate","handleMsg","handleType","handleVisitor","handleAgent","handleUsers","handleRid","handleDateRange","onChangeUsers","value","action","includes","filter","current","apply","eventStats","length","Date","exportDefault"],"mappings":"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","sourcesContent":["import { useMutableCallback } from '@rocket.chat/fuselage-hooks';\nimport React, { useRef, useState } from 'react';\n\nimport { useTranslation } from '../../../client/contexts/TranslationContext';\nimport { useForm } from '../../../client/hooks/useForm';\nimport { AuditPageBase } from './AuditPageBase';\n\nconst initialValues = {\n\tmsg: '',\n\ttype: '',\n\tdateRange: {\n\t\tstart: '',\n\t\tend: '',\n\t},\n\tvisitor: '',\n\tagent: 'all',\n\trid: '',\n\tusers: [],\n};\n\nconst AuditPage = () => {\n\tconst t = useTranslation();\n\n\tconst { values, handlers } = useForm(initialValues);\n\tconst setData = useRef(() => {});\n\n\tconst [errors, setErrors] = useState({});\n\n\tconst {\n\t\tmsg,\n\t\ttype,\n\t\tdateRange: { start: startDate, end: endDate },\n\t\tvisitor,\n\t\tagent,\n\t\tusers,\n\t\trid,\n\t} = values;\n\n\tconst { handleMsg, handleType, handleVisitor, handleAgent, handleUsers, handleRid, handleDateRange } = handlers;\n\n\tconst onChangeUsers = useMutableCallback((value, action) => {\n\t\tif (!action) {\n\t\t\tif (users.includes(value)) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\treturn handleUsers([...users, value]);\n\t\t}\n\t\thandleUsers(users.filter((current) => current !== value));\n\t});\n\n\tconst apply = useMutableCallback((eventStats) => {\n\t\tif (!rid && type === '') {\n\t\t\treturn setErrors({\n\t\t\t\trid: t('The_field_is_required', t('Channel_name')),\n\t\t\t});\n\t\t}\n\n\t\tif (users.length < 2 && type === 'd') {\n\t\t\treturn setErrors({\n\t\t\t\tusers: t('Select_at_least_two_users'),\n\t\t\t});\n\t\t}\n\n\t\tif (type === 'l') {\n\t\t\tconst errors = {};\n\n\t\t\tif (agent === '') {\n\t\t\t\terrors.agent = t('The_field_is_required', t('Agent'));\n\t\t\t}\n\n\t\t\tif (visitor === '') {\n\t\t\t\terrors.visitor = t('The_field_is_required', t('Visitor'));\n\t\t\t}\n\n\t\t\tif (errors.visitor || errors.agent) {\n\t\t\t\treturn setErrors(errors);\n\t\t\t}\n\t\t}\n\n\t\tsetErrors({});\n\t\teventStats();\n\t\tsetData.current({\n\t\t\tmsg,\n\t\t\ttype,\n\t\t\tstartDate: new Date(startDate),\n\t\t\tendDate: new Date(`${endDate}T23:59:00`),\n\t\t\tvisitor,\n\t\t\tagent,\n\t\t\tusers,\n\t\t\trid,\n\t\t});\n\t});\n\n\treturn (\n\t\t<AuditPageBase\n\t\t\ttype={type}\n\t\t\thandleType={handleType}\n\t\t\tmsg={msg}\n\t\t\thandleMsg={handleMsg}\n\t\t\thandleDateRange={handleDateRange}\n\t\t\terrors={errors}\n\t\t\trid={rid}\n\t\t\thandleRid={handleRid}\n\t\t\tusers={users}\n\t\t\thandleUsers={handleUsers}\n\t\t\tonChangeUsers={onChangeUsers}\n\t\t\tvisitor={visitor}\n\t\t\thandleVisitor={handleVisitor}\n\t\t\tagent={agent}\n\t\t\thandleAgent={handleAgent}\n\t\t\tapply={apply}\n\t\t\tsetData={setData}\n\t\t/>\n\t);\n};\n\nexport default AuditPage;\n"]},"sourceType":"module","hash":"c8bc59a004804cccaed52aec102b94e9f041ad31"}
