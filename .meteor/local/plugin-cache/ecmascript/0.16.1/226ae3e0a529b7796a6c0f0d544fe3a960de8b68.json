{"metadata":{},"options":{"assumptions":{},"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat/app/emoji/client/emojiPicker.js","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","classProperties","classPrivateProperties","jsx","nullishCoalescingOperator","nullishCoalescingOperator","optionalChaining","optionalCatchBinding","optionalCatchBinding","classProperties","classPrivateProperties","classPrivateMethods","classProperties","classPrivateProperties","asyncGenerators","asyncGenerators","objectRestSpread","logicalAssignment"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"allowUndeclaredExports":true,"strictMode":false},"caller":{"name":"meteor","arch":"web.browser.legacy"},"sourceFileName":"app/emoji/client/emojiPicker.js","filename":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat/app/emoji/client/emojiPicker.js","targets":{"android":"95.0.0","chrome":"95.0.0","edge":"95.0.0","firefox":"78.0.0","ie":"10.0.0","ios":"15.0.0","opera":"81.0.0","safari":"15.1.0","samsung":"14.0.0"},"cloneInputAst":true,"browserslistConfigFile":false,"passPerPreset":false,"envName":"development","cwd":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat","root":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat","rootMode":"root","plugins":[{"key":"base$0","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0","visitor":{"Program":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true},"options":{"avoidModernSyntax":true,"enforceStrictMode":false,"dynamicImport":true}},{"key":"transform-runtime","visitor":{"MemberExpression":{"enter":[null]},"ObjectPattern":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":{},"_verified":{},"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]}},"options":{"version":"7.16.5","helpers":true,"useESModules":false,"corejs":false}},{"key":"proposal-class-properties","visitor":{"PrivateName":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{"loose":true}},{"key":"base$0$3","visitor":{"FunctionExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$4","visitor":{"ForInStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-react-jsx","visitor":{"_exploded":{},"_verified":{},"JSXNamespacedName":{"enter":[null]},"JSXSpreadChild":{"enter":[null]},"Program":{"enter":[null]},"JSXElement":{"exit":[null]},"JSXFragment":{"exit":[null]},"JSXAttribute":{"enter":[null]}},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","runtime":"classic","throwIfNamespace":true,"useBuiltIns":false}},{"key":"transform-react-display-name","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-react-pure-annotations","visitor":{"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"syntax-nullish-coalescing-operator","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-nullish-coalescing-operator","visitor":{"_exploded":{},"_verified":{},"LogicalExpression":{"enter":[null]}},"options":{}},{"key":"syntax-optional-chaining","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-optional-chaining","visitor":{"_exploded":true,"OptionalCallExpression":{"enter":[null]},"OptionalMemberExpression":{"enter":[null]},"_verified":true},"options":{}},{"key":"syntax-optional-catch-binding","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-optional-catch-binding","visitor":{"_exploded":{},"_verified":{},"CatchClause":{"enter":[null]}},"options":{}},{"key":"syntax-class-properties","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-class-properties","visitor":{"PrivateName":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{}},{"key":"syntax-async-generators","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-async-generator-functions","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]}},"options":{}},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-object-rest-spread","visitor":{"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"proposal-logical-assignment-operators","visitor":{"_exploded":{},"_verified":{},"AssignmentExpression":{"enter":[null]}},"options":{}},{"key":"transform-arrow-functions","visitor":{"ArrowFunctionExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-block-scoped-functions","visitor":{"BlockStatement":{"enter":[null]},"SwitchCase":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-block-scoping","visitor":{"VariableDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"_exploded":true,"BlockStatement":{"enter":[null]},"SwitchStatement":{"enter":[null]},"Program":{"enter":[null]},"_verified":true,"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"transform-classes","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-computed-properties","visitor":{"ObjectExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-destructuring","visitor":{"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"VariableDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"transform-for-of","visitor":{"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-literals","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-object-super","visitor":{"ObjectExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-parameters","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{}},{"key":"transform-shorthand-properties","visitor":{"ObjectMethod":{"enter":[null]},"ObjectProperty":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-spread","visitor":{"ArrayExpression":{"enter":[null]},"CallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-sticky-regex","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-template-literals","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-typeof-symbol","visitor":{"UnaryExpression":{"enter":[null]},"_exploded":true,"_verified":true,"BlockStatement":{"enter":[null]},"CatchClause":{"enter":[null]},"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"Program":{"enter":[null]},"ObjectMethod":{"enter":[null]},"SwitchStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ForOfStatement":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"StaticBlock":{"enter":[null]},"TSModuleBlock":{"enter":[null]},"AssignmentPattern":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectPattern":{"enter":[null]}},"options":{}},{"key":"transform-unicode-regex","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-property-literals","visitor":{"ObjectProperty":{"exit":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-exponentiation-operator","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"regenerator-transform","visitor":{"_exploded":true,"_verified":true,"ObjectMethod":{"enter":[null],"exit":[null]},"ClassMethod":{"enter":[null],"exit":[null]},"ClassPrivateMethod":{"enter":[null],"exit":[null]},"FunctionDeclaration":{"exit":[null]},"FunctionExpression":{"exit":[null]},"ArrowFunctionExpression":{"exit":[null]}},"options":{}}],"presets":[],"generatorOpts":{"filename":"/Users/carlosrodrigues/Desktop/work/rocketchat/Rocket.Chat/app/emoji/client/emojiPicker.js","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"app/emoji/client/emojiPicker.js"}},"code":"var _toConsumableArray;\n\nmodule.link(\"@babel/runtime/helpers/toConsumableArray\", {\n  default: function (v) {\n    _toConsumableArray = v;\n  }\n}, 0);\nmodule.export({\n  updateRecentEmoji: function () {\n    return updateRecentEmoji;\n  }\n});\n\nvar _;\n\nmodule.link(\"underscore\", {\n  \"default\": function (v) {\n    _ = v;\n  }\n}, 0);\nvar ReactiveVar;\nmodule.link(\"meteor/reactive-var\", {\n  ReactiveVar: function (v) {\n    ReactiveVar = v;\n  }\n}, 1);\nvar ReactiveDict;\nmodule.link(\"meteor/reactive-dict\", {\n  ReactiveDict: function (v) {\n    ReactiveDict = v;\n  }\n}, 2);\nvar FlowRouter;\nmodule.link(\"meteor/kadira:flow-router\", {\n  FlowRouter: function (v) {\n    FlowRouter = v;\n  }\n}, 3);\nvar Template;\nmodule.link(\"meteor/templating\", {\n  Template: function (v) {\n    Template = v;\n  }\n}, 4);\nvar escapeRegExp;\nmodule.link(\"@rocket.chat/string-helpers\", {\n  escapeRegExp: function (v) {\n    escapeRegExp = v;\n  }\n}, 5);\nmodule.link(\"../../theme/client/imports/components/emojiPicker.css\");\nvar t;\nmodule.link(\"../../utils/client\", {\n  t: function (v) {\n    t = v;\n  }\n}, 6);\nvar EmojiPicker;\nmodule.link(\"./lib/EmojiPicker\", {\n  EmojiPicker: function (v) {\n    EmojiPicker = v;\n  }\n}, 7);\nvar emoji;\nmodule.link(\"../lib/rocketchat\", {\n  emoji: function (v) {\n    emoji = v;\n  }\n}, 8);\nmodule.link(\"./emojiPicker.html\");\nvar ESCAPE = 27;\nvar emojiListByCategory = new ReactiveDict('emojiList');\n\nvar getEmojiElement = function (emoji, image) {\n  return image && \"<li class=\\\"emoji-\" + emoji + \" emoji-picker-item\\\" data-emoji=\\\"\" + emoji + \"\\\" title=\\\"\" + emoji + \"\\\">\" + image + \"</li>\";\n};\n\nvar createEmojiList = function (category, actualTone) {\n  var html = Object.values(emoji.packages).map(function (emojiPackage) {\n    if (!emojiPackage.emojisByCategory || !emojiPackage.emojisByCategory[category]) {\n      return;\n    }\n\n    return emojiPackage.emojisByCategory[category].map(function (current) {\n      var tone = actualTone > 0 && emojiPackage.toneList.hasOwnProperty(current) ? \"_tone\" + actualTone : '';\n      return getEmojiElement(current, emojiPackage.renderPicker(\":\" + current + tone + \":\"));\n    }).join('');\n  }).join('') || \"<li>\" + t('No_emojis_found') + \"</li>\";\n  return html;\n};\n\nfunction updateRecentEmoji(category) {\n  emojiListByCategory.set(category, createEmojiList(category));\n}\n\nvar createPickerEmojis = function (instance) {\n  var categories = instance.categoriesList;\n  var actualTone = instance.tone;\n  categories.forEach(function (category) {\n    return emojiListByCategory.set(category.key, createEmojiList(category.key, actualTone));\n  });\n};\n\nfunction getEmojisBySearchTerm(searchTerm) {\n  var html = '<ul class=\"emoji-list\">';\n  var t = Template.instance();\n  var actualTone = t.tone;\n  EmojiPicker.currentCategory.set('');\n  var searchRegExp = new RegExp(escapeRegExp(searchTerm.replace(/:/g, '')), 'i');\n\n  for (var current in meteorBabelHelpers.sanitizeForInObject(emoji.list)) {\n    if (!emoji.list.hasOwnProperty(current)) {\n      continue;\n    }\n\n    if (searchRegExp.test(current)) {\n      var emojiObject = emoji.list[current];\n      var emojiPackage = emojiObject.emojiPackage,\n          _emojiObject$shortnam = emojiObject.shortnames,\n          shortnames = _emojiObject$shortnam === void 0 ? [] : _emojiObject$shortnam;\n      var tone = '';\n      current = current.replace(/:/g, '');\n      var alias = shortnames[0] !== undefined ? shortnames[0].replace(/:/g, '') : shortnames[0];\n\n      if (actualTone > 0 && emoji.packages[emojiPackage].toneList.hasOwnProperty(emoji)) {\n        tone = \"_tone\" + actualTone;\n      }\n\n      var emojiFound = false;\n\n      for (var key in meteorBabelHelpers.sanitizeForInObject(emoji.packages[emojiPackage].emojisByCategory)) {\n        if (emoji.packages[emojiPackage].emojisByCategory.hasOwnProperty(key)) {\n          var contents = emoji.packages[emojiPackage].emojisByCategory[key];\n          var searchValArray = alias !== undefined ? alias.replace(/:/g, '').split('_') : alias;\n\n          if (contents.indexOf(current) !== -1 || searchValArray !== undefined && searchValArray.includes(searchTerm)) {\n            emojiFound = true;\n            break;\n          }\n        }\n      }\n\n      if (emojiFound) {\n        var image = emoji.packages[emojiPackage].renderPicker(\":\" + current + tone + \":\");\n        html += getEmojiElement(current, image);\n      }\n    }\n  }\n\n  html += '</ul>';\n  return html;\n}\n\nTemplate.emojiPicker.helpers({\n  emojiCategories: function () {\n    return Template.instance().categoriesList;\n  },\n  emojiByCategory: function (category) {\n    var emojisByCategory = [];\n\n    for (var emojiPackage in meteorBabelHelpers.sanitizeForInObject(emoji.packages)) {\n      if (emoji.packages.hasOwnProperty(emojiPackage)) {\n        if (emoji.packages[emojiPackage].emojisByCategory.hasOwnProperty(category)) {\n          emojisByCategory = emojisByCategory.concat(emoji.packages[emojiPackage].emojisByCategory[category]);\n        }\n      }\n    }\n\n    return emojisByCategory;\n  },\n  searching: function () {\n    return Template.instance().currentSearchTerm.get().length > 0;\n  },\n  searchResults: function () {\n    return getEmojisBySearchTerm(Template.instance().currentSearchTerm.get());\n  },\n  emojiList: function (category) {\n    return emojiListByCategory.get(category);\n  },\n  currentTone: function () {\n    return \"tone-\" + Template.instance().tone;\n  },\n\n  /**\n   * Returns true if a given emoji category is active\n   *\n   * @param {string} category hash\n   * @return {boolean} true if active, false otherwise\n   */\n  activeCategory: function (category) {\n    return EmojiPicker.currentCategory.get() === category ? 'active' : '';\n  },\n\n  /**\n   * Returns currently active emoji category hash\n   *\n   * @return {string} category hash\n   */\n  currentCategory: function () {\n    return EmojiPicker.currentCategory.get();\n  }\n});\nTemplate.emojiPicker.events({\n  'click .emoji-picker': function (event) {\n    event.stopPropagation();\n    event.preventDefault();\n  },\n  'click .add-custom': function (event) {\n    event.stopPropagation();\n    event.preventDefault();\n    FlowRouter.go('/admin/emoji-custom');\n    EmojiPicker.close();\n  },\n  'click .category-link': function (event) {\n    event.stopPropagation();\n    event.preventDefault();\n    EmojiPicker.showCategory(event.currentTarget.hash.substr(1));\n    return false;\n  },\n  'scroll .emojis': _.throttle(function (event, instance) {\n    if (EmojiPicker.scrollingToCategory) {\n      return;\n    }\n\n    var container = instance.$(event.currentTarget);\n    var scrollTop = container.scrollTop() + 8;\n    var last = EmojiPicker.getCategoryPositions().filter(function (pos) {\n      return pos.top <= scrollTop;\n    }).pop();\n\n    if (!last) {\n      return;\n    }\n\n    var el = last.el;\n    var category = el.id.replace('emoji-list-category-', '');\n    EmojiPicker.currentCategory.set(category);\n  }, 300),\n  'click .change-tone > a': function (event, instance) {\n    event.stopPropagation();\n    event.preventDefault();\n    instance.$('.tone-selector').toggleClass('show');\n  },\n  'click .tone-selector .tone': function (event, instance) {\n    event.stopPropagation();\n    event.preventDefault();\n    var tone = parseInt(event.currentTarget.dataset.tone);\n    var newTone;\n\n    if (tone > 0) {\n      newTone = \"_tone\" + tone;\n    } else {\n      newTone = '';\n    }\n\n    for (var emojiPackage in meteorBabelHelpers.sanitizeForInObject(emoji.packages)) {\n      if (emoji.packages.hasOwnProperty(emojiPackage)) {\n        if (emoji.packages[emojiPackage].hasOwnProperty('toneList')) {\n          for (var _emoji in meteorBabelHelpers.sanitizeForInObject(emoji.packages[emojiPackage].toneList)) {\n            if (emoji.packages[emojiPackage].toneList.hasOwnProperty(_emoji)) {\n              $(\".emoji-\" + _emoji).html(emoji.packages[emojiPackage].render(\":\" + _emoji + newTone + \":\"));\n            }\n          }\n        }\n      }\n    }\n\n    EmojiPicker.setTone(tone);\n    instance.setCurrentTone(tone);\n    $('.tone-selector').toggleClass('show');\n  },\n  'click .emoji-list .emoji-picker-item': function (event, instance) {\n    event.stopPropagation();\n    var _emoji = event.currentTarget.dataset.emoji;\n    var actualTone = instance.tone;\n    var tone = '';\n\n    for (var emojiPackage in meteorBabelHelpers.sanitizeForInObject(emoji.packages)) {\n      if (emoji.packages.hasOwnProperty(emojiPackage)) {\n        if (actualTone > 0 && emoji.packages[emojiPackage].toneList.hasOwnProperty(_emoji)) {\n          tone = \"_tone\" + actualTone;\n        }\n      }\n    }\n\n    var input = $('.emoji-picker .js-emojipicker-search');\n\n    if (input) {\n      input.val('');\n    }\n\n    instance.currentSearchTerm.set('');\n    EmojiPicker.pickEmoji(_emoji + tone);\n  },\n  'keyup .js-emojipicker-search, change .js-emojipicker-search': function (event, instance) {\n    event.preventDefault();\n    event.stopPropagation();\n\n    if (event.keyCode === ESCAPE) {\n      return EmojiPicker.close();\n    }\n\n    var value = event.target.value.trim();\n    var cst = instance.currentSearchTerm;\n\n    if (value === cst.get()) {\n      return;\n    }\n\n    cst.set(value);\n  }\n});\nTemplate.emojiPicker.onCreated(function () {\n  var _this = this;\n\n  this.tone = EmojiPicker.getTone();\n  var recent = EmojiPicker.getRecent();\n  this.currentSearchTerm = new ReactiveVar('');\n  this.categoriesList = [];\n\n  for (var emojiPackage in meteorBabelHelpers.sanitizeForInObject(emoji.packages)) {\n    if (emoji.packages.hasOwnProperty(emojiPackage)) {\n      if (emoji.packages[emojiPackage].emojiCategories) {\n        if (typeof emoji.packages[emojiPackage].categoryIndex !== 'undefined') {\n          var _this$categoriesList;\n\n          (_this$categoriesList = this.categoriesList).splice.apply(_this$categoriesList, [emoji.packages[emojiPackage].categoryIndex, 0].concat(_toConsumableArray(emoji.packages[emojiPackage].emojiCategories)));\n        } else {\n          this.categoriesList = this.categoriesList.concat(emoji.packages[emojiPackage].emojiCategories);\n        }\n      }\n    }\n  }\n\n  recent.forEach(function (_emoji) {\n    emoji.packages.base.emojisByCategory.recent.push(_emoji);\n  });\n\n  this.setCurrentTone = function (newTone) {\n    $('.current-tone').removeClass(\"tone-\" + _this.tone);\n    $('.current-tone').addClass(\"tone-\" + newTone);\n    _this.tone = newTone;\n  };\n\n  createPickerEmojis(this);\n});","map":{"version":3,"sources":["app/emoji/client/emojiPicker.js"],"names":["_toConsumableArray","module","link","default","v","export","updateRecentEmoji","_","ReactiveVar","ReactiveDict","FlowRouter","Template","escapeRegExp","t","EmojiPicker","emoji","ESCAPE","emojiListByCategory","getEmojiElement","image","createEmojiList","category","actualTone","html","Object","values","packages","map","emojiPackage","emojisByCategory","current","tone","toneList","hasOwnProperty","renderPicker","join","set","createPickerEmojis","instance","categories","categoriesList","forEach","key","getEmojisBySearchTerm","searchTerm","currentCategory","searchRegExp","RegExp","replace","list","test","emojiObject","shortnames","alias","undefined","emojiFound","contents","searchValArray","split","indexOf","includes","emojiPicker","helpers","emojiCategories","emojiByCategory","concat","searching","currentSearchTerm","get","length","searchResults","emojiList","currentTone","activeCategory","events","event","stopPropagation","preventDefault","go","close","showCategory","currentTarget","hash","substr","throttle","scrollingToCategory","container","$","scrollTop","last","getCategoryPositions","filter","pos","top","pop","el","id","toggleClass","parseInt","dataset","newTone","_emoji","render","setTone","setCurrentTone","input","val","pickEmoji","keyCode","value","target","trim","cst","onCreated","getTone","recent","getRecent","categoryIndex","splice","base","push","removeClass","addClass"],"mappings":"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","sourcesContent":["import _ from 'underscore';\nimport { ReactiveVar } from 'meteor/reactive-var';\nimport { ReactiveDict } from 'meteor/reactive-dict';\nimport { FlowRouter } from 'meteor/kadira:flow-router';\nimport { Template } from 'meteor/templating';\nimport { escapeRegExp } from '@rocket.chat/string-helpers';\n\nimport '../../theme/client/imports/components/emojiPicker.css';\nimport { t } from '../../utils/client';\nimport { EmojiPicker } from './lib/EmojiPicker';\nimport { emoji } from '../lib/rocketchat';\nimport './emojiPicker.html';\n\nconst ESCAPE = 27;\n\nconst emojiListByCategory = new ReactiveDict('emojiList');\n\nconst getEmojiElement = (emoji, image) =>\n\timage && `<li class=\"emoji-${emoji} emoji-picker-item\" data-emoji=\"${emoji}\" title=\"${emoji}\">${image}</li>`;\n\nconst createEmojiList = (category, actualTone) => {\n\tconst html =\n\t\tObject.values(emoji.packages)\n\t\t\t.map((emojiPackage) => {\n\t\t\t\tif (!emojiPackage.emojisByCategory || !emojiPackage.emojisByCategory[category]) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\treturn emojiPackage.emojisByCategory[category]\n\t\t\t\t\t.map((current) => {\n\t\t\t\t\t\tconst tone = actualTone > 0 && emojiPackage.toneList.hasOwnProperty(current) ? `_tone${actualTone}` : '';\n\t\t\t\t\t\treturn getEmojiElement(current, emojiPackage.renderPicker(`:${current}${tone}:`));\n\t\t\t\t\t})\n\t\t\t\t\t.join('');\n\t\t\t})\n\t\t\t.join('') || `<li>${t('No_emojis_found')}</li>`;\n\n\treturn html;\n};\n\nexport function updateRecentEmoji(category) {\n\temojiListByCategory.set(category, createEmojiList(category));\n}\n\nconst createPickerEmojis = (instance) => {\n\tconst categories = instance.categoriesList;\n\tconst actualTone = instance.tone;\n\n\tcategories.forEach((category) => emojiListByCategory.set(category.key, createEmojiList(category.key, actualTone)));\n};\n\nfunction getEmojisBySearchTerm(searchTerm) {\n\tlet html = '<ul class=\"emoji-list\">';\n\tconst t = Template.instance();\n\tconst actualTone = t.tone;\n\n\tEmojiPicker.currentCategory.set('');\n\n\tconst searchRegExp = new RegExp(escapeRegExp(searchTerm.replace(/:/g, '')), 'i');\n\n\tfor (let current in emoji.list) {\n\t\tif (!emoji.list.hasOwnProperty(current)) {\n\t\t\tcontinue;\n\t\t}\n\n\t\tif (searchRegExp.test(current)) {\n\t\t\tconst emojiObject = emoji.list[current];\n\t\t\tconst { emojiPackage, shortnames = [] } = emojiObject;\n\t\t\tlet tone = '';\n\t\t\tcurrent = current.replace(/:/g, '');\n\t\t\tconst alias = shortnames[0] !== undefined ? shortnames[0].replace(/:/g, '') : shortnames[0];\n\n\t\t\tif (actualTone > 0 && emoji.packages[emojiPackage].toneList.hasOwnProperty(emoji)) {\n\t\t\t\ttone = `_tone${actualTone}`;\n\t\t\t}\n\n\t\t\tlet emojiFound = false;\n\n\t\t\tfor (const key in emoji.packages[emojiPackage].emojisByCategory) {\n\t\t\t\tif (emoji.packages[emojiPackage].emojisByCategory.hasOwnProperty(key)) {\n\t\t\t\t\tconst contents = emoji.packages[emojiPackage].emojisByCategory[key];\n\t\t\t\t\tconst searchValArray = alias !== undefined ? alias.replace(/:/g, '').split('_') : alias;\n\t\t\t\t\tif (contents.indexOf(current) !== -1 || (searchValArray !== undefined && searchValArray.includes(searchTerm))) {\n\t\t\t\t\t\temojiFound = true;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (emojiFound) {\n\t\t\t\tconst image = emoji.packages[emojiPackage].renderPicker(`:${current}${tone}:`);\n\t\t\t\thtml += getEmojiElement(current, image);\n\t\t\t}\n\t\t}\n\t}\n\thtml += '</ul>';\n\n\treturn html;\n}\n\nTemplate.emojiPicker.helpers({\n\temojiCategories() {\n\t\treturn Template.instance().categoriesList;\n\t},\n\temojiByCategory(category) {\n\t\tlet emojisByCategory = [];\n\t\tfor (const emojiPackage in emoji.packages) {\n\t\t\tif (emoji.packages.hasOwnProperty(emojiPackage)) {\n\t\t\t\tif (emoji.packages[emojiPackage].emojisByCategory.hasOwnProperty(category)) {\n\t\t\t\t\temojisByCategory = emojisByCategory.concat(emoji.packages[emojiPackage].emojisByCategory[category]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn emojisByCategory;\n\t},\n\tsearching() {\n\t\treturn Template.instance().currentSearchTerm.get().length > 0;\n\t},\n\tsearchResults() {\n\t\treturn getEmojisBySearchTerm(Template.instance().currentSearchTerm.get());\n\t},\n\temojiList(category) {\n\t\treturn emojiListByCategory.get(category);\n\t},\n\tcurrentTone() {\n\t\treturn `tone-${Template.instance().tone}`;\n\t},\n\t/**\n\t * Returns true if a given emoji category is active\n\t *\n\t * @param {string} category hash\n\t * @return {boolean} true if active, false otherwise\n\t */\n\tactiveCategory(category) {\n\t\treturn EmojiPicker.currentCategory.get() === category ? 'active' : '';\n\t},\n\t/**\n\t * Returns currently active emoji category hash\n\t *\n\t * @return {string} category hash\n\t */\n\tcurrentCategory() {\n\t\treturn EmojiPicker.currentCategory.get();\n\t},\n});\n\nTemplate.emojiPicker.events({\n\t'click .emoji-picker'(event) {\n\t\tevent.stopPropagation();\n\t\tevent.preventDefault();\n\t},\n\t'click .add-custom'(event) {\n\t\tevent.stopPropagation();\n\t\tevent.preventDefault();\n\t\tFlowRouter.go('/admin/emoji-custom');\n\t\tEmojiPicker.close();\n\t},\n\t'click .category-link'(event) {\n\t\tevent.stopPropagation();\n\t\tevent.preventDefault();\n\n\t\tEmojiPicker.showCategory(event.currentTarget.hash.substr(1));\n\n\t\treturn false;\n\t},\n\t'scroll .emojis': _.throttle((event, instance) => {\n\t\tif (EmojiPicker.scrollingToCategory) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst container = instance.$(event.currentTarget);\n\t\tconst scrollTop = container.scrollTop() + 8;\n\n\t\tconst last = EmojiPicker.getCategoryPositions()\n\t\t\t.filter((pos) => pos.top <= scrollTop)\n\t\t\t.pop();\n\n\t\tif (!last) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst { el } = last;\n\n\t\tconst category = el.id.replace('emoji-list-category-', '');\n\n\t\tEmojiPicker.currentCategory.set(category);\n\t}, 300),\n\t'click .change-tone > a'(event, instance) {\n\t\tevent.stopPropagation();\n\t\tevent.preventDefault();\n\n\t\tinstance.$('.tone-selector').toggleClass('show');\n\t},\n\t'click .tone-selector .tone'(event, instance) {\n\t\tevent.stopPropagation();\n\t\tevent.preventDefault();\n\n\t\tconst tone = parseInt(event.currentTarget.dataset.tone);\n\t\tlet newTone;\n\n\t\tif (tone > 0) {\n\t\t\tnewTone = `_tone${tone}`;\n\t\t} else {\n\t\t\tnewTone = '';\n\t\t}\n\n\t\tfor (const emojiPackage in emoji.packages) {\n\t\t\tif (emoji.packages.hasOwnProperty(emojiPackage)) {\n\t\t\t\tif (emoji.packages[emojiPackage].hasOwnProperty('toneList')) {\n\t\t\t\t\tfor (const _emoji in emoji.packages[emojiPackage].toneList) {\n\t\t\t\t\t\tif (emoji.packages[emojiPackage].toneList.hasOwnProperty(_emoji)) {\n\t\t\t\t\t\t\t$(`.emoji-${_emoji}`).html(emoji.packages[emojiPackage].render(`:${_emoji}${newTone}:`));\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tEmojiPicker.setTone(tone);\n\n\t\tinstance.setCurrentTone(tone);\n\n\t\t$('.tone-selector').toggleClass('show');\n\t},\n\t'click .emoji-list .emoji-picker-item'(event, instance) {\n\t\tevent.stopPropagation();\n\n\t\tconst _emoji = event.currentTarget.dataset.emoji;\n\t\tconst actualTone = instance.tone;\n\t\tlet tone = '';\n\n\t\tfor (const emojiPackage in emoji.packages) {\n\t\t\tif (emoji.packages.hasOwnProperty(emojiPackage)) {\n\t\t\t\tif (actualTone > 0 && emoji.packages[emojiPackage].toneList.hasOwnProperty(_emoji)) {\n\t\t\t\t\ttone = `_tone${actualTone}`;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tconst input = $('.emoji-picker .js-emojipicker-search');\n\t\tif (input) {\n\t\t\tinput.val('');\n\t\t}\n\t\tinstance.currentSearchTerm.set('');\n\n\t\tEmojiPicker.pickEmoji(_emoji + tone);\n\t},\n\t'keyup .js-emojipicker-search, change .js-emojipicker-search'(event, instance) {\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\n\t\tif (event.keyCode === ESCAPE) {\n\t\t\treturn EmojiPicker.close();\n\t\t}\n\n\t\tconst value = event.target.value.trim();\n\t\tconst cst = instance.currentSearchTerm;\n\t\tif (value === cst.get()) {\n\t\t\treturn;\n\t\t}\n\t\tcst.set(value);\n\t},\n});\n\nTemplate.emojiPicker.onCreated(function () {\n\tthis.tone = EmojiPicker.getTone();\n\tconst recent = EmojiPicker.getRecent();\n\n\tthis.currentSearchTerm = new ReactiveVar('');\n\n\tthis.categoriesList = [];\n\tfor (const emojiPackage in emoji.packages) {\n\t\tif (emoji.packages.hasOwnProperty(emojiPackage)) {\n\t\t\tif (emoji.packages[emojiPackage].emojiCategories) {\n\t\t\t\tif (typeof emoji.packages[emojiPackage].categoryIndex !== 'undefined') {\n\t\t\t\t\tthis.categoriesList.splice(emoji.packages[emojiPackage].categoryIndex, 0, ...emoji.packages[emojiPackage].emojiCategories);\n\t\t\t\t} else {\n\t\t\t\t\tthis.categoriesList = this.categoriesList.concat(emoji.packages[emojiPackage].emojiCategories);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\trecent.forEach((_emoji) => {\n\t\temoji.packages.base.emojisByCategory.recent.push(_emoji);\n\t});\n\n\tthis.setCurrentTone = (newTone) => {\n\t\t$('.current-tone').removeClass(`tone-${this.tone}`);\n\t\t$('.current-tone').addClass(`tone-${newTone}`);\n\t\tthis.tone = newTone;\n\t};\n\n\tcreatePickerEmojis(this);\n});\n"]},"sourceType":"module","hash":"226ae3e0a529b7796a6c0f0d544fe3a960de8b68"}
